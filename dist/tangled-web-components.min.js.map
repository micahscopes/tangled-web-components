{"version":3,"sources":["../../../../../\u0000commonjsHelpers","../node_modules/skatejs-web-components/src/fix/safari.js","../node_modules/skatejs/src/util/get-prop-names-and-symbols.js","../node_modules/skatejs/src/util/empty.js","../node_modules/skatejs/src/util/prop-context.js","../node_modules/skatejs/src/api/vdom.js","../node_modules/skatejs/src/util/create-symbol.js","../node_modules/skatejs/src/util/data.js","../node_modules/skatejs/src/util/debounce.js","../node_modules/skatejs/src/util/deprecated.js","../node_modules/skatejs/src/util/attributes-manager.js","../node_modules/skatejs/src/util/get-own-property-descriptors.js","../node_modules/skatejs/src/util/dash-case.js","../node_modules/skatejs/src/util/error.js","../node_modules/skatejs/src/util/prop-definition.js","../node_modules/skatejs/src/util/set-ctor-native-property.js","../node_modules/skatejs/src/util/get-props-map.js","../node_modules/skatejs/src/api/props.js","../node_modules/skatejs/src/util/get-default-value.js","../node_modules/skatejs/src/util/get-initial-value.js","../node_modules/skatejs/src/util/get-prop-data.js","../node_modules/skatejs/src/lifecycle/props-init.js","../node_modules/skatejs/src/api/component.js","../node_modules/skatejs/src/util/unique-id.js","../node_modules/skatejs/src/api/define.js","../src/draggable.js","../src/detachable.js","../src/graph-container.js","../node_modules/d3-selection/src/namespace.js","../node_modules/d3-selection/src/creator.js","../node_modules/d3-selection/src/selection/on.js","../node_modules/d3-selection/src/selector.js","../node_modules/d3-selection/src/selection/select.js","../node_modules/d3-selection/src/selectorAll.js","../node_modules/d3-selection/src/selection/selectAll.js","../node_modules/d3-selection/src/selection/filter.js","../node_modules/d3-selection/src/selection/sparse.js","../node_modules/d3-selection/src/selection/enter.js","../node_modules/d3-selection/src/constant.js","../node_modules/d3-selection/src/selection/data.js","../node_modules/d3-selection/src/selection/exit.js","../node_modules/d3-selection/src/selection/merge.js","../node_modules/d3-selection/src/selection/order.js","../node_modules/d3-selection/src/selection/sort.js","../node_modules/d3-selection/src/selection/call.js","../node_modules/d3-selection/src/selection/nodes.js","../node_modules/d3-selection/src/selection/node.js","../node_modules/d3-selection/src/selection/size.js","../node_modules/d3-selection/src/selection/empty.js","../node_modules/d3-selection/src/selection/each.js","../node_modules/d3-selection/src/selection/attr.js","../node_modules/d3-selection/src/window.js","../node_modules/d3-selection/src/selection/style.js","../node_modules/d3-selection/src/selection/property.js","../node_modules/d3-selection/src/selection/classed.js","../node_modules/d3-selection/src/selection/text.js","../node_modules/d3-selection/src/selection/html.js","../node_modules/d3-selection/src/selection/raise.js","../node_modules/d3-selection/src/selection/lower.js","../node_modules/d3-selection/src/selection/append.js","../node_modules/d3-selection/src/selection/insert.js","../node_modules/d3-selection/src/selection/remove.js","../node_modules/d3-selection/src/selection/datum.js","../node_modules/d3-selection/src/selection/dispatch.js","../node_modules/d3-selection/src/selection/index.js","../node_modules/d3-selection/src/selectAll.js","../node_modules/d3-shape/src/noop.js","../node_modules/d3-shape/src/curve/basis.js","../node_modules/d3-shape/src/curve/bundle.js","../node_modules/d3-shape/src/curve/cardinal.js","../node_modules/d3-shape/src/curve/cardinalClosed.js","../node_modules/d3-shape/src/curve/cardinalOpen.js","../node_modules/d3-shape/src/curve/catmullRom.js","../node_modules/d3-shape/src/curve/catmullRomClosed.js","../node_modules/d3-shape/src/curve/catmullRomOpen.js","../node_modules/d3-shape/src/curve/monotone.js","../src/nearbyRectEdges.js","../node_modules/d3-color/src/color.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/cubehelix.js","../node_modules/d3-format/src/formatDecimal.js","../node_modules/d3-format/src/formatGroup.js","../node_modules/d3-format/src/exponent.js","../node_modules/d3-format/src/formatPrefixAuto.js","../node_modules/d3-format/src/formatRounded.js","../node_modules/d3-format/src/formatTypes.js","../node_modules/d3-format/src/formatSpecifier.js","../node_modules/d3-format/src/locale.js","../node_modules/d3-format/src/defaultLocale.js","../node_modules/d3-time/src/interval.js","../node_modules/d3-time/src/second.js","../node_modules/d3-time/src/minute.js","../node_modules/d3-time/src/hour.js","../node_modules/d3-time/src/day.js","../node_modules/d3-time/src/week.js","../node_modules/d3-time/src/month.js","../node_modules/d3-time/src/utcMinute.js","../node_modules/d3-time/src/utcHour.js","../node_modules/d3-time/src/utcDay.js","../node_modules/d3-time/src/utcWeek.js","../node_modules/d3-time/src/utcMonth.js","../node_modules/d3-time/src/utcYear.js","../node_modules/d3-time/src/year.js","../node_modules/d3-time-format/src/locale.js","../node_modules/d3-time-format/src/defaultLocale.js","../node_modules/d3-time-format/src/isoFormat.js","../node_modules/d3-time-format/src/isoParse.js","../node_modules/d3-scale/src/colors.js","../node_modules/d3-scale/src/category20b.js","../node_modules/d3-scale/src/category20.js","../node_modules/d3-scale/src/cubehelix.js","../node_modules/d3-scale/src/rainbow.js","../node_modules/d3-scale/src/viridis.js","../node_modules/floyd-warshall/src/index.js","../src/edges-modifier-hops.js","../src/basket-ball.js","../node_modules/skatejs-web-components/src/native-shim.js","../../../../../\u0000babelHelpers","../node_modules/@webcomponents/custom-elements/custom-elements.min.js","../node_modules/@webcomponents/shadydom/shadydom.min.js","../node_modules/@webcomponents/shadycss/shadycss.min.js","../node_modules/skatejs/src/util/is-type.js","../node_modules/skatejs/src/util/assign.js","../node_modules/skatejs/src/util/to-null-or-string.js","../node_modules/skatejs/src/util/symbols.js","../node_modules/incremental-dom/dist/incremental-dom-cjs.js","../node_modules/window-or-global/lib/index.js","../node_modules/skatejs/src/util/native.js","../node_modules/skatejs/src/polyfills/object-is.js","../node_modules/skatejs/src/api/emit.js","../node_modules/skatejs/src/index.js","../node_modules/kefir/dist/kefir.js","../src/handle-box.js","../src/detached-box.js","../src/parentSelector.js","../node_modules/d3-selection/src/namespaces.js","../node_modules/d3-selection/src/matcher.js","../node_modules/d3-shape/src/math.js","../node_modules/d3-shape/src/symbol/triangle.js","../node_modules/js-combinatorics/combinatorics.js","../node_modules/victor/index.js","../src/drawGraph.js","../node_modules/mathjs/lib/utils/object.js","../node_modules/typed-function/typed-function.js","../node_modules/mathjs/lib/utils/NumberFormatter.js","../node_modules/mathjs/lib/utils/number.js","../node_modules/mathjs/lib/core/typed.js","../node_modules/tiny-emitter/index.js","../node_modules/mathjs/lib/utils/emitter.js","../node_modules/mathjs/lib/error/ArgumentsError.js","../node_modules/mathjs/lib/core/function/import.js","../node_modules/mathjs/lib/core/function/config.js","../node_modules/mathjs/lib/core/core.js","../node_modules/mathjs/lib/utils/bignumber/formatter.js","../node_modules/mathjs/lib/utils/string.js","../node_modules/mathjs/lib/utils/types.js","../node_modules/mathjs/lib/error/DimensionError.js","../node_modules/mathjs/lib/error/IndexError.js","../node_modules/mathjs/lib/utils/array.js","../node_modules/mathjs/lib/utils/function.js","../node_modules/mathjs/lib/utils/index.js","../node_modules/mathjs/lib/type/matrix/Matrix.js","../node_modules/mathjs/lib/type/matrix/DenseMatrix.js","../node_modules/mathjs/lib/type/matrix/SparseMatrix.js","../node_modules/mathjs/lib/utils/bignumber/nearlyEqual.js","../node_modules/mathjs/lib/function/relational/equalScalar.js","../node_modules/mathjs/lib/function/arithmetic/addScalar.js","../node_modules/mathjs/lib/type/matrix/function/matrix.js","../node_modules/mathjs/lib/utils/latex.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm01.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm04.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm10.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm13.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm14.js","../node_modules/mathjs/lib/function/arithmetic/add.js","../node_modules/mathjs/lib/type/matrix/Spa.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm03.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm07.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm12.js","../node_modules/mathjs/lib/function/relational/smaller.js","../node_modules/mathjs/lib/function/relational/larger.js","../node_modules/mathjs/lib/type/matrix/FibonacciHeap.js","../node_modules/mathjs/lib/type/matrix/ImmutableDenseMatrix.js","../node_modules/mathjs/lib/type/matrix/MatrixIndex.js","../node_modules/mathjs/lib/type/matrix/Range.js","../src/edges-all-pairs.js","../node_modules/mathjs/lib/type/matrix/function/index.js","../node_modules/mathjs/lib/type/matrix/function/sparse.js","../node_modules/mathjs/lib/type/matrix/index.js","../src/edges-adjacency-matrix.js","../node_modules/d3-array/src/bisector.js","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/math.js","../node_modules/d3-color/src/lab.js","../node_modules/d3-color/src/cubehelix.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-format/src/formatDefault.js","../node_modules/d3-time/src/millisecond.js","../node_modules/d3-time/src/duration.js","../src/puppy-dog.js"],"names":["interopDefault","ex","createCommonjsModule","fn","module","exports","fixSafari","newAttachShadow","opts","sr","oldAttachShadow","call","this","mo","observe","moOpts","HTMLElement","prototype","attachShadow","childList","subtree","MutationObserver","muts","forEach","mut","target","tagName","nextSibling","parentNode","removeChild","insertBefore","Object","defineProperty","configurable","enumerable","value","writable","getPropNamesAndSymbols","obj","arguments","length","undefined","listOfKeys","getOwnPropertyNames","isFunction","getOwnPropertySymbols","concat","empty","val","enter","object","props","saved","keys","key","exit","assign","propContext","func","result","applyEvent","elem","ename","newFunc","events","$currentEventHandlers","addEventListener","e","resolveTagName","name","$name","localName","elementOpenStart","tag","statics","overrideArgs","elementOpenEnd","node","newElementOpen","wrapIdomFunc","tnameFuncHandler","noop","wrap","_len","args","Array","_key","stackCurrentHelper","stackChren","push","elementOpen","skips","$skip","elementClose","idomSkip","ref","$ref","newAttr","_len2","_key2","$stackCurrentHelperProps","stackOpen","tname","_len3","attrs","_key3","a","stackClose","chren","pop","elemOrFn","apply","toConsumableArray","element","atype","_typeof","_len5","_key5","unshift","newElementOpenStart","newElementOpenEnd","ch","ctype","newText","isArray","sch","newElementClose","builder","_len6","tags","_key6","_len7","_key7","bind","map","_len8","_key8","createSymbol","description","Symbol","data","namespace","__SKATE_DATA","microtaskDebounce","cbFunc","scheduled","i","cbArgs","document","createElement","observer","textContent","taskDebounce","setTimeout","deprecated","oldUsage","newUsage","DEBUG","ownerName","String","console","warn","getAttrMgr","mgr","$attributesMgr","AttributesManager","getOwnPropertyDescriptors","reduce","prev","nameOrSymbol","getOwnPropertyDescriptor","dashCase","str","split","one","two","idx","dash","toLowerCase","error","message","Error","resolveAttrName","attrOption","isSymbol","toString","isString","setCtorNativeProperty","Ctor","propName","getPropsMap","hasOwnProperty","$ctorPropsMap","propsMap","PropDefinition","get","constructor","set","newProps","$renderer","isUndefined","getDefaultValue","propDef","default","getInitialValue","initial","getPropData","elemData","createNativePropertyDescriptor","prop","beforeDefineProperty","propData","attrSource","initialValue","valueFromAttrSource","hasAttribute","deserialize","getAttribute","coerce","internalValue","mustReflect","attrTarget","attrTargetIsNotSource","serializedValue","serialize","setAttrValue","newValue","useDefaultValue","oldValue","changeData","$rendererDebounced","settingPropFromAttrSource","preventDoubleCalling","_prevName","_prevOldValue","_prevNewValue","createNativePropertyDescriptors","propDefs","propDescriptors","createInitProps","propDescriptor","hasPropBeforeUpgrading","valueBeforeUpgrading","uniqueId","prefix","rand","replace","c","r","Math","random","v","define$1","customElements","root","Component","extend","define","eventsPositionDiff","prevEvent","nextEvent","touches","x","clientX","y","clientY","applyMove","currentPosition","move","startDragging","timeout","style","cursor","userSelect","drag","pos","top","left","mouseUps","Kefir","fromEvents","merge","mouseMoves","mouseDowns","onValue","preventDefault","moves","flatMap","downEvent","takeUntilBy","diff","rect","getBoundingClientRect","window","getComputedStyle","parseInt","marginLeft","marginTop","position","scan","stopDragging","offValue","detach","oldStyle","reattacher","reattach","parentGraphContainer","parentSelector","indexOf","slice","namespaces","space","local","creatorInherit","ownerDocument","uri","namespaceURI","xhtml","documentElement","createElementNS","creatorFixed","fullname","creator","filterContextListener","listener","index","group","contextListener","event","related","relatedTarget","compareDocumentPosition","event1","event0","__data__","parseTypenames","typenames","trim","t","type","onRemove","typename","on","__on","o","j","m","removeEventListener","capture","onAdd","filterEvents","d","selection_on","n","each","none","selector","querySelector","selection_select","select","groups","_groups","subgroups","subnode","subgroup","Selection","_parents","selectorAll","querySelectorAll","selection_selectAll","parents","selection_filter","match","matcher","sparse","update","selection_enter","_enter","EnterNode","parent","datum","_next","_parent","constant","bindIndex","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","keyPrefix","selection_data","size","enterGroup","updateGroup","exitGroup","previous","next","i0","i1","_exit","selection_exit","selection_merge","selection","groups0","groups1","m0","m1","min","merges","group0","group1","selection_order","selection_sort","compare","compareNode","b","ascending","sortgroups","sortgroup","sort","order","NaN","selection_call","callback","selection_nodes","nodes","selection_node","selection_size","selection_empty","selection_each","attrRemove","removeAttribute","attrRemoveNS","removeAttributeNS","attrConstant","setAttribute","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","selection_attr","getAttributeNS","defaultView","styleRemove","removeProperty","styleConstant","priority","setProperty","styleFunction","selection_style","getPropertyValue","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","string","classList","ClassList","_node","_names","classedAdd","names","list","add","classedRemove","remove","classedTrue","classedFalse","classedFunction","selection_classed","contains","textRemove","textConstant","textFunction","selection_text","htmlRemove","innerHTML","htmlConstant","htmlFunction","selection_html","raise","appendChild","selection_raise","lower","previousSibling","firstChild","selection_lower","selection_append","create","constantNull","selection_insert","before","selection_remove","selection_datum","property","dispatchEvent","params","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","selection_dispatch","selectAll","noop$1","point","that","_context","bezierCurveTo","_x0","_x1","_y0","_y1","Basis","context","Bundle","beta","_basis","_beta","_k","_x2","_y2","Cardinal","tension","CardinalClosed","CardinalOpen","x1","y1","x2","y2","_l01_a","epsilon","_l01_2a","_l12_a","_l12_2a","_l23_a","_l23_2a","CatmullRom","alpha","_alpha","CatmullRomClosed","CatmullRomOpen","sign","slope3","h0","h1","s0","s1","p","abs","slope2","h","t0","t1","x0","y0","dx","MonotoneX","MonotoneY","ReflectContext","center","R","Vec","width","height","rad","nearbyEdgePoints","r1","r2","p1","p2","phase","margin","PI","P","c1","c2","rad1","rad2","phi","clone","subtract","angle","edgePt1","pXY","edgePt2","s","l","max","ascendingComparator","g","lo","hi","mid","right","hsl","opacity","brighter","f","k","ascending$2","rgb","define$2","factory","isNaN","definition","hsl2rgb","displayable","color","format","hue","exec","rgbn","Rgb","round","reRgbaInteger","rgba","gamma","hsla","reHslaPercent","nogamma","named","exponential","rgbGamma","rgbConvert","start","colorRgb","cubehelix","Hsl","cubehelixLong","Color","coefficient","formatDecimal","grouping","hslConvert","m2","exponent","Lab","join","Hcl","cos","sin","rgb2xyz","xyz2lab","Xn","Yn","z","Zn","lab","labConvert","FormatSpecifier","specifier","t2","re","fill","align","pow","zero","atan2","comma","rad2deg","hclConvert","symbol","formatSpecifier","EB","BC_DA","ED","bl","D","precision","E","Cubehelix","suffix","formatType","maybeSuffix","linear$1","valueNegative","valuePrefix","valueSuffix","constant$3","end","formatPrefix","newFormat","prefixes","cubehelix$$","cubehelixGamma","thousands","toExponential","currency","newInterval","floori","offseti","interval","ceil","date","substring","d1","formatDefault","toPrecision","range","stop","step","test","formatPrefixAuto","count","prefixExponent","floor","setTime","formatRounded","isFinite","getUTCSeconds","durationMinute","getMinutes","hour","offset","getTimezoneOffset","durationHour","day","setDate","getDate","weekday","identity$4","setMonth","getMonth","setUTCSeconds","utcHour","setUTCMinutes","setUTCDate","durationDay","getUTCDate","charCodeAt","utcMonday","utcSunday","utcWeekday","utcMonth","setUTCHours","Infinity","setUTCMonth","padding","getUTCFullYear","every","setUTCFullYear","year","setHours","setFullYear","getFullYear","utcDate","month","locale","formatGroup","decimal","periodRe","formatRe","format$3","periodLookup","weekdayRe","weekdayLookup","shortMonthRe","locale_shortMonths","formats","Date","formatShortMonth","formatDayOfMonth","formatHour12","d0","formatDayOfYear","formatMilliseconds","formatMonthNumber","formatSeconds","formatWeekNumberSunday","formatYear","formatFullYear","formatZone","utcFormats","formatUTCShortMonth","formatUTCMonth","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCWeekNumberSunday","t0$1","formatUTCWeekdayNumber","formatUTCWeekNumberMonday","t1$1","formatUTCFullYear","formatUTCZone","formatLiteralPercent","field","parses","parseLocaleDateTime","getDay","Z","durationMinute$1","durationWeek$1","formatWeekday","locale_weekdays","getUTCDay","localDate","H","M","S","L","utcFormat","utcParse","UTC","newYear","numberRe","pad","charAt","getSeconds","formatWeekdayNumber","formatWeekNumberMonday","newDate","timeMonday","getUTCHours","parse","formatUTCMilliseconds","formatUTCMonthNumber","getUTCMonth","formatUTCMinutes","getUTCMinutes","pads","formatUTCSeconds","utcYear","w","shortWeekdayLookup","parseShortMonth","shortMonthLookup","monthLookup","timeFormat","locale_dateTime","parseLocaleTime","time","parseSpecifier","locale_time","shortDays","months","locale_shortWeekdays","defaultLocale","timeParse","formatMonth","formatIsoNative","getHours","formatIso","toISOString","locale_months","colors","locale_periods","percentRe","dateTime","requoteRe","periods","days","shortMonths","shortWeekdayRe","formatLookup","requote","monthRe","formatShortWeekday","B","parseWeekdayNumber","I","parseWeekNumberSunday","formatPeriod","U","parseWeekNumberMonday","W","parseFullYear","Y","%","A","formatUTCWeekday","parseZone","parseMonthNumber","parseDayOfMonth","parseDayOfYear","X","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseLiteralPercent","locale_date","interpolateCubehelixLong","rainbow","ts","FloydWarshall","distMatrix","blankFiller","parseYear","_initializeDistanceMatrix","direct","detour","dist","formatHour24","timeSunday","interpolateRainbow","JSON","adj","edges","edge","hopMatrix","hops","modifier","thickness","hop","segments","repeatAry","direction","updateHops","utcWeek","edgeElem","formatUTCYear","parseHops","created","edgeModifier","edgeData","puppyStyle","formatLocale$1","locale$1","attribute","attached","render","commonjsGlobal","global","self","navigator","userAgent","safari","safariVersion","safariVersions","patch","eval","iterator","asyncGenerator","AwaitValue","AsyncGenerator","gen","send","arg","Promise","resolve","reject","request","back","front","resume","then","settle","done","err","_invoke","return","asyncIterator","throw","await","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","descriptor","protoProps","staticProps","receiver","Function","desc","getPrototypeOf","getter","inherits","subClass","superClass","setPrototypeOf","__proto__","possibleConstructorReturn","ReferenceError","arr","arr2","from","Map","Set","C","F","enableFlush","u","__$CE_upgraded","forcePolyfill","has","observedAttributes","K","delete","N","takeRecords","childNodes","HTMLImports","whenReady","__$CE_observer","J","disconnect","removedNodes","addedNodes","nodeType","Node","ELEMENT_NODE","createTreeWalker","NodeFilter","SHOW_ELEMENT","G","currentNode","nextNode","__$CE_attached","DOCUMENT_NODE","DOCUMENT_FRAGMENT_NODE","host","shadowRoot","rel","import","href","assert","attributes","attributeOldValue","attributeFilter","attributeName","attributeNamespace","CustomElementRegistry","whenDefined","flush","polyfilled","_observeRoot","_addImport","nativeHTMLElement","q","Element","importNode","CustomElements","isShadyRoot","Boolean","__localName","matchesSelector","matches","copyOwnProperty","source","pd","n$","extendAll","sources","len","mixin","patchPrototype","proto","patchProto","__sourceProto","__patchProto","newSplice","removed","addedCount","getNativeProperty","descriptors","enqueue","promish","flush$1","flushList","flushCount","shift","isFlushedMaxed","flushMax","escapeReplace","escapeAttr","escapeAttrRegExp","escapeData","escapeDataRegExp","makeSet","getOuterHTML","composed","attr","voidElements","getInnerHTML","TEXT_NODE","plaintextParents","COMMENT_NODE","content","child","c$","filterMutations","mutations","targetRootNode","getRootNode","mutation","mutationInScope","filter","patchNode","settings","inUse","isNodePatched","patchImpl","canPatchNode","tree","saveChildNodes","canUnpatchNode","hasPrototypeDescriptors","unpatchNode","unpatch","__patched","pathComposer","startNode","composedPath","current","startRoot","assignedSlot","retarget","refNode","path","ancestor","lastRoot","rootIdx","refNodePath","p$","mixinComposedFlag","Base","klazz","options","__composed","fireHandlers","hs","__handlers","__immediatePropagationStopped","retargetNonBubblingEvent","__propagationStopped","Event","AT_TARGET","lastFiredRoot","i$1","optionsOrCapture","this$1","once","passive","__eventWrappers","wrapperFn","__target","__relatedTarget","EventMixin","eventPhase","BUBBLING_PHASE","stopImmediatePropagation","nonBubblingEventsToRetarget","bubble","origAddEventListener","splice","origRemoveEventListener","activateFocusEventOverrides","ev","ShadyDOM","hasNativeShadowDOM","force","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","common","cb","twiddle","createTextNode","characterData","EDIT_LEAVE","EDIT_UPDATE","EDIT_ADD","EDIT_DELETE","ArraySplice","calcEditDistances","currentStart","currentEnd","old","oldStart","oldEnd","rowCount","columnCount","distances","j$1","equals","north","west","spliceOperationsFromEditDistances","edits","northWest","reverse","calcSplices","prefixCount","suffixCount","minLength","sharedPrefix","sharedSuffix","ops","splices","oldIndex","searchLength","index1","index2","calculateSplices","currentValue","previousValue","nativeInsertBefore","nativeAppendChild","nativeRemoveChild","arrayCopyChildNodes","copy","arrayCopyChildren","firstElementChild","nextElementSibling","arrayCopy","a$","Logical","Composed","hasParentNode","saveComposedData","__dom","hasChildNodes","getChildNodes","_getChildNodes","getFirstChild","getNextSibling","getParentNode","getLastChild","lastChild","getPreviousSibling","getFirstElementChild","_getFirstElementChild","getLastElementChild","_getLastElementChild","getNextElementSibling","_getNextElementSibling","getPreviousElementSibling","_getPreviousElementSibling","recordInsertBefore","container","ref_node","_linkNode","recordRemoveChild","$parentNode","$childNodes","$firstChild","$nextSibling","getComposedChildNodes","$lastChild","$previousSibling","lastElementChild","previousElementSibling","clearChildNodes","saveParentNode","newChild","refChild","_addChild","currentParent","_removeChild","isFrag","oldParent","NormalizedEvent","inType","Distributor","anonymous","insertionPointTag","getInsertionPoints","hasInsertionPoint","_insertionPoints","isInsertionPoint","distribute","distributePool","collectPool","pool","dirtyRoots","distributeInsertionPoint","shadyRoot","p$1","_assignedSlot","parent$1","insertionPoint","prevAssignedNodes","_assignedNodes","clearAssignedSlots","needsSlotChange","anyDistributed","matchesInsertionPoint","__prevAssignedSlot","distributeNodeInto","node$1","children","setDistributedNodesOnInsertionPoint","_fireSlotChange","slot","savePrevious","slotName","_distributedNodes","d$","isFinalDestination","ShadyRoot","frag","createDocumentFragment","ShadyFragmentMixin","_init","ShadyMixin","_clean","_hasRendered","_distributor","distributionRoot","_findDistributionRoot","_elementNeedsDistribution","_skipUpdateInsertionPoints","updateInsertionPoints","compose","forceRender","i$","__insertionPoints","c$1","insertionPoints","_composeTree","_updateChildNodes","_composeNode","distributedNodes","distributedNode","s$1","n$1","getInsertionPointTag","DocumentFragment","mixinImpl","addNode","ownerRoot","ownerShadyRootForNode","__noInsertionPoint","ipAdded","_maybeAddInsertionPoint","handled","_maybeDistribute","removeNode","distributed","logicalParent","maybeDistributeParent","_removeDistributedChildren","_removeOwnerShadyRoot","_scheduleObserver","addedNode","removedNode","schedule","removeNodeFromParent","_hasCachedOwnerRoot","__ownerShadyRoot","fragContent","wrappedContent","hasContent","needsDist","_nodeNeedsDistribution","added","np","na","hostNeedsDist","ip$","_contains","dc$","assignedNodes","flatten","firstComposedNode","clearNode","maybeDistributeAttributeChange","query","halter","_queryElements","elements","_queryElement","activeElementForNode","active","activeElement","isShadyRoot$$1","activeRoot","nativeCloneNode","cloneNode","nativeImportNode","Document","nativeSetAttribute$1","nativeRemoveAttribute","ShadyCSS","setElementClass","NodeMixin","parentElement","FragmentMixin","replaceChild","deep","nc","externalNode","doc","tc","cn","text","ElementMixin","activeElementDescriptor","ActiveElementMixin","UnderActiveElementMixin","_activeElement","Mixins","Fragment","AsyncObserver","_scheduled","callbacks","getComposedInnerHTML","getComposedChildNodes$1","observeChildren","_callback","_observer","unobserveChildren","handle","patchedCount","log","head","mixinForObject","alwaysComposed","blur","focus","focusin","focusout","click","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","wheel","beforeinput","input","keydown","keyup","compositionstart","compositionupdate","compositionend","touchstart","touchend","touchmove","touchcancel","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture","dragstart","dragenter","dragleave","dragover","drop","dragend","DOMActivate","DOMFocusIn","DOMFocusOut","keypress","isTrusted","__composedPath","currentTarget","__relatedTargetComposedPath","stopPropagation","PatchedEvent","PatchedCustomEvent","PatchedMouseEvent","MouseEvent","isPatched","canUnpatch","createRootAndEnsurePatched","nativeSetAttribute","__nativeSetAttribute","classNameDescriptor","clean","parseCss","lex","cssText","RX","comments","port","OPEN_BRACE","rules","CLOSE_BRACE","parsedCssText","ss","_expandUnicodeEscapes","multipleSpaces","lastIndexOf","parsedSelector","atRule","AT_START","MEDIA_START","types","MEDIA_RULE","keyframesRule","KEYFRAMES_RULE","keyframesName","VAR_START","MIXIN_RULE","STYLE_RULE","r$","code","repeat","stringify","preserveProperties","_hasMixinRules","removeCustomProps","removeCustomPropAssignment","removeCustomPropApply","customProp","mixinProp","mixinApply","varApply","parseSettings","nativeCssVariables","shimcssproperties","nativeShadow","shimshadow","toCssText","forEachRule","rulesForStyle","__cssRules","isKeyframesSelector","rule","styleRuleCallback","keyframesRuleCallback","onlyActiveRules","skipRules","matchMedia","rx","MEDIA_MATCH","applyCss","moniker","contextNode","createScopeStyle","applyStyle$1","after","lastHeadApplyNode","applyStylePlaceHolder","placeHolder","createComment","scope","findMatchingParen","level","processVariableAndFallback","inner","fallback","setElementClassRaw","addToBitMask","bits","enqueueDocumentValidation","enqueued","validateDocument","readyState","requestAnimationFrame","ShadyCSS$1","updateStyles","CustomStyle","Reflect","construct","customStyles","CSS","supports","nativeCssApply","WebComponents","flags","VAR_ASSIGN","MIXIN_MATCH","VAR_CONSUMED","ANIMATION_MATCH","IS_VAR","BRACKETED","HOST_PREFIX","HOST_SUFFIX","SCOPE_NAME","StyleTransformer","dom","shouldRemoveScope","__styleScoped","_transformDom","_content","_element","CLASS","_newValue","elementStyles","styleRules","cssBuildType","__cssBuild","css","is","extends","ext","hostScope","_calcHostScope","_calcElementScope","isScoped","CSS_CLASS_PREFIX","_rule","_transformRule","_transformComplexSelector","transformer","transformedSelector","_transformRuleCss","COMPLEX_SELECTOR_SEP","_this","NTH","SLOTTED_START","HOST","SIMPLE_SELECTOR_SEP","info","_transformCompoundSelector","combinator","slottedIndex","SLOTTED","_transformHostSelector","_transformSimpleSelector","slotted","SLOTTED_PAREN","paren","DIR_PAREN","dir","PSEUDO_PREFIX","HOST_PAREN","SIMPLE_SELECTOR_PREFIX","typeSelector","SELECTOR_NO_MATCH","documentRule","normalizeRootSelector","_transformDocumentSelector","ROOT","SCOPE_DOC_SELECTOR","RegExp","StyleInfo","ast","placeholder","ownStylePropertyNames","elementName","typeExtension","cssBuild","overrideStyleProperties","styleProperties","scopeSelector","customStyle","__styleInfo","styleInfo","IS_IE","StyleProperties","decorateStyles","keyframes","ruleIndex","decorateRule","collectPropertiesInCssText","propertyInfo","_keyframes","properties","hasProperties","collectProperties","collectCssText","rx$$1","any","collectConsumingCssText","reify","valueForProperty","valueForProperties","propertyValue","_p","parts","lastIndex","colon","pp","applyProperties","output","applyKeyframeTransforms","keyframeTransforms","hasAnimations","transform","keyframeNamesToTransform","keyframe","propertyDataFromStyles","selectorToMatch","whenHostOrRootRule","isRoot","isHost","hostAndRootPropertiesForScope","hostProps","rootProps","transformStyles","hostSelector","rxHostSelector","hostRx","_elementKeyframeTransforms","_scopeSelector","keyframesRules","_scopeKeyframes","_keyframesRuleTransformer","keyframesNameRx","transformedKeyframesName","scopeId","_p2","applyElementScopeSelector","XSCOPE_NAME","applyElementStyle","_useCount","applyCustomStyle","templateMap","placeholderMap","ce","origDefine","clazz","StyleCache","typeMax","cache","cacheEntry","ownPropertyNames","pn","tagname","styleElement","entry","_validate","APPLY_NAME_CLEAN","INITIAL_INHERIT","MIXIN_VAR_SEP","MixinMap","_map","dependants","ApplyShim","_currentTemplate","_measureElement","_separator","_boundProduceCssProperties","matchText","propertyName","valueProperty","valueMixin","_produceCssProperties","transformRules","_this2","transformRule","__applyShimInvalid","transformCssText","_consumeCssProperties","all","mixinName","applyPos","afterApplyPos","textBeforeApply","textAfterApply","defaults$$1","_cssTextToMap","replacement","_atApplyToCssProperties","fallbacks","vars","mixinEntry","_getInitialValueForProperty","sp","out","_replaceInitialOrInherit","_this3","mixinAsProperties","mixinValues","combinedProps","oldProps","needToInvalidate","_invalidateMixinEntry","applyShim","elementNeedsScoping","SVGElement","handler","mxns","mxn","_i","_n","classes","classIdx","_scope","nativeCustomElements","delayedStart","body","styleCache","scopeCounter","nativeCss","_documentOwner","_documentOwnerStyleInfo","_generateScopeSelector","id","getStyleAst","styleAstToString","_gatherStyles","template","styles","_getCssBuild","prepareTemplate","_prepared","_styleAst","_generateStaticStyle","_style","_ownPropertyNames","shadowroot","_prepareHost","_cssBuild","applyStyle","overrideProps","CS","_documentDirty","findStyles","_revalidateApplyShim","_updateProperties","applyStyles","hasApplied","_updateNativeProperties","_applyStyleProperties","_isRootOwner","_applyToDescendants","_styleOwnerForNode","fetch","cachedScopeSelector","cachedStyle","oldScopeSelector","store","owner","ownerStyleInfo","ownerProperties","hostAndRootProps","propertyData","propertiesMatchingHost","_mixinOverrideStyles","overrides","_transformCustomStyleForDocument","_applyCustomStyleToDocument","getComputedStyleValue","classString","scopeName","classAttr","k$","_styleInfoForNode","hookFn","processHook","_customStyles","_findStyle","_applyStyle","__appliedElement","isObject","toNullOrString","connected","ctorCreateInitProps","ctorObservedAttributes","ctorProps","ctorPropsMap","renderer","rendering","rendererDebounced","updated","NodeData","nodeName","createMap","attrsArr","newAttrs","keyMap","keyMapValid","Context","notifications","nodesCreated","deleted","nodesDeleted","initData","getData","symbols","getNamespace","applyAttr","el","attrNS","applyProp","elStyle","applyAttributeTyped","updateAttribute","mutator","getNamespaceForTag","createText","createKeyMap","getKeyMap","getChild","registerChild","markCreated","markDeleted","notifyChanges","patchFactory","run","prevContext","prevRoot","prevDoc","prevCurrentNode","prevCurrentParent","patchInner","enterNode","exitNode","patchOuter","alignWithDOM","clearUnvisitedDOM","coreElementOpen","coreElementClose","coreText","currentElement","skip","ATTRIBUTES_OFFSET","argsBuilder","const_args","attrsChanged","_attr","elementVoid","elementPlaceholder","formatted","babelHelpers.typeof","commonjsHelpers","applyDefault","attributesContext","checked","className","disabled","_ref","firstChar","eventName","toUpperCase","idomElementOpen","nativeHints","native","hint","debounce","pendingValues","lastSetValues","_syncAttrValue","_clearPendingValue","changed","currAttrValue","propOptions","_nameOrSymbol","option","optVal","objectIs","_class","_class2","$created","$ctorCreateInitProps","propDefsCount","renderCallback","readyCallbacks","attrsOnCtor","$ctorObservedAttributes","attrsFromLinkedProps","item","$ctorProps","resumeAttributesUpdates","$connected","suspendAttributesUpdates","detached","propNameOrSymbol","changedExternally","onAttributeChanged","newPropVal","attributeChanged","prevProps","rendered","$rendering","$updated","rendererCallback","renderedCallback","$props","getSetProps","updatedCallback","_Base","prot","mode","possibleFn","previousProps","namesAndSymbols","TheEvent","vdom","amd","createObj","inherit","Child","Parent","find","findByPred","pred","cloneArray","fillArray","slide","cur","callSubscriber","ANY","VALUE","ERROR","Dispatcher","_items","_spies","_inLoop","_removedItems","Observable","_dispatcher","_active","_alive","_activating","_logHandlers","_spyHandlers","Stream","Property","_currentEvent","never","neverS","timeBased","AnonymousStream","wait","_wait","_intervalId","_$onTick","_onTick","_free","_onActivation","setInterval","_onDeactivation","clearInterval","_clear","later","S$1","sequentially","xs","S$2","fromPoll","S$3","emitter","obs","_emitValue","_emitError","_emitEnd","_emit","emit","emitEvent","withInterval","S$4","S$5","_fn","_unsubscribe","stream","fromCallback","callbackConsumer","called","setName","fromNodeCallback","spread","aLength","fromSubUnsub","sub","unsub","pairs","P$1","constantError","createConstructor","BaseClass","_source","_name","_$handleAny","_handleAny","createClassMethods","_handleValue","_handleError","_handleEnd","END","onAny","offAny","createStream","createProperty","toProperty","P$2","changes","S$6","fromPromise","promise","onError","_promise","getGlodalPromise","toPromise","last","fromESObservable","_observable","observable","$$observable","subscribe","complete","unsubscribe","ESObservable","takeErrors","toESObservable","collect","values","defaultErrorsCombinator","errors","latestError","Combine","_activeCount","_sources","_combinator","_aliveCount","_latestValues","_latestErrors","NOTHING","_emitAfterActivation","_endAfterActivation","_latestErrorIndex","_$handlers","_loop","combineAsArray","combineAsObject","activeObservables","passiveObservables","objectify","combine","map$1","_ofSameType","S$7","P$3","id$1","S$8","P$4","take","S$9","P$5","S$10","P$6","takeWhile","id$2","S$11","P$7","S$12","P$8","S$13","P$9","skipWhile","id$3","S$14","P$10","skipDuplicates","eq","S$15","P$11","defaultFn","seed","S$16","P$12","P$13","id$4","S$17","delay","S$18","P$14","throttle","_ref2","_ref2$leading","leading","_ref2$trailing","trailing","S$19","P$15","_ref2$immediate","immediate","S$20","P$16","mapErrors","id$5","S$21","P$17","filterErrors","id$6","S$22","P$18","ignoreValues","S$23","P$19","ignoreErrors","S$24","P$20","ignoreEnd","S$25","P$21","beforeEnd","S$26","P$22","slidingWindow","S$27","P$23","bufferWhile","_ref2$flushOnEnd","flushOnEnd","S$28","P$24","id$7","bufferWhile$1","S$29","P$25","bufferWithTimeOrCount","S$30","P$26","xformForObs","@@transducer/step","res","@@transducer/result","transduce","transducer","S$31","P$27","withHandler","S$32","P$28","Zip","_buffers","zip","observables","AbstractPool","_ref$queueLim","queueLim","_ref$concurLim","concurLim","_ref$drop","_queueLim","_concurLim","_drop","_queue","_curSources","_$handleSubAny","_handleSubAny","_$endHandlers","_currentlyAdding","Merge","_addAll","_initialised","S$33","generator","_generator","_iteration","concat$1","Pool","FlatMap","_mainEnded","_lastCurrent","_$handleMain","_handleMain","FlatMapErrors","createConstructor$1","primary","secondary","_primary","_secondary","_lastSecondary","_$handleSecondaryAny","_handleSecondaryAny","_$handlePrimaryAny","_handlePrimaryAny","createClassMethods$1","_handlePrimaryValue","_handlePrimaryError","_handlePrimaryEnd","_handleSecondaryValue","_handleSecondaryError","_handleSecondaryEnd","_removeSecondary","createStream$1","createProperty$1","filterBy","S$34","P$29","sampledBy","id2","skipUntilBy","S$35","P$30","S$36","P$31","bufferBy","S$37","P$32","bufferWhileBy","S$38","P$33","awaiting","valuesToErrors","defFn","S$39","P$34","errorsToValues","defFn$1","S$40","P$35","endOnError","S$41","P$36","dissableDeprecationWarnings","DEPRECATION_WARNINGS","msg","msg2","addSpy","removeSpy","dispatch","spies","items","cleanup","_setActive","_on","_off","onEnd","offError","offEnd","observerOrOnValue","closed","getType","sourceObs","selfName","isCurrent","offLog","handlerIndex","spy","offSpy","_x","_xs","_emitter","_callUnsubscribe","_getInitialCurrent","getInitial","ponyfill","symbolObservablePonyfill","_Symbol","require$$0$1","index$1","_interopRequireDefault","__esModule","_ponyfill","_ponyfill2","require$$0","observerOrOnNext","onComplete","subscription","_emitIfFull","hasAllValues","hasErrors","valuesCopy","errorsCopy","Observable$1","of","bimap","fnErr","fnVal","ap","obsFn","obsVal","chain","staticLand","freeze","mixin$1","mixin$2","mixin$3","mixin$4","mixin$5","_lastValue","mixin$6","mixin$7","mixin$8","_prev","mixin$9","_seed","mixin$10","END_MARKER","mixin$11","_buff","_$shiftBuff","now","getTime","mixin$12","_leading","_trailing","_trailingValue","_timeoutId","_endLater","_lastCallTime","_$trailingCall","_trailingCall","curTime","remaining","_cancelTrailing","clearTimeout","mixin$13","_immediate","_lastAttempt","_laterValue","_$later","_later","mixin$14","mixin$15","mixin$16","mixin$17","mixin$18","mixin$19","mixin$20","_max","_min","mixin$21","_flushOnEnd","_flush","mixin$22","_count","mixin$23","mixin$24","_xform","mixin$25","_handler","_isFull","id$8","_add","toObs","_addToCur","_addToQueue","_removeOldest","obss","_remove","_removeCur","_removeQueue","_subToEnd","_subscribe","onEndI","_pullQueue","_onEmpty","_isEmpty","_getSource","plug","unplug","_hadNoEvSinceDeact","sameCurr","mixin$26","_","mixin$27","mixin$28","mixin$29","_ref$flushOnEnd","mixin$30","_ref$flushOnChange","flushOnChange","_flushOnChange","mixin$31","convert","mixin$32","mixin$33","bufferWithCount","other","flatMapLatest","flatMapFirst","flatMapConcat","flatMapConcurLimit","limit","flatMapErrors","draggableHostStyle","HandleBox","DetachedBox","stopSelector","retval","animate","fps","GraphContainer","onSlotchange","svg","xlink","xml","xmlns","vendorMatches","matcher$1","classed","html","append","insert","sqrt3","sqrt","triangle","draw","moveTo","lineTo","closePath","areaStart","_line","areaEnd","lineStart","_point","lineEnd","_y","dy","custom","bundle","cardinal","_x3","_x4","_x5","_y3","_y4","_y5","x23","y23","catmullRom","_t0","Combinatorics","version","factorial","factoradic","addProperties","dst","src","hideProperty","toArray","init","lazyMap","_lazyMap","lazyFilter","power","ary","fun","sizeOf","valueOf","nth","nextIndex","smallest","ripple","new_smallest","ones","combination","nelem","RangeError","first","maxIndex","bigNextIndex","buildFirst","bigCombination","_permutation","digits","permutation","cmb","per","PC","total","permutationCombination","arraySlice","cartesianProduct","dim","baseN","base","VERSION","Victor","radian2degrees","degrees","degrees2radian","deg","fromArray","fromObject","addX","vec","addY","addScalar","scalar","addScalarX","addScalarY","subtractX","subtractY","subtractScalar","subtractScalarX","subtractScalarY","divideX","vector","divideY","divide","divideScalar","divideScalarX","divideScalarY","invertX","invertY","invert","multiplyX","multiplyY","multiply","multiplyScalar","multiplyScalarX","multiplyScalarY","normalize","norm","factor","randomize","topLeft","bottomRight","randomizeX","randomizeY","randomizeAny","unfloat","toFixed","mixX","amount","mixY","mix","copyX","copyY","dot","vec2","cross","projectOnto","coeff","horizontalAngle","horizontalAngleDeg","verticalAngle","verticalAngleDeg","angleDeg","rotate","nx","ny","rotateDeg","rotateTo","rotation","rotateToDeg","rotateBy","rotateByDeg","distanceX","absDistanceX","distanceY","absDistanceY","distance","distanceSq","lengthSq","magnitude","isZero","isEqualTo","toObject","pRad","theta","rW","rH","rectCache","rectInViewport","cacheBoundingRect","bottom","innerHeight","clientHeight","innerWidth","clientWidth","drawEdge","ctx","graph","R1","R2","pts","setLineDash","strokeStyle","fillStyle","lineWidth","markerBuffer","lineBuffer","beginPath","save","translate","stroke","restore","Number","isBigNumber","deepExtend","deepEqual","canDefineProperty","lazy","_value","_uninitialized","traverse","isFactory","object$1","typed","getTypeTest","fns","actual","signatures","_expected","getTypeOf","argCount","anyType","actualType","categories","cat","category","Param","_types","_varArgs","substr","conversions","varArgs","_params","param","SyntaxError","Signature","toCode","refs","childs","parseSignatures","ignore","signature","signature_i","rawSignatures","existing","expanded","cmp","mapSignatures","parseTree","anys","filtered","nodeSignature","entries","overlapping","matchingAnys","paramsStartWith","fallThrough","_args","_signatures","createError","array","conversion","to","Refs","ac","hasConversions","bc","ai","bi","newParam","recurse","aLast","bLast","getTests","tests","allTypes","exactTypes","conversion_i","comment","_innerCode","exceptions","config","_typed","getName","...Function","addConversion","addType","require$$1$1","typedFunction$1","NumberFormatter","zeros","coefficients","rounded","decimalIdx","decimals","newExp","decimalVal","significandsDiff","expDiff","upper","roundDigits","number$1","notation","toEngineering","nearlyEqual","DBL_EPSILON","EPSILON","createTyped","typedFunction","isInteger","sign$1","isNumber","_createTyped","isSparseMatrix","isComplex","isFraction","isMatrix","isDenseMatrix","isImmutableDenseMatrix","isRange","isIndex","Complex","isResultSet","isHelp","toNumber","BigNumber","Fraction","DenseMatrix","off","matrix","typed$1","create$2","evtArr","require$$3","index$4","evts","Emitter","index$5","ArgumentsError","require$$0$4","emitter$1","require$$0$3","override","num","math","_importFactory","_importTransform","isSupportedType","math_import","silent","_import","_wrap","resolver","wrapper","load","isTypedFunction","MATRIX","require$$1","require$$0$5","_config","validateOption","math$1","curr","instances","NUMBER","typedFactory","config$1","number","predictable","require$$1$2","configFactory","require$$0$6","formatter","gt","formatBigNumber","toExpNeg","formatter$1","toExponential$1","format$2","require$$0$7","string$2","formatArray","search","require$$4","endsWith","expected","relation","IndexError","types$1","require$$2$1","isScalar","DimensionError","DimensionError$1","require$$0$8","dimNext","validate","stack","validateIndex","IndexError$1","require$$0$9","_resize","oldLen","newLen","minLen","defaultValue","unsqueeze","dims","_unsqueeze","hash","hasher","ii","memoize","maxArgumentCount","squeeze","flat","outer","array$2","UNINITIALIZED","isBoolean","Matrix","_storage","_function$1","_function","emitter$2","index$7","string$1","datatype","subset","util","_size","skipZeros","factory$2","path$1","name$2","_set","require$$1$3","Matrix$1","_datatype","_data","index_i","preprocess","_setSubmatrix","dataIndex","subIndex","dimension","iSize","newSize","sSize","submatrix","me","_getSubmatrix","_fit","resize","kSuper","diagonal","toJSON","kSub","_swapRows","rows","columns","times","bigNearlyEqual","vi","equalScalar","DenseMatrix$1","SparseMatrix","lazy$2","path$2","require$$1$4","factory$3","name$3","_createFromMatrix","_createFromArray","_values","_index","_ptr","lte","nearlyEqual$1","nearlyEqual$2","BigNumber, BigNumber","Fraction, Fraction","density","row","mindex","storage","_setsubset","_getsubset","kk","mptr","pv","mvalues","_getValueIndex","ptr","_insert","k0","maxRow","minRow","_toArray","invoke","minColumn","maxColumn","k1","json","_forEachRow","ky","kx","vx","ms","_create","require$$2","SparseMatrix$1","Alpha","Gamma","Delta","Epsilon","Zeta","factory$4","Eta","Theta","Lambda","Xi","xi","","string, string","Array | Matrix, string","Array | Matrix, string, string","defaultTemplate","units","factory$8","adata","denseMatrix","bvalues","sparseMatrix","bdt","Unit, Unit","asize","bsize","cf","addScalar$1","require$$6$2","latex","bptr","bindex","iota","inverse","lambda","Mu","mu","Pi","varpi","cdata","sigma","varsigma","Tau","tau","Chi","chi","Psi","psi","Omega","omega","false","Inf","infinity","oo","lim","bitNot","dotMultiply","mod","isUnit","toSymbol","latex$1","symbols$2","dt","cvalues","avalues","algorithm01","cptr","cindex","adt","mark","aptr","aindex","wb","algorithm04","algorithm01$1","name$8","wa","algorithm10","algorithm04$1","factory$11","require$$3$1","_iterate","cv","algorithm14","name$10","algorithm13","csize","bdata","av","bv","factory$13","name$11","require$$2$3","Spa","factory$14","require$$1$6","name$12","require$$0$11","_heap","require$$4$1","require$$2$2","nodei","Matrix, any","algorithm03","Array, any","any, any","2","add$1","factory$7","require$$0$10","isSpa","algorithm07","nodej","xb","_scatter","Spa$1","path$4","va","name$5","vb","factory$6","algorithm03$1","factory$17","require$$5$1","name$15","lt","xa","factory$18","smaller","name$16","require$$4$2","algorithm12","larger","algorithm12$1","factory$19","require$$3$2","name$17","equalBase","boolean, boolean","number, number","Complex, Complex","Matrix, Matrix","Array, Array","any, Matrix","FibonacciHeap","degree","operators","_minimum","require$$0$12","smaller$1","name$14","require$$6$1","minimum","numberOfChildren","_findMinimumNode","extractMinimum","_decreaseKey","_cascadingCut","name$18","arraySize","numRoots","require$$0$13","isFibonacciHeap","_linkNodes","tempRight","ImmutableDenseMatrix","_cut","mathjs","temp","FibonacciHeap$1","factory$15","path$5","require$$6$3","_isScalar","Index","_createImmutableMatrix","_dimensions","strings","ImmutableDenseMatrix$1","Range","nums","ranges","dimensions","path$7","parseFloat","invalid","some","lastRenderTime","graphAllEdges","canvas","clearRect","EdgesAllPairs","path$8","name$21","require$$3$3","...number | string | BigNumber | Range | Array | Matrix","factory$24","index$9","require$$2$4","darker","reN","reHex6","reHslPercent","darkgrey","darkkhaki","darkmagenta","darkorchid","darkred","darkslateblue","darkslategray","darkviolet","deeppink","gainsboro","dodgerblue","firebrick","floralwhite","goldenrod","gray","grey","sparse$1","honeydew","hotpink","indigo","ivory","sparse$2","khaki","factory$25","lavender","lemonchiffon","lightblue","lightcyan","require$$8","require$$7$2","require$$5$2","require$$4$3","lightgreen","require$$0$14","lightsalmon","index$6","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumseagreen","mediumturquoise","mediumvioletred","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","edgeData$1","palegoldenrod","paleturquoise","palevioletred","papayawhip","peachpuff","peru","plum","powderblue","getNodes","purple","rebeccapurple","canvasContext","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","snow","springgreen","tan","teal","violet","wheat","white","whitesmoke","combos","animate$1","reRgbInteger","reRgbPercent","reRgbaPercent","getContext","refreshEdges","_detached","animateCallback","css$3","core$1","matrices","ascendingBisect","bisector","_darker","_brighter","deg2rad","Kn","reI","reP","t3","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","coral","cornflowerblue","cornsilk","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkolivegreen","darkorange","darksalmon","darkslategrey","lab2xyz","deepskyblue","xyz2rgb","dimgrey","forestgreen","fuchsia","ghostwhite","gold","green","greenyellow","indianred","lavenderblush","lawngreen","hcl","lightgoldenrodyellow","lightgray","lightgrey","lightpink","lightseagreen","maroon","mediumpurple","cubehelixConvert","palegreen","pink","red","rosybrown","royalblue","silver","slategrey","steelblue","thistle","cosh","tomato","sinh","turquoise","yellow","yellowgreen","linear","colorCubehelix","colorHsl","extend$1","cubehelix$1","formatTypes","durationSecond","second","millisecond","parseLocaleDate","durationSecond$1","durationHour$1","newParse","durationDay$1","parseShortWeekday","utcMinute","utcDay","formatUTCShortWeekday","formatUTCPeriod","plasma","ramp","isoSpecifier"],"mappings":"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","file":"tangled-web-components.min.js","sourcesContent":["\nexport var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {}\n\nexport function interopDefault(ex) {\n\treturn ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nexport function createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}","const { HTMLElement, MutationObserver, navigator } = window;\nconst { userAgent } = navigator;\nconst safari = userAgent.indexOf('Safari/60') !== -1;\nconst safariVersion = safari && userAgent.match(/Version\\/([^\\s]+)/)[1];\nconst safariVersions = [0, 1].map(v => `10.0.${v}`).concat(['10.0']);\nconst patch = safari && safariVersions.indexOf(safariVersion) > -1;\n\n// Workaround for https://bugs.webkit.org/show_bug.cgi?id=160331\nfunction fixSafari () {\n  const oldAttachShadow = HTMLElement.prototype.attachShadow;\n\n  // We observe a shadow root, but only need to know if the target that was mutated is a <style>\n  // element as this is the only scenario where styles aren't recalculated.\n  const moOpts = { childList: true, subtree: true };\n  const mo = new MutationObserver((muts) => {\n    muts.forEach((mut) => {\n      const { target } = mut;\n      if (target.tagName === 'STYLE') {\n        const { nextSibling, parentNode } = target;\n\n        // We actually have to remove and subsequently re-insert rather than doing insertBefore()\n        // as it seems that doesn't trigger a recalc.\n        parentNode.removeChild(target);\n        parentNode.insertBefore(target, nextSibling);\n      }\n    });\n  });\n\n  // Our override simply calls the native (or overridden) attachShadow but it ensures that changes\n  // to it are observed so that we can take any <style> elements and re-insert them.\n  function newAttachShadow (opts) {\n    const sr = oldAttachShadow.call(this, opts);\n    mo.observe(sr, moOpts);\n    return sr;\n  }\n\n  // We have to define a property because Safari won't take the override if it is set directly.\n  Object.defineProperty(HTMLElement.prototype, 'attachShadow', {\n    // Ensure polyfills can override it (hoping they call it back).\n    configurable: true,\n    enumerable: true,\n    value: newAttachShadow,\n    writable: true\n  });\n}\n\n// We target a specific version of Safari instead of trying to but detect as it seems to involve\n// contriving a breaking case and detecting computed styles. We can remove this code when Safari\n// fixes the bug.\nif (patch) {\n  fixSafari();\n}\n\nexport default patch;\n","import { isFunction } from './is-type';\n/**\n * Returns array of owned property names and symbols for the given object\n */\nexport default function getPropNamesAndSymbols (obj = {}) {\n  const listOfKeys = Object.getOwnPropertyNames(obj);\n  return isFunction(Object.getOwnPropertySymbols)\n    ? listOfKeys.concat(Object.getOwnPropertySymbols(obj))\n    : listOfKeys;\n}\n","export default function (val) {\n  return typeof val === 'undefined' || val === null;\n}\n","import assign from './assign';\n\nfunction enter (object, props) {\n  const saved = {};\n  Object.keys(props).forEach((key) => {\n    saved[key] = object[key];\n    object[key] = props[key];\n  });\n  return saved;\n}\n\nfunction exit (object, saved) {\n  assign(object, saved);\n}\n\n// Decorates a function with a side effect that changes the properties of an\n// object during its execution, and restores them after. There is no error\n// handling here, if the wrapped function throws an error, properties are not\n// restored and all bets are off.\nexport default function (object, props) {\n  return func => (...args) => {\n    const saved = enter(object, props);\n    const result = func(...args);\n    exit(object, saved);\n    return result;\n  };\n}\n","/* eslint no-plusplus: 0 */\n\nimport {\n  applyProp,\n  attributes,\n  elementClose,\n  elementOpen as idomElementOpen,\n  skip as idomSkip,\n  symbols,\n  text\n} from 'incremental-dom';\nimport { name as $name, ref as $ref } from '../util/symbols';\nimport propContext from '../util/prop-context';\nimport root from 'window-or-global';\n\nconst { customElements, HTMLElement } = root;\nconst applyDefault = attributes[symbols.default];\n\n// A stack of children that corresponds to the current function helper being\n// executed.\nconst stackChren = [];\n\nconst $skip = '__skip';\nconst $currentEventHandlers = '__events';\nconst $stackCurrentHelperProps = '__props';\n\n// The current function helper in the stack.\nlet stackCurrentHelper;\n\n// This is used for the Incremental DOM overrides to keep track of what args\n// to pass the main elementOpen() function.\nlet overrideArgs;\n\n// The number of levels deep after skipping a tree.\nlet skips = 0;\n\nconst noop = () => {};\n\n// Adds or removes an event listener for an element.\nfunction applyEvent (elem, ename, newFunc) {\n  let events = elem[$currentEventHandlers];\n\n  if (!events) {\n    events = elem[$currentEventHandlers] = {};\n  }\n\n  // Undefined indicates that there is no listener yet.\n  if (typeof events[ename] === 'undefined') {\n    // We only add a single listener once. Originally this was a workaround for\n    // the Webcomponents ShadyDOM polyfill not removing listeners, but it's\n    // also a simpler model for binding / unbinding events because you only\n    // have a single handler you need to worry about and a single place where\n    // you only store one event handler\n    elem.addEventListener(ename, function (e) {\n      if (events[ename]) {\n        events[ename].call(this, e);\n      }\n    });\n  }\n\n  // Not undefined indicates that we have set a listener, so default to null.\n  events[ename] = typeof newFunc === 'function' ? newFunc : null;\n}\n\nconst attributesContext = propContext(attributes, {\n  // Attributes that shouldn't be applied to the DOM.\n  key: noop,\n  statics: noop,\n\n  // Attributes that *must* be set via a property on all elements.\n  checked: applyProp,\n  className: applyProp,\n  disabled: applyProp,\n  value: applyProp,\n\n  // Ref handler.\n  ref (elem, name, value) {\n    elem[$ref] = value;\n  },\n\n  // Skip handler.\n  skip (elem, name, value) {\n    if (value) {\n      elem[$skip] = true;\n    } else {\n      delete elem[$skip];\n    }\n  },\n\n  // Default attribute applicator.\n  [symbols.default] (elem, name, value) {\n    const { props, prototype } = customElements.get(elem.localName) || {\n      props: {},\n      prototype: {}\n    };\n\n    // TODO when refactoring properties to not have to workaround the old\n    // WebKit bug we can remove the \"name in props\" check below.\n    //\n    // NOTE: That the \"name in elem\" check won't work for polyfilled custom\n    // elements that set a property that isn't explicitly specified in \"props\"\n    // or \"prototype\" unless it is added to the element explicitly as a\n    // property prior to passing the prop to the vdom function. For example, if\n    // it were added in a lifecycle callback because it wouldn't have been\n    // upgraded yet.\n    //\n    // We prefer setting props, so we do this if there's a property matching\n    // name that was passed. However, certain props on SVG elements are\n    // readonly and error when you try to set them.\n    if ((name in props || name in elem || name in prototype) && !('ownerSVGElement' in elem)) {\n      applyProp(elem, name, value);\n      return;\n    }\n\n    // Explicit false removes the attribute.\n    if (value === false) {\n      applyDefault(elem, name);\n      return;\n    }\n\n    // Handle built-in and custom events.\n    if (name.indexOf('on') === 0) {\n      const firstChar = name[2];\n      let eventName;\n\n      if (firstChar === '-') {\n        eventName = name.substring(3);\n      } else if (firstChar === firstChar.toUpperCase()) {\n        eventName = firstChar.toLowerCase() + name.substring(3);\n      }\n\n      if (eventName) {\n        applyEvent(elem, eventName, value);\n        return;\n      }\n    }\n\n    applyDefault(elem, name, value);\n  }\n});\n\nfunction resolveTagName (name) {\n  // We return falsy values as some wrapped IDOM functions allow empty values.\n  if (!name) {\n    return name;\n  }\n\n  // We try and return the cached tag name, if one exists.\n  if (name[$name]) {\n    return name[$name];\n  }\n\n  // If it's a custom element, we get the tag name by constructing it and\n  // caching it.\n  if (name.prototype instanceof HTMLElement) {\n    // eslint-disable-next-line\n    const elem = new name();\n    return (name[$name] = elem.localName);\n  }\n\n  // Pass all other values through so IDOM gets what it's expecting.\n  return name;\n}\n\n// Incremental DOM's elementOpen is where the hooks in `attributes` are applied,\n// so it's the only function we need to execute in the context of our attributes.\nconst elementOpen = attributesContext(idomElementOpen);\n\nfunction elementOpenStart (tag, key = null, statics = null) {\n  overrideArgs = [tag, key, statics];\n}\n\nfunction elementOpenEnd () {\n  const node = newElementOpen(...overrideArgs); // eslint-disable-line no-use-before-define\n  overrideArgs = null;\n  return node;\n}\n\nfunction wrapIdomFunc (func, tnameFuncHandler = noop) {\n  return function wrap (...args) {\n    args[0] = resolveTagName(args[0]);\n    stackCurrentHelper = null;\n    if (typeof args[0] === 'function') {\n      // If we've encountered a function, handle it according to the type of\n      // function that is being wrapped.\n      stackCurrentHelper = args[0];\n      return tnameFuncHandler(...args);\n    } else if (stackChren.length) {\n      // We pass the wrap() function in here so that when it's called as\n      // children, it will queue up for the next stack, if there is one.\n      stackChren[stackChren.length - 1].push([wrap, args]);\n    } else {\n      if (func === elementOpen) {\n        if (skips) {\n          return ++skips;\n        }\n\n        const elem = func(...args);\n\n        if (elem[$skip]) {\n          ++skips;\n        }\n\n        return elem;\n      }\n\n      if (func === elementClose) {\n        if (skips === 1) {\n          idomSkip();\n        }\n\n        // We only want to skip closing if it's not the last closing tag in the\n        // skipped tree because we keep the element that initiated the skpping.\n        if (skips && --skips) {\n          return;\n        }\n\n        const elem = func(...args);\n        const ref = elem[$ref];\n\n        // We delete so that it isn't called again for the same element. If the\n        // ref changes, or the element changes, this will be defined again.\n        delete elem[$ref];\n\n        // Execute the saved ref after esuring we've cleand up after it.\n        if (typeof ref === 'function') {\n          ref(elem);\n        }\n\n        return elem;\n      }\n\n      // We must call elementOpenStart and elementOpenEnd even if we are\n      // skipping because they queue up attributes and then call elementClose.\n      if (!skips || (func === elementOpenStart || func === elementOpenEnd)) {\n        return func(...args);\n      }\n    }\n  };\n}\n\nfunction newAttr (...args) {\n  if (stackCurrentHelper) {\n    stackCurrentHelper[$stackCurrentHelperProps][args[0]] = args[1];\n  } else if (stackChren.length) {\n    stackChren[stackChren.length - 1].push([newAttr, args]);\n  } else {\n    overrideArgs.push(args[0]);\n    overrideArgs.push(args[1]);\n  }\n}\n\nfunction stackOpen (tname, key, statics, ...attrs) {\n  const props = { key, statics };\n  for (let a = 0; a < attrs.length; a += 2) {\n    props[attrs[a]] = attrs[a + 1];\n  }\n  tname[$stackCurrentHelperProps] = props;\n  stackChren.push([]);\n}\n\nfunction stackClose (tname) {\n  const chren = stackChren.pop();\n  const props = tname[$stackCurrentHelperProps];\n  delete tname[$stackCurrentHelperProps];\n  const elemOrFn = tname(props, () => chren.forEach(args => args[0](...args[1])));\n  return typeof elemOrFn === 'function' ? elemOrFn() : elemOrFn;\n}\n\n// Incremental DOM overrides\n// -------------------------\n\n// We must override internal functions that call internal Incremental DOM\n// functions because we can't override the internal references. This means\n// we must roughly re-implement their behaviour. Luckily, they're fairly\n// simple.\nconst newElementOpenStart = wrapIdomFunc(elementOpenStart, stackOpen);\nconst newElementOpenEnd = wrapIdomFunc(elementOpenEnd);\n\n// Standard open / closed overrides don't need to reproduce internal behaviour\n// because they are the ones referenced from *End and *Start.\nconst newElementOpen = wrapIdomFunc(elementOpen, stackOpen);\nconst newElementClose = wrapIdomFunc(elementClose, stackClose);\n\n// Ensure we call our overridden functions instead of the internal ones.\nfunction newElementVoid (tag, ...args) {\n  newElementOpen(tag, ...args);\n  return newElementClose(tag);\n}\n\n// Text override ensures their calls can queue if using function helpers.\nconst newText = wrapIdomFunc(text);\n\n// Convenience function for declaring an Incremental DOM element using\n// hyperscript-style syntax.\nexport function element (tname, attrs, ...chren) {\n  const atype = typeof attrs;\n\n  // If attributes are a function, then they should be treated as children.\n  if (atype === 'function' || atype === 'string' || atype === 'number') {\n    chren.unshift(attrs);\n  }\n\n  // Ensure the attributes are an object. Null is considered an object so we\n  // have to test for this explicitly.\n  if (attrs === null || atype !== 'object') {\n    attrs = {};\n  }\n\n  // We open the element so we can set attrs after.\n  newElementOpenStart(tname, attrs.key, attrs.statics);\n\n  // Delete so special attrs don't actually get set.\n  delete attrs.key;\n  delete attrs.statics;\n\n  // Set attributes.\n  Object.keys(attrs).forEach(name => newAttr(name, attrs[name]));\n\n  // Close before we render the descendant tree.\n  newElementOpenEnd(tname);\n\n  chren.forEach((ch) => {\n    const ctype = typeof ch;\n    if (ctype === 'function') {\n      ch();\n    } else if (ctype === 'string' || ctype === 'number') {\n      newText(ch);\n    } else if (Array.isArray(ch)) {\n      ch.forEach(sch => sch());\n    }\n  });\n\n  return newElementClose(tname);\n}\n\n// Even further convenience for building a DSL out of JavaScript functions or hooking into standard\n// transpiles for JSX (React.createElement() / h).\nexport function builder (...tags) {\n  if (tags.length === 0) {\n    return (...args) => element.bind(null, ...args);\n  }\n  return tags.map(tag =>\n    (...args) =>\n      element.bind(null, tag, ...args)\n  );\n}\n\n// We don't have to do anything special for the text function; it's just a\n// straight export from Incremental DOM.\nexport {\n  newAttr as attr,\n  newElementClose as elementClose,\n  newElementOpen as elementOpen,\n  newElementOpenEnd as elementOpenEnd,\n  newElementOpenStart as elementOpenStart,\n  newElementVoid as elementVoid,\n  newText as text\n};\n","export default function createSymbol (description) {\n  return typeof Symbol === 'function' ? Symbol(description) : description;\n}\n","export default function (element, namespace = '') {\n  const data = element.__SKATE_DATA || (element.__SKATE_DATA = {});\n  return namespace && (data[namespace] || (data[namespace] = {})) || data; // eslint-disable-line no-mixed-operators\n}\n","import native from './native';\nimport root from 'window-or-global';\n\nconst { MutationObserver } = root;\n\nfunction microtaskDebounce (cbFunc) {\n  let scheduled = false;\n  let i = 0;\n  let cbArgs = [];\n  const elem = document.createElement('span');\n  const observer = new MutationObserver(() => {\n    cbFunc(...cbArgs);\n    scheduled = false;\n    cbArgs = null;\n  });\n\n  observer.observe(elem, { childList: true });\n\n  return (...args) => {\n    cbArgs = args;\n    if (!scheduled) {\n      scheduled = true;\n      elem.textContent = `${i}`;\n      i += 1;\n    }\n  };\n}\n\n// We have to use setTimeout() for IE9 and 10 because the Mutation Observer\n// polyfill requires that the element be in the document to trigger Mutation\n// Events. Mutation Events are also synchronous and thus wouldn't debounce.\n//\n// The soonest we can set the timeout for in IE is 1 as they have issues when\n// setting to 0.\nfunction taskDebounce (cbFunc) {\n  let scheduled = false;\n  let cbArgs = [];\n  return (...args) => {\n    cbArgs = args;\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(() => {\n        scheduled = false;\n        cbFunc(...cbArgs);\n      }, 1);\n    }\n  };\n}\nexport default native(MutationObserver) ? microtaskDebounce : taskDebounce;\n","export default function deprecated (elem, oldUsage, newUsage) {\n  if (DEBUG) {\n    const ownerName = elem.localName ? elem.localName : String(elem);\n    console.warn(`${ownerName} ${oldUsage} is deprecated. Use ${newUsage}.`);\n  }\n}\n","import toNullOrString from './to-null-or-string';\nimport { isUndefined } from './is-type';\n\n/**\n * @internal\n * Attributes Manager\n *\n * Postpones attributes updates until when connected.\n */\nclass AttributesManager {\n  constructor (elem) {\n    this.elem = elem;\n    this.connected = false;\n    this.pendingValues = {};\n    this.lastSetValues = {};\n  }\n\n  /**\n   * Called from disconnectedCallback\n   */\n  suspendAttributesUpdates () {\n    this.connected = false;\n  }\n\n  /**\n   * Called from connectedCallback\n   */\n  resumeAttributesUpdates () {\n    this.connected = true;\n    const names = Object.keys(this.pendingValues);\n    names.forEach(name => {\n      const value = this.pendingValues[name];\n      // Skip if already cleared\n      if (!isUndefined(value)) {\n        delete this.pendingValues[name];\n        this._syncAttrValue(name, value);\n      }\n    });\n  }\n\n  /**\n   * Returns true if the value is different from the one set internally\n   * using setAttrValue()\n   */\n  onAttributeChanged (name, value) {\n    value = toNullOrString(value);\n\n    // A new attribute value voids the pending one\n    this._clearPendingValue(name);\n\n    const changed = this.lastSetValues[name] !== value;\n    this.lastSetValues[name] = value;\n    return changed;\n  }\n\n  /**\n   * Updates or removes the attribute if value === null.\n   *\n   * When the component is not connected the value is saved and\n   * the attribute is only updated when the component is re-connected.\n   */\n  setAttrValue (name, value) {\n    value = toNullOrString(value);\n\n    this.lastSetValues[name] = value;\n\n    if (this.connected) {\n      this._clearPendingValue(name);\n      this._syncAttrValue(name, value);\n    } else {\n      this.pendingValues[name] = value;\n    }\n  }\n\n  _syncAttrValue (name, value) {\n    const currAttrValue = toNullOrString(this.elem.getAttribute(name));\n    if (value !== currAttrValue) {\n      if (value === null) {\n        this.elem.removeAttribute(name);\n      } else {\n        this.elem.setAttribute(name, value);\n      }\n    }\n  }\n\n  _clearPendingValue (name) {\n    if (name in this.pendingValues) {\n      delete this.pendingValues[name];\n    }\n  }\n}\n\n// Only used by getAttrMgr\nconst $attributesMgr = '____skate_attributesMgr';\n\n/**\n * @internal\n * Returns attribute manager instance for the given Component\n */\nexport default function getAttrMgr (elem) {\n  let mgr = elem[$attributesMgr];\n  if (!mgr) {\n    mgr = new AttributesManager(elem);\n    elem[$attributesMgr] = mgr;\n  }\n  return mgr;\n}\n","import getPropNamesAndSymbols from './get-prop-names-and-symbols';\n\nexport default function (obj = {}) {\n  return getPropNamesAndSymbols(obj).reduce((prev, nameOrSymbol) => {\n    prev[nameOrSymbol] = Object.getOwnPropertyDescriptor(obj, nameOrSymbol);\n    return prev;\n  }, {});\n}\n","export default function (str) {\n  return str.split(/([A-Z])/).reduce((one, two, idx) => {\n    const dash = !one || idx % 2 === 0 ? '' : '-';\n    return `${one}${dash}${two.toLowerCase()}`;\n  });\n}\n","export default function error (message) {\n  throw new Error(message);\n}\n","import dashCase from './dash-case';\nimport empty from './empty';\nimport error from './error';\nimport {\n  isFunction,\n  isObject,\n  isString,\n  isSymbol\n} from './is-type';\n\n/**\n * @internal\n * Property Definition\n *\n * Internal meta data and strategies for a property.\n * Created from the options of a PropOptions config object.\n *\n * Once created a PropDefinition should be treated as immutable and final.\n * 'getPropsMap' function memoizes PropDefinitions by Component's Class.\n *\n * The 'attribute' option is normalized to 'attrSource' and 'attrTarget' properties.\n */\nexport default class PropDefinition {\n\n  constructor (nameOrSymbol, propOptions) {\n    this._nameOrSymbol = nameOrSymbol;\n\n    propOptions = propOptions || {};\n\n    // default 'attrSource': no observed source attribute (name)\n    this.attrSource = null;\n\n    // default 'attrTarget': no reflected target attribute (name)\n    this.attrTarget = null;\n\n    // default 'attrTargetIsNotSource'\n    this.attrTargetIsNotSource = false;\n\n    // default 'coerce': identity function\n    this.coerce = value => value;\n\n    // default 'default': set prop to 'null'\n    this.default = null;\n\n    // default 'deserialize': return attribute's value (string or null)\n    this.deserialize = value => value;\n\n    // default 'get': no function\n    this.get = null;\n\n    // 'initial' default: unspecified\n    // 'initial' option is truly optional and it cannot be initialized.\n    // Its presence is tested using: ('initial' in propDef)\n\n    // 'serialize' default: return string value or null\n    this.serialize = value => (empty(value) ? null : String(value));\n\n    // default 'set': no function\n    this.set = null;\n\n    // Note: option key is always a string (no symbols here)\n    Object.keys(propOptions).forEach(option => {\n      const optVal = propOptions[option];\n\n      // Only accept documented options and perform minimal input validation.\n      switch (option) {\n        case 'attribute':\n          if (!isObject(optVal)) {\n            this.attrSource = this.attrTarget = resolveAttrName(optVal, nameOrSymbol);\n          } else {\n            const { source, target } = optVal;\n            if (!source && !target) {\n              error(`${option} 'source' or 'target' is missing.`);\n            }\n            this.attrSource = resolveAttrName(source, nameOrSymbol);\n            this.attrTarget = resolveAttrName(target, nameOrSymbol);\n            this.attrTargetIsNotSource = this.attrTarget !== this.attrSource;\n          }\n          break;\n        case 'coerce':\n        case 'deserialize':\n        case 'get':\n        case 'serialize':\n        case 'set':\n          if (isFunction(optVal)) {\n            this[option] = optVal;\n          } else {\n            error(`${option} must be a function.`);\n          }\n          break;\n        case 'default':\n        case 'initial':\n          this[option] = optVal;\n          break;\n        default:\n          // TODO: undocumented options?\n          this[option] = optVal;\n          break;\n      }\n    });\n  }\n\n  get nameOrSymbol () {\n    return this._nameOrSymbol;\n  }\n\n}\n\nfunction resolveAttrName (attrOption, nameOrSymbol) {\n  if (isSymbol(nameOrSymbol)) {\n    error(`${nameOrSymbol.toString()} symbol property cannot have an attribute.`);\n  } else {\n    if (attrOption === true) {\n      return dashCase(String(nameOrSymbol));\n    }\n    if (isString(attrOption)) {\n      return attrOption;\n    }\n  }\n  return null;\n}\n","/**\n * This is needed to avoid IE11 \"stack size errors\" when creating\n * a new property on the constructor of an HTMLElement\n */\nexport default function setCtorNativeProperty (Ctor, propName, value) {\n  Object.defineProperty(Ctor, propName, { configurable: true, value });\n}\n","import {\n  ctorPropsMap as $ctorPropsMap\n} from './symbols';\nimport getPropNamesAndSymbols from './get-prop-names-and-symbols';\nimport PropDefinition from './prop-definition';\nimport setCtorNativeProperty from './set-ctor-native-property';\n\n/**\n * Memoizes a map of PropDefinition for the given component class.\n * Keys in the map are the properties name which can a string or a symbol.\n *\n * The map is created from the result of: static get props\n */\nexport default function getPropsMap (Ctor) {\n  // Must be defined on constructor and not from a superclass\n  if (!Ctor.hasOwnProperty($ctorPropsMap)) {\n    const props = Ctor.props || {};\n\n    const propsMap = getPropNamesAndSymbols(props).reduce((result, nameOrSymbol) => {\n      result[nameOrSymbol] = new PropDefinition(nameOrSymbol, props[nameOrSymbol]);\n      return result;\n    }, {});\n    setCtorNativeProperty(Ctor, $ctorPropsMap, propsMap);\n  }\n\n  return Ctor[$ctorPropsMap];\n}\n","import { renderer as $renderer } from '../util/symbols';\nimport assign from '../util/assign';\nimport getPropNamesAndSymbols from '../util/get-prop-names-and-symbols';\nimport getPropsMap from '../util/get-props-map';\nimport { isUndefined } from '../util/is-type';\n\nfunction get (elem) {\n  const props = {};\n\n  getPropNamesAndSymbols(getPropsMap(elem.constructor)).forEach((nameOrSymbol) => {\n    props[nameOrSymbol] = elem[nameOrSymbol];\n  });\n\n  return props;\n}\n\nfunction set (elem, newProps) {\n  assign(elem, newProps);\n  if (elem[$renderer]) {\n    elem[$renderer]();\n  }\n}\n\nexport default function (elem, newProps) {\n  return isUndefined(newProps) ? get(elem) : set(elem, newProps);\n}\n","export default function getDefaultValue (elem, propDef) {\n  return typeof propDef.default === 'function'\n    ? propDef.default(elem, { name: propDef.nameOrSymbol })\n    : propDef.default;\n}\n","export default function getInitialValue (elem, propDef) {\n  return typeof propDef.initial === 'function'\n    ? propDef.initial(elem, { name: propDef.nameOrSymbol })\n    : propDef.initial;\n}\n","import data from './data';\n\nexport default function getPropData (elem, name) {\n  const elemData = data(elem, 'props');\n  return elemData[name] || (elemData[name] = {});\n}\n","import {\n  rendererDebounced as $rendererDebounced\n} from '../util/symbols';\nimport data from '../util/data';\nimport empty from '../util/empty';\nimport getAttrMgr from '../util/attributes-manager';\nimport getDefaultValue from '../util/get-default-value';\nimport getInitialValue from '../util/get-initial-value';\nimport getPropData from '../util/get-prop-data';\n\nexport function createNativePropertyDescriptor (propDef) {\n  const { nameOrSymbol } = propDef;\n\n  const prop = {\n    configurable: true,\n    enumerable: true\n  };\n\n  prop.beforeDefineProperty = elem => {\n    const propData = getPropData(elem, nameOrSymbol);\n    const attrSource = propDef.attrSource;\n\n    // Store attrSource name to property link.\n    if (attrSource) {\n      data(elem, 'attrSourceLinks')[attrSource] = nameOrSymbol;\n    }\n\n    // prop value before upgrading\n    let initialValue = elem[nameOrSymbol];\n\n    // Set up initial value if it wasn't specified.\n    let valueFromAttrSource = false;\n    if (empty(initialValue)) {\n      if (attrSource && elem.hasAttribute(attrSource)) {\n        valueFromAttrSource = true;\n        initialValue = propDef.deserialize(elem.getAttribute(attrSource));\n      } else if ('initial' in propDef) {\n        initialValue = getInitialValue(elem, propDef);\n      } else {\n        initialValue = getDefaultValue(elem, propDef);\n      }\n    }\n\n    initialValue = propDef.coerce(initialValue);\n\n    propData.internalValue = initialValue;\n\n    // Reflect to Target Attribute\n    const mustReflect = propDef.attrTarget && !empty(initialValue) &&\n      (!valueFromAttrSource || propDef.attrTargetIsNotSource);\n\n    if (mustReflect) {\n      let serializedValue = propDef.serialize(initialValue);\n      getAttrMgr(elem).setAttrValue(propDef.attrTarget, serializedValue);\n    }\n  };\n\n  prop.get = function get () {\n    const propData = getPropData(this, nameOrSymbol);\n    const { internalValue } = propData;\n    return propDef.get ? propDef.get(this, { name: nameOrSymbol, internalValue }) : internalValue;\n  };\n\n  prop.set = function set (newValue) {\n    const propData = getPropData(this, nameOrSymbol);\n\n    const useDefaultValue = empty(newValue);\n    if (useDefaultValue) {\n      newValue = getDefaultValue(this, propDef);\n    }\n\n    newValue = propDef.coerce(newValue);\n\n    if (propDef.set) {\n      let { oldValue } = propData;\n\n      if (empty(oldValue)) {\n        oldValue = null;\n      }\n      const changeData = { name: nameOrSymbol, newValue, oldValue };\n      propDef.set(this, changeData);\n    }\n\n    // Queue a re-render.\n    this[$rendererDebounced](this);\n\n    // Update prop data so we can use it next time.\n    propData.internalValue = propData.oldValue = newValue;\n\n    // Reflect to Target attribute.\n    const mustReflect = propDef.attrTarget &&\n      (propDef.attrTargetIsNotSource || !propData.settingPropFromAttrSource);\n    if (mustReflect) {\n      // Note: setting the prop to empty implies the default value\n      // and therefore no attribute should be present!\n      let serializedValue = useDefaultValue ? null : propDef.serialize(newValue);\n      getAttrMgr(this).setAttrValue(propDef.attrTarget, serializedValue);\n    }\n  };\n\n  return prop;\n}\n","import { patchInner } from 'incremental-dom';\nimport {\n  connected as $connected,\n  created as $created,\n  ctorObservedAttributes as $ctorObservedAttributes,\n  ctorProps as $ctorProps,\n  ctorCreateInitProps as $ctorCreateInitProps,\n  props as $props,\n  renderer as $renderer,\n  rendererDebounced as $rendererDebounced,\n  rendering as $rendering,\n  updated as $updated\n} from '../util/symbols';\nimport assign from '../util/assign';\nimport createSymbol from '../util/create-symbol';\nimport data from '../util/data';\nimport debounce from '../util/debounce';\nimport deprecated from '../util/deprecated';\nimport getAttrMgr from '../util/attributes-manager';\nimport getOwnPropertyDescriptors from '../util/get-own-property-descriptors';\nimport getPropNamesAndSymbols from '../util/get-prop-names-and-symbols';\nimport getPropsMap from '../util/get-props-map';\nimport getSetProps from './props';\nimport { createNativePropertyDescriptor } from '../lifecycle/props-init';\nimport { isFunction } from '../util/is-type';\nimport objectIs from '../polyfills/object-is';\nimport setCtorNativeProperty from '../util/set-ctor-native-property';\nimport root from 'window-or-global';\n\nconst HTMLElement = root.HTMLElement || class {};\nconst _prevName = createSymbol('prevName');\nconst _prevOldValue = createSymbol('prevOldValue');\nconst _prevNewValue = createSymbol('prevNewValue');\n\nfunction preventDoubleCalling (elem, name, oldValue, newValue) {\n  return name === elem[_prevName] &&\n    oldValue === elem[_prevOldValue] &&\n    newValue === elem[_prevNewValue];\n}\n\n// TODO remove when not catering to Safari < 10.\nfunction createNativePropertyDescriptors (Ctor) {\n  const propDefs = getPropsMap(Ctor);\n  return getPropNamesAndSymbols(propDefs).reduce((propDescriptors, nameOrSymbol) => {\n    propDescriptors[nameOrSymbol] = createNativePropertyDescriptor(propDefs[nameOrSymbol]);\n    return propDescriptors;\n  }, {});\n}\n\n// TODO refactor when not catering to Safari < 10.\n//\n// We should be able to simplify this where all we do is Object.defineProperty().\nfunction createInitProps (Ctor) {\n  const propDescriptors = createNativePropertyDescriptors(Ctor);\n\n  return (elem) => {\n    getPropNamesAndSymbols(propDescriptors).forEach((nameOrSymbol) => {\n      const propDescriptor = propDescriptors[nameOrSymbol];\n      propDescriptor.beforeDefineProperty(elem);\n\n      // We check here before defining to see if the prop was specified prior\n      // to upgrading.\n      const hasPropBeforeUpgrading = nameOrSymbol in elem;\n\n      // This is saved prior to defining so that we can set it after it it was\n      // defined prior to upgrading. We don't want to invoke the getter if we\n      // don't need to, so we only get the value if we need to re-sync.\n      const valueBeforeUpgrading = hasPropBeforeUpgrading && elem[nameOrSymbol];\n\n      // https://bugs.webkit.org/show_bug.cgi?id=49739\n      //\n      // When Webkit fixes that bug so that native property accessors can be\n      // retrieved, we can move defining the property to the prototype and away\n      // from having to do if for every instance as all other browsers support\n      // this.\n      Object.defineProperty(elem, nameOrSymbol, propDescriptor);\n\n      // DEPRECATED\n      //\n      // We'll be removing get / set callbacks on properties. Use the\n      // updatedCallback() instead.\n      //\n      // We re-set the prop if it was specified prior to upgrading because we\n      // need to ensure set() is triggered both in polyfilled environments and\n      // in native where the definition may be registerd after elements it\n      // represents have already been created.\n      if (hasPropBeforeUpgrading) {\n        elem[nameOrSymbol] = valueBeforeUpgrading;\n      }\n    });\n  };\n}\n\nexport default class extends HTMLElement {\n  /**\n   * Returns unique attribute names configured with props and\n   * those set on the Component constructor if any\n   */\n  static get observedAttributes () {\n    const attrsOnCtor = this.hasOwnProperty($ctorObservedAttributes) ? this[$ctorObservedAttributes] : [];\n    const propDefs = getPropsMap(this);\n\n    // Use Object.keys to skips symbol props since they have no linked attributes\n    const attrsFromLinkedProps = Object.keys(propDefs).map(propName =>\n      propDefs[propName].attrSource).filter(Boolean);\n\n    const all = attrsFromLinkedProps.concat(attrsOnCtor).concat(super.observedAttributes);\n    return all.filter((item, index) =>\n      all.indexOf(item) === index);\n  }\n\n  static set observedAttributes (value) {\n    value = Array.isArray(value) ? value : [];\n    setCtorNativeProperty(this, 'observedAttributes', value);\n  }\n\n  // Returns superclass props overwritten with this Component props\n  static get props () {\n    return assign({}, super.props, this[$ctorProps]);\n  }\n\n  static set props (value) {\n    setCtorNativeProperty(this, $ctorProps, value);\n  }\n\n  // Passing args is designed to work with document-register-element. It's not\n  // necessary for the webcomponents/custom-element polyfill.\n  constructor (...args) {\n    super(...args);\n\n    const { constructor } = this;\n\n    // Used for the ready() function so it knows when it can call its callback.\n    this[$created] = true;\n\n    // TODO refactor to not cater to Safari < 10. This means we can depend on\n    // built-in property descriptors.\n    // Must be defined on constructor and not from a superclass\n    if (!constructor.hasOwnProperty($ctorCreateInitProps)) {\n      setCtorNativeProperty(constructor, $ctorCreateInitProps, createInitProps(constructor));\n    }\n\n    // Set up a renderer that is debounced for property sets to call directly.\n    this[$rendererDebounced] = debounce(this[$renderer].bind(this));\n\n    // Set up property lifecycle.\n    const propDefsCount = getPropNamesAndSymbols(getPropsMap(constructor)).length;\n    if (propDefsCount && constructor[$ctorCreateInitProps]) {\n      constructor[$ctorCreateInitProps](this);\n    }\n\n    // DEPRECATED\n    //\n    // static render()\n    // Note that renderCallback is an optional method!\n    if (!this.renderCallback && constructor.render) {\n      DEBUG && deprecated(this, 'static render', 'renderCallback');\n      this.renderCallback = constructor.render.bind(constructor, this);\n    }\n\n    // DEPRECATED\n    //\n    // static created()\n    //\n    // Props should be set up before calling this.\n    const { created } = constructor;\n    if (isFunction(created)) {\n      DEBUG && deprecated(this, 'static created', 'constructor');\n      created(this);\n    }\n\n    // DEPRECATED\n    //\n    // Feature has rarely been used.\n    //\n    // Created should be set before invoking the ready listeners.\n    const elemData = data(this);\n    const readyCallbacks = elemData.readyCallbacks;\n    if (readyCallbacks) {\n      readyCallbacks.forEach(cb => cb(this));\n      delete elemData.readyCallbacks;\n    }\n  }\n\n  // Custom Elements v1\n  connectedCallback () {\n    // Reflect attributes pending values\n    getAttrMgr(this).resumeAttributesUpdates();\n\n    // Used to check whether or not the component can render.\n    this[$connected] = true;\n\n    // Render!\n    this[$rendererDebounced]();\n\n    // DEPRECATED\n    //\n    // static attached()\n    const { attached } = this.constructor;\n    if (isFunction(attached)) {\n      DEBUG && deprecated(this, 'static attached', 'connectedCallback');\n      attached(this);\n    }\n\n    // DEPRECATED\n    //\n    // We can remove this once all browsers support :defined.\n    this.setAttribute('defined', '');\n  }\n\n  // Custom Elements v1\n  disconnectedCallback () {\n    // Suspend updating attributes until re-connected\n    getAttrMgr(this).suspendAttributesUpdates();\n\n    // Ensures the component can't be rendered while disconnected.\n    this[$connected] = false;\n\n    // DEPRECATED\n    //\n    // static detached()\n    const { detached } = this.constructor;\n    if (isFunction(detached)) {\n      DEBUG && deprecated(this, 'static detached', 'disconnectedCallback');\n      detached(this);\n    }\n  }\n\n  // Custom Elements v1\n  attributeChangedCallback (name, oldValue, newValue) {\n    // Polyfill calls this twice.\n    if (preventDoubleCalling(this, name, oldValue, newValue)) {\n      return;\n    }\n\n    // Set data so we can prevent double calling if the polyfill.\n    this[_prevName] = name;\n    this[_prevOldValue] = oldValue;\n    this[_prevNewValue] = newValue;\n\n    const propNameOrSymbol = data(this, 'attrSourceLinks')[name];\n    if (propNameOrSymbol) {\n      const changedExternally = getAttrMgr(this).onAttributeChanged(name, newValue);\n      if (changedExternally) {\n        // Sync up the property.\n        const propDef = getPropsMap(this.constructor)[propNameOrSymbol];\n        const newPropVal = newValue !== null && propDef.deserialize\n          ? propDef.deserialize(newValue)\n          : newValue;\n\n        const propData = data(this, 'props')[propNameOrSymbol];\n        propData.settingPropFromAttrSource = true;\n        this[propNameOrSymbol] = newPropVal;\n        propData.settingPropFromAttrSource = false;\n      }\n    }\n\n    // DEPRECATED\n    //\n    // static attributeChanged()\n    const { attributeChanged } = this.constructor;\n    if (isFunction(attributeChanged)) {\n      DEBUG && deprecated(this, 'static attributeChanged', 'attributeChangedCallback');\n      attributeChanged(this, { name, newValue, oldValue });\n    }\n  }\n\n  // Skate\n  updatedCallback (prevProps) {\n    if (this.constructor.hasOwnProperty('updated')) {\n      DEBUG && deprecated(this, 'static updated', 'updatedCallback');\n    }\n    return this.constructor.updated(this, prevProps);\n  }\n\n  // Skate\n  renderedCallback () {\n    if (this.constructor.hasOwnProperty('rendered')) {\n      DEBUG && deprecated(this, 'static rendered', 'renderedCallback');\n    }\n    return this.constructor.rendered(this);\n  }\n\n  // Skate\n  //\n  // Maps to the static renderer() callback. That logic should be moved here\n  // when that is finally removed.\n  // TODO: finalize how to support different rendering strategies.\n  rendererCallback () {\n    // TODO: cannot move code here because tests expects renderer function to still exist on constructor!\n    return this.constructor.renderer(this);\n  }\n\n  // Skate\n  // @internal\n  // Invokes the complete render lifecycle.\n  [$renderer] () {\n    if (this[$rendering] || !this[$connected]) {\n      return;\n    }\n\n    // Flag as rendering. This prevents anything from trying to render - or\n    // queueing a render - while there is a pending render.\n    this[$rendering] = true;\n    if (this[$updated]() && isFunction(this.renderCallback)) {\n      this.rendererCallback();\n      this.renderedCallback();\n    }\n\n    this[$rendering] = false;\n  }\n\n  // Skate\n  // @internal\n  // Calls the updatedCallback() with previous props.\n  [$updated] () {\n    const prevProps = this[$props];\n    this[$props] = getSetProps(this);\n    return this.updatedCallback(prevProps);\n  }\n\n  // Skate\n  static extend (definition = {}, Base = this) {\n    // Create class for the user.\n    class Ctor extends Base {}\n\n    // For inheriting from the object literal.\n    const opts = getOwnPropertyDescriptors(definition);\n    const prot = getOwnPropertyDescriptors(definition.prototype);\n\n    // Prototype is non configurable (but is writable).\n    delete opts.prototype;\n\n    // Pass on static and instance members from the definition.\n    Object.defineProperties(Ctor, opts);\n    Object.defineProperties(Ctor.prototype, prot);\n\n    return Ctor;\n  }\n\n  // Skate\n  //\n  // DEPRECATED\n  //\n  // Stubbed in case any subclasses are calling it.\n  static rendered () {}\n\n  // Skate\n  //\n  // DEPRECATED\n  //\n  // Move this to rendererCallback() before removing.\n  static renderer (elem) {\n    if (!elem.shadowRoot) {\n      elem.attachShadow({ mode: 'open' });\n    }\n    patchInner(elem.shadowRoot, () => {\n      const possibleFn = elem.renderCallback(elem);\n      if (isFunction(possibleFn)) {\n        possibleFn();\n      } else if (Array.isArray(possibleFn)) {\n        possibleFn.forEach((fn) => {\n          if (isFunction(fn)) {\n            fn();\n          }\n        });\n      }\n    });\n  }\n\n  // Skate\n  //\n  // DEPRECATED\n  //\n  // Move this to updatedCallback() before removing.\n  static updated (elem, previousProps) {\n    // The 'previousProps' will be undefined if it is the initial render.\n    if (!previousProps) {\n      return true;\n    }\n\n    // The 'previousProps' will always contain all of the keys.\n    //\n    // Use classic loop because:\n    // 'for ... in' skips symbols and 'for ... of' is not working yet with IE!?\n    // for (let nameOrSymbol of getPropNamesAndSymbols(previousProps)) {\n    const namesAndSymbols = getPropNamesAndSymbols(previousProps);\n    for (let i = 0; i < namesAndSymbols.length; i++) {\n      const nameOrSymbol = namesAndSymbols[i];\n\n      // With Object.is NaN is equal to NaN\n      if (!objectIs(previousProps[nameOrSymbol], elem[nameOrSymbol])) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n}\n","export default function uniqueId (prefix) {\n  // http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript/2117523#2117523\n  const rand = 'xxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = Math.random() * 16 | 0;\n    // eslint-disable-next-line no-mixed-operators\n    const v = c === 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n  return `${prefix || 'x'}-${rand}`;\n}\n","import { name as $name } from '../util/symbols';\nimport Component from './component';\nimport uniqueId from '../util/unique-id';\nimport root from 'window-or-global';\n\nexport default function (...args) {\n  const { customElements } = root;\n  let [ name, Ctor ] = args;\n\n  if (!customElements) {\n    throw new Error('Skate requires native custom element support or a polyfill.');\n  }\n\n  // Support passing an anonymous definition.\n  if (args.length === 1) {\n    // We are checking string for now, but once we remove the ability to pass\n    // an object literal, we can change this to check \"function\" and invert the\n    // blocks of logic.\n    if (typeof name === 'string') {\n      throw new Error('When passing only one argument to define(), it must be a custom element constructor.');\n    } else {\n      Ctor = name;\n      name = uniqueId();\n    }\n  }\n\n  // Ensure there's no conflicts.\n  if (customElements.get(name)) {\n    name = uniqueId(name);\n  }\n\n  // DEPRECATED\n  //\n  // Object literals.\n  if (typeof Ctor === 'object') {\n    Ctor = Component.extend(Ctor);\n  }\n\n  // This allows us to check this before instantiating the custom element to\n  // find its name from the constructor in the vdom module, thus improving\n  // performance but still falling back to a robust method.\n  Ctor[$name] = name;\n\n  // Sipmle define. Not supporting customised built-ins yet.\n  customElements.define(name, Ctor);\n\n  // The spec doesn't return but this allows for a simpler, more concise API.\n  return Ctor;\n}\n","import Kefir from 'kefir';\n\nfunction eventsPositionDiff(prevEvent, nextEvent) {\n  //console.log(prevEvent,nextEvent);\n    if(nextEvent.touches) {\n        nextEvent = nextEvent.touches[0];\n    } \n    if(prevEvent.touches) {\n        prevEvent = prevEvent.touches[0];\n    }\n  return {\n    x: nextEvent.clientX - prevEvent.clientX,\n    y: nextEvent.clientY - prevEvent.clientY\n  };\n}\n\nfunction applyMove(currentPosition, move) {\n  //console.log(move);\n  return {\n    x: currentPosition.x + move.x,\n    y: currentPosition.y + move.y\n  };\n}\nconst preventDefault = (event) => { event.preventDefault(); }\nconst drag = Symbol()\n\nexport function startDragging(elem,timeout){\n  timeout = timeout ? timeout : 200;\n  setTimeout(function(){\n    // console.log(elem.style.left,elem.style.top)\n    elem.style.cursor = 'move'\n    elem.style.userSelect = 'none'\n\n    var drag = function(pos) {\n      elem.style.top = pos.y + 'px';\n      elem.style.left = pos.x + 'px';\n    }\n\n    var mouseUps = Kefir.fromEvents(document, 'mouseup').merge(Kefir.fromEvents(document,'touchend'));\n    var mouseMoves = Kefir.fromEvents(document, 'mousemove').merge(Kefir.fromEvents(document,'touchmove'));\n    var mouseDowns = Kefir.fromEvents(elem, 'mousedown').merge(Kefir.fromEvents(elem,'touchstart'));\n    mouseDowns.onValue( preventDefault );\n\n    var moves = mouseDowns.flatMap(function(downEvent) {\n      return mouseMoves.takeUntilBy(mouseUps)\n        .diff(eventsPositionDiff, downEvent);\n    });\n    var rect = elem.getBoundingClientRect();\n    var style = window.getComputedStyle(elem);\n    // console.log(style);\n    var currentPosition = { x: parseInt(rect.left)-parseInt(style.marginLeft),\n                        y: parseInt(rect.top)-parseInt(style.marginTop) };\n                        // console.log(currentPosition);\n    var position = moves.scan(applyMove, currentPosition);\n\n    setTimeout(function(){\n      elem.style.position = \"absolute\";\n      position.onValue(drag);\n    },timeout)\n\n    elem[stopDragging] = function (){\n      elem.style.cursor = 'default'\n      elem.style.userSelect = 'default'\n      position.offValue(drag);\n      mouseDowns.offValue( preventDefault );\n    }\n  },50);\n}\n\nexport function stopDragging(elem){\n  elem[stopDragging]();\n}\n\nexport const draggableHostStyle = `:host {\n  cursor: move;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  position: relative;\n}`\n","const reattacher = Symbol()\n\nexport function detach(elem,timeout){\n  timeout = timeout ? timeout : 200;\n  setTimeout(function(){\n    var rect = elem.getBoundingClientRect();\n    var style = window.getComputedStyle(elem);\n    var oldStyle = elem.style;\n    // console.log(style);\n    var currentPosition = { x: parseInt(rect.left)-parseInt(style.marginLeft),\n                        y: parseInt(rect.top)-parseInt(style.marginTop) };\n\n    setTimeout(function(){\n      elem.style.position = \"absolute\";\n      elem.style.top = currentPosition.y + 'px';\n      elem.style.left = currentPosition.x + 'px';\n    },timeout)\n\n    elem[reattacher] = function (){\n      elem.style = oldStyle\n    }\n  },50);\n}\n\nexport function reattach(elem){\n  elem[reattacher]();\n}\n","import {define, h} from 'skatejs'\nimport {parentSelector} from './parentSelector.js'\n\nconst animate = function(elem){\n  elem.dispatchEvent(new Event('animate'));\n  setTimeout( () => { window.requestAnimationFrame( () => {animate(elem)} ) }, 1000/elem.fps );\n}\n\nconst css = `graph-container, :host {display: inline-table}`\n\nconst GraphContainer = define('graph-container',\n {\n   props: {\n     fps: { attribute: true, default: 120 }\n   },\n   attached(elem) {\n     animate(elem);\n  },\n  attributeChanged(elem) {\n  },\n  render(elem) {\n    return [\n      h('slot', {\n        onSlotchange: (e) => {elem.dispatchEvent(new Event(\"graph-updated\"))}\n      }),\n      h('style',css)\n    ]\n  },\n  updated(elem){\n    // console.log(\"updated\")\n    return true;\n  }\n});\n\nexport function parentGraphContainer(elem){\n  return parentSelector(elem,'graph-container')\n}\n\nexport default GraphContainer\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like __proto__.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  var node;\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : defaultView(node = this.node())\n          .getComputedStyle(node, null)\n          .getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (event) {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([selector == null ? [] : selector], root);\n}\n","export default function() {}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // proceed\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","import {Basis} from \"./basis\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import noop from \"../noop\";\nimport {point} from \"./cardinal\";\n\nexport function CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {point} from \"./cardinal\";\n\nexport function CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {epsilon} from \"../math\";\nimport {Cardinal} from \"./cardinal\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalClosed} from \"./cardinalClosed\";\nimport noop from \"../noop\";\nimport {point} from \"./catmullRom\";\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalOpen} from \"./cardinalOpen\";\nimport {point} from \"./catmullRom\";\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bzier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","import Vec from 'victor'\n\nconst X = Vec(1,0)\nconst P = 100\n// Maybe a more efficient way, but messier to me.\n\n\nfunction center(R){\n  return new Vec(R.left+R.width/2, R.top+R.height/2)\n}\nfunction rad(R){\n  return new Vec(R.width/2,R.height/2)\n}\n\n// This implementation is based on the L-p unit disk being a square as p -> inf\n// pRad is the radius of the p-norm unit circle at angle theta, stretched by\n// the ratio of 'rectangular radii', see here: https://www.desmos.com/calculator/hzrmdr9j6w\nvar pRad = (theta,p,rW,rH) => Math.pow(Math.pow((rH/rW)*Math.cos(theta),p) +\n                                  Math.pow(Math.sin(theta),p), -1/p)\n// pXY is the cartesian coordinates of the point on the p-norm unit \"circle\" at angle theta.\n// the dimensions are unstretched, somehow only using the longer rectangle-radius is necessary (?)\nvar pXY = (theta,p,rW,rH) => new Vec(rH*Math.cos(theta)*pRad(theta,p,rW,rH),rH*Math.sin(theta)*pRad(theta,p,rW,rH))\n\nexport function nearbyEdgePoints(r1,r2,p1,p2,phase,margin){\n  phase = phase ? phase : Math.PI/16;\n  margin = margin ? margin : 0;\n  if (p1 == undefined){p1 = P}\n  if (p1 == true){p1 = 2}\n  if (p2 == undefined){p2 = P}\n  if (p2 == true){p2 = 2}\n\n  var c1 = center(r1), c2 = center(r2);\n  var rad1 = rad(r1), rad2 = rad(r2);\n  var phi = c2.clone().subtract(c1.clone()).angle()\n  var edgePt1 = pXY(phi+phase,p1,rad1.x+margin,rad1.y+margin).add(c1);\n  var edgePt2 = pXY(phi-phase+Math.PI,p2,rad2.x+margin,rad2.y+margin).add(c2) //new Vec(-edgePt1.x, -edgePt1.y);//.multiplyX(rad1).multiplyY(rad1);\n  return([edgePt1, edgePt2])\n}\n\n// export function localFrameEdgeGap(r1,r2,p1,p2,phase,margin){\n//   phase = phase ? phase : Math.PI/16;\n//   margin = margin ? margin : 0;\n//   if (p1 == undefined){p1 = P}\n//   if (p2 == undefined){p2 = P}\n//   var c1 = center(r1), c2 = center(r2);\n//   var dist = c2.subtract(c1);\n//   var rad1 = rad(r1), rad2 = rad(r2);\n//   var phi = c2.clone().subtract(c1.clone()).angle()\n//   var edgePt1 = pRad(phi+phase,p1,rad1.x+margin,rad1.y+margin);\n//   var edgePt2 = pRad(phi-phase+Math.PI,p2,rad2.x+margin,rad2.y+margin) //new Vec(-edgePt1.x, -edgePt1.y);//.multiplyX(rad1).multiplyY(rad1);\n//   return([c1.clone().add(edgePt1),\n//           c2.clone().add(edgePt2)\n//         ])\n// }\n\n// For some reason this implementation isn't working:\n// var abs = Math.abs\n// var mod = (n, m) => ((n.toFixed(3) % m) + m) % m;\n// var saw = (x,m) => (2/m)*(m/2-abs(mod(x,m*2))-m)\n// function clamp(num, low, high) {\n//   return Math.max(Math.min(num,high),low);\n// }\n//\n// var clampedSaw = (x) => -2*clamp(saw(x,Math.PI),-1/2,1/2)\n// var square = (phi) => new Vec(clampedSaw(phi),clampedSaw(phi-Math.PI/2))\n//\n//\n// export function nearbyEdgePoints(r1,r2){\n//   var c1 = center(r1), c2 = center(r2);\n//   var rad1 = rad(r1), rad2 = rad(r2);\n//   var phi = c2.clone().subtract(c1.clone()).angle()\n//   var edgePt1 = square(phi,P);\n//   var edgePt2 = new Vec(-edgePt1.x, -edgePt1.y);//.multiplyX(rad1).multiplyY(rad1);\n//   return([c1.clone().add(edgePt1.multiply(rad1)),\n//           c2.clone().add(edgePt2.multiply(rad2))\n//         ])\n// }\n","import define, {extend} from \"./define\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex3 = /^#([0-9a-f]{3})$/,\n    reHex6 = /^#([0-9a-f]{6})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  toString: function() {\n    return this.rgb() + \"\";\n  }\n});\n\nexport default function color(format) {\n  var m;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format])\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (0 <= this.r && this.r <= 255)\n        && (0 <= this.g && this.g <= 255)\n        && (0 <= this.b && this.b <= 255)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  toString: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"rgb(\" : \"rgba(\")\n        + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","import constant from \"./constant\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis\";\nimport basisClosed from \"./basisClosed\";\nimport {gamma} from \"./color\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDefault from \"./formatDefault\";\nimport formatPrefixAuto from \"./formatPrefixAuto\";\nimport formatRounded from \"./formatRounded\";\n\nexport default {\n  \"\": formatDefault,\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","import formatTypes from \"./formatTypes\";\n\n// [[fill]align][sign][symbol][0][width][,][.precision][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-\\( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?([a-z%])?$/i;\n\nexport default function(specifier) {\n  return new FormatSpecifier(specifier);\n}\n\nfunction FormatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n\n  var match,\n      fill = match[1] || \" \",\n      align = match[2] || \">\",\n      sign = match[3] || \"-\",\n      symbol = match[4] || \"\",\n      zero = !!match[5],\n      width = match[6] && +match[6],\n      comma = !!match[7],\n      precision = match[8] && +match[8].slice(1),\n      type = match[9] || \"\";\n\n  // The \"n\" type is an alias for \",g\".\n  if (type === \"n\") comma = true, type = \"g\";\n\n  // Map invalid types to the default format.\n  else if (!formatTypes[type]) type = \"\";\n\n  // If zero fill is specified, padding goes after sign and before digits.\n  if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n  this.fill = fill;\n  this.align = align;\n  this.sign = sign;\n  this.symbol = symbol;\n  this.zero = zero;\n  this.width = width;\n  this.comma = comma;\n  this.precision = precision;\n  this.type = type;\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width == null ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision == null ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + this.type;\n};\n","import exponent from \"./exponent\";\nimport formatGroup from \"./formatGroup\";\nimport formatSpecifier from \"./formatSpecifier\";\nimport formatTypes from \"./formatTypes\";\nimport {prefixExponent} from \"./formatPrefixAuto\";\n\nvar prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nfunction identity(x) {\n  return x;\n}\n\nexport default function(locale) {\n  var group = locale.grouping && locale.thousands ? formatGroup(locale.grouping, locale.thousands) : identity,\n      currency = locale.currency,\n      decimal = locale.decimal;\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        type = specifier.type;\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currency[0] : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currency[1] : /[%p]/.test(type) ? \"%\" : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = !type || /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision == null ? (type ? 6 : 12)\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Convert negative to positive, and compute the prefix.\n        // Note that -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = (value < 0 || 1 / value < 0) && (value *= -1, true);\n\n        // Perform the initial formatting.\n        value = formatType(value, precision);\n\n        // If the original value was negative, it may be rounded to zero during\n        // formatting; treat this as (positive) zero.\n        if (valueNegative) {\n          i = -1, n = value.length;\n          valueNegative = false;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), (48 < c && c < 58)\n                || (type === \"x\" && 96 < c && c < 103)\n                || (type === \"X\" && 64 < c && c < 71)) {\n              valueNegative = true;\n              break;\n            }\n          }\n        }\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : \"-\") : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = valueSuffix + (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": return valuePrefix + value + valueSuffix + padding;\n        case \"=\": return valuePrefix + padding + value + valueSuffix;\n        case \"^\": return padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length);\n      }\n      return padding + valuePrefix + value + valueSuffix;\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = new Date(+date)), date;\n  }\n\n  interval.floor = interval;\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [];\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(new Date(+start)); while (offseti(start, step), floori(start), start < stop)\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) while (--step >= 0) while (offseti(date, 1), !test(date)) {} // eslint-disable-line no-empty\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval\";\nimport {durationSecond} from \"./duration\";\n\nvar second = interval(function(date) {\n  date.setTime(Math.floor(date / durationSecond) * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar minute = interval(function(date) {\n  date.setTime(Math.floor(date / durationMinute) * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval\";\nimport {durationHour, durationMinute} from \"./duration\";\n\nvar hour = interval(function(date) {\n  var offset = date.getTimezoneOffset() * durationMinute % durationHour;\n  if (offset < 0) offset += durationHour;\n  date.setTime(Math.floor((+date - offset) / durationHour) * durationHour + offset);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval\";\nimport {durationDay, durationMinute} from \"./duration\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval\";\nimport {durationMinute, durationWeek} from \"./duration\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval\";\nimport {durationHour} from \"./duration\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval\";\nimport {durationDay} from \"./duration\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval\";\nimport {durationWeek} from \"./duration\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import interval from \"./interval\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import {timeDay, timeSunday, timeMonday, timeYear, utcDay, utcSunday, utcMonday, utcYear} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newYear(y) {\n  return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"S\": formatSeconds,\n    \"U\": formatWeekNumberSunday,\n    \"w\": formatWeekdayNumber,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"S\": formatUTCSeconds,\n    \"U\": formatUTCWeekNumberSunday,\n    \"w\": formatUTCWeekdayNumber,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"S\": parseSeconds,\n    \"U\": parseWeekNumberSunday,\n    \"w\": parseWeekdayNumber,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, newDate) {\n    return function(string) {\n      var d = newYear(1900),\n          i = parseSpecifier(d, specifier, string += \"\", 0);\n      if (i != string.length) return null;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"W\" in d ? 1 : 0;\n        var day = \"Z\" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return newDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", localDate);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier, utcDate);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?:\\:?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatWeekdayNumber(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCWeekdayNumber(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {utcFormat} from \"./defaultLocale\";\n\nexport var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\nfunction formatIsoNative(date) {\n  return date.toISOString();\n}\n\nvar formatIso = Date.prototype.toISOString\n    ? formatIsoNative\n    : utcFormat(isoSpecifier);\n\nexport default formatIso;\n","import {isoSpecifier} from \"./isoFormat\";\nimport {utcParse} from \"./defaultLocale\";\n\nfunction parseIsoNative(string) {\n  var date = new Date(string);\n  return isNaN(date) ? null : date;\n}\n\nvar parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n    ? parseIsoNative\n    : utcParse(isoSpecifier);\n\nexport default parseIso;\n","export default function(s) {\n  return s.match(/.{6}/g).map(function(x) {\n    return \"#\" + x;\n  });\n}\n","import colors from \"./colors\";\n\nexport default colors(\"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\");\n","import colors from \"./colors\";\n\nexport default colors(\"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\");\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar rainbow = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  rainbow.h = 360 * t - 100;\n  rainbow.s = 1.5 - 1.5 * ts;\n  rainbow.l = 0.8 - 0.9 * ts;\n  return rainbow + \"\";\n}\n","import colors from \"./colors\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","'use strict'\n\n/** Calculator for finding widest and/or shortest paths in a graph using the Floyed-Warshall algorithm. */\nclass FloydWarshall {\n\n  /**\n   * Create a Floyd-Warshall calculator for a specific adjacency matrix.\n   * @param {number[][]} adjacencyMatrix - A square matrix representing a graph with weighted edges.\n   */\n  constructor (adjacencyMatrix) {\n    this.adjacencyMatrix = adjacencyMatrix\n  }\n\n  /**\n   * Calculates the widest distance from one node to the other.\n   * @return {number[][]} - Matrix with distances from a node to the other\n   */\n  get widestPaths () {\n    let distMatrix = this._initializeDistanceMatrix(0)\n    for (let k = 0; k < this.order; ++k) {\n      for (let i = 0; i < this.order; ++i) {\n        if (i === k) { continue }\n        for (let j = 0; j < this.order; ++j) {\n          if (j === i || j === k) { continue }\n          const direct = distMatrix[i][j]\n          const detour = Math.min(distMatrix[i][k], distMatrix[k][j])\n          if (detour > direct) {\n            distMatrix[i][j] = detour\n          }\n        }\n      }\n    }\n    return distMatrix\n  }\n\n  /**\n   * Calculates the shortest paths of the weighted graph.\n   * (The output will not be accurate if the graph has a negative cycle.)\n   * @return {number[][]} - Matrix with distances from a node to the other\n   */\n  get shortestPaths () {\n    let distMatrix = this._initializeDistanceMatrix(Infinity)\n\n    for (let k = 0; k < this.order; ++k) {\n      for (let i = 0; i < this.order; ++i) {\n        for (let j = 0; j < this.order; ++j) {\n          let dist = distMatrix[i][k] + distMatrix[k][j]\n          if (distMatrix[i][j] > dist) {\n            distMatrix[i][j] = dist\n          }\n        }\n      }\n    }\n\n    for (let i = 0; i < this.order; ++i) {\n      for (let j = 0; j < this.order; ++j) {\n        if (distMatrix[i][j] === Infinity) {\n          distMatrix[i][j] = -1\n        }\n      }\n    }\n\n    return distMatrix\n  }\n\n  /**\n   * Get the order of the adjacency matrix (and of the output distance matrices.)\n   * @return {integer} The order of the adjacency matrix.\n   */\n  get order () {\n    return this.adjacencyMatrix.length\n  }\n\n  /**\n   * @private\n   */\n  _initializeDistanceMatrix (blankFiller) {\n    let distMatrix = []\n    for (let i = 0; i < this.order; ++i) {\n      distMatrix[i] = []\n      for (let j = 0; j < this.order; ++j) {\n        if (i === j) {\n          distMatrix[i][j] = 0\n        } else {\n          let val = this.adjacencyMatrix[i][j]\n          if (val) {\n            distMatrix[i][j] = val\n          } else {\n            distMatrix[i][j] = blankFiller\n          }\n        }\n      }\n    }\n    return distMatrix\n  }\n\n}\n\nmodule.exports = FloydWarshall\n","import {edgeModifier, refreshEdges, getNodes} from './edges-all-pairs'\nimport {define, h} from 'skatejs'\nimport {interpolateRainbow} from 'd3-scale'\nimport {selectAll} from 'd3-selection'\nimport FloydWarshall from 'floyd-warshall'\n// import core from 'mathjs/core'\n// import matrices from 'mathjs/lib/type/matrix'\n\n// var math = core.create();\n// math.import(matrices)\nfunction repeatAry(ary, times)\n{\n    var result = Array();\n    for(var i=0;i<times;i++)\n      result = result.concat(ary);\n    return result;\n}\n\nconst rainbow = (max) => (n) => interpolateRainbow(n/max)\nconst parseHops = (val) => JSON.parse(\"[\" + val + \"]\")\nconst hops = (elem,modifier) => (edges) => {\n  var nodes = elem[getNodes]()\n  if (nodes.length < 2) { return []; }\n  var colors = rainbow(nodes.length)\n  var adj = [];\n  for(var i=0; i<nodes.length; i++) {\n      adj[i] = new Array(nodes.length);\n  }\n\n  edges.forEach((edge)=>{\n    adj[nodes.indexOf(edge.source)][nodes.indexOf(edge.target)] = 1;\n  })\n  var hopMatrix = new FloydWarshall(adj).shortestPaths;\n  var hops = []\n  hopMatrix.forEach((row,i)=>{\n    row.forEach((hop,j)=>{\n      if(hop != 1 && modifier.hops.includes(hop)){\n        var thickness = elem.thickness*(1-hop/(nodes.length+1));\n        hops.push({source: nodes[i], target: nodes[j],\n          // segments: [5,10],\n          segments: repeatAry([thickness,thickness],hop-1).concat([thickness,thickness*thickness+5*thickness]),\n          direction: 1, color: colors(hop),\n          thickness: thickness})\n      }\n    })\n  })\n  if(modifier.hops.includes(1)) {\n    hops = hops.concat(edges)\n  }\n return hops;\n}\n\nconst updateHops = (elem) => {\n  var originalEdgeSets = selectAll(elem.children)\n       .filter((d,i,nodes)=>{return nodes[i][edgeModifier];}).nodes()\n  // console.log(originalEdgeSets)\n  originalEdgeSets.forEach((edgeElem)=>{\n    edgeElem[edgeModifier] = hops(edgeElem,elem)\n    edgeElem[refreshEdges]();\n  })\n}\n\ndefine('edges-modifier-hops', {\n  props: {\n    hops: { attribute: true, default: \"2\",\n    coerce(val){ var newVal = parseHops(val); return newVal},\n    // set(elem,data){ updateHops(elem) }\n    }\n  },\n  created(elem){\n    elem[edgeModifier] = (edges) => edges\n    elem[edgeData] = true\n    updateHops(elem);\n  },\n  updated(elem){\n    console.log(\"updating graph hops modifier\",elem.hops)\n    console.log(\"or...\",elem.getAttribute(\"hops\"))\n    updateHops(elem);\n    // return true\n  }\n})\n","import { define, h } from 'skatejs';\nimport {startDragging, stopDragging, draggableHostStyle} from './draggable.js';\n\nvar puppyStyle = `\n  div {\n    display: inline-block;\n    background-image: url('basketball.png');\n    background-position: center;\n    background-size: 100%;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    height: 100%;\n  }\n  puppy-dog {\n    display: inline-block;\n    // position: relative;\n    background-size: 100%;\n    margin: 0;\n    padding: 0;\n    width: 340px;\n    height: 340px;\n  }\n  :host {\n    display: inline-block;\n    // position: relative;\n    background-size: 100%;\n    margin: 0;\n    padding: 0;\n    width: 340px;\n    height: 340px;\n  }\n`\ndefine(\"basket-ball\",{\n    props: {\n      round: { attribute: false, default: true },\n    },\n    attached(elem){\n      startDragging(elem);\n    },\n    detached(elem){\n      // stopDragging(elem);\n    },\n    render(elem){\n      return [h(\"div\",\"\"),h(\"style\",puppyStyle)]\n    },\n    rendered(elem){\n    }\n})\n","window.customElements && eval(`/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This shim allows elements written in, or compiled to, ES5 to work on native\n * implementations of Custom Elements.\n *\n * ES5-style classes don't work with native Custom Elements because the\n * HTMLElement constructor uses the value of \\`new.target\\` to look up the custom\n * element definition for the currently called constructor. \\`new.target\\` is only\n * set when \\`new\\` is called and is only propagated via super() calls. super()\n * is not emulatable in ES5. The pattern of \\`SuperClass.call(this)\\`\\` only works\n * when extending other ES5-style classes, and does not propagate \\`new.target\\`.\n *\n * This shim allows the native HTMLElement constructor to work by generating and\n * registering a stand-in class instead of the users custom element class. This\n * stand-in class's constructor has an actual call to super().\n * \\`customElements.define()\\` and \\`customElements.get()\\` are both overridden to\n * hide this stand-in class from users.\n *\n * In order to create instance of the user-defined class, rather than the stand\n * in, the stand-in's constructor swizzles its instances prototype and invokes\n * the user-defined constructor. When the user-defined constructor is called\n * directly it creates an instance of the stand-in class to get a real extension\n * of HTMLElement and returns that.\n *\n * There are two important constructors: A patched HTMLElement constructor, and\n * the StandInElement constructor. They both will be called to create an element\n * but which is called first depends on whether the browser creates the element\n * or the user-defined constructor is called directly. The variables\n * \\`browserConstruction\\` and \\`userConstruction\\` control the flow between the\n * two constructors.\n *\n * This shim should be better than forcing the polyfill because:\n *   1. It's smaller\n *   2. All reaction timings are the same as native (mostly synchronous)\n *   3. All reaction triggering DOM operations are automatically supported\n *\n * There are some restrictions and requirements on ES5 constructors:\n *   1. All constructors in a inheritance hierarchy must be ES5-style, so that\n *      they can be called with Function.call(). This effectively means that the\n *      whole application must be compiled to ES5.\n *   2. Constructors must return the value of the emulated super() call. Like\n *      \\`return SuperClass.call(this)\\`\n *   3. The \\`this\\` reference should not be used before the emulated super() call\n *      just like \\`this\\` is illegal to use before super() in ES6.\n *   4. Constructors should not create other custom elements before the emulated\n *      super() call. This is the same restriction as with native custom\n *      elements.\n *\n *  Compiling valid class-based custom elements to ES5 will satisfy these\n *  requirements with the latest version of popular transpilers.\n */\n(() => {\n  'use strict';\n\n  const NativeHTMLElement = window.HTMLElement;\n  const nativeDefine = window.customElements.define;\n  const nativeGet = window.customElements.get;\n\n  /**\n   * Map of user-provided constructors to tag names.\n   *\n   * @type {Map<Function, string>}\n   */\n  const tagnameByConstructor = new Map();\n\n  /**\n   * Map of tag names to user-provided constructors.\n   *\n   * @type {Map<string, Function>}\n   */\n  const constructorByTagname = new Map();\n\n\n  /**\n   * Whether the constructors are being called by a browser process, ie parsing\n   * or createElement.\n   */\n  let browserConstruction = false;\n\n  /**\n   * Whether the constructors are being called by a user-space process, ie\n   * calling an element constructor.\n   */\n  let userConstruction = false;\n\n  window.HTMLElement = function() {\n    if (!browserConstruction) {\n      const tagname = tagnameByConstructor.get(this.constructor);\n      const fakeClass = nativeGet.call(window.customElements, tagname);\n\n      // Make sure that the fake constructor doesn't call back to this constructor\n      userConstruction = true;\n      const instance = new (fakeClass)();\n      return instance;\n    }\n    // Else do nothing. This will be reached by ES5-style classes doing\n    // HTMLElement.call() during initialization\n    browserConstruction = false;\n  };\n\n  window.HTMLElement.prototype = Object.create(NativeHTMLElement.prototype);\n  window.HTMLElement.prototype.constructor = window.HTMLElement;\n\n  window.customElements.define = (tagname, elementClass) => {\n    const elementProto = elementClass.prototype;\n    const StandInElement = class extends NativeHTMLElement {\n      constructor() {\n        // Call the native HTMLElement constructor, this gives us the\n        // under-construction instance as \\`this\\`:\n        super();\n\n        // The prototype will be wrong up because the browser used our fake\n        // class, so fix it:\n        Object.setPrototypeOf(this, elementProto);\n\n        if (!userConstruction) {\n          // Make sure that user-defined constructor bottom's out to a do-nothing\n          // HTMLElement() call\n          browserConstruction = true;\n          // Call the user-defined constructor on our instance:\n          elementClass.call(this);\n        }\n        userConstruction = false;\n      }\n    };\n    const standInProto = StandInElement.prototype;\n    StandInElement.observedAttributes = elementClass.observedAttributes;\n    standInProto.connectedCallback = elementProto.connectedCallback;\n    standInProto.disconnectedCallback = elementProto.disconnectedCallback;\n    standInProto.attributeChangedCallback = elementProto.attributeChangedCallback;\n    standInProto.adoptedCallback = elementProto.adoptedCallback;\n\n    tagnameByConstructor.set(elementClass, tagname);\n    constructorByTagname.set(tagname, elementClass);\n    nativeDefine.call(window.customElements, tagname, StandInElement);\n  };\n\n  window.customElements.get = (tagname) => constructorByTagname.get(tagname);\n\n})();`);\n","var babelHelpers = {};\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nexport var jsx = function () {\n  var REACT_ELEMENT_TYPE = typeof Symbol === \"function\" && Symbol.for && Symbol.for(\"react.element\") || 0xeac7;\n  return function createRawReactElement(type, props, key, children) {\n    var defaultProps = type && type.defaultProps;\n    var childrenLength = arguments.length - 3;\n\n    if (!props && childrenLength !== 0) {\n      props = {};\n    }\n\n    if (props && defaultProps) {\n      for (var propName in defaultProps) {\n        if (props[propName] === void 0) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    } else if (!props) {\n      props = defaultProps || {};\n    }\n\n    if (childrenLength === 1) {\n      props.children = children;\n    } else if (childrenLength > 1) {\n      var childArray = Array(childrenLength);\n\n      for (var i = 0; i < childrenLength; i++) {\n        childArray[i] = arguments[i + 3];\n      }\n\n      props.children = childArray;\n    }\n\n    return {\n      $$typeof: REACT_ELEMENT_TYPE,\n      type: type,\n      key: key === undefined ? null : '' + key,\n      ref: null,\n      props: props,\n      _owner: null\n    };\n  };\n}();\n\nexport var asyncIterator = function (iterable) {\n  if (typeof Symbol === \"function\") {\n    if (Symbol.asyncIterator) {\n      var method = iterable[Symbol.asyncIterator];\n      if (method != null) return method.call(iterable);\n    }\n\n    if (Symbol.iterator) {\n      return iterable[Symbol.iterator]();\n    }\n  }\n\n  throw new TypeError(\"Object is not async iterable\");\n};\n\nexport var asyncGenerator = function () {\n  function AwaitValue(value) {\n    this.value = value;\n  }\n\n  function AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function (resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n\n        if (value instanceof AwaitValue) {\n          Promise.resolve(value.value).then(function (arg) {\n            resume(\"next\", arg);\n          }, function (arg) {\n            resume(\"throw\", arg);\n          });\n        } else {\n          settle(result.done ? \"return\" : \"normal\", result.value);\n        }\n      } catch (err) {\n        settle(\"throw\", err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case \"return\":\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case \"throw\":\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== \"function\") {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n    AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n      return this;\n    };\n  }\n\n  AsyncGenerator.prototype.next = function (arg) {\n    return this._invoke(\"next\", arg);\n  };\n\n  AsyncGenerator.prototype.throw = function (arg) {\n    return this._invoke(\"throw\", arg);\n  };\n\n  AsyncGenerator.prototype.return = function (arg) {\n    return this._invoke(\"return\", arg);\n  };\n\n  return {\n    wrap: function (fn) {\n      return function () {\n        return new AsyncGenerator(fn.apply(this, arguments));\n      };\n    },\n    await: function (value) {\n      return new AwaitValue(value);\n    }\n  };\n}();\n\nexport var asyncGeneratorDelegate = function (inner, awaitWrap) {\n  var iter = {},\n      waiting = false;\n\n  function pump(key, value) {\n    waiting = true;\n    value = new Promise(function (resolve) {\n      resolve(inner[key](value));\n    });\n    return {\n      done: false,\n      value: awaitWrap(value)\n    };\n  }\n\n  ;\n\n  if (typeof Symbol === \"function\" && Symbol.iterator) {\n    iter[Symbol.iterator] = function () {\n      return this;\n    };\n  }\n\n  iter.next = function (value) {\n    if (waiting) {\n      waiting = false;\n      return value;\n    }\n\n    return pump(\"next\", value);\n  };\n\n  if (typeof inner.throw === \"function\") {\n    iter.throw = function (value) {\n      if (waiting) {\n        waiting = false;\n        throw value;\n      }\n\n      return pump(\"throw\", value);\n    };\n  }\n\n  if (typeof inner.return === \"function\") {\n    iter.return = function (value) {\n      return pump(\"return\", value);\n    };\n  }\n\n  return iter;\n};\n\nexport var asyncToGenerator = function (fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new Promise(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return Promise.resolve(value).then(function (value) {\n            step(\"next\", value);\n          }, function (err) {\n            step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n};\n\nexport var classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nexport var createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nexport var defineEnumerableProperties = function (obj, descs) {\n  for (var key in descs) {\n    var desc = descs[key];\n    desc.configurable = desc.enumerable = true;\n    if (\"value\" in desc) desc.writable = true;\n    Object.defineProperty(obj, key, desc);\n  }\n\n  return obj;\n};\n\nexport var defaults = function (obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n};\n\nexport var defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexport var get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nexport var inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar _instanceof = function (left, right) {\n  if (right != null && typeof Symbol !== \"undefined\" && right[Symbol.hasInstance]) {\n    return right[Symbol.hasInstance](left);\n  } else {\n    return left instanceof right;\n  }\n};\n\nexport var interopRequireDefault = function (obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n};\n\nexport var interopRequireWildcard = function (obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n};\n\nexport var newArrowCheck = function (innerThis, boundThis) {\n  if (innerThis !== boundThis) {\n    throw new TypeError(\"Cannot instantiate an arrow function\");\n  }\n};\n\nexport var objectDestructuringEmpty = function (obj) {\n  if (obj == null) throw new TypeError(\"Cannot destructure undefined\");\n};\n\nexport var objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nexport var possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nexport var selfGlobal = typeof global === \"undefined\" ? self : global;\n\nexport var set = function set(object, property, value, receiver) {\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent !== null) {\n      set(parent, property, value, receiver);\n    }\n  } else if (\"value\" in desc && desc.writable) {\n    desc.value = value;\n  } else {\n    var setter = desc.set;\n\n    if (setter !== undefined) {\n      setter.call(receiver, value);\n    }\n  }\n\n  return value;\n};\n\nexport var slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nexport var slicedToArrayLoose = function (arr, i) {\n  if (Array.isArray(arr)) {\n    return arr;\n  } else if (Symbol.iterator in Object(arr)) {\n    var _arr = [];\n\n    for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {\n      _arr.push(_step.value);\n\n      if (i && _arr.length === i) break;\n    }\n\n    return _arr;\n  } else {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n  }\n};\n\nexport var taggedTemplateLiteral = function (strings, raw) {\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n};\n\nexport var taggedTemplateLiteralLoose = function (strings, raw) {\n  strings.raw = raw;\n  return strings;\n};\n\nexport var temporalRef = function (val, name, undef) {\n  if (val === undef) {\n    throw new ReferenceError(name + \" is not defined - temporal dead zone\");\n  } else {\n    return val;\n  }\n};\n\nexport var temporalUndefined = {};\n\nexport var toArray = function (arr) {\n  return Array.isArray(arr) ? arr : Array.from(arr);\n};\n\nexport var toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nbabelHelpers;\n\nexport { _typeof as typeof, _extends as extends, _instanceof as instanceof }","/*\n\n Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n Code distributed by Google as part of the polymer project is also\n subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n'use strict';(function(){function c(){this.a=new Map;this.j=new Map;this.h=new Map;this.o=new Set;this.C=new MutationObserver(this.D.bind(this));this.f=null;this.F=new Set;this.enableFlush=!0;this.s=!1;this.m=null}function g(){return h.customElements}function k(a){if(!/^[a-z][.0-9_a-z]*-[\\-.0-9_a-z]*$/.test(a)||-1!==r.indexOf(a))return Error(\"The element name '\"+a+\"' is not valid.\")}function l(a,b,e,d){var c=g();a=e?m.call(a,b,e):m.call(a,b);(b=c.a.get(b.toLowerCase()))&&c.u(a,b,d);c.b(a);return a}\nfunction n(a,b,e,d){b=b.toLowerCase();var c=a.getAttribute(b);d.call(a,b,e);1==a.__$CE_upgraded&&(d=g().a.get(a.localName),e=d.A,(d=d.i)&&0<=e.indexOf(b)&&(e=a.getAttribute(b),e!==c&&d.call(a,b,c,e,null)))}var f=document,h=window;if(g()&&(g().g=function(){},!g().forcePolyfill))return;var r=\"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph\".split(\" \");c.prototype.L=function(a,b){function e(a){var b=f[a];if(void 0!==b&&\"function\"!==typeof b)throw Error(c+\n\" '\"+a+\"' is not a Function\");return b}if(\"function\"!==typeof b)throw new TypeError(\"constructor must be a Constructor\");var d=k(a);if(d)throw d;if(this.a.has(a))throw Error(\"An element with name '\"+a+\"' is already defined\");if(this.j.has(b))throw Error(\"Definition failed for '\"+a+\"': The constructor is already used.\");var c=a,f=b.prototype;if(\"object\"!==typeof f)throw new TypeError(\"Definition failed for '\"+a+\"': constructor.prototype must be an object\");var d=e(\"connectedCallback\"),g=e(\"disconnectedCallback\"),\nh=e(\"attributeChangedCallback\");this.a.set(c,{name:a,localName:c,constructor:b,v:d,w:g,i:h,A:h&&b.observedAttributes||[]});this.j.set(b,c);this.K();if(a=this.h.get(c))a.resolve(void 0),this.h.delete(c)};c.prototype.get=function(a){return(a=this.a.get(a))?a.constructor:void 0};c.prototype.M=function(a){var b=k(a);if(b)return Promise.reject(b);if(this.a.has(a))return Promise.resolve();if(b=this.h.get(a))return b.N;var e,d=new Promise(function(a){e=a}),b={N:d,resolve:e};this.h.set(a,b);return d};c.prototype.g=\nfunction(){this.enableFlush&&(this.l(this.m.takeRecords()),this.D(this.C.takeRecords()),this.o.forEach(function(a){this.l(a.takeRecords())},this))};c.prototype.K=function(){var a=this;if(!this.s){this.s=!0;var b=function(){a.s=!1;a.m||(a.m=a.b(f));a.c(f.childNodes)};window.HTMLImports?window.HTMLImports.whenReady(b):b()}};c.prototype.I=function(a){this.f=a};c.prototype.b=function(a){if(null!=a.__$CE_observer)return a.__$CE_observer;a.__$CE_observer=new MutationObserver(this.l.bind(this));a.__$CE_observer.observe(a,\n{childList:!0,subtree:!0});this.enableFlush&&this.o.add(a.__$CE_observer);return a.__$CE_observer};c.prototype.J=function(a){null!=a.__$CE_observer&&(a.__$CE_observer.disconnect(),this.enableFlush&&this.o.delete(a.__$CE_observer),a.__$CE_observer=null)};c.prototype.l=function(a){for(var b=0;b<a.length;b++){var e=a[b];if(\"childList\"===e.type){var d=e.removedNodes;this.c(e.addedNodes);this.H(d)}}};c.prototype.c=function(a,b){b=b||new Set;for(var e=0;e<a.length;e++){var d=a[e];if(d.nodeType===Node.ELEMENT_NODE){this.J(d);\nd=f.createTreeWalker(d,NodeFilter.SHOW_ELEMENT,null,!1);do this.G(d.currentNode,b);while(d.nextNode())}}};c.prototype.G=function(a,b){if(!b.has(a)){b.add(a);var e=this.a.get(a.localName);if(e){a.__$CE_upgraded||this.u(a,e,!0);var d;if(d=a.__$CE_upgraded&&!a.__$CE_attached)a:{d=a;do{if(d.__$CE_attached||d.nodeType===Node.DOCUMENT_NODE){d=!0;break a}d=d.parentNode||d.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&d.host}while(d);d=!1}d&&(a.__$CE_attached=!0,e.v&&e.v.call(a))}a.shadowRoot&&this.c(a.shadowRoot.childNodes,\nb);\"LINK\"===a.tagName&&a.rel&&-1!==a.rel.toLowerCase().split(\" \").indexOf(\"import\")&&this.B(a,b)}};c.prototype.B=function(a,b){var e=a.import;if(e)b.has(e)||(b.add(e),e.__$CE_observer||this.b(e),this.c(e.childNodes,b));else if(b=a.href,!this.F.has(b)){this.F.add(b);var d=this,c=function(){a.removeEventListener(\"load\",c);a.import.__$CE_observer||d.b(a.import);d.c(a.import.childNodes)};a.addEventListener(\"load\",c)}};c.prototype.H=function(a){for(var b=0;b<a.length;b++){var e=a[b];if(e.nodeType===Node.ELEMENT_NODE){this.b(e);\ne=f.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1);do{var d=e.currentNode;if(d.__$CE_upgraded&&d.__$CE_attached){d.__$CE_attached=!1;var c=this.a.get(d.localName);c&&c.w&&c.w.call(d)}}while(e.nextNode())}}};c.prototype.u=function(a,b,e){a.__proto__=b.constructor.prototype;e&&(this.I(a),new b.constructor,a.__$CE_upgraded=!0,console.assert(!this.f));e=b.A;if((b=b.i)&&0<e.length){this.C.observe(a,{attributes:!0,attributeOldValue:!0,attributeFilter:e});for(var d=0;d<e.length;d++){var c=e[d];if(a.hasAttribute(c)){var f=\na.getAttribute(c);b.call(a,c,null,f,null)}}}};c.prototype.D=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(\"attributes\"===c.type){var d=c.target,f=this.a.get(d.localName),g=c.attributeName,h=c.oldValue,k=d.getAttribute(g);k!==h&&f.i.call(d,g,h,k,c.attributeNamespace)}}};window.CustomElementRegistry=c;c.prototype.define=c.prototype.L;c.prototype.get=c.prototype.get;c.prototype.whenDefined=c.prototype.M;c.prototype.flush=c.prototype.g;c.prototype.polyfilled=!0;c.prototype._observeRoot=c.prototype.b;\nc.prototype._addImport=c.prototype.B;var p=h.HTMLElement;c.prototype.nativeHTMLElement=p;h.HTMLElement=function(){var a=g();if(a.f){var b=a.f;a.f=null;return b}if(this.constructor)return a=a.j.get(this.constructor),l(f,a,void 0,!1);throw Error(\"Unknown constructor. Did you call customElements.define()?\");};h.HTMLElement.prototype=Object.create(p.prototype,{constructor:{value:h.HTMLElement,configurable:!0,writable:!0}});var m=f.createElement;f.createElement=function(a,b){return l(f,a,b,!0)};var t=\nf.createElementNS;f.createElementNS=function(a,b){return\"http://www.w3.org/1999/xhtml\"===a?f.createElement(b):t.call(f,a,b)};var q=Element.prototype.attachShadow;q&&Object.defineProperty(Element.prototype,\"attachShadow\",{value:function(a){a=q.call(this,a);g().b(a);return a}});var u=f.importNode;f.importNode=function(a,b){a=u.call(f,a,b);g().c(a.nodeType===Node.ELEMENT_NODE?[a]:a.childNodes);return a};var v=Element.prototype.setAttribute;Element.prototype.setAttribute=function(a,b){n(this,a,b,v)};\nvar w=Element.prototype.removeAttribute;Element.prototype.removeAttribute=function(a){n(this,a,null,w)};Object.defineProperty(window,\"customElements\",{value:new c,configurable:!0,enumerable:!0});window.CustomElements={takeRecords:function(){g().g&&g().g()}}})();\n\n//# sourceMappingURL=custom-elements.min.js.map\n","(function () {\n'use strict';\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar settings = window.ShadyDOM || {};\n\nsettings.hasNativeShadowDOM = Boolean(Element.prototype.attachShadow && Node.prototype.getRootNode);\n\nsettings.inUse = settings.force || !settings.hasNativeShadowDOM;\n\nfunction isShadyRoot(obj) {\n  return Boolean(obj.__localName === 'ShadyRoot');\n}\n\nvar p = Element.prototype;\nvar matches = p.matches || p.matchesSelector ||\n  p.mozMatchesSelector || p.msMatchesSelector ||\n  p.oMatchesSelector || p.webkitMatchesSelector;\n\nfunction matchesSelector(element, selector) {\n  return matches.call(element, selector);\n}\n\nfunction copyOwnProperty(name, source, target) {\n  var pd = Object.getOwnPropertyDescriptor(source, name);\n  if (pd) {\n    Object.defineProperty(target, name, pd);\n  }\n}\n\nfunction extend(target, source) {\n  if (target && source) {\n    var n$ = Object.getOwnPropertyNames(source);\n    for (var i=0, n; (i<n$.length) && (n=n$[i]); i++) {\n      copyOwnProperty(n, source, target);\n    }\n  }\n  return target || source;\n}\n\nfunction extendAll(target) {\n  var sources = [], len = arguments.length - 1;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];\n\n  for (var i=0; i < sources.length; i++) {\n    extend(target, sources[i]);\n  }\n  return target;\n}\n\nfunction mixin(target, source) {\n  for (var i in source) {\n    target[i] = source[i];\n  }\n  return target;\n}\n\nvar setPrototypeOf = Object.setPrototypeOf || function(obj, proto) {\n  obj.__proto__ = proto;\n  return obj;\n}\n\nfunction patchPrototype(obj, mixin) {\n  var proto = Object.getPrototypeOf(obj);\n  if (!proto.hasOwnProperty('__patchProto')) {\n    var patchProto = Object.create(proto);\n    patchProto.__sourceProto = proto;\n    extend(patchProto, mixin);\n    proto.__patchProto = patchProto;\n  }\n  setPrototypeOf(obj, proto.__patchProto);\n}\n\n\n\nvar common = {};\n\n// TODO(sorvell): actually rely on a real Promise polyfill...\nvar promish;\nif (window.Promise) {\n  promish = Promise.resolve();\n} else {\n  promish = {\n    then: function(cb) {\n      var twiddle = document.createTextNode('');\n      var observer = new MutationObserver(function() {\n        observer.disconnect();\n        cb();\n      });\n      observer.observe(twiddle, {characterData: true});\n    }\n  }\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction newSplice(index, removed, addedCount) {\n  return {\n    index: index,\n    removed: removed,\n    addedCount: addedCount\n  };\n}\n\nvar EDIT_LEAVE = 0;\nvar EDIT_UPDATE = 1;\nvar EDIT_ADD = 2;\nvar EDIT_DELETE = 3;\n\nvar ArraySplice = {\n\n  // Note: This function is *based* on the computation of the Levenshtein\n  // \"edit\" distance. The one change is that \"updates\" are treated as two\n  // edits - not one. With Array splices, an update is really a delete\n  // followed by an add. By retaining this, we optimize for \"keeping\" the\n  // maximum array items in the original array. For example:\n  //\n  //   'xxxx123' -> '123yyyy'\n  //\n  // With 1-edit updates, the shortest path would be just to update all seven\n  // characters. With 2-edit updates, we delete 4, leave 3, and add 4. This\n  // leaves the substring '123' intact.\n  calcEditDistances: function calcEditDistances(current, currentStart, currentEnd,\n                              old, oldStart, oldEnd) {\n    var this$1 = this;\n\n    // \"Deletion\" columns\n    var rowCount = oldEnd - oldStart + 1;\n    var columnCount = currentEnd - currentStart + 1;\n    var distances = new Array(rowCount);\n\n    // \"Addition\" rows. Initialize null column.\n    for (var i = 0; i < rowCount; i++) {\n      distances[i] = new Array(columnCount);\n      distances[i][0] = i;\n    }\n\n    // Initialize null row\n    for (var j = 0; j < columnCount; j++)\n      distances[0][j] = j;\n\n    for (var i$1 = 1; i$1 < rowCount; i$1++) {\n      for (var j$1 = 1; j$1 < columnCount; j$1++) {\n        if (this$1.equals(current[currentStart + j$1 - 1], old[oldStart + i$1 - 1]))\n          distances[i$1][j$1] = distances[i$1 - 1][j$1 - 1];\n        else {\n          var north = distances[i$1 - 1][j$1] + 1;\n          var west = distances[i$1][j$1 - 1] + 1;\n          distances[i$1][j$1] = north < west ? north : west;\n        }\n      }\n    }\n\n    return distances;\n  },\n\n  // This starts at the final weight, and walks \"backward\" by finding\n  // the minimum previous weight recursively until the origin of the weight\n  // matrix.\n  spliceOperationsFromEditDistances: function spliceOperationsFromEditDistances(distances) {\n    var i = distances.length - 1;\n    var j = distances[0].length - 1;\n    var current = distances[i][j];\n    var edits = [];\n    while (i > 0 || j > 0) {\n      if (i == 0) {\n        edits.push(EDIT_ADD);\n        j--;\n        continue;\n      }\n      if (j == 0) {\n        edits.push(EDIT_DELETE);\n        i--;\n        continue;\n      }\n      var northWest = distances[i - 1][j - 1];\n      var west = distances[i - 1][j];\n      var north = distances[i][j - 1];\n\n      var min;\n      if (west < north)\n        min = west < northWest ? west : northWest;\n      else\n        min = north < northWest ? north : northWest;\n\n      if (min == northWest) {\n        if (northWest == current) {\n          edits.push(EDIT_LEAVE);\n        } else {\n          edits.push(EDIT_UPDATE);\n          current = northWest;\n        }\n        i--;\n        j--;\n      } else if (min == west) {\n        edits.push(EDIT_DELETE);\n        i--;\n        current = west;\n      } else {\n        edits.push(EDIT_ADD);\n        j--;\n        current = north;\n      }\n    }\n\n    edits.reverse();\n    return edits;\n  },\n\n  /**\n   * Splice Projection functions:\n   *\n   * A splice map is a representation of how a previous array of items\n   * was transformed into a new array of items. Conceptually it is a list of\n   * tuples of\n   *\n   *   <index, removed, addedCount>\n   *\n   * which are kept in ascending index order of. The tuple represents that at\n   * the |index|, |removed| sequence of items were removed, and counting forward\n   * from |index|, |addedCount| items were added.\n   */\n\n  /**\n   * Lacking individual splice mutation information, the minimal set of\n   * splices can be synthesized given the previous state and final state of an\n   * array. The basic approach is to calculate the edit distance matrix and\n   * choose the shortest path through it.\n   *\n   * Complexity: O(l * p)\n   *   l: The length of the current array\n   *   p: The length of the old array\n   */\n  calcSplices: function calcSplices(current, currentStart, currentEnd,\n                        old, oldStart, oldEnd) {\n    var prefixCount = 0;\n    var suffixCount = 0;\n    var splice;\n\n    var minLength = Math.min(currentEnd - currentStart, oldEnd - oldStart);\n    if (currentStart == 0 && oldStart == 0)\n      prefixCount = this.sharedPrefix(current, old, minLength);\n\n    if (currentEnd == current.length && oldEnd == old.length)\n      suffixCount = this.sharedSuffix(current, old, minLength - prefixCount);\n\n    currentStart += prefixCount;\n    oldStart += prefixCount;\n    currentEnd -= suffixCount;\n    oldEnd -= suffixCount;\n\n    if (currentEnd - currentStart == 0 && oldEnd - oldStart == 0)\n      return [];\n\n    if (currentStart == currentEnd) {\n      splice = newSplice(currentStart, [], 0);\n      while (oldStart < oldEnd)\n        splice.removed.push(old[oldStart++]);\n\n      return [ splice ];\n    } else if (oldStart == oldEnd)\n      return [ newSplice(currentStart, [], currentEnd - currentStart) ];\n\n    var ops = this.spliceOperationsFromEditDistances(\n        this.calcEditDistances(current, currentStart, currentEnd,\n                               old, oldStart, oldEnd));\n\n    splice = undefined;\n    var splices = [];\n    var index = currentStart;\n    var oldIndex = oldStart;\n    for (var i = 0; i < ops.length; i++) {\n      switch(ops[i]) {\n        case EDIT_LEAVE:\n          if (splice) {\n            splices.push(splice);\n            splice = undefined;\n          }\n\n          index++;\n          oldIndex++;\n          break;\n        case EDIT_UPDATE:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.addedCount++;\n          index++;\n\n          splice.removed.push(old[oldIndex]);\n          oldIndex++;\n          break;\n        case EDIT_ADD:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.addedCount++;\n          index++;\n          break;\n        case EDIT_DELETE:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.removed.push(old[oldIndex]);\n          oldIndex++;\n          break;\n      }\n    }\n\n    if (splice) {\n      splices.push(splice);\n    }\n    return splices;\n  },\n\n  sharedPrefix: function sharedPrefix(current, old, searchLength) {\n    var this$1 = this;\n\n    for (var i = 0; i < searchLength; i++)\n      if (!this$1.equals(current[i], old[i]))\n        return i;\n    return searchLength;\n  },\n\n  sharedSuffix: function sharedSuffix(current, old, searchLength) {\n    var index1 = current.length;\n    var index2 = old.length;\n    var count = 0;\n    while (count < searchLength && this.equals(current[--index1], old[--index2]))\n      count++;\n\n    return count;\n  },\n\n  calculateSplices: function calculateSplices$1(current, previous) {\n    return this.calcSplices(current, 0, current.length, previous, 0,\n                            previous.length);\n  },\n\n  equals: function equals(currentValue, previousValue) {\n    return currentValue === previousValue;\n  }\n\n};\n\nvar calculateSplices = function (current, previous) { return ArraySplice.calculateSplices(current, previous); };\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// TODO(sorvell): circular (patch loads tree and tree loads patch)\n// for now this is stuck on `utils`\n//import {patchNode} from './patch'\n// native add/remove\nvar nativeInsertBefore = Element.prototype.insertBefore;\nvar nativeAppendChild = Element.prototype.appendChild;\nvar nativeRemoveChild = Element.prototype.removeChild;\n\n/**\n * `tree` is a dom manipulation library used by ShadyDom to\n * manipulate composed and logical trees.\n */\nvar tree = {\n\n  // sad but faster than slice...\n  arrayCopyChildNodes: function arrayCopyChildNodes(parent) {\n    var copy=[], i=0;\n    for (var n=parent.firstChild; n; n=n.nextSibling) {\n      copy[i++] = n;\n    }\n    return copy;\n  },\n\n  arrayCopyChildren: function arrayCopyChildren(parent) {\n    var copy=[], i=0;\n    for (var n=parent.firstElementChild; n; n=n.nextElementSibling) {\n      copy[i++] = n;\n    }\n    return copy;\n  },\n\n  arrayCopy: function arrayCopy(a$) {\n    var l = a$.length;\n    var copy = new Array(l);\n    for (var i=0; i < l; i++) {\n      copy[i] = a$[i];\n    }\n    return copy;\n  },\n\n  saveChildNodes: function saveChildNodes(node) {\n    tree.Logical.saveChildNodes(node);\n    if (!tree.Composed.hasParentNode(node)) {\n      tree.Composed.saveComposedData(node);\n      //tree.Composed.saveParentNode(node);\n    }\n    tree.Composed.saveChildNodes(node);\n  }\n\n};\n\ntree.Logical = {\n\n  hasParentNode: function hasParentNode(node) {\n    return Boolean(node.__dom && node.__dom.parentNode);\n  },\n\n  hasChildNodes: function hasChildNodes(node) {\n    return Boolean(node.__dom && node.__dom.childNodes !== undefined);\n  },\n\n  getChildNodes: function getChildNodes(node) {\n    // note: we're distinguishing here between undefined and false-y:\n    // hasChildNodes uses undefined check to see if this element has logical\n    // children; the false-y check indicates whether or not we should rebuild\n    // the cached childNodes array.\n    return this.hasChildNodes(node) ? this._getChildNodes(node) :\n      tree.Composed.getChildNodes(node);\n  },\n\n  _getChildNodes: function _getChildNodes(node) {\n    if (!node.__dom.childNodes) {\n      node.__dom.childNodes = [];\n      for (var n=this.getFirstChild(node); n; n=this.getNextSibling(n)) {\n        node.__dom.childNodes.push(n);\n      }\n    }\n    return node.__dom.childNodes;\n  },\n\n  // NOTE: __dom can be created under 2 conditions: (1) an element has a\n  // logical tree, or (2) an element is in a logical tree. In case (1), the\n  // element will store firstChild/lastChild, and in case (2), the element\n  // will store parentNode, nextSibling, previousSibling. This means that\n  // the mere existence of __dom is not enough to know if the requested\n  // logical data is available and instead we do an explicit undefined check.\n  getParentNode: function getParentNode(node) {\n    return node.__dom && node.__dom.parentNode !== undefined ?\n      node.__dom.parentNode : tree.Composed.getParentNode(node);\n  },\n\n  getFirstChild: function getFirstChild(node) {\n    return node.__dom && node.__dom.firstChild !== undefined ?\n      node.__dom.firstChild : tree.Composed.getFirstChild(node);\n  },\n\n  getLastChild: function getLastChild(node) {\n    return node.__dom && node.__dom.lastChild  !== undefined ?\n      node.__dom.lastChild : tree.Composed.getLastChild(node);\n  },\n\n  getNextSibling: function getNextSibling(node) {\n    return node.__dom && node.__dom.nextSibling  !== undefined ?\n      node.__dom.nextSibling : tree.Composed.getNextSibling(node);\n  },\n\n  getPreviousSibling: function getPreviousSibling(node) {\n    return node.__dom && node.__dom.previousSibling  !== undefined ?\n      node.__dom.previousSibling : tree.Composed.getPreviousSibling(node);\n  },\n\n  getFirstElementChild: function getFirstElementChild(node) {\n    return node.__dom && node.__dom.firstChild !== undefined ?\n      this._getFirstElementChild(node) :\n      tree.Composed.getFirstElementChild(node);\n  },\n\n  _getFirstElementChild: function _getFirstElementChild(node) {\n    var n = node.__dom.firstChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.nextSibling;\n    }\n    return n;\n  },\n\n  getLastElementChild: function getLastElementChild(node) {\n    return node.__dom && node.__dom.lastChild !== undefined ?\n      this._getLastElementChild(node) :\n      tree.Composed.getLastElementChild(node);\n  },\n\n  _getLastElementChild: function _getLastElementChild(node) {\n    var n = node.__dom.lastChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.previousSibling;\n    }\n    return n;\n  },\n\n  getNextElementSibling: function getNextElementSibling(node) {\n    return node.__dom && node.__dom.nextSibling !== undefined ?\n      this._getNextElementSibling(node) :\n      tree.Composed.getNextElementSibling(node);\n  },\n\n  _getNextElementSibling: function _getNextElementSibling(node) {\n    var this$1 = this;\n\n    var n = node.__dom.nextSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this$1.getNextSibling(n);\n    }\n    return n;\n  },\n\n  getPreviousElementSibling: function getPreviousElementSibling(node) {\n    return node.__dom && node.__dom.previousSibling !== undefined ?\n      this._getPreviousElementSibling(node) :\n      tree.Composed.getPreviousElementSibling(node);\n  },\n\n  _getPreviousElementSibling: function _getPreviousElementSibling(node) {\n    var this$1 = this;\n\n    var n = node.__dom.previousSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this$1.getPreviousSibling(n);\n    }\n    return n;\n  },\n\n  // Capture the list of light children. It's important to do this before we\n  // start transforming the DOM into \"rendered\" state.\n  // Children may be added to this list dynamically. It will be treated as the\n  // source of truth for the light children of the element. This element's\n  // actual children will be treated as the rendered state once this function\n  // has been called.\n  saveChildNodes: function saveChildNodes$1(node) {\n    if (!this.hasChildNodes(node)) {\n      node.__dom = node.__dom || {};\n      node.__dom.firstChild = node.firstChild;\n      node.__dom.lastChild = node.lastChild;\n      var c$ = node.__dom.childNodes = tree.arrayCopyChildNodes(node);\n      for (var i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n        n.__dom = n.__dom || {};\n        n.__dom.parentNode = node;\n        n.__dom.nextSibling = c$[i+1] || null;\n        n.__dom.previousSibling = c$[i-1] || null;\n        common.patchNode(n);\n      }\n    }\n  },\n\n  // TODO(sorvell): may need to patch saveChildNodes iff the tree has\n  // already been distributed.\n  // NOTE: ensure `node` is patched...\n  recordInsertBefore: function recordInsertBefore(node, container, ref_node) {\n    var this$1 = this;\n\n    container.__dom.childNodes = null;\n    // handle document fragments\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      var c$ = tree.arrayCopyChildNodes(node);\n      for (var i=0; i < c$.length; i++) {\n        this$1._linkNode(c$[i], container, ref_node);\n      }\n      // cleanup logical dom in doc fragment.\n      node.__dom = node.__dom || {};\n      node.__dom.firstChild = node.__dom.lastChild = null;\n      node.__dom.childNodes = null;\n    } else {\n      this._linkNode(node, container, ref_node);\n    }\n  },\n\n  _linkNode: function _linkNode(node, container, ref_node) {\n    common.patchNode(node);\n    ref_node = ref_node || null;\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (ref_node) {\n      ref_node.__dom = ref_node.__dom || {};\n    }\n    // update ref_node.previousSibling <-> node\n    node.__dom.previousSibling = ref_node ? ref_node.__dom.previousSibling :\n      container.__dom.lastChild;\n    if (node.__dom.previousSibling) {\n      node.__dom.previousSibling.__dom.nextSibling = node;\n    }\n    // update node <-> ref_node\n    node.__dom.nextSibling = ref_node;\n    if (node.__dom.nextSibling) {\n      node.__dom.nextSibling.__dom.previousSibling = node;\n    }\n    // update node <-> container\n    node.__dom.parentNode = container;\n    if (ref_node) {\n      if (ref_node === container.__dom.firstChild) {\n        container.__dom.firstChild = node;\n      }\n    } else {\n      container.__dom.lastChild = node;\n      if (!container.__dom.firstChild) {\n        container.__dom.firstChild = node;\n      }\n    }\n    // remove caching of childNodes\n    container.__dom.childNodes = null;\n  },\n\n  recordRemoveChild: function recordRemoveChild(node, container) {\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (node === container.__dom.firstChild) {\n      container.__dom.firstChild = node.__dom.nextSibling;\n    }\n    if (node === container.__dom.lastChild) {\n      container.__dom.lastChild = node.__dom.previousSibling;\n    }\n    var p = node.__dom.previousSibling;\n    var n = node.__dom.nextSibling;\n    if (p) {\n      p.__dom = p.__dom || {};\n      p.__dom.nextSibling = n;\n    }\n    if (n) {\n      n.__dom = n.__dom || {};\n      n.__dom.previousSibling = p;\n    }\n    // When an element is removed, logical data is no longer tracked.\n    // Explicitly set `undefined` here to indicate this. This is disginguished\n    // from `null` which is set if info is null.\n    node.__dom.parentNode = node.__dom.previousSibling =\n      node.__dom.nextSibling = null;\n    // remove caching of childNodes\n    container.__dom.childNodes = null;\n  }\n\n}\n\n\n// TODO(sorvell): composed tree manipulation is made available\n// (1) to maninpulate the composed tree, and (2) to track changes\n// to the tree for optional patching pluggability.\ntree.Composed = {\n\n  hasParentNode: function hasParentNode$1(node) {\n    return Boolean(node.__dom && node.__dom.$parentNode !== undefined);\n  },\n\n  hasChildNodes: function hasChildNodes$1(node) {\n    return Boolean(node.__dom && node.__dom.$childNodes !== undefined);\n  },\n\n  getChildNodes: function getChildNodes$1(node) {\n    return this.hasChildNodes(node) ? this._getChildNodes(node) :\n      (!node.__patched && tree.arrayCopy(node.childNodes));\n  },\n\n  _getChildNodes: function _getChildNodes$1(node) {\n    if (!node.__dom.$childNodes) {\n      node.__dom.$childNodes = [];\n      for (var n=node.__dom.$firstChild; n; n=n.__dom.$nextSibling) {\n        node.__dom.$childNodes.push(n);\n      }\n    }\n    return node.__dom.$childNodes;\n  },\n\n  getComposedChildNodes: function getComposedChildNodes(node) {\n    return node.__dom.$childNodes;\n  },\n\n  getParentNode: function getParentNode$1(node) {\n    return this.hasParentNode(node) ? node.__dom.$parentNode :\n      (!node.__patched && node.parentNode);\n  },\n\n  getFirstChild: function getFirstChild$1(node) {\n    return node.__patched ? node.__dom.$firstChild : node.firstChild;\n  },\n\n  getLastChild: function getLastChild$1(node) {\n    return node.__patched ? node.__dom.$lastChild : node.lastChild;\n  },\n\n  getNextSibling: function getNextSibling$1(node) {\n    return node.__patched ? node.__dom.$nextSibling : node.nextSibling;\n  },\n\n  getPreviousSibling: function getPreviousSibling$1(node) {\n    return node.__patched ? node.__dom.$previousSibling : node.previousSibling;\n  },\n\n  getFirstElementChild: function getFirstElementChild$1(node) {\n    return node.__patched ? this._getFirstElementChild(node) :\n      node.firstElementChild;\n  },\n\n  _getFirstElementChild: function _getFirstElementChild$1(node) {\n    var n = node.__dom.$firstChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.$nextSibling;\n    }\n    return n;\n  },\n\n  getLastElementChild: function getLastElementChild$1(node) {\n    return node.__patched ? this._getLastElementChild(node) :\n      node.lastElementChild;\n  },\n\n  _getLastElementChild: function _getLastElementChild$1(node) {\n    var n = node.__dom.$lastChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.$previousSibling;\n    }\n    return n;\n  },\n\n  getNextElementSibling: function getNextElementSibling$1(node) {\n    return node.__patched ? this._getNextElementSibling(node) :\n      node.nextElementSibling;\n  },\n\n  _getNextElementSibling: function _getNextElementSibling$1(node) {\n    var this$1 = this;\n\n    var n = node.__dom.$nextSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this$1.getNextSibling(n);\n    }\n    return n;\n  },\n\n  getPreviousElementSibling: function getPreviousElementSibling$1(node) {\n    return node.__patched ? this._getPreviousElementSibling(node) :\n      node.previousElementSibling;\n  },\n\n  _getPreviousElementSibling: function _getPreviousElementSibling$1(node) {\n    var this$1 = this;\n\n    var n = node.__dom.$previousSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this$1.getPreviousSibling(n);\n    }\n    return n;\n  },\n\n  saveChildNodes: function saveChildNodes$2(node) {\n    var this$1 = this;\n\n    if (!this.hasChildNodes(node)) {\n      node.__dom = node.__dom || {};\n      node.__dom.$firstChild = node.firstChild;\n      node.__dom.$lastChild = node.lastChild;\n      var c$ = node.__dom.$childNodes = tree.arrayCopyChildNodes(node);\n      for (var i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n        this$1.saveComposedData(n);\n      }\n    }\n  },\n\n  saveComposedData: function saveComposedData(node) {\n    node.__dom = node.__dom || {};\n    if (node.__dom.$parentNode === undefined) {\n      node.__dom.$parentNode = node.parentNode;\n    }\n    if (node.__dom.$nextSibling === undefined) {\n      node.__dom.$nextSibling = node.nextSibling;\n    }\n    if (node.__dom.$previousSibling === undefined) {\n      node.__dom.$previousSibling = node.previousSibling;\n    }\n  },\n\n  recordInsertBefore: function recordInsertBefore$1(node, container, ref_node) {\n    var this$1 = this;\n\n    container.__dom.$childNodes = null;\n    // handle document fragments\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      // TODO(sorvell): remember this for patching:\n      // the act of setting this info can affect patched nodes\n      // getters; therefore capture childNodes before patching.\n      for (var n=this.getFirstChild(node); n; n=this.getNextSibling(n)) {\n        this$1._linkNode(n, container, ref_node);\n      }\n    } else {\n      this._linkNode(node, container, ref_node);\n    }\n  },\n\n  _linkNode: function _linkNode$1(node, container, ref_node) {\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (ref_node) {\n      ref_node.__dom = ref_node.__dom || {};\n    }\n    // update ref_node.previousSibling <-> node\n    node.__dom.$previousSibling = ref_node ? ref_node.__dom.$previousSibling :\n      container.__dom.$lastChild;\n    if (node.__dom.$previousSibling) {\n      node.__dom.$previousSibling.__dom.$nextSibling = node;\n    }\n    // update node <-> ref_node\n    node.__dom.$nextSibling = ref_node;\n    if (node.__dom.$nextSibling) {\n      node.__dom.$nextSibling.__dom.$previousSibling = node;\n    }\n    // update node <-> container\n    node.__dom.$parentNode = container;\n    if (ref_node) {\n      if (ref_node === container.__dom.$firstChild) {\n        container.__dom.$firstChild = node;\n      }\n    } else {\n      container.__dom.$lastChild = node;\n      if (!container.__dom.$firstChild) {\n        container.__dom.$firstChild = node;\n      }\n    }\n    // remove caching of childNodes\n    container.__dom.$childNodes = null;\n  },\n\n  recordRemoveChild: function recordRemoveChild$1(node, container) {\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (node === container.__dom.$firstChild) {\n      container.__dom.$firstChild = node.__dom.$nextSibling;\n    }\n    if (node === container.__dom.$lastChild) {\n      container.__dom.$lastChild = node.__dom.$previousSibling;\n    }\n    var p = node.__dom.$previousSibling;\n    var n = node.__dom.$nextSibling;\n    if (p) {\n      p.__dom = p.__dom || {};\n      p.__dom.$nextSibling = n;\n    }\n    if (n) {\n      n.__dom = n.__dom || {};\n      n.__dom.$previousSibling = p;\n    }\n    node.__dom.$parentNode = node.__dom.$previousSibling =\n      node.__dom.$nextSibling = null;\n    // remove caching of childNodes\n    container.__dom.$childNodes = null;\n  },\n\n  clearChildNodes: function clearChildNodes(node) {\n    var this$1 = this;\n\n    var c$ = this.getChildNodes(node);\n    for (var i=0, c; i < c$.length; i++) {\n      c = c$[i];\n      this$1.recordRemoveChild(c, node);\n      nativeRemoveChild.call(node, c)\n    }\n  },\n\n  saveParentNode: function saveParentNode(node) {\n    node.__dom = node.__dom || {};\n    node.__dom.$parentNode = node.parentNode;\n  },\n\n  insertBefore: function insertBefore(parentNode, newChild, refChild) {\n    this.saveChildNodes(parentNode);\n    // remove from current location.\n    this._addChild(parentNode, newChild, refChild);\n    return nativeInsertBefore.call(parentNode, newChild, refChild || null);\n  },\n\n  appendChild: function appendChild(parentNode, newChild) {\n    this.saveChildNodes(parentNode);\n    this._addChild(parentNode, newChild);\n    return nativeAppendChild.call(parentNode, newChild);\n  },\n\n  removeChild: function removeChild(parentNode, node) {\n    var currentParent = this.getParentNode(node);\n    this.saveChildNodes(parentNode);\n    this._removeChild(parentNode, node);\n    if (currentParent === parentNode) {\n      return nativeRemoveChild.call(parentNode, node);\n    }\n  },\n\n  _addChild: function _addChild(parentNode, newChild, refChild) {\n    var this$1 = this;\n\n    var isFrag = (newChild.nodeType === Node.DOCUMENT_FRAGMENT_NODE);\n    var oldParent = this.getParentNode(newChild);\n    if (oldParent) {\n      this._removeChild(oldParent, newChild);\n    }\n    if (isFrag) {\n      var c$ = this.getChildNodes(newChild);\n      for (var i=0; i < c$.length; i++) {\n        var c = c$[i];\n        // unlink document fragment children\n        this$1._removeChild(newChild, c);\n        this$1.recordInsertBefore(c, parentNode, refChild);\n      }\n    } else {\n      this.recordInsertBefore(newChild, parentNode, refChild);\n    }\n  },\n\n  _removeChild: function _removeChild(parentNode, node) {\n    this.recordRemoveChild(node, parentNode);\n  }\n\n};\n\n// for testing...\nvar descriptors = {};\nfunction getNativeProperty(element, property) {\n  if (!descriptors[property]) {\n    descriptors[property] = Object.getOwnPropertyDescriptor(\n      HTMLElement.prototype, property) ||\n    Object.getOwnPropertyDescriptor(\n      Element.prototype, property) ||\n    Object.getOwnPropertyDescriptor(\n      Node.prototype, property);\n  }\n  return descriptors[property].get.call(element);\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// NOTE: normalize event contruction where necessary (IE11)\nvar NormalizedEvent = typeof Event === 'function' ? Event :\n  function(inType, params) {\n    params = params || {};\n    var e = document.createEvent('Event');\n    e.initEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable));\n    return e;\n  };\n\nvar Distributor = (function () {\n  function anonymous(root) {\n    this.root = root;\n    this.insertionPointTag = 'slot';\n  }\n\n  anonymous.prototype.getInsertionPoints = function getInsertionPoints () {\n    return this.root.querySelectorAll(this.insertionPointTag);\n  };\n\n  anonymous.prototype.hasInsertionPoint = function hasInsertionPoint () {\n    return Boolean(this.root._insertionPoints &&\n      this.root._insertionPoints.length);\n  };\n\n  anonymous.prototype.isInsertionPoint = function isInsertionPoint (node) {\n    return node.localName && node.localName == this.insertionPointTag;\n  };\n\n  anonymous.prototype.distribute = function distribute () {\n    if (this.hasInsertionPoint()) {\n      return this.distributePool(this.root, this.collectPool());\n    }\n    return [];\n  };\n\n  // Gather the pool of nodes that should be distributed. We will combine\n  // these with the \"content root\" to arrive at the composed tree.\n  anonymous.prototype.collectPool = function collectPool () {\n    return tree.arrayCopy(\n      tree.Logical.getChildNodes(this.root.host));\n  };\n\n  // perform \"logical\" distribution; note, no actual dom is moved here,\n  // instead elements are distributed into storage\n  // array where applicable.\n  anonymous.prototype.distributePool = function distributePool (node, pool) {\n    var this$1 = this;\n\n    var dirtyRoots = [];\n    var p$ = this.root._insertionPoints;\n    for (var i=0, l=p$.length, p; (i<l) && (p=p$[i]); i++) {\n      this$1.distributeInsertionPoint(p, pool);\n      // provoke redistribution on insertion point parents\n      // must do this on all candidate hosts since distribution in this\n      // scope invalidates their distribution.\n      // only get logical parent.\n      var parent = tree.Logical.getParentNode(p);\n      if (parent && parent.shadyRoot &&\n          this$1.hasInsertionPoint(parent.shadyRoot)) {\n        dirtyRoots.push(parent.shadyRoot);\n      }\n    }\n    for (var i$1=0; i$1 < pool.length; i$1++) {\n      var p$1 = pool[i$1];\n      if (p$1) {\n        p$1._assignedSlot = undefined;\n        // remove undistributed elements from physical dom.\n        var parent$1 = tree.Composed.getParentNode(p$1);\n        if (parent$1) {\n          tree.Composed.removeChild(parent$1, p$1);\n        }\n      }\n    }\n    return dirtyRoots;\n  };\n\n  anonymous.prototype.distributeInsertionPoint = function distributeInsertionPoint (insertionPoint, pool) {\n    var this$1 = this;\n\n    var prevAssignedNodes = insertionPoint._assignedNodes;\n    if (prevAssignedNodes) {\n      this.clearAssignedSlots(insertionPoint, true);\n    }\n    insertionPoint._assignedNodes = [];\n    var needsSlotChange = false;\n    // distribute nodes from the pool that this selector matches\n    var anyDistributed = false;\n    for (var i=0, l=pool.length, node; i < l; i++) {\n      node=pool[i];\n      // skip nodes that were already used\n      if (!node) {\n        continue;\n      }\n      // distribute this node if it matches\n      if (this$1.matchesInsertionPoint(node, insertionPoint)) {\n        if (node.__prevAssignedSlot != insertionPoint) {\n          needsSlotChange = true;\n        }\n        this$1.distributeNodeInto(node, insertionPoint)\n        // remove this node from the pool\n        pool[i] = undefined;\n        // since at least one node matched, we won't need fallback content\n        anyDistributed = true;\n      }\n    }\n    // Fallback content if nothing was distributed here\n    if (!anyDistributed) {\n      var children = tree.Logical.getChildNodes(insertionPoint);\n      for (var j = 0, node$1; j < children.length; j++) {\n        node$1 = children[j];\n        if (node$1.__prevAssignedSlot != insertionPoint) {\n          needsSlotChange = true;\n        }\n        this$1.distributeNodeInto(node$1, insertionPoint);\n      }\n    }\n    // we're already dirty if a node was newly added to the slot\n    // and we're also dirty if the assigned count decreased.\n    if (prevAssignedNodes) {\n      // TODO(sorvell): the tracking of previously assigned slots\n      // could instead by done with a Set and then we could\n      // avoid needing to iterate here to clear the info.\n      for (var i$1=0; i$1 < prevAssignedNodes.length; i$1++) {\n        prevAssignedNodes[i$1].__prevAssignedSlot = null;\n      }\n      if (insertionPoint._assignedNodes.length < prevAssignedNodes.length) {\n        needsSlotChange = true;\n      }\n    }\n    this.setDistributedNodesOnInsertionPoint(insertionPoint);\n    if (needsSlotChange) {\n      this._fireSlotChange(insertionPoint);\n    }\n  };\n\n  anonymous.prototype.clearAssignedSlots = function clearAssignedSlots (slot, savePrevious) {\n    var n$ = slot._assignedNodes;\n    if (n$) {\n      for (var i=0; i < n$.length; i++) {\n        var n = n$[i];\n        if (savePrevious) {\n          n.__prevAssignedSlot = n._assignedSlot;\n        }\n        // only clear if it was previously set to this slot;\n        // this helps ensure that if the node has otherwise been distributed\n        // ignore it.\n        if (n._assignedSlot === slot) {\n          n._assignedSlot = null;\n        }\n      }\n    }\n  };\n\n  anonymous.prototype.matchesInsertionPoint = function matchesInsertionPoint (node, insertionPoint) {\n    var slotName = insertionPoint.getAttribute('name');\n    slotName = slotName ? slotName.trim() : '';\n    var slot = node.getAttribute && node.getAttribute('slot');\n    slot = slot ? slot.trim() : '';\n    return (slot == slotName);\n  };\n\n  anonymous.prototype.distributeNodeInto = function distributeNodeInto (child, insertionPoint) {\n    insertionPoint._assignedNodes.push(child);\n    child._assignedSlot = insertionPoint;\n  };\n\n  anonymous.prototype.setDistributedNodesOnInsertionPoint = function setDistributedNodesOnInsertionPoint (insertionPoint) {\n    var this$1 = this;\n\n    var n$ = insertionPoint._assignedNodes;\n    insertionPoint._distributedNodes = [];\n    for (var i=0, n; (i<n$.length) && (n=n$[i]) ; i++) {\n      if (this$1.isInsertionPoint(n)) {\n        var d$ = n._distributedNodes;\n        if (d$) {\n          for (var j=0; j < d$.length; j++) {\n            insertionPoint._distributedNodes.push(d$[j]);\n          }\n        }\n      } else {\n        insertionPoint._distributedNodes.push(n$[i]);\n      }\n    }\n  };\n\n  anonymous.prototype._fireSlotChange = function _fireSlotChange (insertionPoint) {\n    // NOTE: cannot bubble correctly here so not setting bubbles: true\n    // Safari tech preview does not bubble but chrome does\n    // Spec says it bubbles (https://dom.spec.whatwg.org/#mutation-observers)\n    insertionPoint.dispatchEvent(new NormalizedEvent('slotchange'));\n    if (insertionPoint._assignedSlot) {\n      this._fireSlotChange(insertionPoint._assignedSlot);\n    }\n  };\n\n  anonymous.prototype.isFinalDestination = function isFinalDestination (insertionPoint) {\n    return !(insertionPoint._assignedSlot);\n  };\n\n  return anonymous;\n}())\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n  Implements a pared down version of ShadowDOM's scoping, which is easy to\n  polyfill across browsers.\n*/\nvar ShadyRoot = function ShadyRoot(host) {\n  if (!host) {\n    throw 'Must provide a host';\n  }\n  // NOTE: this strange construction is necessary because\n  // DocumentFragment cannot be subclassed on older browsers.\n  var frag = document.createDocumentFragment();\n  frag.__proto__ = ShadyFragmentMixin;\n  frag._init(host);\n  return frag;\n};\n\nvar ShadyMixin = {\n\n  _init: function _init(host) {\n    // NOTE: set a fake local name so this element can be\n    // distinguished from a DocumentFragment when patching.\n    // FF doesn't allow this to be `localName`\n    this.__localName = 'ShadyRoot';\n    // root <=> host\n    host.shadyRoot = this;\n    this.host = host;\n    // logical dom setup\n    tree.Logical.saveChildNodes(host);\n    tree.Logical.saveChildNodes(this);\n    // state flags\n    this._clean = true;\n    this._hasRendered = false;\n    this._distributor = new Distributor(this);\n    this.update();\n  },\n\n  // async render the \"top\" distributor (this is all that is needed to\n  // distribute this host).\n  update: function update() {\n    // TODO(sorvell): instead the root should always be enqueued to helps record that it is dirty.\n    // Then, in `render`, the top most (in the distribution tree) \"dirty\" root should be rendered.\n    var distributionRoot = this._findDistributionRoot(this.host);\n    //console.log('update from', this.host, 'root', distributionRoot.host, distributionRoot._clean);\n    if (distributionRoot._clean) {\n      distributionRoot._clean = false;\n      enqueue(function() {\n        distributionRoot.render();\n      });\n    }\n  },\n\n  // TODO(sorvell): this may not return a shadowRoot (for example if the element is in a docFragment)\n  // this should only return a shadowRoot.\n  // returns the host that's the top of this host's distribution tree\n  _findDistributionRoot: function _findDistributionRoot(element) {\n    var root = element.shadyRoot;\n    while (element && this._elementNeedsDistribution(element)) {\n      root = element.getRootNode();\n      element = root && root.host;\n    }\n    return root;\n  },\n\n  // Return true if a host's children includes\n  // an insertion point that selects selectively\n  _elementNeedsDistribution: function _elementNeedsDistribution(element) {\n    var this$1 = this;\n\n    var c$ = tree.Logical.getChildNodes(element);\n    for (var i=0, c; i < c$.length; i++) {\n      c = c$[i];\n      if (this$1._distributor.isInsertionPoint(c)) {\n        return element.getRootNode();\n      }\n    }\n  },\n\n  render: function render() {\n    if (!this._clean) {\n      this._clean = true;\n      if (!this._skipUpdateInsertionPoints) {\n        this.updateInsertionPoints();\n      } else if (!this._hasRendered) {\n        this._insertionPoints = [];\n      }\n      this._skipUpdateInsertionPoints = false;\n      // TODO(sorvell): previous ShadyDom had a fast path here\n      // that would avoid distribution for initial render if\n      // no insertion points exist. We cannot currently do this because\n      // it relies on elements being in the physical shadowRoot element\n      // so that native methods will be used. The current append code\n      // simply provokes distribution in this case and does not put the\n      // nodes in the shadowRoot. This could be done but we'll need to\n      // consider if the special processing is worth the perf gain.\n      // if (!this._hasRendered && !this._insertionPoints.length) {\n      //   tree.Composed.clearChildNodes(this.host);\n      //   tree.Composed.appendChild(this.host, this);\n      // } else {\n      // logical\n      this.distribute();\n      // physical\n      this.compose();\n      this._hasRendered = true;\n    }\n  },\n\n  forceRender: function forceRender() {\n    this._clean = false;\n    this.render();\n  },\n\n  distribute: function distribute() {\n    var dirtyRoots = this._distributor.distribute();\n    for (var i=0; i<dirtyRoots.length; i++) {\n      dirtyRoots[i].forceRender();\n    }\n  },\n\n  updateInsertionPoints: function updateInsertionPoints() {\n    var this$1 = this;\n\n    var i$ = this.__insertionPoints;\n    // if any insertion points have been removed, clear their distribution info\n    if (i$) {\n      for (var i=0, c; i < i$.length; i++) {\n        c = i$[i];\n        if (c.getRootNode() !== this$1) {\n          this$1._distributor.clearAssignedSlots(c);\n        }\n      }\n    }\n    i$ = this._insertionPoints = this._distributor.getInsertionPoints();\n    // ensure insertionPoints's and their parents have logical dom info.\n    // save logical tree info\n    // a. for shadyRoot\n    // b. for insertion points (fallback)\n    // c. for parents of insertion points\n    for (var i$1=0, c$1; i$1 < i$.length; i$1++) {\n      c$1 = i$[i$1];\n      tree.Logical.saveChildNodes(c$1);\n      tree.Logical.saveChildNodes(tree.Logical.getParentNode(c$1));\n    }\n  },\n\n  get _insertionPoints() {\n    if (!this.__insertionPoints) {\n      this.updateInsertionPoints();\n    }\n    return this.__insertionPoints || (this.__insertionPoints = []);\n  },\n\n  set _insertionPoints(insertionPoints) {\n    this.__insertionPoints = insertionPoints;\n  },\n\n  hasInsertionPoint: function hasInsertionPoint() {\n    return this._distributor.hasInsertionPoint();\n  },\n\n  compose: function compose() {\n    // compose self\n    // note: it's important to mark this clean before distribution\n    // so that attachment that provokes additional distribution (e.g.\n    // adding something to your parentNode) works\n    this._composeTree();\n    // TODO(sorvell): See fast paths here in Polymer v1\n    // (these seem unnecessary)\n  },\n\n  // Reify dom such that it is at its correct rendering position\n  // based on logical distribution.\n  _composeTree: function _composeTree() {\n    var this$1 = this;\n\n    this._updateChildNodes(this.host, this._composeNode(this.host));\n    var p$ = this._insertionPoints || [];\n    for (var i=0, l=p$.length, p, parent; (i<l) && (p=p$[i]); i++) {\n      parent = tree.Logical.getParentNode(p);\n      if ((parent !== this$1.host) && (parent !== this$1)) {\n        this$1._updateChildNodes(parent, this$1._composeNode(parent));\n      }\n    }\n  },\n\n  // Returns the list of nodes which should be rendered inside `node`.\n  _composeNode: function _composeNode(node) {\n    var this$1 = this;\n\n    var children = [];\n    var c$ = tree.Logical.getChildNodes(node.shadyRoot || node);\n    for (var i = 0; i < c$.length; i++) {\n      var child = c$[i];\n      if (this$1._distributor.isInsertionPoint(child)) {\n        var distributedNodes = child._distributedNodes ||\n          (child._distributedNodes = []);\n        for (var j = 0; j < distributedNodes.length; j++) {\n          var distributedNode = distributedNodes[j];\n          if (this$1.isFinalDestination(child, distributedNode)) {\n            children.push(distributedNode);\n          }\n        }\n      } else {\n        children.push(child);\n      }\n    }\n    return children;\n  },\n\n  isFinalDestination: function isFinalDestination(insertionPoint, node) {\n    return this._distributor.isFinalDestination(\n      insertionPoint, node);\n  },\n\n  // Ensures that the rendered node list inside `container` is `children`.\n  _updateChildNodes: function _updateChildNodes(container, children) {\n    var composed = tree.Composed.getChildNodes(container);\n    var splices = calculateSplices(children, composed);\n    // process removals\n    for (var i=0, d=0, s; (i<splices.length) && (s=splices[i]); i++) {\n      for (var j=0, n; (j < s.removed.length) && (n=s.removed[j]); j++) {\n        // check if the node is still where we expect it is before trying\n        // to remove it; this can happen if we move a node and\n        // then schedule its previous host for distribution resulting in\n        // the node being removed here.\n        if (tree.Composed.getParentNode(n) === container) {\n          tree.Composed.removeChild(container, n);\n        }\n        composed.splice(s.index + d, 1);\n      }\n      d -= s.addedCount;\n    }\n    // process adds\n    for (var i$1=0, s$1, next; (i$1<splices.length) && (s$1=splices[i$1]); i$1++) { //eslint-disable-line no-redeclare\n      next = composed[s$1.index];\n      for (var j$1=s$1.index, n$1; j$1 < s$1.index + s$1.addedCount; j$1++) {\n        n$1 = children[j$1];\n        tree.Composed.insertBefore(container, n$1, next);\n        // TODO(sorvell): is this splice strictly needed?\n        composed.splice(j$1, 0, n$1);\n      }\n    }\n  },\n\n  getInsertionPointTag: function getInsertionPointTag() {\n    return this._distributor.insertionPointTag;\n  }\n\n}\n\nvar ShadyFragmentMixin = Object.create(DocumentFragment.prototype);\nextend(ShadyFragmentMixin, ShadyMixin);\n\n// let needsUpgrade = window.CustomElements && !CustomElements.useNative;\n\n// function upgradeLogicalChildren(children) {\n//   if (needsUpgrade && children) {\n//     for (let i=0; i < children.length; i++) {\n//       CustomElements.upgrade(children[i]);\n//     }\n//   }\n// }\n\n// render enqueuer/flusher\nvar customElements = window.customElements;\nvar flushList = [];\nvar scheduled;\nvar flushCount = 0;\nvar flushMax = 100;\nfunction enqueue(callback) {\n  if (!scheduled) {\n    scheduled = true;\n    promish.then(flush$1);\n  }\n  flushList.push(callback);\n}\n\nfunction flush$1() {\n  scheduled = false;\n  flushCount++;\n  while (flushList.length) {\n    flushList.shift()();\n  }\n  if (customElements && customElements.flush) {\n    customElements.flush();\n  }\n  // continue flushing after elements are upgraded...\n  var isFlushedMaxed = (flushCount > flushMax);\n  if (flushList.length && !isFlushedMaxed) {\n      flush$1();\n  }\n  flushCount = 0;\n  if (isFlushedMaxed) {\n    throw new Error('Loop detected in ShadyDOM distribution, aborting.')\n  }\n}\n\nflush$1.list = flushList;\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// Cribbed from ShadowDOM polyfill\n// https://github.com/webcomponents/webcomponentsjs/blob/master/src/ShadowDOM/wrappers/HTMLElement.js#L28\n/////////////////////////////////////////////////////////////////////////////\n// innerHTML and outerHTML\n\n// http://www.whatwg.org/specs/web-apps/current-work/multipage/the-end.html#escapingString\nvar escapeAttrRegExp = /[&\\u00A0\"]/g;\nvar escapeDataRegExp = /[&\\u00A0<>]/g;\n\nfunction escapeReplace(c) {\n  switch (c) {\n    case '&':\n      return '&amp;';\n    case '<':\n      return '&lt;';\n    case '>':\n      return '&gt;';\n    case '\"':\n      return '&quot;';\n    case '\\u00A0':\n      return '&nbsp;';\n  }\n}\n\nfunction escapeAttr(s) {\n  return s.replace(escapeAttrRegExp, escapeReplace);\n}\n\nfunction escapeData(s) {\n  return s.replace(escapeDataRegExp, escapeReplace);\n}\n\nfunction makeSet(arr) {\n  var set = {};\n  for (var i = 0; i < arr.length; i++) {\n    set[arr[i]] = true;\n  }\n  return set;\n}\n\n// http://www.whatwg.org/specs/web-apps/current-work/#void-elements\nvar voidElements = makeSet([\n  'area',\n  'base',\n  'br',\n  'col',\n  'command',\n  'embed',\n  'hr',\n  'img',\n  'input',\n  'keygen',\n  'link',\n  'meta',\n  'param',\n  'source',\n  'track',\n  'wbr'\n]);\n\nvar plaintextParents = makeSet([\n  'style',\n  'script',\n  'xmp',\n  'iframe',\n  'noembed',\n  'noframes',\n  'plaintext',\n  'noscript'\n]);\n\nfunction getOuterHTML(node, parentNode, composed) {\n  switch (node.nodeType) {\n    case Node.ELEMENT_NODE: {\n      var tagName = node.localName;\n      var s = '<' + tagName;\n      var attrs = node.attributes;\n      for (var i = 0, attr; (attr = attrs[i]); i++) {\n        s += ' ' + attr.name + '=\"' + escapeAttr(attr.value) + '\"';\n      }\n      s += '>';\n      if (voidElements[tagName]) {\n        return s;\n      }\n      return s + getInnerHTML(node, composed) + '</' + tagName + '>';\n    }\n    case Node.TEXT_NODE: {\n      var data = node.data;\n      if (parentNode && plaintextParents[parentNode.localName]) {\n        return data;\n      }\n      return escapeData(data);\n    }\n    case Node.COMMENT_NODE: {\n      return '<!--' + node.data + '-->';\n    }\n    default: {\n      window.console.error(node);\n      throw new Error('not implemented');\n    }\n  }\n}\n\nfunction getInnerHTML(node, composed) {\n  if (node.localName === 'template') {\n    node = node.content;\n  }\n  var s = '';\n  var c$ = composed ? composed(node) : node.childNodes;\n  for (var i=0, l=c$.length, child; (i<l) && (child=c$[i]); i++) {\n    s += getOuterHTML(child, node, composed);\n  }\n  return s;\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar mixinImpl = {\n\n  // Try to add node. Record logical info, track insertion points, perform\n  // distribution iff needed. Return true if the add is handled.\n  addNode: function addNode(container, node, ref_node) {\n    var ownerRoot = this.ownerShadyRootForNode(container);\n    if (ownerRoot) {\n      // optimization: special insertion point tracking\n      if (node.__noInsertionPoint && ownerRoot._clean) {\n        ownerRoot._skipUpdateInsertionPoints = true;\n      }\n      // note: we always need to see if an insertion point is added\n      // since this saves logical tree info; however, invalidation state\n      // needs\n      var ipAdded = this._maybeAddInsertionPoint(node, container, ownerRoot);\n      // invalidate insertion points IFF not already invalid!\n      if (ipAdded) {\n        ownerRoot._skipUpdateInsertionPoints = false;\n      }\n    }\n    if (tree.Logical.hasChildNodes(container)) {\n      tree.Logical.recordInsertBefore(node, container, ref_node);\n    }\n    // if not distributing and not adding to host, do a fast path addition\n    var handled = this._maybeDistribute(node, container, ownerRoot) ||\n      container.shadyRoot;\n    return handled;\n  },\n\n  // Try to remove node: update logical info and perform distribution iff\n  // needed. Return true if the removal has been handled.\n  // note that it's possible for both the node's host and its parent\n  // to require distribution... both cases are handled here.\n  removeNode: function removeNode(node) {\n    // important that we want to do this only if the node has a logical parent\n    var logicalParent = tree.Logical.hasParentNode(node) &&\n      tree.Logical.getParentNode(node);\n    var distributed;\n    var ownerRoot = this.ownerShadyRootForNode(node);\n    if (logicalParent) {\n      // distribute node's parent iff needed\n      distributed = this.maybeDistributeParent(node);\n      tree.Logical.recordRemoveChild(node, logicalParent);\n      // remove node from root and distribute it iff needed\n      if (ownerRoot && (this._removeDistributedChildren(ownerRoot, node) ||\n        logicalParent.localName === ownerRoot.getInsertionPointTag())) {\n        ownerRoot._skipUpdateInsertionPoints = false;\n        ownerRoot.update();\n      }\n    }\n    this._removeOwnerShadyRoot(node);\n    return distributed;\n  },\n\n\n  _scheduleObserver: function _scheduleObserver(node, addedNode, removedNode) {\n    var observer = node.__dom && node.__dom.observer;\n    if (observer) {\n      if (addedNode) {\n        observer.addedNodes.push(addedNode);\n      }\n      if (removedNode) {\n        observer.removedNodes.push(removedNode);\n      }\n      observer.schedule();\n    }\n  },\n\n  removeNodeFromParent: function removeNodeFromParent(node, parent) {\n    if (parent) {\n      this._scheduleObserver(parent, null, node);\n      this.removeNode(node);\n    } else {\n      this._removeOwnerShadyRoot(node);\n    }\n  },\n\n  _hasCachedOwnerRoot: function _hasCachedOwnerRoot(node) {\n    return Boolean(node.__ownerShadyRoot !== undefined);\n  },\n\n  getRootNode: function getRootNode$1(node) {\n    if (!node || !node.nodeType) {\n      return;\n    }\n    var root = node.__ownerShadyRoot;\n    if (root === undefined) {\n      if (isShadyRoot(node)) {\n        root = node;\n      } else {\n        var parent = tree.Logical.getParentNode(node);\n        root = parent ? this.getRootNode(parent) : node;\n      }\n      // memo-ize result for performance but only memo-ize\n      // result if node is in the document. This avoids a problem where a root\n      // can be cached while an element is inside a fragment.\n      // If this happens and we cache the result, the value can become stale\n      // because for perf we avoid processing the subtree of added fragments.\n      if (document.documentElement.contains(node)) {\n        node.__ownerShadyRoot = root;\n      }\n    }\n    return root;\n  },\n\n  ownerShadyRootForNode: function ownerShadyRootForNode(node) {\n    var root = this.getRootNode(node);\n    if (isShadyRoot(root)) {\n      return root;\n    }\n  },\n\n  _maybeDistribute: function _maybeDistribute(node, container, ownerRoot) {\n    // TODO(sorvell): technically we should check non-fragment nodes for\n    // <content> children but since this case is assumed to be exceedingly\n    // rare, we avoid the cost and will address with some specific api\n    // when the need arises.  For now, the user must call\n    // distributeContent(true), which updates insertion points manually\n    // and forces distribution.\n    var insertionPointTag = ownerRoot && ownerRoot.getInsertionPointTag() || '';\n    var fragContent = (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) &&\n      !node.__noInsertionPoint &&\n      insertionPointTag && node.querySelector(insertionPointTag);\n    var wrappedContent = fragContent &&\n      (tree.Logical.getParentNode(fragContent).nodeType !==\n      Node.DOCUMENT_FRAGMENT_NODE);\n    var hasContent = fragContent || (node.localName === insertionPointTag);\n    // There are 3 possible cases where a distribution may need to occur:\n    // 1. <content> being inserted (the host of the shady root where\n    //    content is inserted needs distribution)\n    // 2. children being inserted into parent with a shady root (parent\n    //    needs distribution)\n    // 3. container is an insertionPoint\n    if (hasContent || (container.localName === insertionPointTag)) {\n      if (ownerRoot) {\n        // note, insertion point list update is handled after node\n        // mutations are complete\n        ownerRoot.update();\n      }\n    }\n    var needsDist = this._nodeNeedsDistribution(container);\n    if (needsDist) {\n      container.shadyRoot.update();\n    }\n    // Return true when distribution will fully handle the composition\n    // Note that if a content was being inserted that was wrapped by a node,\n    // and the parent does not need distribution, return false to allow\n    // the nodes to be added directly, after which children may be\n    // distributed and composed into the wrapping node(s)\n    return needsDist || (hasContent && !wrappedContent);\n  },\n\n  /* note: parent argument is required since node may have an out\n  of date parent at this point; returns true if a <content> is being added */\n  _maybeAddInsertionPoint: function _maybeAddInsertionPoint(node, parent, root) {\n    var this$1 = this;\n\n    var added;\n    var insertionPointTag = root.getInsertionPointTag();\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE &&\n      !node.__noInsertionPoint) {\n      var c$ = node.querySelectorAll(insertionPointTag);\n      for (var i=0, n, np, na; (i<c$.length) && (n=c$[i]); i++) {\n        np = tree.Logical.getParentNode(n);\n        // don't allow node's parent to be fragment itself\n        if (np === node) {\n          np = parent;\n        }\n        na = this$1._maybeAddInsertionPoint(n, np, root);\n        added = added || na;\n      }\n    } else if (node.localName === insertionPointTag) {\n      tree.Logical.saveChildNodes(parent);\n      tree.Logical.saveChildNodes(node);\n      added = true;\n    }\n    return added;\n  },\n\n  _nodeNeedsDistribution: function _nodeNeedsDistribution(node) {\n    return node && node.shadyRoot &&\n      node.shadyRoot.hasInsertionPoint();\n  },\n\n  _removeDistributedChildren: function _removeDistributedChildren(root, container) {\n    var this$1 = this;\n\n    var hostNeedsDist;\n    var ip$ = root._insertionPoints;\n    for (var i=0; i<ip$.length; i++) {\n      var insertionPoint = ip$[i];\n      if (this$1._contains(container, insertionPoint)) {\n        var dc$ = insertionPoint.assignedNodes({flatten: true});\n        for (var j=0; j<dc$.length; j++) {\n          hostNeedsDist = true;\n          var node = dc$[j];\n          var parent = tree.Composed.getParentNode(node);\n          if (parent) {\n            tree.Composed.removeChild(parent, node);\n          }\n        }\n      }\n    }\n    return hostNeedsDist;\n  },\n\n  _contains: function _contains(container, node) {\n    while (node) {\n      if (node == container) {\n        return true;\n      }\n      node = tree.Logical.getParentNode(node);\n    }\n  },\n\n  _removeOwnerShadyRoot: function _removeOwnerShadyRoot(node) {\n    var this$1 = this;\n\n    // optimization: only reset the tree if node is actually in a root\n    if (this._hasCachedOwnerRoot(node)) {\n      var c$ = tree.Logical.getChildNodes(node);\n      for (var i=0, l=c$.length, n; (i<l) && (n=c$[i]); i++) {\n        this$1._removeOwnerShadyRoot(n);\n      }\n    }\n    node.__ownerShadyRoot = undefined;\n  },\n\n  // TODO(sorvell): This will fail if distribution that affects this\n  // question is pending; this is expected to be exceedingly rare, but if\n  // the issue comes up, we can force a flush in this case.\n  firstComposedNode: function firstComposedNode(insertionPoint) {\n    var n$ = insertionPoint.assignedNodes({flatten: true});\n    var root = this.getRootNode(insertionPoint);\n    for (var i=0, l=n$.length, n; (i<l) && (n=n$[i]); i++) {\n      // means that we're composed to this spot.\n      if (root.isFinalDestination(insertionPoint, n)) {\n        return n;\n      }\n    }\n  },\n\n  clearNode: function clearNode(node) {\n    while (node.firstChild) {\n      node.removeChild(node.firstChild);\n    }\n  },\n\n  maybeDistributeParent: function maybeDistributeParent(node) {\n    var parent = tree.Logical.getParentNode(node);\n    if (this._nodeNeedsDistribution(parent)) {\n      parent.shadyRoot.update();\n      return true;\n    }\n  },\n\n  maybeDistributeAttributeChange: function maybeDistributeAttributeChange(node, name) {\n    if (name === 'slot') {\n      this.maybeDistributeParent(node);\n    } else if (node.localName === 'slot' && name === 'name') {\n      var root = this.ownerShadyRootForNode(node);\n      if (root) {\n        root.update();\n      }\n    }\n  },\n\n  // NOTE: `query` is used primarily for ShadyDOM's querySelector impl,\n  // but it's also generally useful to recurse through the element tree\n  // and is used by Polymer's styling system.\n  query: function query(node, matcher, halter) {\n    var list = [];\n    this._queryElements(tree.Logical.getChildNodes(node), matcher,\n      halter, list);\n    return list;\n  },\n\n  _queryElements: function _queryElements(elements, matcher, halter, list) {\n    var this$1 = this;\n\n    for (var i=0, l=elements.length, c; (i<l) && (c=elements[i]); i++) {\n      if (c.nodeType === Node.ELEMENT_NODE &&\n          this$1._queryElement(c, matcher, halter, list)) {\n        return true;\n      }\n    }\n  },\n\n  _queryElement: function _queryElement(node, matcher, halter, list) {\n    var result = matcher(node);\n    if (result) {\n      list.push(node);\n    }\n    if (halter && halter(result)) {\n      return result;\n    }\n    this._queryElements(tree.Logical.getChildNodes(node), matcher,\n      halter, list);\n  },\n\n  activeElementForNode: function activeElementForNode(node) {\n    var this$1 = this;\n\n    var active = document.activeElement;\n    if (!active) {\n      return null;\n    }\n    var isShadyRoot$$1 = !!(isShadyRoot(node));\n    if (node !== document) {\n      // If this node isn't a document or shady root, then it doesn't have\n      // an active element.\n      if (!isShadyRoot$$1) {\n        return null;\n      }\n      // If this shady root's host is the active element or the active\n      // element is not a descendant of the host (in the composed tree),\n      // then it doesn't have an active element.\n      if (node.host === active ||\n          !node.host.contains(active)) {\n        return null;\n      }\n    }\n    // This node is either the document or a shady root of which the active\n    // element is a (composed) descendant of its host; iterate upwards to\n    // find the active element's most shallow host within it.\n    var activeRoot = this.ownerShadyRootForNode(active);\n    while (activeRoot && activeRoot !== node) {\n      active = activeRoot.host;\n      activeRoot = this$1.ownerShadyRootForNode(active);\n    }\n    if (node === document) {\n      // This node is the document, so activeRoot should be null.\n      return activeRoot ? null : active;\n    } else {\n      // This node is a non-document shady root, and it should be\n      // activeRoot.\n      return activeRoot === node ? active : null;\n    }\n  }\n\n};\n\nvar nativeCloneNode = Element.prototype.cloneNode;\nvar nativeImportNode = Document.prototype.importNode;\nvar nativeSetAttribute$1 = Element.prototype.setAttribute;\nvar nativeRemoveAttribute = Element.prototype.removeAttribute;\n\nvar setAttribute = function(attr, value) {\n  // avoid scoping elements in non-main document to avoid template documents\n  if (window.ShadyCSS && attr === 'class' && this.ownerDocument === document) {\n    window.ShadyCSS.setElementClass(this, value);\n  } else {\n    nativeSetAttribute$1.call(this, attr, value);\n  }\n}\n\nvar NodeMixin = {};\n\nObject.defineProperties(NodeMixin, {\n\n  parentElement: {\n    get: function get() {\n      return tree.Logical.getParentNode(this);\n    },\n    configurable: true\n  },\n\n  parentNode: {\n    get: function get$1() {\n      return tree.Logical.getParentNode(this);\n    },\n    configurable: true\n  },\n\n  nextSibling: {\n    get: function get$2() {\n      return tree.Logical.getNextSibling(this);\n    },\n    configurable: true\n  },\n\n  previousSibling: {\n    get: function get$3() {\n      return tree.Logical.getPreviousSibling(this);\n    },\n    configurable: true\n  },\n\n  nextElementSibling: {\n    get: function get$4() {\n      return tree.Logical.getNextElementSibling(this);\n    },\n    configurable: true\n  },\n\n  previousElementSibling: {\n    get: function get$5() {\n      return tree.Logical.getPreviousElementSibling(this);\n    },\n    configurable: true\n  },\n\n  assignedSlot: {\n    get: function get$6() {\n      return this._assignedSlot;\n    },\n    configurable: true\n  }\n});\n\nvar FragmentMixin = {\n\n  appendChild: function appendChild(node) {\n    return this.insertBefore(node);\n  },\n\n  // cases in which we may not be able to just do standard native call\n  // 1. container has a shadyRoot (needsDistribution IFF the shadyRoot\n  // has an insertion point)\n  // 2. container is a shadyRoot (don't distribute, instead set\n  // container to container.host.\n  // 3. node is <content> (host of container needs distribution)\n  insertBefore: function insertBefore(node, ref_node) {\n    if (ref_node && tree.Logical.getParentNode(ref_node) !== this) {\n      throw Error('The ref_node to be inserted before is not a child ' +\n        'of this node');\n    }\n    // remove node from its current position iff it's in a tree.\n    if (node.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n      var parent = tree.Logical.getParentNode(node);\n      mixinImpl.removeNodeFromParent(node, parent);\n    }\n    if (!mixinImpl.addNode(this, node, ref_node)) {\n      if (ref_node) {\n        // if ref_node is an insertion point replace with first distributed node\n        var root = mixinImpl.ownerShadyRootForNode(ref_node);\n        if (root) {\n          ref_node = ref_node.localName === root.getInsertionPointTag() ?\n            mixinImpl.firstComposedNode(ref_node) : ref_node;\n        }\n      }\n      // if adding to a shadyRoot, add to host instead\n      var container = isShadyRoot(this) ?\n        this.host : this;\n      if (ref_node) {\n        tree.Composed.insertBefore(container, node, ref_node);\n      } else {\n        tree.Composed.appendChild(container, node);\n      }\n    }\n    mixinImpl._scheduleObserver(this, node);\n    return node;\n  },\n\n  /**\n    Removes the given `node` from the element's `lightChildren`.\n    This method also performs dom composition.\n  */\n  removeChild: function removeChild(node) {\n    if (tree.Logical.getParentNode(node) !== this) {\n      throw Error('The node to be removed is not a child of this node: ' +\n        node);\n    }\n    if (!mixinImpl.removeNode(node)) {\n      // if removing from a shadyRoot, remove form host instead\n      var container = isShadyRoot(this) ?\n        this.host :\n        this;\n      // not guaranteed to physically be in container; e.g.\n      // undistributed nodes.\n      var parent = tree.Composed.getParentNode(node);\n      if (container === parent) {\n        tree.Composed.removeChild(container, node);\n      }\n    }\n    mixinImpl._scheduleObserver(this, null, node);\n    return node;\n  },\n\n  replaceChild: function replaceChild(node, ref_node) {\n    this.insertBefore(node, ref_node);\n    this.removeChild(ref_node);\n    return node;\n  },\n\n  // TODO(sorvell): consider doing native QSA and filtering results.\n  querySelector: function querySelector(selector) {\n    // match selector and halt on first result.\n    var result = mixinImpl.query(this, function(n) {\n      return matchesSelector(n, selector);\n    }, function(n) {\n      return Boolean(n);\n    })[0];\n    return result || null;\n  },\n\n  querySelectorAll: function querySelectorAll(selector) {\n    return mixinImpl.query(this, function(n) {\n      return matchesSelector(n, selector);\n    });\n  },\n\n  cloneNode: function cloneNode(deep) {\n    if (this.localName == 'template') {\n      return nativeCloneNode.call(this, deep);\n    } else {\n      var n = nativeCloneNode.call(this, false);\n      if (deep) {\n        var c$ = this.childNodes;\n        for (var i=0, nc; i < c$.length; i++) {\n          nc = c$[i].cloneNode(true);\n          n.appendChild(nc);\n        }\n      }\n      return n;\n    }\n  },\n\n  importNode: function importNode(externalNode, deep) {\n    // for convenience use this node's ownerDoc if the node isn't a document\n    var doc = this instanceof Document ? this :\n      this.ownerDocument;\n    var n = nativeImportNode.call(doc, externalNode, false);\n    if (deep) {\n      var c$ = tree.Logical.getChildNodes(externalNode);\n      common.patchNode(n);\n      for (var i=0, nc; i < c$.length; i++) {\n        nc = doc.importNode(c$[i], true);\n        n.appendChild(nc);\n      }\n    }\n    return n;\n  }\n};\n\nObject.defineProperties(FragmentMixin, {\n\n  childNodes: {\n    get: function get$7() {\n      var c$ = tree.Logical.getChildNodes(this);\n      return Array.isArray(c$) ? c$ : tree.arrayCopyChildNodes(this);\n    },\n    configurable: true\n  },\n\n  children: {\n    get: function get$8() {\n      if (tree.Logical.hasChildNodes(this)) {\n        return Array.prototype.filter.call(this.childNodes, function(n) {\n          return (n.nodeType === Node.ELEMENT_NODE);\n        });\n      } else {\n        return tree.arrayCopyChildren(this);\n      }\n    },\n    configurable: true\n  },\n\n  firstChild: {\n    get: function get$9() {\n      return tree.Logical.getFirstChild(this);\n    },\n    configurable: true\n  },\n\n  lastChild: {\n    get: function get$10() {\n      return tree.Logical.getLastChild(this);\n    },\n    configurable: true\n  },\n\n  firstElementChild: {\n    get: function get$11() {\n      return tree.Logical.getFirstElementChild(this);\n    },\n    configurable: true\n  },\n\n  lastElementChild: {\n    get: function get$12() {\n      return tree.Logical.getLastElementChild(this);\n    },\n    configurable: true\n  },\n\n  // TODO(srovell): strictly speaking fragments do not have textContent\n  // or innerHTML but ShadowRoots do and are not easily distinguishable.\n  // textContent / innerHTML\n  textContent: {\n    get: function get$13() {\n      if (this.childNodes) {\n        var tc = [];\n        for (var i = 0, cn = this.childNodes, c; (c = cn[i]); i++) {\n          if (c.nodeType !== Node.COMMENT_NODE) {\n            tc.push(c.textContent);\n          }\n        }\n        return tc.join('');\n      }\n      return '';\n    },\n    set: function set(text) {\n      mixinImpl.clearNode(this);\n      if (text) {\n        this.appendChild(document.createTextNode(text));\n      }\n    },\n    configurable: true\n  },\n\n  innerHTML: {\n    get: function get$14() {\n      return getInnerHTML(this);\n    },\n    set: function set$1(text) {\n      var this$1 = this;\n\n      mixinImpl.clearNode(this);\n      var d = document.createElement('div');\n      d.innerHTML = text;\n      // here, appendChild may move nodes async so we cannot rely\n      // on node position when copying\n      var c$ = tree.arrayCopyChildNodes(d);\n      for (var i=0; i < c$.length; i++) {\n        this$1.appendChild(c$[i]);\n      }\n    },\n    configurable: true\n  }\n\n});\n\nvar ElementMixin = {\n\n  // TODO(sorvell): should only exist on <slot>\n  assignedNodes: function assignedNodes(options) {\n    return (options && options.flatten ? this._distributedNodes :\n      this._assignedNodes) || [];\n  },\n\n\n  setAttribute: function setAttribute$1(name, value) {\n    setAttribute.call(this, name, value);\n    mixinImpl.maybeDistributeAttributeChange(this, name);\n  },\n\n  removeAttribute: function removeAttribute(name) {\n    nativeRemoveAttribute.call(this, name);\n    mixinImpl.maybeDistributeAttributeChange(this, name);\n  }\n\n};\n\nObject.defineProperties(ElementMixin, {\n\n  shadowRoot: {\n    get: function get$15() {\n      return this.shadyRoot;\n    }\n  },\n\n  slot: {\n    get: function get$16() {\n      return this.getAttribute('slot');\n    },\n    set: function set$2(value) {\n      this.setAttribute('slot', value);\n    }\n  }\n\n});\n\nvar activeElementDescriptor = {\n  get: function get$17() {\n    return mixinImpl.activeElementForNode(this);\n  }\n}\n\nvar ActiveElementMixin = {};\nObject.defineProperties(ActiveElementMixin, {\n  activeElement: activeElementDescriptor\n});\n\nvar UnderActiveElementMixin = {};\nObject.defineProperties(UnderActiveElementMixin, {\n  _activeElement: activeElementDescriptor\n});\n\nvar Mixins = {\n\n  Node: extendAll({__patched: 'Node'}, NodeMixin),\n\n  Fragment: extendAll({__patched: 'Fragment'},\n    NodeMixin, FragmentMixin, ActiveElementMixin),\n\n  Element: extendAll({__patched: 'Element'},\n    NodeMixin, FragmentMixin, ElementMixin, ActiveElementMixin),\n\n  // Note: activeElement cannot be patched on document!\n  Document: extendAll({__patched: 'Document'},\n    NodeMixin, FragmentMixin, ElementMixin, UnderActiveElementMixin)\n\n};\n\nvar getRootNode = function(node) {\n  return mixinImpl.getRootNode(node);\n}\n\nfunction filterMutations(mutations, target) {\n  var targetRootNode = getRootNode(target);\n  return mutations.map(function(mutation) {\n    var mutationInScope = (targetRootNode === getRootNode(mutation.target));\n    if (mutationInScope && mutation.addedNodes) {\n      var nodes = Array.from(mutation.addedNodes).filter(function(n) {\n        return (targetRootNode === getRootNode(n));\n      });\n      if (nodes.length) {\n        mutation = Object.create(mutation);\n        Object.defineProperty(mutation, 'addedNodes', {\n          value: nodes,\n          configurable: true\n        });\n        return mutation;\n      }\n    } else if (mutationInScope) {\n      return mutation;\n    }\n  }).filter(function(m) { return m});\n}\n\n// const promise = Promise.resolve();\n\nvar AsyncObserver = function AsyncObserver() {\n  this._scheduled = false;\n  this.addedNodes = [];\n  this.removedNodes = [];\n  this.callbacks = new Set();\n};\n\nAsyncObserver.prototype.schedule = function schedule () {\n    var this$1 = this;\n\n  if (!this._scheduled) {\n    this._scheduled = true;\n    promish.then(function () {\n      this$1.flush();\n    });\n  }\n};\n\nAsyncObserver.prototype.flush = function flush () {\n  if (this._scheduled) {\n    this._scheduled = false;\n    var mutations = this.takeRecords();\n    if (mutations.length) {\n      this.callbacks.forEach(function(cb) {\n        cb(mutations);\n      });\n    }\n  }\n};\n\nAsyncObserver.prototype.takeRecords = function takeRecords () {\n  if (this.addedNodes.length || this.removedNodes.length) {\n    var mutations = [{\n      addedNodes: this.addedNodes,\n      removedNodes: this.removedNodes\n    }];\n    this.addedNodes = [];\n    this.removedNodes = [];\n    return mutations;\n  }\n  return [];\n};\n\nvar getComposedInnerHTML = function(node) {\n  if (common.isNodePatched(node)) {\n    return getInnerHTML(node, function(n) {\n      return tree.Composed.getChildNodes(n);\n    })\n  } else {\n    return node.innerHTML;\n  }\n}\n\nvar getComposedChildNodes$1 = function(node) {\n  return common.isNodePatched(node) ?\n    tree.Composed.getChildNodes(node) :\n    node.childNodes;\n}\n\n// TODO(sorvell): consider instead polyfilling MutationObserver\n// directly so that users do not have to fork their code.\n// Supporting the entire api may be challenging: e.g. filtering out\n// removed nodes in the wrong scope and seeing non-distributing\n// subtree child mutations.\nvar observeChildren = function(node, callback) {\n  common.patchNode(node);\n  if (!node.__dom.observer) {\n    node.__dom.observer = new AsyncObserver();\n  }\n  node.__dom.observer.callbacks.add(callback);\n  var observer = node.__dom.observer;\n  return {\n    _callback: callback,\n    _observer: observer,\n    _node: node,\n    takeRecords: function takeRecords() {\n      return observer.takeRecords()\n    }\n  };\n}\n\nvar unobserveChildren = function(handle) {\n  var observer = handle && handle._observer;\n  if (observer) {\n    observer.callbacks.delete(handle._callback);\n    if (!observer.callbacks.size) {\n      handle._node.__dom.observer = null;\n    }\n  }\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Patches elements that interacts with ShadyDOM\n * such that tree traversal and mutation apis act like they would under\n * ShadowDOM.\n *\n * This import enables seemless interaction with ShadyDOM powered\n * custom elements, enabling better interoperation with 3rd party code,\n * libraries, and frameworks that use DOM tree manipulation apis.\n */\n\nvar patchedCount = 0;\n\nvar log = false;\n\nvar patchImpl = {\n\n  canPatchNode: function(node) {\n    switch (node) {\n      case document.head:\n      case document.documentElement:\n        return false;\n      default:\n        return true;\n    }\n  },\n\n  hasPrototypeDescriptors: Boolean(Object.getOwnPropertyDescriptor(\n    window.Node.prototype, 'textContent')),\n\n  patch: function(node) {\n    patchedCount++;\n    log && window.console.warn('patch node', node);\n    if (this.hasPrototypeDescriptors) {\n      patchPrototype(node, this.mixinForObject(node));\n    } else {\n      window.console.warn('Patching instance rather than prototype', node);\n      extend(node, this.mixinForObject(node));\n    }\n  },\n\n  mixinForObject: function(obj) {\n    switch (obj.nodeType) {\n      case Node.ELEMENT_NODE:\n        return Mixins.Element;\n      case Node.DOCUMENT_FRAGMENT_NODE:\n        return Mixins.Fragment;\n      case Node.DOCUMENT_NODE:\n        return Mixins.Document;\n      case Node.TEXT_NODE:\n      case Node.COMMENT_NODE:\n        return Mixins.Node;\n    }\n  },\n\n  unpatch: function(obj) {\n    if (obj.__sourceProto) {\n      obj.__proto__ = obj.__sourceProto;\n\n    }\n    // TODO(sorvell): implement unpatching for non-proto patchable browsers\n  }\n\n};\n\nfunction patchNode(node) {\n  if (!settings.inUse) {\n    return;\n  }\n  if (!isNodePatched(node) && patchImpl.canPatchNode(node)) {\n    tree.saveChildNodes(node);\n    patchImpl.patch(node);\n  }\n}\n\nfunction canUnpatchNode() {\n  return Boolean(patchImpl.hasPrototypeDescriptors);\n}\n\nfunction unpatchNode(node) {\n  patchImpl.unpatch(node);\n}\n\nfunction isNodePatched(node) {\n  return Boolean(node.__patched);\n}\n\n// TODO(sorvell): fake export\ncommon.patchNode = patchNode;\ncommon.canUnpatchNode = canUnpatchNode;\ncommon.isNodePatched = isNodePatched;\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar origAddEventListener = Element.prototype.addEventListener;\nvar origRemoveEventListener = Element.prototype.removeEventListener;\n\n// https://github.com/w3c/webcomponents/issues/513#issuecomment-224183937\nvar alwaysComposed = {\n  blur: true,\n  focus: true,\n  focusin: true,\n  focusout: true,\n  click: true,\n  dblclick: true,\n  mousedown: true,\n  mouseenter: true,\n  mouseleave: true,\n  mousemove: true,\n  mouseout: true,\n  mouseover: true,\n  mouseup: true,\n  wheel: true,\n  beforeinput: true,\n  input: true,\n  keydown: true,\n  keyup: true,\n  compositionstart: true,\n  compositionupdate: true,\n  compositionend: true,\n  touchstart: true,\n  touchend: true,\n  touchmove: true,\n  touchcancel: true,\n  pointerover: true,\n  pointerenter: true,\n  pointerdown: true,\n  pointermove: true,\n  pointerup: true,\n  pointercancel: true,\n  pointerout: true,\n  pointerleave: true,\n  gotpointercapture: true,\n  lostpointercapture: true,\n  dragstart: true,\n  drag: true,\n  dragenter: true,\n  dragleave: true,\n  dragover: true,\n  drop: true,\n  dragend: true,\n  DOMActivate: true,\n  DOMFocusIn: true,\n  DOMFocusOut: true,\n  keypress: true\n};\n\nfunction pathComposer(startNode, composed) {\n  var composedPath = [];\n  var current = startNode;\n  var startRoot = startNode === window ? window : startNode.getRootNode();\n  while (current) {\n    composedPath.push(current);\n    if (current.assignedSlot) {\n      current = current.assignedSlot;\n    } else if (current.nodeType === Node.DOCUMENT_FRAGMENT_NODE && current.host && (composed || current !== startRoot)) {\n      current = current.host;\n    } else {\n      current = current.parentNode;\n    }\n  }\n  // event composedPath includes window when startNode's ownerRoot is document\n  if (composedPath[composedPath.length - 1] === document) {\n    composedPath.push(window);\n  }\n  return composedPath;\n}\n\nfunction retarget(refNode, path) {\n  if (!isShadyRoot) {\n    return refNode;\n  }\n  // If ANCESTOR's root is not a shadow root or ANCESTOR's root is BASE's\n  // shadow-including inclusive ancestor, return ANCESTOR.\n  var refNodePath = pathComposer(refNode, true);\n  var p$ = path;\n  for (var i=0, ancestor, lastRoot, root, rootIdx; i < p$.length; i++) {\n    ancestor = p$[i];\n    root = ancestor === window ? window : ancestor.getRootNode();\n    if (root !== lastRoot) {\n      rootIdx = refNodePath.indexOf(root);\n      lastRoot = root;\n    }\n    if (!isShadyRoot(root) || rootIdx > -1) {\n      return ancestor;\n    }\n  }\n}\n\nvar EventMixin = {\n\n  __patched: 'Event',\n\n  get composed() {\n    if (this.isTrusted && this.__composed === undefined) {\n      this.__composed = alwaysComposed[this.type];\n    }\n    return this.__composed || false;\n  },\n\n  composedPath: function composedPath() {\n    if (!this.__composedPath) {\n      this.__composedPath = pathComposer(this.__target, this.composed);\n    }\n    return this.__composedPath;\n  },\n\n  get target() {\n    return retarget(this.currentTarget, this.composedPath());\n  },\n\n  // http://w3c.github.io/webcomponents/spec/shadow/#event-relatedtarget-retargeting\n  get relatedTarget() {\n    if (!this.__relatedTarget) {\n      return null;\n    }\n    if (!this.__relatedTargetComposedPath) {\n      this.__relatedTargetComposedPath = pathComposer(this.__relatedTarget, true);\n    }\n    // find the deepest node in relatedTarget composed path that is in the same root with the currentTarget\n    return retarget(this.currentTarget, this.__relatedTargetComposedPath);\n  },\n  stopPropagation: function stopPropagation() {\n    Event.prototype.stopPropagation.call(this);\n    this.__propagationStopped = true;\n  },\n  stopImmediatePropagation: function stopImmediatePropagation() {\n    Event.prototype.stopImmediatePropagation.call(this);\n    this.__immediatePropagationStopped = true;\n    this.__propagationStopped = true;\n  }\n\n};\n\nfunction mixinComposedFlag(Base) {\n  // NOTE: avoiding use of `class` here so that transpiled output does not\n  // try to do `Base.call` with a dom construtor.\n  var klazz = function(type, options) {\n    var event = new Base(type, options);\n    event.__composed = options && Boolean(options.composed);\n    return event;\n  }\n  // put constructor properties on subclass\n  mixin(klazz, Base);\n  klazz.prototype = Base.prototype;\n  return klazz;\n}\n\nvar nonBubblingEventsToRetarget = {\n  focus: true,\n  blur: true\n};\n\nfunction fireHandlers(event, node, phase) {\n  var hs = node.__handlers && node.__handlers[event.type] &&\n    node.__handlers[event.type][phase];\n  if (hs) {\n    for (var i = 0, fn; (fn = hs[i]); i++) {\n      fn.call(node, event);\n      if (event.__immediatePropagationStopped) {\n        return;\n      }\n    }\n  }\n}\n\nfunction retargetNonBubblingEvent(e) {\n  var path = e.composedPath();\n  var node;\n  // override `currentTarget` to let patched `target` calculate correctly\n  Object.defineProperty(e, 'currentTarget', {\n    get: function() {\n      return node;\n    },\n    configurable: true\n  });\n  for (var i = path.length - 1; i >= 0; i--) {\n    node = path[i];\n    // capture phase fires all capture handlers\n    fireHandlers(e, node, 'capture');\n    if (e.__propagationStopped) {\n      return;\n    }\n  }\n\n  // set the event phase to `AT_TARGET` as in spec\n  Object.defineProperty(e, 'eventPhase', {value: Event.AT_TARGET});\n\n  // the event only needs to be fired when owner roots change when iterating the event path\n  // keep track of the last seen owner root\n  var lastFiredRoot;\n  for (var i$1 = 0; i$1 < path.length; i$1++) {\n    node = path[i$1];\n    if (i$1 === 0 || (node.shadowRoot && node.shadowRoot === lastFiredRoot)) {\n      fireHandlers(e, node, 'bubble');\n      // don't bother with window, it doesn't have `getRootNode` and will be last in the path anyway\n      if (node !== window) {\n        lastFiredRoot = node.getRootNode();\n      }\n      if (e.__propagationStopped) {\n        return;\n      }\n    }\n  }\n}\n\nfunction addEventListener(type, fn, optionsOrCapture) {\n  var this$1 = this;\n\n  if (!fn) {\n    return;\n  }\n\n  // The callback `fn` might be used for multiple nodes/events. Since we generate\n  // a wrapper function, we need to keep track of it when we remove the listener.\n  // It's more efficient to store the node/type/options information as Array in\n  // `fn` itself rather than the node (we assume that the same callback is used\n  // for few nodes at most, whereas a node will likely have many event listeners).\n  // NOTE(valdrin) invoking external functions is costly, inline has better perf.\n  var capture, once, passive;\n  if (typeof optionsOrCapture === 'object') {\n    capture = Boolean(optionsOrCapture.capture);\n    once = Boolean(optionsOrCapture.once);\n    passive = Boolean(optionsOrCapture.passive);\n  } else {\n    capture = Boolean(optionsOrCapture);\n    once = false;\n    passive = false;\n  }\n  if (fn.__eventWrappers) {\n    // Stop if the wrapper function has already been created.\n    for (var i = 0; i < fn.__eventWrappers.length; i++) {\n      if (fn.__eventWrappers[i].node === this$1 &&\n          fn.__eventWrappers[i].type === type &&\n          fn.__eventWrappers[i].capture === capture &&\n          fn.__eventWrappers[i].once === once &&\n          fn.__eventWrappers[i].passive === passive) {\n        return;\n      }\n    }\n  } else {\n    fn.__eventWrappers = [];\n  }\n\n  var wrapperFn = function(e) {\n    // Support `once` option.\n    if (once) {\n      this.removeEventListener(type, fn, optionsOrCapture);\n    }\n    if (!e.__target) {\n      e.__target = e.target;\n      e.__relatedTarget = e.relatedTarget;\n      patchPrototype(e, EventMixin);\n    }\n    // There are two critera that should stop events from firing on this node\n    // 1. the event is not composed and the current node is not in the same root as the target\n    // 2. when bubbling, if after retargeting, relatedTarget and target point to the same node\n    if (e.composed || e.composedPath().indexOf(this) > -1) {\n      if (e.eventPhase === Event.BUBBLING_PHASE) {\n        if (e.target === e.relatedTarget) {\n          e.stopImmediatePropagation();\n          return;\n        }\n      }\n      return fn(e);\n    }\n  };\n  // Store the wrapper information.\n  fn.__eventWrappers.push({\n    node: this,\n    type: type,\n    capture: capture,\n    once: once,\n    passive: passive,\n    wrapperFn: wrapperFn\n  });\n\n  if (nonBubblingEventsToRetarget[type]) {\n    this.__handlers = this.__handlers || {};\n    this.__handlers[type] = this.__handlers[type] || {capture: [], bubble: []};\n    this.__handlers[type][capture ? 'capture' : 'bubble'].push(wrapperFn);\n  } else {\n    origAddEventListener.call(this, type, wrapperFn, optionsOrCapture);\n  }\n}\n\nfunction removeEventListener(type, fn, optionsOrCapture) {\n  var this$1 = this;\n\n  if (!fn) {\n    return;\n  }\n\n  // NOTE(valdrin) invoking external functions is costly, inline has better perf.\n  var capture, once, passive;\n  if (typeof optionsOrCapture === 'object') {\n    capture = Boolean(optionsOrCapture.capture);\n    once = Boolean(optionsOrCapture.once);\n    passive = Boolean(optionsOrCapture.passive);\n  } else {\n    capture = Boolean(optionsOrCapture);\n    once = false;\n    passive = false;\n  }\n  // Search the wrapped function.\n  var wrapperFn = undefined;\n  if (fn.__eventWrappers) {\n    for (var i = 0; i < fn.__eventWrappers.length; i++) {\n      if (fn.__eventWrappers[i].node === this$1 &&\n          fn.__eventWrappers[i].type === type &&\n          fn.__eventWrappers[i].capture === capture &&\n          fn.__eventWrappers[i].once === once &&\n          fn.__eventWrappers[i].passive === passive) {\n        wrapperFn = fn.__eventWrappers.splice(i, 1)[0].wrapperFn;\n        // Cleanup.\n        if (!fn.__eventWrappers.length) {\n          fn.__eventWrappers = undefined;\n        }\n        break;\n      }\n    }\n  }\n\n  origRemoveEventListener.call(this, type, wrapperFn || fn, optionsOrCapture);\n  if (wrapperFn && nonBubblingEventsToRetarget[type] &&\n      this.__handlers && this.__handlers[type]) {\n    var arr = this.__handlers[type][capture ? 'capture' : 'bubble'];\n    var idx = arr.indexOf(wrapperFn);\n    if (idx > -1) {\n      arr.splice(idx, 1);\n    }\n  }\n}\n\nfunction activateFocusEventOverrides() {\n  for (var ev in nonBubblingEventsToRetarget) {\n    window.addEventListener(ev, function(e) {\n      if (!e.__target) {\n        e.__target = e.target;\n        e.__relatedTarget = e.relatedTarget;\n        patchPrototype(e, EventMixin);\n        retargetNonBubblingEvent(e);\n        e.stopImmediatePropagation();\n      }\n    }, true);\n  }\n}\n\n\nvar PatchedEvent = mixinComposedFlag(Event);\nvar PatchedCustomEvent = mixinComposedFlag(CustomEvent);\nvar PatchedMouseEvent = mixinComposedFlag(MouseEvent);\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Patches elements that interacts with ShadyDOM\n * such that tree traversal and mutation apis act like they would under\n * ShadowDOM.\n *\n * This import enables seemless interaction with ShadyDOM powered\n * custom elements, enabling better interoperation with 3rd party code,\n * libraries, and frameworks that use DOM tree manipulation apis.\n */\n\nif (settings.inUse) {\n\n  window.ShadyDOM = {\n    tree: tree,\n    getNativeProperty: getNativeProperty,\n    patch: patchNode,\n    isPatched: isNodePatched,\n    getComposedInnerHTML: getComposedInnerHTML,\n    getComposedChildNodes: getComposedChildNodes$1,\n    unpatch: unpatchNode,\n    canUnpatch: canUnpatchNode,\n    isShadyRoot: isShadyRoot,\n    enqueue: enqueue,\n    flush: flush$1,\n    inUse: settings.inUse,\n    filterMutations: filterMutations,\n    observeChildren: observeChildren,\n    unobserveChildren: unobserveChildren\n  };\n\n  var createRootAndEnsurePatched = function(node) {\n    // TODO(sorvell): need to ensure ancestors are patched but this introduces\n    // a timing problem with gathering composed children.\n    // (1) currently the child list is crawled and patched when patching occurs\n    // (this needs to change)\n    // (2) we can only patch when an element has received its parsed children\n    // because we cannot detect them when inserted by parser.\n    // let ancestor = node;\n    // while (ancestor) {\n    //   patchNode(ancestor);\n    //   ancestor = ancestor.parentNode || ancestor.host;\n    // }\n    patchNode(node);\n    var root = new ShadyRoot(node);\n    patchNode(root);\n    return root;\n  }\n\n  Element.prototype.attachShadow = function() {\n    return createRootAndEnsurePatched(this);\n  }\n\n  Node.prototype.addEventListener = addEventListener;\n  Node.prototype.removeEventListener = removeEventListener;\n  Event = PatchedEvent;\n  CustomEvent = PatchedCustomEvent;\n  MouseEvent = PatchedMouseEvent;\n  activateFocusEventOverrides();\n\n  Object.defineProperty(Node.prototype, 'isConnected', {\n    get: function get() {\n      return document.documentElement.contains(this);\n    },\n    configurable: true\n  });\n\n  Node.prototype.getRootNode = function(options) {\n    return getRootNode(this, options);\n  }\n\n  Object.defineProperty(Element.prototype, 'slot', {\n    get: function get$1() {\n      return this.getAttribute('slot');\n    },\n    set: function set(value) {\n      this.setAttribute('slot', value);\n    },\n    configurable: true\n  });\n\n  Object.defineProperty(Node.prototype, 'assignedSlot', {\n    get: function get$2() {\n      return this._assignedSlot || null;\n    },\n    configurable: true\n  });\n\n  var nativeSetAttribute = Element.prototype.setAttribute;\n  Element.prototype.setAttribute = setAttribute;\n  // NOTE: expose native setAttribute to allow hooking native method\n  // (e.g. this is done in ShadyCSS)\n  Element.prototype.__nativeSetAttribute = nativeSetAttribute;\n\n  var classNameDescriptor = {\n    get: function get$3() {\n      return this.getAttribute('class');\n    },\n    set: function set$1(value) {\n      this.setAttribute('class', value);\n    },\n    configurable: true\n  };\n\n  // Safari 9 `className` is not configurable\n  var cn = Object.getOwnPropertyDescriptor(Element.prototype, 'className');\n  if (cn && cn.configurable) {\n    Object.defineProperty(Element.prototype, 'className', classNameDescriptor);\n  } else {\n    // on IE `className` is on Element\n    var h = window.customElements && window.customElements.nativeHTMLElement ||\n      HTMLElement;\n    cn = Object.getOwnPropertyDescriptor(h.prototype, 'className');\n    if (cn && cn.configurable) {\n      Object.defineProperty(h.prototype, 'className', classNameDescriptor);\n    }\n  }\n}\n\n}());\n\n//# sourceMappingURL=shadydom.min.js.map\n","(function () {\n'use strict';\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/*\nExtremely simple css parser. Intended to be not more than what we need\nand definitely not necessarily correct =).\n*/\n\n// given a string of css, return a simple rule tree\n\nfunction parse(text) {\n  text = clean(text);\n  return parseCss(lex(text), text);\n}\n\n// remove stuff we don't care about that may hinder parsing\nfunction clean(cssText) {\n  return cssText.replace(RX.comments, '').replace(RX.port, '');\n}\n\n// super simple {...} lexer that returns a node tree\nfunction lex(text) {\n  var root = {\n    start: 0,\n    end: text.length\n  };\n  var n = root;\n  for (var i = 0, l = text.length; i < l; i++) {\n    if (text[i] === OPEN_BRACE) {\n      if (!n.rules) {\n        n.rules = [];\n      }\n      var p = n;\n      var previous = p.rules[p.rules.length - 1];\n      n = {\n        start: i + 1,\n        parent: p,\n        previous: previous\n      };\n      p.rules.push(n);\n    } else if (text[i] === CLOSE_BRACE) {\n      n.end = i + 1;\n      n = n.parent || root;\n    }\n  }\n  return root;\n}\n\n// add selectors/cssText to node tree\nfunction parseCss(node, text) {\n  var t = text.substring(node.start, node.end - 1);\n  node.parsedCssText = node.cssText = t.trim();\n  if (node.parent) {\n    var ss = node.previous ? node.previous.end : node.parent.start;\n    t = text.substring(ss, node.start - 1);\n    t = _expandUnicodeEscapes(t);\n    t = t.replace(RX.multipleSpaces, ' ');\n    // TODO(sorvell): ad hoc; make selector include only after last ;\n    // helps with mixin syntax\n    t = t.substring(t.lastIndexOf(';') + 1);\n    var s = node.parsedSelector = node.selector = t.trim();\n    node.atRule = s.indexOf(AT_START) === 0;\n    // note, support a subset of rule types...\n    if (node.atRule) {\n      if (s.indexOf(MEDIA_START) === 0) {\n        node.type = types.MEDIA_RULE;\n      } else if (s.match(RX.keyframesRule)) {\n        node.type = types.KEYFRAMES_RULE;\n        node.keyframesName = node.selector.split(RX.multipleSpaces).pop();\n      }\n    } else {\n      if (s.indexOf(VAR_START) === 0) {\n        node.type = types.MIXIN_RULE;\n      } else {\n        node.type = types.STYLE_RULE;\n      }\n    }\n  }\n  var r$ = node.rules;\n  if (r$) {\n    for (var i = 0, l = r$.length, r; i < l && (r = r$[i]); i++) {\n      parseCss(r, text);\n    }\n  }\n  return node;\n}\n\n// conversion of sort unicode escapes with spaces like `\\33 ` (and longer) into\n// expanded form that doesn't require trailing space `\\000033`\nfunction _expandUnicodeEscapes(s) {\n  return s.replace(/\\\\([0-9a-f]{1,6})\\s/gi, function () {\n    var code = arguments[1],\n        repeat = 6 - code.length;\n    while (repeat--) {\n      code = '0' + code;\n    }\n    return '\\\\' + code;\n  });\n}\n\n// stringify parsed css.\nfunction stringify(node, preserveProperties, text) {\n  text = text || '';\n  // calc rule cssText\n  var cssText = '';\n  if (node.cssText || node.rules) {\n    var r$ = node.rules;\n    if (r$ && !_hasMixinRules(r$)) {\n      for (var i = 0, l = r$.length, r; i < l && (r = r$[i]); i++) {\n        cssText = stringify(r, preserveProperties, cssText);\n      }\n    } else {\n      cssText = preserveProperties ? node.cssText : removeCustomProps(node.cssText);\n      cssText = cssText.trim();\n      if (cssText) {\n        cssText = '  ' + cssText + '\\n';\n      }\n    }\n  }\n  // emit rule if there is cssText\n  if (cssText) {\n    if (node.selector) {\n      text += node.selector + ' ' + OPEN_BRACE + '\\n';\n    }\n    text += cssText;\n    if (node.selector) {\n      text += CLOSE_BRACE + '\\n\\n';\n    }\n  }\n  return text;\n}\n\nfunction _hasMixinRules(rules) {\n  return rules[0].selector.indexOf(VAR_START) === 0;\n}\n\nfunction removeCustomProps(cssText) {\n  cssText = removeCustomPropAssignment(cssText);\n  return removeCustomPropApply(cssText);\n}\n\nfunction removeCustomPropAssignment(cssText) {\n  return cssText.replace(RX.customProp, '').replace(RX.mixinProp, '');\n}\n\nfunction removeCustomPropApply(cssText) {\n  return cssText.replace(RX.mixinApply, '').replace(RX.varApply, '');\n}\n\nvar types = {\n  STYLE_RULE: 1,\n  KEYFRAMES_RULE: 7,\n  MEDIA_RULE: 4,\n  MIXIN_RULE: 1000\n};\n\nvar OPEN_BRACE = '{';\nvar CLOSE_BRACE = '}';\n\n// helper regexp's\nvar RX = {\n  comments: /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//gim,\n  port: /@import[^;]*;/gim,\n  customProp: /(?:^[^;\\-\\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\\n]|$)/gim,\n  mixinProp: /(?:^[^;\\-\\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\\n]|$)?/gim,\n  mixinApply: /@apply\\s*\\(?[^);]*\\)?\\s*(?:[;\\n]|$)?/gim,\n  varApply: /[^;:]*?:[^;]*?var\\([^;]*\\)(?:[;\\n]|$)?/gim,\n  keyframesRule: /^@[^\\s]*keyframes/,\n  multipleSpaces: /\\s+/g\n};\n\nvar VAR_START = '--';\nvar MEDIA_START = '@media';\nvar AT_START = '@';\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar nativeShadow = !(window.ShadyDOM && window.ShadyDOM.inUse);\n// chrome 49 has semi-working css vars, check if box-shadow works\n// safari 9.1 has a recalc bug: https://bugs.webkit.org/show_bug.cgi?id=155782\nvar nativeCssVariables = !navigator.userAgent.match('AppleWebKit/601') && window.CSS && CSS.supports && CSS.supports('box-shadow', '0 0 0 var(--foo)');\n\n// experimental support for native @apply\nfunction detectNativeApply() {\n  var style = document.createElement('style');\n  style.textContent = '.foo { @apply --foo }';\n  document.head.appendChild(style);\n  var nativeCssApply = style.sheet.cssRules[0].cssText.indexOf('apply') >= 0;\n  document.head.removeChild(style);\n  return nativeCssApply;\n}\n\nvar nativeCssApply = false && detectNativeApply();\n\nfunction parseSettings(settings) {\n  if (settings) {\n    nativeCssVariables = nativeCssVariables && !settings.shimcssproperties;\n    nativeShadow = nativeShadow && !settings.shimshadow;\n  }\n}\n\nif (window.ShadyCSS) {\n  parseSettings(window.ShadyCSS);\n} else if (window.WebComponents) {\n  parseSettings(window.WebComponents.flags);\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction toCssText(rules, callback) {\n  if (typeof rules === 'string') {\n    rules = parse(rules);\n  }\n  if (callback) {\n    forEachRule(rules, callback);\n  }\n  return stringify(rules, nativeCssVariables);\n}\n\nfunction rulesForStyle(style) {\n  if (!style.__cssRules && style.textContent) {\n    style.__cssRules = parse(style.textContent);\n  }\n  return style.__cssRules;\n}\n\n// Tests if a rule is a keyframes selector, which looks almost exactly\n// like a normal selector but is not (it has nothing to do with scoping\n// for example).\nfunction isKeyframesSelector(rule) {\n  return rule.parent && rule.parent.type === types.KEYFRAMES_RULE;\n}\n\nfunction forEachRule(node, styleRuleCallback, keyframesRuleCallback, onlyActiveRules) {\n  if (!node) {\n    return;\n  }\n  var skipRules = false;\n  if (onlyActiveRules) {\n    if (node.type === types.MEDIA_RULE) {\n      var matchMedia = node.selector.match(rx.MEDIA_MATCH);\n      if (matchMedia) {\n        // if rule is a non matching @media rule, skip subrules\n        if (!window.matchMedia(matchMedia[1]).matches) {\n          skipRules = true;\n        }\n      }\n    }\n  }\n  if (node.type === types.STYLE_RULE) {\n    styleRuleCallback(node);\n  } else if (keyframesRuleCallback && node.type === types.KEYFRAMES_RULE) {\n    keyframesRuleCallback(node);\n  } else if (node.type === types.MIXIN_RULE) {\n    skipRules = true;\n  }\n  var r$ = node.rules;\n  if (r$ && !skipRules) {\n    for (var i = 0, l = r$.length, r; i < l && (r = r$[i]); i++) {\n      forEachRule(r, styleRuleCallback, keyframesRuleCallback, onlyActiveRules);\n    }\n  }\n}\n\n// add a string of cssText to the document.\nfunction applyCss(cssText, moniker, target, contextNode) {\n  var style = createScopeStyle(cssText, moniker);\n  return applyStyle$1(style, target, contextNode);\n}\n\nfunction applyStyle$1(style, target, contextNode) {\n  target = target || document.head;\n  var after = contextNode && contextNode.nextSibling || target.firstChild;\n  lastHeadApplyNode = style;\n  return target.insertBefore(style, after);\n}\n\nfunction createScopeStyle(cssText, moniker) {\n  var style = document.createElement('style');\n  if (moniker) {\n    style.setAttribute('scope', moniker);\n  }\n  style.textContent = cssText;\n  return style;\n}\n\nvar lastHeadApplyNode = null;\n\n// insert a comment node as a styling position placeholder.\nfunction applyStylePlaceHolder(moniker) {\n  var placeHolder = document.createComment(' Shady DOM styles for ' + moniker + ' ');\n  var after = lastHeadApplyNode ? lastHeadApplyNode.nextSibling : null;\n  var scope = document.head;\n  scope.insertBefore(placeHolder, after || scope.firstChild);\n  lastHeadApplyNode = placeHolder;\n  return placeHolder;\n}\n\n\n\n// cssBuildTypeForModule: function (module) {\n//   let dm = Polymer.DomModule.import(module);\n//   if (dm) {\n//     return getCssBuildType(dm);\n//   }\n// },\n//\n\n\n// Walk from text[start] matching parens\n// returns position of the outer end paren\nfunction findMatchingParen(text, start) {\n  var level = 0;\n  for (var i = start, l = text.length; i < l; i++) {\n    if (text[i] === '(') {\n      level++;\n    } else if (text[i] === ')') {\n      if (--level === 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction processVariableAndFallback(str, callback) {\n  // find 'var('\n  var start = str.indexOf('var(');\n  if (start === -1) {\n    // no var?, everything is prefix\n    return callback(str, '', '', '');\n  }\n  //${prefix}var(${inner})${suffix}\n  var end = findMatchingParen(str, start + 3);\n  var inner = str.substring(start + 4, end);\n  var prefix = str.substring(0, start);\n  // suffix may have other variables\n  var suffix = processVariableAndFallback(str.substring(end + 1), callback);\n  var comma = inner.indexOf(',');\n  // value and fallback args should be trimmed to match in property lookup\n  if (comma === -1) {\n    // variable, no fallback\n    return callback(prefix, inner.trim(), '', suffix);\n  }\n  // var(${value},${fallback})\n  var value = inner.substring(0, comma).trim();\n  var fallback = inner.substring(comma + 1).trim();\n  return callback(prefix, value, fallback, suffix);\n}\n\nfunction setElementClassRaw(element, value) {\n  // use native setAttribute provided by ShadyDOM when setAttribute is patched\n  if (element.__nativeSetAttribute) {\n    element.__nativeSetAttribute('class', value);\n  } else {\n    element.setAttribute('class', value);\n  }\n}\n\nvar rx = {\n  VAR_ASSIGN: /(?:^|[;\\s{]\\s*)(--[\\w-]*?)\\s*:\\s*(?:([^;{]*)|{([^}]*)})(?:(?=[;\\s}])|$)/gi,\n  MIXIN_MATCH: /(?:^|\\W+)@apply\\s*\\(?([^);\\n]*)\\)?/gi,\n  VAR_CONSUMED: /(--[\\w-]+)\\s*([:,;)]|$)/gi,\n  ANIMATION_MATCH: /(animation\\s*:)|(animation-name\\s*:)/,\n  MEDIA_MATCH: /@media[^(]*(\\([^)]*\\))/,\n  IS_VAR: /^--/,\n  BRACKETED: /\\{[^}]*\\}/g,\n  HOST_PREFIX: '(?:^|[^.#[:])',\n  HOST_SUFFIX: '($|[.:[\\\\s>+~])'\n};\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/* Transforms ShadowDOM styling into ShadyDOM styling\n\n* scoping:\n\n  * elements in scope get scoping selector class=\"x-foo-scope\"\n  * selectors re-written as follows:\n\n    div button -> div.x-foo-scope button.x-foo-scope\n\n* :host -> scopeName\n\n* :host(...) -> scopeName...\n\n* ::slotted(...) -> scopeName > ...\n\n* ...:dir(ltr|rtl) -> [dir=\"ltr|rtl\"] ..., ...[dir=\"ltr|rtl\"]\n\n* :host(:dir[rtl]) -> scopeName:dir(rtl) -> [dir=\"rtl\"] scopeName, scopeName[dir=\"rtl\"]\n\n*/\nvar SCOPE_NAME = 'style-scope';\n\nvar StyleTransformer = {\n\n  // Given a node and scope name, add a scoping class to each node\n  // in the tree. This facilitates transforming css into scoped rules.\n  dom: function dom(node, scope, shouldRemoveScope) {\n    // one time optimization to skip scoping...\n    if (node.__styleScoped) {\n      node.__styleScoped = null;\n    } else {\n      this._transformDom(node, scope || '', shouldRemoveScope);\n    }\n  },\n\n  _transformDom: function _transformDom(node, selector, shouldRemoveScope) {\n    if (node.nodeType === Node.ELEMENT_NODE) {\n      this.element(node, selector, shouldRemoveScope);\n    }\n    var c$ = node.localName === 'template' ? (node.content || node._content).childNodes : node.children || node.childNodes;\n    if (c$) {\n      for (var i = 0; i < c$.length; i++) {\n        this._transformDom(c$[i], selector, shouldRemoveScope);\n      }\n    }\n  },\n\n  element: function element(_element, scope, shouldRemoveScope) {\n    // note: if using classes, we add both the general 'style-scope' class\n    // as well as the specific scope. This enables easy filtering of all\n    // `style-scope` elements\n    if (scope) {\n      // note: svg on IE does not have classList so fallback to class\n      if (_element.classList) {\n        if (shouldRemoveScope) {\n          _element.classList.remove(SCOPE_NAME);\n          _element.classList.remove(scope);\n        } else {\n          _element.classList.add(SCOPE_NAME);\n          _element.classList.add(scope);\n        }\n      } else if (_element.getAttribute) {\n        var c = _element.getAttribute(CLASS);\n        if (shouldRemoveScope) {\n          if (c) {\n            var newValue = c.replace(SCOPE_NAME, '').replace(scope, '');\n            setElementClassRaw(_element, newValue);\n          }\n        } else {\n          var _newValue = (c ? c + ' ' : '') + SCOPE_NAME + ' ' + scope;\n          setElementClassRaw(_element, _newValue);\n        }\n      }\n    }\n  },\n\n  elementStyles: function elementStyles(element, styleRules, callback) {\n    var cssBuildType = element.__cssBuild;\n    // no need to shim selectors if settings.useNativeShadow, also\n    // a shady css build will already have transformed selectors\n    // NOTE: This method may be called as part of static or property shimming.\n    // When there is a targeted build it will not be called for static shimming,\n    // but when the property shim is used it is called and should opt out of\n    // static shimming work when a proper build exists.\n    var cssText = nativeShadow || cssBuildType === 'shady' ? toCssText(styleRules, callback) : this.css(styleRules, element.is, element.extends, callback) + '\\n\\n';\n    return cssText.trim();\n  },\n\n  // Given a string of cssText and a scoping string (scope), returns\n  // a string of scoped css where each selector is transformed to include\n  // a class created from the scope. ShadowDOM selectors are also transformed\n  // (e.g. :host) to use the scoping selector.\n  css: function css(rules, scope, ext, callback) {\n    var hostScope = this._calcHostScope(scope, ext);\n    scope = this._calcElementScope(scope);\n    var self = this;\n    return toCssText(rules, function (rule) {\n      if (!rule.isScoped) {\n        self.rule(rule, scope, hostScope);\n        rule.isScoped = true;\n      }\n      if (callback) {\n        callback(rule, scope, hostScope);\n      }\n    });\n  },\n\n  _calcElementScope: function _calcElementScope(scope) {\n    if (scope) {\n      return CSS_CLASS_PREFIX + scope;\n    } else {\n      return '';\n    }\n  },\n\n  _calcHostScope: function _calcHostScope(scope, ext) {\n    return ext ? '[is=' + scope + ']' : scope;\n  },\n\n  rule: function rule(_rule, scope, hostScope) {\n    this._transformRule(_rule, this._transformComplexSelector, scope, hostScope);\n  },\n\n  // transforms a css rule to a scoped rule.\n  _transformRule: function _transformRule(rule, transformer, scope, hostScope) {\n    // NOTE: save transformedSelector for subsequent matching of elements\n    // against selectors (e.g. when calculating style properties)\n    rule.selector = rule.transformedSelector = this._transformRuleCss(rule, transformer, scope, hostScope);\n  },\n\n  _transformRuleCss: function _transformRuleCss(rule, transformer, scope, hostScope) {\n    var p$ = rule.selector.split(COMPLEX_SELECTOR_SEP);\n    // we want to skip transformation of rules that appear in keyframes,\n    // because they are keyframe selectors, not element selectors.\n    if (!isKeyframesSelector(rule)) {\n      for (var i = 0, l = p$.length, p; i < l && (p = p$[i]); i++) {\n        p$[i] = transformer.call(this, p, scope, hostScope);\n      }\n    }\n    return p$.join(COMPLEX_SELECTOR_SEP);\n  },\n\n  _transformComplexSelector: function _transformComplexSelector(selector, scope, hostScope) {\n    var _this = this;\n\n    var stop = false;\n    selector = selector.trim();\n    // Remove spaces inside of selectors like `:nth-of-type` because it confuses SIMPLE_SELECTOR_SEP\n    selector = selector.replace(NTH, function (m, type, inner) {\n      return ':' + type + '(' + inner.replace(/\\s/g, '') + ')';\n    });\n    selector = selector.replace(SLOTTED_START, HOST + ' $1');\n    selector = selector.replace(SIMPLE_SELECTOR_SEP, function (m, c, s) {\n      if (!stop) {\n        var info = _this._transformCompoundSelector(s, c, scope, hostScope);\n        stop = stop || info.stop;\n        c = info.combinator;\n        s = info.value;\n      }\n      return c + s;\n    });\n    return selector;\n  },\n\n  _transformCompoundSelector: function _transformCompoundSelector(selector, combinator, scope, hostScope) {\n    // replace :host with host scoping class\n    var slottedIndex = selector.indexOf(SLOTTED);\n    if (selector.indexOf(HOST) >= 0) {\n      selector = this._transformHostSelector(selector, hostScope);\n      // replace other selectors with scoping class\n    } else if (slottedIndex !== 0) {\n      selector = scope ? this._transformSimpleSelector(selector, scope) : selector;\n    }\n    // mark ::slotted() scope jump to replace with descendant selector + arg\n    // also ignore left-side combinator\n    var slotted = false;\n    if (slottedIndex >= 0) {\n      combinator = '';\n      slotted = true;\n    }\n    // process scope jumping selectors up to the scope jump and then stop\n    var stop = void 0;\n    if (slotted) {\n      stop = true;\n      if (slotted) {\n        // .zonk ::slotted(.foo) -> .zonk.scope > .foo\n        selector = selector.replace(SLOTTED_PAREN, function (m, paren) {\n          return ' > ' + paren;\n        });\n      }\n    }\n    selector = selector.replace(DIR_PAREN, function (m, before, dir) {\n      return '[dir=\"' + dir + '\"] ' + before + ', ' + before + '[dir=\"' + dir + '\"]';\n    });\n    return { value: selector, combinator: combinator, stop: stop };\n  },\n\n  _transformSimpleSelector: function _transformSimpleSelector(selector, scope) {\n    var p$ = selector.split(PSEUDO_PREFIX);\n    p$[0] += scope;\n    return p$.join(PSEUDO_PREFIX);\n  },\n\n  // :host(...) -> scopeName...\n  _transformHostSelector: function _transformHostSelector(selector, hostScope) {\n    var m = selector.match(HOST_PAREN);\n    var paren = m && m[2].trim() || '';\n    if (paren) {\n      if (!paren[0].match(SIMPLE_SELECTOR_PREFIX)) {\n        // paren starts with a type selector\n        var typeSelector = paren.split(SIMPLE_SELECTOR_PREFIX)[0];\n        // if the type selector is our hostScope then avoid pre-pending it\n        if (typeSelector === hostScope) {\n          return paren;\n          // otherwise, this selector should not match in this scope so\n          // output a bogus selector.\n        } else {\n          return SELECTOR_NO_MATCH;\n        }\n      } else {\n        // make sure to do a replace here to catch selectors like:\n        // `:host(.foo)::before`\n        return selector.replace(HOST_PAREN, function (m, host, paren) {\n          return hostScope + paren;\n        });\n      }\n      // if no paren, do a straight :host replacement.\n      // TODO(sorvell): this should not strictly be necessary but\n      // it's needed to maintain support for `:host[foo]` type selectors\n      // which have been improperly used under Shady DOM. This should be\n      // deprecated.\n    } else {\n      return selector.replace(HOST, hostScope);\n    }\n  },\n\n  documentRule: function documentRule(rule) {\n    // reset selector in case this is redone.\n    rule.selector = rule.parsedSelector;\n    this.normalizeRootSelector(rule);\n    this._transformRule(rule, this._transformDocumentSelector);\n  },\n\n  normalizeRootSelector: function normalizeRootSelector(rule) {\n    if (rule.selector === ROOT) {\n      rule.selector = 'html';\n    }\n  },\n\n  _transformDocumentSelector: function _transformDocumentSelector(selector) {\n    return selector.match(SLOTTED) ? this._transformComplexSelector(selector, SCOPE_DOC_SELECTOR) : this._transformSimpleSelector(selector.trim(), SCOPE_DOC_SELECTOR);\n  },\n  SCOPE_NAME: SCOPE_NAME\n};\n\nvar NTH = /:(nth[-\\w]+)\\(([^)]+)\\)/;\nvar SCOPE_DOC_SELECTOR = ':not(.' + SCOPE_NAME + ')';\nvar COMPLEX_SELECTOR_SEP = ',';\nvar SIMPLE_SELECTOR_SEP = /(^|[\\s>+~]+)((?:\\[.+?\\]|[^\\s>+~=\\[])+)/g;\nvar SIMPLE_SELECTOR_PREFIX = /[[.:#*]/;\nvar HOST = ':host';\nvar ROOT = ':root';\nvar SLOTTED = '::slotted';\nvar SLOTTED_START = new RegExp('^(' + SLOTTED + ')');\n// NOTE: this supports 1 nested () pair for things like\n// :host(:not([selected]), more general support requires\n// parsing which seems like overkill\nvar HOST_PAREN = /(:host)(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))/;\n// similar to HOST_PAREN\nvar SLOTTED_PAREN = /(?:::slotted)(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))/;\nvar DIR_PAREN = /(.*):dir\\((?:(ltr|rtl))\\)/;\nvar CSS_CLASS_PREFIX = '.';\nvar PSEUDO_PREFIX = ':';\nvar CLASS = 'class';\nvar SELECTOR_NO_MATCH = 'should_not_match';\n\nvar asyncGenerator = function () {\n  function AwaitValue(value) {\n    this.value = value;\n  }\n\n  function AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function (resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n\n        if (value instanceof AwaitValue) {\n          Promise.resolve(value.value).then(function (arg) {\n            resume(\"next\", arg);\n          }, function (arg) {\n            resume(\"throw\", arg);\n          });\n        } else {\n          settle(result.done ? \"return\" : \"normal\", result.value);\n        }\n      } catch (err) {\n        settle(\"throw\", err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case \"return\":\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case \"throw\":\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== \"function\") {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n    AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n      return this;\n    };\n  }\n\n  AsyncGenerator.prototype.next = function (arg) {\n    return this._invoke(\"next\", arg);\n  };\n\n  AsyncGenerator.prototype.throw = function (arg) {\n    return this._invoke(\"throw\", arg);\n  };\n\n  AsyncGenerator.prototype.return = function (arg) {\n    return this._invoke(\"return\", arg);\n  };\n\n  return {\n    wrap: function (fn) {\n      return function () {\n        return new AsyncGenerator(fn.apply(this, arguments));\n      };\n    },\n    await: function (value) {\n      return new AwaitValue(value);\n    }\n  };\n}();\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get$1 = function get$1(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get$1(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar set$1 = function set$1(object, property, value, receiver) {\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent !== null) {\n      set$1(parent, property, value, receiver);\n    }\n  } else if (\"value\" in desc && desc.writable) {\n    desc.value = value;\n  } else {\n    var setter = desc.set;\n\n    if (setter !== undefined) {\n      setter.call(receiver, value);\n    }\n  }\n\n  return value;\n};\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar StyleInfo = function () {\n  createClass(StyleInfo, null, [{\n    key: 'get',\n    value: function get(node) {\n      return node.__styleInfo;\n    }\n  }, {\n    key: 'set',\n    value: function set(node, styleInfo) {\n      node.__styleInfo = styleInfo;\n      return styleInfo;\n    }\n  }]);\n\n  function StyleInfo(ast, placeholder, ownStylePropertyNames, elementName, typeExtension, cssBuild) {\n    classCallCheck(this, StyleInfo);\n\n    this.styleRules = ast || null;\n    this.placeholder = placeholder || null;\n    this.ownStylePropertyNames = ownStylePropertyNames || [];\n    this.overrideStyleProperties = null;\n    this.elementName = elementName || '';\n    this.cssBuild = cssBuild || '';\n    this.typeExtension = typeExtension || '';\n    this.styleProperties = null;\n    this.scopeSelector = null;\n    this.customStyle = null;\n  }\n\n  return StyleInfo;\n}();\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// TODO: dedupe with shady\nvar p = window.Element.prototype;\nvar matchesSelector = p.matches || p.matchesSelector || p.mozMatchesSelector || p.msMatchesSelector || p.oMatchesSelector || p.webkitMatchesSelector;\n\nvar IS_IE = navigator.userAgent.match('Trident');\n\nvar StyleProperties = {\n\n  // decorates styles with rule info and returns an array of used style\n  // property names\n  decorateStyles: function decorateStyles(rules) {\n    var self = this,\n        props = {},\n        keyframes = [],\n        ruleIndex = 0;\n    forEachRule(rules, function (rule) {\n      self.decorateRule(rule);\n      // mark in-order position of ast rule in styles block, used for cache key\n      rule.index = ruleIndex++;\n      self.collectPropertiesInCssText(rule.propertyInfo.cssText, props);\n    }, function onKeyframesRule(rule) {\n      keyframes.push(rule);\n    });\n    // Cache all found keyframes rules for later reference:\n    rules._keyframes = keyframes;\n    // return this list of property names *consumes* in these styles.\n    var names = [];\n    for (var i in props) {\n      names.push(i);\n    }\n    return names;\n  },\n\n  // decorate a single rule with property info\n  decorateRule: function decorateRule(rule) {\n    if (rule.propertyInfo) {\n      return rule.propertyInfo;\n    }\n    var info = {},\n        properties = {};\n    var hasProperties = this.collectProperties(rule, properties);\n    if (hasProperties) {\n      info.properties = properties;\n      // TODO(sorvell): workaround parser seeing mixins as additional rules\n      rule.rules = null;\n    }\n    info.cssText = this.collectCssText(rule);\n    rule.propertyInfo = info;\n    return info;\n  },\n\n  // collects the custom properties from a rule's cssText\n  collectProperties: function collectProperties(rule, properties) {\n    var info = rule.propertyInfo;\n    if (info) {\n      if (info.properties) {\n        Object.assign(properties, info.properties);\n        return true;\n      }\n    } else {\n      var m = void 0,\n          rx$$1 = this.rx.VAR_ASSIGN;\n      var cssText = rule.parsedCssText;\n      var value = void 0;\n      var any = void 0;\n      while (m = rx$$1.exec(cssText)) {\n        // note: group 2 is var, 3 is mixin\n        value = (m[2] || m[3]).trim();\n        // value of 'inherit' or 'unset' is equivalent to not setting the property here\n        if (value !== 'inherit' || value !== 'unset') {\n          properties[m[1].trim()] = value;\n        }\n        any = true;\n      }\n      return any;\n    }\n  },\n\n  // returns cssText of properties that consume variables/mixins\n  collectCssText: function collectCssText(rule) {\n    return this.collectConsumingCssText(rule.parsedCssText);\n  },\n\n  // NOTE: we support consumption inside mixin assignment\n  // but not production, so strip out {...}\n  collectConsumingCssText: function collectConsumingCssText(cssText) {\n    return cssText.replace(this.rx.BRACKETED, '').replace(this.rx.VAR_ASSIGN, '');\n  },\n\n  collectPropertiesInCssText: function collectPropertiesInCssText(cssText, props) {\n    var m = void 0;\n    while (m = this.rx.VAR_CONSUMED.exec(cssText)) {\n      var name = m[1];\n      // This regex catches all variable names, and following non-whitespace char\n      // If next char is not ':', then variable is a consumer\n      if (m[2] !== ':') {\n        props[name] = true;\n      }\n    }\n  },\n\n  // turns custom properties into realized values.\n  reify: function reify(props) {\n    // big perf optimization here: reify only *own* properties\n    // since this object has __proto__ of the element's scope properties\n    var names = Object.getOwnPropertyNames(props);\n    for (var i = 0, n; i < names.length; i++) {\n      n = names[i];\n      props[n] = this.valueForProperty(props[n], props);\n    }\n  },\n\n  // given a property value, returns the reified value\n  // a property value may be:\n  // (1) a literal value like: red or 5px;\n  // (2) a variable value like: var(--a), var(--a, red), or var(--a, --b) or\n  // var(--a, var(--b));\n  // (3) a literal mixin value like { properties }. Each of these properties\n  // can have values that are: (a) literal, (b) variables, (c) @apply mixins.\n  valueForProperty: function valueForProperty(property, props) {\n    var _this = this;\n\n    // case (1) default\n    // case (3) defines a mixin and we have to reify the internals\n    if (property) {\n      if (property.indexOf(';') >= 0) {\n        property = this.valueForProperties(property, props);\n      } else {\n        (function () {\n          // case (2) variable\n          var self = _this;\n          var fn = function fn(prefix, value, fallback, suffix) {\n            if (!value) {\n              return prefix + suffix;\n            }\n            var propertyValue = self.valueForProperty(props[value], props);\n            // if value is \"initial\", then the variable should be treated as unset\n            if (!propertyValue || propertyValue === 'initial') {\n              // fallback may be --a or var(--a) or literal\n              propertyValue = self.valueForProperty(props[fallback] || fallback, props) || fallback;\n            } else if (propertyValue === 'apply-shim-inherit') {\n              // CSS build will replace `inherit` with `apply-shim-inherit`\n              // for use with native css variables.\n              // Since we have full control, we can use `inherit` directly.\n              propertyValue = 'inherit';\n            }\n            return prefix + (propertyValue || '') + suffix;\n          };\n          property = processVariableAndFallback(property, fn);\n        })();\n      }\n    }\n    return property && property.trim() || '';\n  },\n\n  // note: we do not yet support mixin within mixin\n  valueForProperties: function valueForProperties(property, props) {\n    var parts = property.split(';');\n    for (var i = 0, _p, m; i < parts.length; i++) {\n      if (_p = parts[i]) {\n        this.rx.MIXIN_MATCH.lastIndex = 0;\n        m = this.rx.MIXIN_MATCH.exec(_p);\n        if (m) {\n          _p = this.valueForProperty(props[m[1]], props);\n        } else {\n          var colon = _p.indexOf(':');\n          if (colon !== -1) {\n            var pp = _p.substring(colon);\n            pp = pp.trim();\n            pp = this.valueForProperty(pp, props) || pp;\n            _p = _p.substring(0, colon) + pp;\n          }\n        }\n        parts[i] = _p && _p.lastIndexOf(';') === _p.length - 1 ?\n        // strip trailing ;\n        _p.slice(0, -1) : _p || '';\n      }\n    }\n    return parts.join(';');\n  },\n\n  applyProperties: function applyProperties(rule, props) {\n    var output = '';\n    // dynamically added sheets may not be decorated so ensure they are.\n    if (!rule.propertyInfo) {\n      this.decorateRule(rule);\n    }\n    if (rule.propertyInfo.cssText) {\n      output = this.valueForProperties(rule.propertyInfo.cssText, props);\n    }\n    rule.cssText = output;\n  },\n\n  // Apply keyframe transformations to the cssText of a given rule. The\n  // keyframeTransforms object is a map of keyframe names to transformer\n  // functions which take in cssText and spit out transformed cssText.\n  applyKeyframeTransforms: function applyKeyframeTransforms(rule, keyframeTransforms) {\n    var input = rule.cssText;\n    var output = rule.cssText;\n    if (rule.hasAnimations == null) {\n      // Cache whether or not the rule has any animations to begin with:\n      rule.hasAnimations = this.rx.ANIMATION_MATCH.test(input);\n    }\n    // If there are no animations referenced, we can skip transforms:\n    if (rule.hasAnimations) {\n      var transform = void 0;\n      // If we haven't transformed this rule before, we iterate over all\n      // transforms:\n      if (rule.keyframeNamesToTransform == null) {\n        rule.keyframeNamesToTransform = [];\n        for (var keyframe in keyframeTransforms) {\n          transform = keyframeTransforms[keyframe];\n          output = transform(input);\n          // If the transform actually changed the CSS text, we cache the\n          // transform name for future use:\n          if (input !== output) {\n            input = output;\n            rule.keyframeNamesToTransform.push(keyframe);\n          }\n        }\n      } else {\n        // If we already have a list of keyframe names that apply to this\n        // rule, we apply only those keyframe name transforms:\n        for (var i = 0; i < rule.keyframeNamesToTransform.length; ++i) {\n          transform = keyframeTransforms[rule.keyframeNamesToTransform[i]];\n          input = transform(input);\n        }\n        output = input;\n      }\n    }\n    rule.cssText = output;\n  },\n\n  // Test if the rules in these styles matches the given `element` and if so,\n  // collect any custom properties into `props`.\n  propertyDataFromStyles: function propertyDataFromStyles(rules, element) {\n    var props = {},\n        self = this;\n    // generates a unique key for these matches\n    var o = [];\n    // note: active rules excludes non-matching @media rules\n    forEachRule(rules, function (rule) {\n      // TODO(sorvell): we could trim the set of rules at declaration\n      // time to only include ones that have properties\n      if (!rule.propertyInfo) {\n        self.decorateRule(rule);\n      }\n      // match element against transformedSelector: selector may contain\n      // unwanted uniquification and parsedSelector does not directly match\n      // for :host selectors.\n      var selectorToMatch = rule.transformedSelector || rule.parsedSelector;\n      if (element && rule.propertyInfo.properties && selectorToMatch) {\n        if (matchesSelector.call(element, selectorToMatch)) {\n          self.collectProperties(rule, props);\n          // produce numeric key for these matches for lookup\n          addToBitMask(rule.index, o);\n        }\n      }\n    }, null, true);\n    return { properties: props, key: o };\n  },\n\n  whenHostOrRootRule: function whenHostOrRootRule(scope, rule, cssBuild, callback) {\n    if (!rule.propertyInfo) {\n      this.decorateRule(rule);\n    }\n    if (!rule.propertyInfo.properties) {\n      return;\n    }\n    var hostScope = scope.is ? StyleTransformer._calcHostScope(scope.is, scope.extends) : 'html';\n    var parsedSelector = rule.parsedSelector;\n    var isRoot = parsedSelector === ':host > *' || parsedSelector === 'html';\n    var isHost = parsedSelector.indexOf(':host') === 0 && !isRoot;\n    // build info is either in scope (when scope is an element) or in the style\n    // when scope is the default scope; note: this allows default scope to have\n    // mixed mode built and unbuilt styles.\n    if (cssBuild === 'shady') {\n      // :root -> x-foo > *.x-foo for elements and html for custom-style\n      isRoot = parsedSelector === hostScope + ' > *.' + hostScope || parsedSelector.indexOf('html') !== -1;\n      // :host -> x-foo for elements, but sub-rules have .x-foo in them\n      isHost = !isRoot && parsedSelector.indexOf(hostScope) === 0;\n    }\n    if (cssBuild === 'shadow') {\n      isRoot = parsedSelector === ':host > *' || parsedSelector === 'html';\n      isHost = isHost && !isRoot;\n    }\n    if (!isRoot && !isHost) {\n      return;\n    }\n    var selectorToMatch = hostScope;\n    if (isHost) {\n      // need to transform :host under ShadowDOM because `:host` does not work with `matches`\n      if (nativeShadow && !rule.transformedSelector) {\n        // transform :host into a matchable selector\n        rule.transformedSelector = StyleTransformer._transformRuleCss(rule, StyleTransformer._transformComplexSelector, StyleTransformer._calcElementScope(scope.is), hostScope);\n      }\n      selectorToMatch = rule.transformedSelector || hostScope;\n    }\n    callback({\n      selector: selectorToMatch,\n      isHost: isHost,\n      isRoot: isRoot\n    });\n  },\n\n  hostAndRootPropertiesForScope: function hostAndRootPropertiesForScope(scope, rules) {\n    var hostProps = {},\n        rootProps = {},\n        self = this;\n    // note: active rules excludes non-matching @media rules\n    var cssBuild = rules && rules.__cssBuild;\n    forEachRule(rules, function (rule) {\n      // if scope is StyleDefaults, use _element for matchesSelector\n      self.whenHostOrRootRule(scope, rule, cssBuild, function (info) {\n        var element = scope._element || scope;\n        if (matchesSelector.call(element, info.selector)) {\n          if (info.isHost) {\n            self.collectProperties(rule, hostProps);\n          } else {\n            self.collectProperties(rule, rootProps);\n          }\n        }\n      });\n    }, null, true);\n    return { rootProps: rootProps, hostProps: hostProps };\n  },\n\n  transformStyles: function transformStyles(element, properties, scopeSelector) {\n    var self = this;\n    var hostSelector = StyleTransformer._calcHostScope(element.is, element.extends);\n    var rxHostSelector = element.extends ? '\\\\' + hostSelector.slice(0, -1) + '\\\\]' : hostSelector;\n    var hostRx = new RegExp(this.rx.HOST_PREFIX + rxHostSelector + this.rx.HOST_SUFFIX);\n    var rules = StyleInfo.get(element).styleRules;\n    var keyframeTransforms = this._elementKeyframeTransforms(element, rules, scopeSelector);\n    return StyleTransformer.elementStyles(element, rules, function (rule) {\n      self.applyProperties(rule, properties);\n      if (!nativeShadow && !isKeyframesSelector(rule) && rule.cssText) {\n        // NOTE: keyframe transforms only scope munge animation names, so it\n        // is not necessary to apply them in ShadowDOM.\n        self.applyKeyframeTransforms(rule, keyframeTransforms);\n        self._scopeSelector(rule, hostRx, hostSelector, scopeSelector);\n      }\n    });\n  },\n\n  _elementKeyframeTransforms: function _elementKeyframeTransforms(element, rules, scopeSelector) {\n    var keyframesRules = rules._keyframes;\n    var keyframeTransforms = {};\n    if (!nativeShadow && keyframesRules) {\n      // For non-ShadowDOM, we transform all known keyframes rules in\n      // advance for the current scope. This allows us to catch keyframes\n      // rules that appear anywhere in the stylesheet:\n      for (var i = 0, keyframesRule = keyframesRules[i]; i < keyframesRules.length; keyframesRule = keyframesRules[++i]) {\n        this._scopeKeyframes(keyframesRule, scopeSelector);\n        keyframeTransforms[keyframesRule.keyframesName] = this._keyframesRuleTransformer(keyframesRule);\n      }\n    }\n    return keyframeTransforms;\n  },\n\n  // Generate a factory for transforming a chunk of CSS text to handle a\n  // particular scoped keyframes rule.\n  _keyframesRuleTransformer: function _keyframesRuleTransformer(keyframesRule) {\n    return function (cssText) {\n      return cssText.replace(keyframesRule.keyframesNameRx, keyframesRule.transformedKeyframesName);\n    };\n  },\n\n  // Transforms `@keyframes` names to be unique for the current host.\n  // Example: @keyframes foo-anim -> @keyframes foo-anim-x-foo-0\n  _scopeKeyframes: function _scopeKeyframes(rule, scopeId) {\n    rule.keyframesNameRx = new RegExp(rule.keyframesName, 'g');\n    rule.transformedKeyframesName = rule.keyframesName + '-' + scopeId;\n    rule.transformedSelector = rule.transformedSelector || rule.selector;\n    rule.selector = rule.transformedSelector.replace(rule.keyframesName, rule.transformedKeyframesName);\n  },\n\n  // Strategy: x scope shim a selector e.g. to scope `.x-foo-42` (via classes):\n  // non-host selector: .a.x-foo -> .x-foo-42 .a.x-foo\n  // host selector: x-foo.wide -> .x-foo-42.wide\n  // note: we use only the scope class (.x-foo-42) and not the hostSelector\n  // (x-foo) to scope :host rules; this helps make property host rules\n  // have low specificity. They are overrideable by class selectors but,\n  // unfortunately, not by type selectors (e.g. overriding via\n  // `.special` is ok, but not by `x-foo`).\n  _scopeSelector: function _scopeSelector(rule, hostRx, hostSelector, scopeId) {\n    rule.transformedSelector = rule.transformedSelector || rule.selector;\n    var selector = rule.transformedSelector;\n    var scope = '.' + scopeId;\n    var parts = selector.split(',');\n    for (var i = 0, l = parts.length, _p2; i < l && (_p2 = parts[i]); i++) {\n      parts[i] = _p2.match(hostRx) ? _p2.replace(hostSelector, scope) : scope + ' ' + _p2;\n    }\n    rule.selector = parts.join(',');\n  },\n\n  applyElementScopeSelector: function applyElementScopeSelector(element, selector, old) {\n    var c = element.getAttribute('class') || '';\n    var v = c;\n    if (old) {\n      v = c.replace(new RegExp('\\\\s*' + this.XSCOPE_NAME + '\\\\s*' + old + '\\\\s*', 'g'), ' ');\n    }\n    v += (v ? ' ' : '') + this.XSCOPE_NAME + ' ' + selector;\n    if (c !== v) {\n      // hook from ShadyDOM\n      if (element.__nativeSetAttribute) {\n        element.__nativeSetAttribute('class', v);\n      } else {\n        element.setAttribute('class', v);\n      }\n    }\n  },\n\n  applyElementStyle: function applyElementStyle(element, properties, selector, style) {\n    // calculate cssText to apply\n    var cssText = style ? style.textContent || '' : this.transformStyles(element, properties, selector);\n    // if shady and we have a cached style that is not style, decrement\n    var styleInfo = StyleInfo.get(element);\n    var s = styleInfo.customStyle;\n    if (s && !nativeShadow && s !== style) {\n      s._useCount--;\n      if (s._useCount <= 0 && s.parentNode) {\n        s.parentNode.removeChild(s);\n      }\n    }\n    // apply styling always under native or if we generated style\n    // or the cached style is not in document(!)\n    if (nativeShadow) {\n      // update existing style only under native\n      if (styleInfo.customStyle) {\n        styleInfo.customStyle.textContent = cssText;\n        style = styleInfo.customStyle;\n        // otherwise, if we have css to apply, do so\n      } else if (cssText) {\n        // apply css after the scope style of the element to help with\n        // style precedence rules.\n        style = applyCss(cssText, selector, element.shadowRoot, styleInfo.placeholder);\n      }\n    } else {\n      // shady and no cache hit\n      if (!style) {\n        // apply css after the scope style of the element to help with\n        // style precedence rules.\n        if (cssText) {\n          style = applyCss(cssText, selector, null, styleInfo.placeholder);\n        }\n        // shady and cache hit but not in document\n      } else if (!style.parentNode) {\n        applyStyle$1(style, null, styleInfo.placeholder);\n      }\n    }\n    // ensure this style is our custom style and increment its use count.\n    if (style) {\n      style._useCount = style._useCount || 0;\n      // increment use count if we changed styles\n      if (styleInfo.customStyle != style) {\n        style._useCount++;\n      }\n      styleInfo.customStyle = style;\n    }\n    // @media rules may be stale in IE 10 and 11\n    if (IS_IE) {\n      style.textContent = style.textContent;\n    }\n    return style;\n  },\n\n  applyCustomStyle: function applyCustomStyle(style, properties) {\n    var rules = rulesForStyle(style);\n    var self = this;\n    style.textContent = toCssText(rules, function (rule) {\n      var css = rule.cssText = rule.parsedCssText;\n      if (rule.propertyInfo && rule.propertyInfo.cssText) {\n        // remove property assignments\n        // so next function isn't confused\n        // NOTE: we have 3 categories of css:\n        // (1) normal properties,\n        // (2) custom property assignments (--foo: red;),\n        // (3) custom property usage: border: var(--foo); @apply(--foo);\n        // In elements, 1 and 3 are separated for efficiency; here they\n        // are not and this makes this case unique.\n        css = removeCustomPropAssignment(css);\n        // replace with reified properties, scenario is same as mixin\n        rule.cssText = self.valueForProperties(css, properties);\n      }\n    });\n  },\n\n  rx: rx,\n  XSCOPE_NAME: 'x-scope'\n};\n\nfunction addToBitMask(n, bits) {\n  var o = parseInt(n / 32);\n  var v = 1 << n % 32;\n  bits[o] = (bits[o] || 0) | v;\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar templateMap = {};\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar placeholderMap = {};\n\nvar ce = window.customElements;\nif (ce && !nativeShadow) {\n  (function () {\n    var origDefine = ce.define;\n    ce.define = function (name, clazz, options) {\n      placeholderMap[name] = applyStylePlaceHolder(name);\n      return origDefine.call(ce, name, clazz, options);\n    };\n  })();\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nvar StyleCache = function () {\n  function StyleCache() {\n    var typeMax = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 100;\n    classCallCheck(this, StyleCache);\n\n    // map element name -> [{properties, styleElement, scopeSelector}]\n    this.cache = {};\n    this.typeMax = typeMax;\n  }\n\n  createClass(StyleCache, [{\n    key: '_validate',\n    value: function _validate(cacheEntry, properties, ownPropertyNames) {\n      for (var idx = 0; idx < ownPropertyNames.length; idx++) {\n        var pn = ownPropertyNames[idx];\n        if (cacheEntry.properties[pn] !== properties[pn]) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }, {\n    key: 'store',\n    value: function store(tagname, properties, styleElement, scopeSelector) {\n      var list = this.cache[tagname] || [];\n      list.push({ properties: properties, styleElement: styleElement, scopeSelector: scopeSelector });\n      if (list.length > this.typeMax) {\n        list.shift();\n      }\n      this.cache[tagname] = list;\n    }\n  }, {\n    key: 'fetch',\n    value: function fetch(tagname, properties, ownPropertyNames) {\n      var list = this.cache[tagname];\n      if (!list) {\n        return;\n      }\n      // reverse list for most-recent lookups\n      for (var idx = list.length - 1; idx >= 0; idx--) {\n        var entry = list[idx];\n        if (this._validate(entry, properties, ownPropertyNames)) {\n          return entry;\n        }\n      }\n    }\n  }]);\n  return StyleCache;\n}();\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/**\n * The apply shim simulates the behavior of `@apply` proposed at\n * https://tabatkins.github.io/specs/css-apply-rule/.\n * The approach is to convert a property like this:\n *\n *    --foo: {color: red; background: blue;}\n *\n * to this:\n *\n *    --foo_-_color: red;\n *    --foo_-_background: blue;\n *\n * Then where `@apply --foo` is used, that is converted to:\n *\n *    color: var(--foo_-_color);\n *    background: var(--foo_-_background);\n *\n * This approach generally works but there are some issues and limitations.\n * Consider, for example, that somewhere *between* where `--foo` is set and used,\n * another element sets it to:\n *\n *    --foo: { border: 2px solid red; }\n *\n * We must now ensure that the color and background from the previous setting\n * do not apply. This is accomplished by changing the property set to this:\n *\n *    --foo_-_border: 2px solid red;\n *    --foo_-_color: initial;\n *    --foo_-_background: initial;\n *\n * This works but introduces one new issue.\n * Consider this setup at the point where the `@apply` is used:\n *\n *    background: orange;\n *    @apply --foo;\n *\n * In this case the background will be unset (initial) rather than the desired\n * `orange`. We address this by altering the property set to use a fallback\n * value like this:\n *\n *    color: var(--foo_-_color);\n *    background: var(--foo_-_background, orange);\n *    border: var(--foo_-_border);\n *\n * Note that the default is retained in the property set and the `background` is\n * the desired `orange`. This leads us to a limitation.\n *\n * Limitation 1:\n\n * Only properties in the rule where the `@apply`\n * is used are considered as default values.\n * If another rule matches the element and sets `background` with\n * less specificity than the rule in which `@apply` appears,\n * the `background` will not be set.\n *\n * Limitation 2:\n *\n * When using Polymer's `updateStyles` api, new properties may not be set for\n * `@apply` properties.\n\n*/\n\nvar MIXIN_MATCH = rx.MIXIN_MATCH;\nvar VAR_ASSIGN = rx.VAR_ASSIGN;\n\nvar APPLY_NAME_CLEAN = /;\\s*/m;\nvar INITIAL_INHERIT = /^\\s*(initial)|(inherit)\\s*$/;\n\n// separator used between mixin-name and mixin-property-name when producing properties\n// NOTE: plain '-' may cause collisions in user styles\nvar MIXIN_VAR_SEP = '_-_';\n\n// map of mixin to property names\n// --foo: {border: 2px} -> {properties: {(--foo, ['border'])}, dependants: {'element-name': proto}}\n\nvar MixinMap = function () {\n  function MixinMap() {\n    classCallCheck(this, MixinMap);\n\n    this._map = {};\n  }\n\n  createClass(MixinMap, [{\n    key: 'set',\n    value: function set(name, props) {\n      name = name.trim();\n      this._map[name] = {\n        properties: props,\n        dependants: {}\n      };\n    }\n  }, {\n    key: 'get',\n    value: function get(name) {\n      name = name.trim();\n      return this._map[name];\n    }\n  }]);\n  return MixinMap;\n}();\n\nvar ApplyShim = function () {\n  function ApplyShim() {\n    var _this = this;\n\n    classCallCheck(this, ApplyShim);\n\n    this._currentTemplate = null;\n    this._measureElement = null;\n    this._map = new MixinMap();\n    this._separator = MIXIN_VAR_SEP;\n    this._boundProduceCssProperties = function (matchText, propertyName, valueProperty, valueMixin) {\n      return _this._produceCssProperties(matchText, propertyName, valueProperty, valueMixin);\n    };\n  }\n\n  createClass(ApplyShim, [{\n    key: 'transformStyle',\n    value: function transformStyle(style, elementName) {\n      var ast = rulesForStyle(style);\n      this.transformRules(ast, elementName);\n      return ast;\n    }\n  }, {\n    key: 'transformRules',\n    value: function transformRules(rules, elementName) {\n      var _this2 = this;\n\n      this._currentTemplate = templateMap[elementName];\n      forEachRule(rules, function (r) {\n        _this2.transformRule(r);\n      });\n      if (this._currentTemplate) {\n        this._currentTemplate.__applyShimInvalid = false;\n      }\n      this._currentTemplate = null;\n    }\n  }, {\n    key: 'transformRule',\n    value: function transformRule(rule) {\n      rule.cssText = this.transformCssText(rule.parsedCssText);\n      // :root was only used for variable assignment in property shim,\n      // but generates invalid selectors with real properties.\n      // replace with `:host > *`, which serves the same effect\n      if (rule.selector === ':root') {\n        rule.selector = ':host > *';\n      }\n    }\n  }, {\n    key: 'transformCssText',\n    value: function transformCssText(cssText) {\n      // produce variables\n      cssText = cssText.replace(VAR_ASSIGN, this._boundProduceCssProperties);\n      // consume mixins\n      return this._consumeCssProperties(cssText);\n    }\n  }, {\n    key: '_getInitialValueForProperty',\n    value: function _getInitialValueForProperty(property) {\n      if (!this._measureElement) {\n        this._measureElement = document.createElement('meta');\n        this._measureElement.style.all = 'initial';\n        document.head.appendChild(this._measureElement);\n      }\n      return window.getComputedStyle(this._measureElement).getPropertyValue(property);\n    }\n    // replace mixin consumption with variable consumption\n\n  }, {\n    key: '_consumeCssProperties',\n    value: function _consumeCssProperties(text) {\n      var m = void 0;\n      // loop over text until all mixins with defintions have been applied\n      while (m = MIXIN_MATCH.exec(text)) {\n        var matchText = m[0];\n        var mixinName = m[1];\n        var idx = m.index;\n        // collect properties before apply to be \"defaults\" if mixin might override them\n        // match includes a \"prefix\", so find the start and end positions of @apply\n        var applyPos = idx + matchText.indexOf('@apply');\n        var afterApplyPos = idx + matchText.length;\n        // find props defined before this @apply\n        var textBeforeApply = text.slice(0, applyPos);\n        var textAfterApply = text.slice(afterApplyPos);\n        var defaults$$1 = this._cssTextToMap(textBeforeApply);\n        var replacement = this._atApplyToCssProperties(mixinName, defaults$$1);\n        // use regex match position to replace mixin, keep linear processing time\n        text = [textBeforeApply, replacement, textAfterApply].join('');\n        // move regex search to _after_ replacement\n        MIXIN_MATCH.lastIndex = idx + replacement.length;\n      }\n      return text;\n    }\n    // produce variable consumption at the site of mixin consumption\n    // @apply --foo; -> for all props (${propname}: var(--foo_-_${propname}, ${fallback[propname]}}))\n    // Example:\n    // border: var(--foo_-_border); padding: var(--foo_-_padding, 2px)\n\n  }, {\n    key: '_atApplyToCssProperties',\n    value: function _atApplyToCssProperties(mixinName, fallbacks) {\n      mixinName = mixinName.replace(APPLY_NAME_CLEAN, '');\n      var vars = [];\n      var mixinEntry = this._map.get(mixinName);\n      // if we depend on a mixin before it is created\n      // make a sentinel entry in the map to add this element as a dependency for when it is defined.\n      if (!mixinEntry) {\n        this._map.set(mixinName, {});\n        mixinEntry = this._map.get(mixinName);\n      }\n      if (mixinEntry) {\n        if (this._currentTemplate) {\n          mixinEntry.dependants[this._currentTemplate.name] = this._currentTemplate;\n        }\n        var p = void 0,\n            parts = void 0,\n            f = void 0;\n        for (p in mixinEntry.properties) {\n          f = fallbacks && fallbacks[p];\n          parts = [p, ': var(', mixinName, MIXIN_VAR_SEP, p];\n          if (f) {\n            parts.push(',', f);\n          }\n          parts.push(')');\n          vars.push(parts.join(''));\n        }\n      }\n      return vars.join('; ');\n    }\n  }, {\n    key: '_replaceInitialOrInherit',\n    value: function _replaceInitialOrInherit(property, value) {\n      var match = INITIAL_INHERIT.exec(value);\n      if (match) {\n        if (match[1]) {\n          // initial\n          // replace `initial` with the concrete initial value for this property\n          value = ApplyShim._getInitialValueForProperty(property);\n        } else {\n          // inherit\n          // with this purposfully illegal value, the variable will be invalid at\n          // compute time (https://www.w3.org/TR/css-variables/#invalid-at-computed-value-time)\n          // and for inheriting values, will behave similarly\n          // we cannot support the same behavior for non inheriting values like 'border'\n          value = 'apply-shim-inherit';\n        }\n      }\n      return value;\n    }\n\n    // \"parse\" a mixin definition into a map of properties and values\n    // cssTextToMap('border: 2px solid black') -> ('border', '2px solid black')\n\n  }, {\n    key: '_cssTextToMap',\n    value: function _cssTextToMap(text) {\n      var props = text.split(';');\n      var property = void 0,\n          value = void 0;\n      var out = {};\n      for (var i = 0, p, sp; i < props.length; i++) {\n        p = props[i];\n        if (p) {\n          sp = p.split(':');\n          // ignore lines that aren't definitions like @media\n          if (sp.length > 1) {\n            property = sp[0].trim();\n            // some properties may have ':' in the value, like data urls\n            value = this._replaceInitialOrInherit(property, sp.slice(1).join(':'));\n            out[property] = value;\n          }\n        }\n      }\n      return out;\n    }\n  }, {\n    key: '_invalidateMixinEntry',\n    value: function _invalidateMixinEntry(mixinEntry) {\n      for (var elementName in mixinEntry.dependants) {\n        if (elementName !== this._currentTemplate) {\n          mixinEntry.dependants[elementName].__applyShimInvalid = true;\n        }\n      }\n    }\n  }, {\n    key: '_produceCssProperties',\n    value: function _produceCssProperties(matchText, propertyName, valueProperty, valueMixin) {\n      var _this3 = this;\n\n      // handle case where property value is a mixin\n      if (valueProperty) {\n        // form: --mixin2: var(--mixin1), where --mixin1 is in the map\n        processVariableAndFallback(valueProperty, function (prefix, value) {\n          if (value && _this3._map.get(value)) {\n            valueMixin = '@apply ' + value + ';';\n          }\n        });\n      }\n      if (!valueMixin) {\n        return matchText;\n      }\n      var mixinAsProperties = this._consumeCssProperties(valueMixin);\n      var prefix = matchText.slice(0, matchText.indexOf('--'));\n      var mixinValues = this._cssTextToMap(mixinAsProperties);\n      var combinedProps = mixinValues;\n      var mixinEntry = this._map.get(propertyName);\n      var oldProps = mixinEntry && mixinEntry.properties;\n      if (oldProps) {\n        // NOTE: since we use mixin, the map of properties is updated here\n        // and this is what we want.\n        combinedProps = Object.assign(Object.create(oldProps), mixinValues);\n      } else {\n        this._map.set(propertyName, combinedProps);\n      }\n      var out = [];\n      var p = void 0,\n          v = void 0;\n      // set variables defined by current mixin\n      var needToInvalidate = false;\n      for (p in combinedProps) {\n        v = mixinValues[p];\n        // if property not defined by current mixin, set initial\n        if (v === undefined) {\n          v = 'initial';\n        }\n        if (oldProps && !(p in oldProps)) {\n          needToInvalidate = true;\n        }\n        out.push(propertyName + MIXIN_VAR_SEP + p + ': ' + v);\n      }\n      if (needToInvalidate) {\n        this._invalidateMixinEntry(mixinEntry);\n      }\n      if (mixinEntry) {\n        mixinEntry.properties = combinedProps;\n      }\n      // because the mixinMap is global, the mixin might conflict with\n      // a different scope's simple variable definition:\n      // Example:\n      // some style somewhere:\n      // --mixin1:{ ... }\n      // --mixin2: var(--mixin1);\n      // some other element:\n      // --mixin1: 10px solid red;\n      // --foo: var(--mixin1);\n      // In this case, we leave the original variable definition in place.\n      if (valueProperty) {\n        prefix = matchText + ';' + prefix;\n      }\n      return prefix + out.join('; ') + ';';\n    }\n  }]);\n  return ApplyShim;\n}();\n\nvar applyShim = new ApplyShim();\nwindow['ApplyShim'] = applyShim;\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar flush = function flush() {};\n\nif (!nativeShadow) {\n  (function () {\n    var elementNeedsScoping = function elementNeedsScoping(element) {\n      return element.classList && !element.classList.contains(StyleTransformer.SCOPE_NAME) ||\n      // note: necessary for IE11\n      element instanceof SVGElement && (!element.hasAttribute('class') || element.getAttribute('class').indexOf(StyleTransformer.SCOPE_NAME) < 0);\n    };\n\n    var handler = function handler(mxns) {\n      for (var x = 0; x < mxns.length; x++) {\n        var mxn = mxns[x];\n        if (mxn.target === document.documentElement || mxn.target === document.head) {\n          continue;\n        }\n        for (var i = 0; i < mxn.addedNodes.length; i++) {\n          var n = mxn.addedNodes[i];\n          if (elementNeedsScoping(n)) {\n            var root = n.getRootNode();\n            if (root.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n              // may no longer be in a shadowroot\n              var host = root.host;\n              if (host) {\n                var scope = host.is || host.localName;\n                StyleTransformer.dom(n, scope);\n              }\n            }\n          }\n        }\n        for (var _i = 0; _i < mxn.removedNodes.length; _i++) {\n          var _n = mxn.removedNodes[_i];\n          if (_n.nodeType === Node.ELEMENT_NODE) {\n            var classes = undefined;\n            if (_n.classList) {\n              classes = Array.from(_n.classList);\n            } else if (_n.hasAttribute('class')) {\n              classes = _n.getAttribute('class').split(/\\s+/);\n            }\n            if (classes !== undefined) {\n              // NOTE: relies on the scoping class always being adjacent to the\n              // SCOPE_NAME class.\n              var classIdx = classes.indexOf(StyleTransformer.SCOPE_NAME);\n              if (classIdx >= 0) {\n                var _scope = classes[classIdx + 1];\n                if (_scope) {\n                  StyleTransformer.dom(_n, _scope, true);\n                }\n              }\n            }\n          }\n        }\n      }\n    };\n\n    var observer = new MutationObserver(handler);\n    var start = function start(node) {\n      observer.observe(node, { childList: true, subtree: true });\n    };\n    var nativeCustomElements = window.customElements && !window.customElements.flush;\n    // need to start immediately with native custom elements\n    // TODO(dfreedm): with polyfilled HTMLImports and native custom elements\n    // excessive mutations may be observed; this can be optimized via cooperation\n    // with the HTMLImports polyfill.\n    if (nativeCustomElements) {\n      start(document);\n    } else {\n      (function () {\n        var delayedStart = function delayedStart() {\n          start(document.body);\n        };\n        // use polyfill timing if it's available\n        if (window.HTMLImports) {\n          window.HTMLImports.whenReady(delayedStart);\n          // otherwise push beyond native imports being ready\n          // which requires RAF + readystate interactive.\n        } else {\n          requestAnimationFrame(function () {\n            if (document.readyState === 'loading') {\n              (function () {\n                var listener = function listener() {\n                  delayedStart();\n                  document.removeEventListener('readystatechange', listener);\n                };\n                document.addEventListener('readystatechange', listener);\n              })();\n            } else {\n              delayedStart();\n            }\n          });\n        }\n      })();\n    }\n\n    flush = function flush() {\n      handler(observer.takeRecords());\n    };\n  })();\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// TODO(dfreedm): consider spliting into separate global\nvar styleCache = new StyleCache();\n\nvar ShadyCSS = {\n  flush: flush,\n  scopeCounter: {},\n  nativeShadow: nativeShadow,\n  nativeCss: nativeCssVariables,\n  nativeCssApply: nativeCssApply,\n  _documentOwner: document.documentElement,\n  _documentOwnerStyleInfo: StyleInfo.set(document.documentElement, new StyleInfo({ rules: [] })),\n  _generateScopeSelector: function _generateScopeSelector(name) {\n    var id = this.scopeCounter[name] = (this.scopeCounter[name] || 0) + 1;\n    return name + '-' + id;\n  },\n  getStyleAst: function getStyleAst(style) {\n    return rulesForStyle(style);\n  },\n  styleAstToString: function styleAstToString(ast) {\n    return toCssText(ast);\n  },\n  _gatherStyles: function _gatherStyles(template) {\n    var styles = template.content.querySelectorAll('style');\n    var cssText = [];\n    for (var i = 0; i < styles.length; i++) {\n      var s = styles[i];\n      cssText.push(s.textContent);\n      s.parentNode.removeChild(s);\n    }\n    return cssText.join('').trim();\n  },\n  _getCssBuild: function _getCssBuild(template) {\n    var style = template.content.querySelector('style');\n    if (!style) {\n      return '';\n    }\n    return style.getAttribute('css-build') || '';\n  },\n  prepareTemplate: function prepareTemplate(template, elementName, typeExtension) {\n    if (template._prepared) {\n      return;\n    }\n    template._prepared = true;\n    template.name = elementName;\n    template.extends = typeExtension;\n    templateMap[elementName] = template;\n    var cssBuild = this._getCssBuild(template);\n    var cssText = this._gatherStyles(template);\n    var info = {\n      is: elementName,\n      extends: typeExtension,\n      __cssBuild: cssBuild\n    };\n    if (!this.nativeShadow) {\n      StyleTransformer.dom(template.content, elementName);\n    }\n    var ast = parse(cssText);\n    if (this.nativeCss && !this.nativeCssApply) {\n      applyShim.transformRules(ast, elementName);\n    }\n    template._styleAst = ast;\n\n    var ownPropertyNames = [];\n    if (!this.nativeCss) {\n      ownPropertyNames = StyleProperties.decorateStyles(template._styleAst, info);\n    }\n    if (!ownPropertyNames.length || this.nativeCss) {\n      var root = this.nativeShadow ? template.content : null;\n      var placeholder = placeholderMap[elementName];\n      var style = this._generateStaticStyle(info, template._styleAst, root, placeholder);\n      template._style = style;\n    }\n    template._ownPropertyNames = ownPropertyNames;\n  },\n  _generateStaticStyle: function _generateStaticStyle(info, rules, shadowroot, placeholder) {\n    var cssText = StyleTransformer.elementStyles(info, rules);\n    if (cssText.length) {\n      return applyCss(cssText, info.is, shadowroot, placeholder);\n    }\n  },\n  _prepareHost: function _prepareHost(host) {\n    var is = host.getAttribute('is') || host.localName;\n    var typeExtension = void 0;\n    if (is !== host.localName) {\n      typeExtension = host.localName;\n    }\n    var placeholder = placeholderMap[is];\n    var template = templateMap[is];\n    var ast = void 0;\n    var ownStylePropertyNames = void 0;\n    var cssBuild = void 0;\n    if (template) {\n      ast = template._styleAst;\n      ownStylePropertyNames = template._ownPropertyNames;\n      cssBuild = template._cssBuild;\n    }\n    return StyleInfo.set(host, new StyleInfo(ast, placeholder, ownStylePropertyNames, is, typeExtension, cssBuild));\n  },\n  applyStyle: function applyStyle(host, overrideProps) {\n    var is = host.getAttribute('is') || host.localName;\n    if (window.CustomStyle) {\n      var CS = window.CustomStyle;\n      if (CS._documentDirty) {\n        CS.findStyles();\n        if (!this.nativeCss) {\n          this._updateProperties(this._documentOwner, this._documentOwnerStyleInfo);\n        } else if (!this.nativeCssApply) {\n          CS._revalidateApplyShim();\n        }\n        CS.applyStyles();\n        CS._documentDirty = false;\n      }\n    }\n    var styleInfo = StyleInfo.get(host);\n    var hasApplied = Boolean(styleInfo);\n    if (!styleInfo) {\n      styleInfo = this._prepareHost(host);\n    }\n    if (overrideProps) {\n      styleInfo.overrideStyleProperties = styleInfo.overrideStyleProperties || {};\n      Object.assign(styleInfo.overrideStyleProperties, overrideProps);\n    }\n    if (this.nativeCss) {\n      var template = templateMap[is];\n      if (template && template.__applyShimInvalid && template._style) {\n        // update template\n        applyShim.transformRules(template._styleAst, is);\n        template._style.textContent = StyleTransformer.elementStyles(host, styleInfo.styleRules);\n        // update instance if native shadowdom\n        if (this.nativeShadow) {\n          var style = host.shadowRoot.querySelector('style');\n          style.textContent = StyleTransformer.elementStyles(host, styleInfo.styleRules);\n        }\n        styleInfo.styleRules = template._styleAst;\n      }\n      this._updateNativeProperties(host, styleInfo.overrideStyleProperties);\n    } else {\n      this._updateProperties(host, styleInfo);\n      if (styleInfo.ownStylePropertyNames && styleInfo.ownStylePropertyNames.length) {\n        // TODO: use caching\n        this._applyStyleProperties(host, styleInfo);\n      }\n    }\n    if (hasApplied) {\n      var root = this._isRootOwner(host) ? host : host.shadowRoot;\n      // note: some elements may not have a root!\n      if (root) {\n        this._applyToDescendants(root);\n      }\n    }\n  },\n  _applyToDescendants: function _applyToDescendants(root) {\n    var c$ = root.children;\n    for (var i = 0, c; i < c$.length; i++) {\n      c = c$[i];\n      if (c.shadowRoot) {\n        this.applyStyle(c);\n      }\n      this._applyToDescendants(c);\n    }\n  },\n  _styleOwnerForNode: function _styleOwnerForNode(node) {\n    var root = node.getRootNode();\n    var host = root.host;\n    if (host) {\n      if (StyleInfo.get(host)) {\n        return host;\n      } else {\n        return this._styleOwnerForNode(host);\n      }\n    }\n    return this._documentOwner;\n  },\n  _isRootOwner: function _isRootOwner(node) {\n    return node === this._documentOwner;\n  },\n  _applyStyleProperties: function _applyStyleProperties(host, styleInfo) {\n    var is = host.getAttribute('is') || host.localName;\n    var cacheEntry = styleCache.fetch(is, styleInfo.styleProperties, styleInfo.ownStylePropertyNames);\n    var cachedScopeSelector = cacheEntry && cacheEntry.scopeSelector;\n    var cachedStyle = cacheEntry ? cacheEntry.styleElement : null;\n    var oldScopeSelector = styleInfo.scopeSelector;\n    // only generate new scope if cached style is not found\n    styleInfo.scopeSelector = cachedScopeSelector || this._generateScopeSelector(is);\n    var style = StyleProperties.applyElementStyle(host, styleInfo.styleProperties, styleInfo.scopeSelector, cachedStyle);\n    if (!this.nativeShadow) {\n      StyleProperties.applyElementScopeSelector(host, styleInfo.scopeSelector, oldScopeSelector);\n    }\n    if (!cacheEntry) {\n      styleCache.store(is, styleInfo.styleProperties, style, styleInfo.scopeSelector);\n    }\n    return style;\n  },\n  _updateProperties: function _updateProperties(host, styleInfo) {\n    var owner = this._styleOwnerForNode(host);\n    var ownerStyleInfo = StyleInfo.get(owner);\n    var ownerProperties = ownerStyleInfo.styleProperties;\n    var props = Object.create(ownerProperties || null);\n    var hostAndRootProps = StyleProperties.hostAndRootPropertiesForScope(host, styleInfo.styleRules);\n    var propertyData = StyleProperties.propertyDataFromStyles(ownerStyleInfo.styleRules, host);\n    var propertiesMatchingHost = propertyData.properties;\n    Object.assign(props, hostAndRootProps.hostProps, propertiesMatchingHost, hostAndRootProps.rootProps);\n    this._mixinOverrideStyles(props, styleInfo.overrideStyleProperties);\n    StyleProperties.reify(props);\n    styleInfo.styleProperties = props;\n  },\n  _mixinOverrideStyles: function _mixinOverrideStyles(props, overrides) {\n    for (var p in overrides) {\n      var v = overrides[p];\n      // skip override props if they are not truthy or 0\n      // in order to fall back to inherited values\n      if (v || v === 0) {\n        props[p] = v;\n      }\n    }\n  },\n  _updateNativeProperties: function _updateNativeProperties(element, properties) {\n    // remove previous properties\n    for (var p in properties) {\n      // NOTE: for bc with shim, don't apply null values.\n      if (p === null) {\n        element.style.removeProperty(p);\n      } else {\n        element.style.setProperty(p, properties[p]);\n      }\n    }\n  },\n  updateStyles: function updateStyles(properties) {\n    if (window.CustomStyle) {\n      window.CustomStyle._documentDirty = true;\n    }\n    this.applyStyle(this._documentOwner, properties);\n  },\n\n  /* Custom Style operations */\n  _transformCustomStyleForDocument: function _transformCustomStyleForDocument(style) {\n    var _this = this;\n\n    var ast = rulesForStyle(style);\n    forEachRule(ast, function (rule) {\n      if (nativeShadow) {\n        StyleTransformer.normalizeRootSelector(rule);\n      } else {\n        StyleTransformer.documentRule(rule);\n      }\n      if (_this.nativeCss && !_this.nativeCssApply) {\n        applyShim.transformRule(rule);\n      }\n    });\n    if (this.nativeCss) {\n      style.textContent = toCssText(ast);\n    } else {\n      this._documentOwnerStyleInfo.styleRules.rules.push(ast);\n    }\n  },\n  _revalidateApplyShim: function _revalidateApplyShim(style) {\n    if (this.nativeCss && !this.nativeCssApply) {\n      var ast = rulesForStyle(style);\n      applyShim.transformRules(ast);\n      style.textContent = toCssText(ast);\n    }\n  },\n  _applyCustomStyleToDocument: function _applyCustomStyleToDocument(style) {\n    if (!this.nativeCss) {\n      StyleProperties.applyCustomStyle(style, this._documentOwnerStyleInfo.styleProperties);\n    }\n  },\n  getComputedStyleValue: function getComputedStyleValue(element, property) {\n    var value = void 0;\n    if (!this.nativeCss) {\n      // element is either a style host, or an ancestor of a style host\n      var styleInfo = StyleInfo.get(element) || StyleInfo.get(this._styleOwnerForNode(element));\n      value = styleInfo.styleProperties[property];\n    }\n    // fall back to the property value from the computed styling\n    value = value || window.getComputedStyle(element).getPropertyValue(property);\n    // trim whitespace that can come after the `:` in css\n    // example: padding: 2px -> \" 2px\"\n    return value.trim();\n  },\n\n  // given an element and a classString, replaces\n  // the element's class with the provided classString and adds\n  // any necessary ShadyCSS static and property based scoping selectors\n  setElementClass: function setElementClass(element, classString) {\n    var root = element.getRootNode();\n    var classes = classString ? classString.split(/\\s/) : [];\n    var scopeName = root.host && root.host.localName;\n    // If no scope, try to discover scope name from existing class.\n    // This can occur if, for example, a template stamped element that\n    // has been scoped is manipulated when not in a root.\n    if (!scopeName) {\n      var classAttr = element.getAttribute('class');\n      if (classAttr) {\n        var k$ = classAttr.split(/\\s/);\n        for (var i = 0; i < k$.length; i++) {\n          if (k$[i] === StyleTransformer.SCOPE_NAME) {\n            scopeName = k$[i + 1];\n            break;\n          }\n        }\n      }\n    }\n    if (scopeName) {\n      classes.push(StyleTransformer.SCOPE_NAME, scopeName);\n    }\n    if (!this.nativeCss) {\n      var styleInfo = StyleInfo.get(element);\n      if (styleInfo && styleInfo.scopeSelector) {\n        classes.push(StyleProperties.XSCOPE_NAME, styleInfo.scopeSelector);\n      }\n    }\n    setElementClassRaw(element, classes.join(' '));\n  },\n  _styleInfoForNode: function _styleInfoForNode(node) {\n    return StyleInfo.get(node);\n  }\n};\n\nwindow['ShadyCSS'] = ShadyCSS;\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/*\nWrapper over <style> elements to co-operate with ShadyCSS\n\nExample:\n<shady-style>\n  <style>\n  ...\n  </style>\n</shady-style>\n*/\n\nvar ShadyCSS$1 = window.ShadyCSS;\n\nvar enqueued = false;\n\nvar customStyles = [];\n\nvar hookFn = null;\n\n/*\nIf a page only has <custom-style> elements, it will flash unstyled content,\nas all the instances will boot asynchronously after page load.\n\nCalling ShadyCSS.updateStyles() will force the work to happen synchronously\n*/\nfunction enqueueDocumentValidation() {\n  if (enqueued) {\n    return;\n  }\n  enqueued = true;\n  if (window.HTMLImports) {\n    window.HTMLImports.whenReady(validateDocument);\n  } else if (document.readyState === 'complete') {\n    validateDocument();\n  } else {\n    document.addEventListener('readystatechange', function () {\n      if (document.readyState === 'complete') {\n        validateDocument();\n      }\n    });\n  }\n}\n\nfunction validateDocument() {\n  requestAnimationFrame(function () {\n    if (enqueued) {\n      ShadyCSS$1.updateStyles();\n      enqueued = false;\n    }\n  });\n}\n\nfunction CustomStyle() {\n  /*\n  Use Reflect to invoke the HTMLElement constructor, or rely on the\n  CustomElement polyfill replacement that can be `.call`ed\n  */\n  var self = window.Reflect && Reflect.construct ? Reflect.construct(HTMLElement, [], this.constructor || CustomStyle) : HTMLElement.call(this);\n  customStyles.push(self);\n  enqueueDocumentValidation();\n  return self;\n}\n\nObject.defineProperties(CustomStyle, {\n  /*\n  CustomStyle.processHook is provided to customize the <style> element child of\n  a <custom-style> element before the <style> is processed by ShadyCSS\n   The function must take a <style> element as input, and return nothing.\n  */\n  processHook: {\n    get: function get() {\n      return hookFn;\n    },\n    set: function set(fn) {\n      hookFn = fn;\n      return fn;\n    }\n  },\n  _customStyles: {\n    get: function get() {\n      return customStyles;\n    }\n  },\n  _documentDirty: {\n    get: function get() {\n      return enqueued;\n    },\n    set: function set(value) {\n      enqueued = value;\n      return value;\n    }\n  }\n});\n\nCustomStyle.findStyles = function () {\n  for (var i = 0; i < customStyles.length; i++) {\n    customStyles[i]._findStyle();\n  }\n};\n\nCustomStyle._revalidateApplyShim = function () {\n  for (var i = 0; i < customStyles.length; i++) {\n    var s = customStyles[i];\n    if (s._style) {\n      ShadyCSS$1._revalidateApplyShim(s._style);\n    }\n  }\n};\n\nCustomStyle.applyStyles = function () {\n  for (var i = 0; i < customStyles.length; i++) {\n    customStyles[i]._applyStyle();\n  }\n};\n\nCustomStyle.prototype = Object.create(HTMLElement.prototype, {\n  'constructor': {\n    value: CustomStyle,\n    configurable: true,\n    writable: true\n  }\n});\n\nCustomStyle.prototype._findStyle = function () {\n  if (!this._style) {\n    var style = this.querySelector('style');\n    if (!style) {\n      return;\n    }\n    // HTMLImports polyfill may have cloned the style into the main document,\n    // which is referenced with __appliedElement.\n    // Also, we must copy over the attributes.\n    if (style.__appliedElement) {\n      for (var i = 0; i < style.attributes.length; i++) {\n        var attr = style.attributes[i];\n        style.__appliedElement.setAttribute(attr.name, attr.value);\n      }\n    }\n    this._style = style.__appliedElement || style;\n    if (hookFn) {\n      hookFn(this._style);\n    }\n    ShadyCSS$1._transformCustomStyleForDocument(this._style);\n  }\n};\n\nCustomStyle.prototype._applyStyle = function () {\n  if (this._style) {\n    ShadyCSS$1._applyCustomStyleToDocument(this._style);\n  }\n};\n\nwindow.customElements.define('custom-style', CustomStyle);\nwindow['CustomStyle'] = CustomStyle;\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/*\nSmall module to load ShadyCSS and CustomStyle together\n*/\n\n}());\n\n//# sourceMappingURL=shadycss.min.js.map\n","export const isFunction = val => typeof val === 'function';\nexport const isObject = val => (typeof val === 'object' && val !== null);\nexport const isString = val => typeof val === 'string';\nexport const isSymbol = val => typeof val === 'symbol';\nexport const isUndefined = val => typeof val === 'undefined';\n","import getPropNamesAndSymbols from './get-prop-names-and-symbols';\n\n// We are not using Object.assign if it is defined since it will cause problems when Symbol is polyfilled.\n// Apparently Object.assign (or any polyfill for this method) does not copy non-native Symbols.\nexport default (obj, ...args) => {\n  args.forEach(arg => getPropNamesAndSymbols(arg).forEach(nameOrSymbol => obj[nameOrSymbol] = arg[nameOrSymbol])); // eslint-disable-line no-return-assign\n  return obj;\n};\n","import empty from './empty';\n/**\n * Attributes value can only be null or string;\n */\nconst toNullOrString = val => (empty(val) ? null : String(val));\n\nexport default toNullOrString;\n","export const connected = '____skate_connected';\nexport const created = '____skate_created';\n\n// DEPRECATED\n//\n// This is the only \"symbol\" that must stay a string. This is because it is\n// relied upon across several versions. We should remove it, but ensure that\n// it's considered a breaking change that whatever version removes it cannot\n// be passed to vdom functions as tag names.\nexport const name = '____skate_name';\n\n// Used on the Constructor\nexport const ctorCreateInitProps = '____skate_ctor_createInitProps';\nexport const ctorObservedAttributes = '____skate_ctor_observedAttributes';\nexport const ctorProps = '____skate_ctor_props';\nexport const ctorPropsMap = '____skate_ctor_propsMap';\n\n// Used on the Element\nexport const props = '____skate_props';\nexport const ref = '____skate_ref';\nexport const renderer = '____skate_renderer';\nexport const rendering = '____skate_rendering';\nexport const rendererDebounced = '____skate_rendererDebounced';\nexport const updated = '____skate_updated';\n","\n/**\n * @license\n * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\n/**\n * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * A cached reference to the hasOwnProperty function.\n */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * A cached reference to the create function.\n */\nvar create = Object.create;\n\n/**\n * Used to prevent property collisions between our \"map\" and its prototype.\n * @param {!Object<string, *>} map The map to check.\n * @param {string} property The property to check.\n * @return {boolean} Whether map has property.\n */\nvar has = function (map, property) {\n  return hasOwnProperty.call(map, property);\n};\n\n/**\n * Creates an map object without a prototype.\n * @return {!Object}\n */\nvar createMap = function () {\n  return create(null);\n};\n\n/**\n * Keeps track of information needed to perform diffs for a given DOM node.\n * @param {!string} nodeName\n * @param {?string=} key\n * @constructor\n */\nfunction NodeData(nodeName, key) {\n  /**\n   * The attributes and their values.\n   * @const {!Object<string, *>}\n   */\n  this.attrs = createMap();\n\n  /**\n   * An array of attribute name/value pairs, used for quickly diffing the\n   * incomming attributes to see if the DOM node's attributes need to be\n   * updated.\n   * @const {Array<*>}\n   */\n  this.attrsArr = [];\n\n  /**\n   * The incoming attributes for this Node, before they are updated.\n   * @const {!Object<string, *>}\n   */\n  this.newAttrs = createMap();\n\n  /**\n   * The key used to identify this node, used to preserve DOM nodes when they\n   * move within their parent.\n   * @const\n   */\n  this.key = key;\n\n  /**\n   * Keeps track of children within this node by their key.\n   * {?Object<string, !Element>}\n   */\n  this.keyMap = null;\n\n  /**\n   * Whether or not the keyMap is currently valid.\n   * {boolean}\n   */\n  this.keyMapValid = true;\n\n  /**\n   * The node name for this node.\n   * @const {string}\n   */\n  this.nodeName = nodeName;\n\n  /**\n   * @type {?string}\n   */\n  this.text = null;\n}\n\n/**\n * Initializes a NodeData object for a Node.\n *\n * @param {Node} node The node to initialize data for.\n * @param {string} nodeName The node name of node.\n * @param {?string=} key The key that identifies the node.\n * @return {!NodeData} The newly initialized data object\n */\nvar initData = function (node, nodeName, key) {\n  var data = new NodeData(nodeName, key);\n  node['__incrementalDOMData'] = data;\n  return data;\n};\n\n/**\n * Retrieves the NodeData object for a Node, creating it if necessary.\n *\n * @param {Node} node The node to retrieve the data for.\n * @return {!NodeData} The NodeData for this Node.\n */\nvar getData = function (node) {\n  var data = node['__incrementalDOMData'];\n\n  if (!data) {\n    var nodeName = node.nodeName.toLowerCase();\n    var key = null;\n\n    if (node instanceof Element) {\n      key = node.getAttribute('key');\n    }\n\n    data = initData(node, nodeName, key);\n  }\n\n  return data;\n};\n\n/**\n * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @const */\nvar symbols = {\n  default: '__default',\n\n  placeholder: '__placeholder'\n};\n\n/**\n * @param {string} name\n * @return {string|undefined} The namespace to use for the attribute.\n */\nvar getNamespace = function (name) {\n  if (name.lastIndexOf('xml:', 0) === 0) {\n    return 'http://www.w3.org/XML/1998/namespace';\n  }\n\n  if (name.lastIndexOf('xlink:', 0) === 0) {\n    return 'http://www.w3.org/1999/xlink';\n  }\n};\n\n/**\n * Applies an attribute or property to a given Element. If the value is null\n * or undefined, it is removed from the Element. Otherwise, the value is set\n * as an attribute.\n * @param {!Element} el\n * @param {string} name The attribute's name.\n * @param {?(boolean|number|string)=} value The attribute's value.\n */\nvar applyAttr = function (el, name, value) {\n  if (value == null) {\n    el.removeAttribute(name);\n  } else {\n    var attrNS = getNamespace(name);\n    if (attrNS) {\n      el.setAttributeNS(attrNS, name, value);\n    } else {\n      el.setAttribute(name, value);\n    }\n  }\n};\n\n/**\n * Applies a property to a given Element.\n * @param {!Element} el\n * @param {string} name The property's name.\n * @param {*} value The property's value.\n */\nvar applyProp = function (el, name, value) {\n  el[name] = value;\n};\n\n/**\n * Applies a style to an Element. No vendor prefix expansion is done for\n * property names/values.\n * @param {!Element} el\n * @param {string} name The attribute's name.\n * @param {*} style The style to set. Either a string of css or an object\n *     containing property-value pairs.\n */\nvar applyStyle = function (el, name, style) {\n  if (typeof style === 'string') {\n    el.style.cssText = style;\n  } else {\n    el.style.cssText = '';\n    var elStyle = el.style;\n    var obj = /** @type {!Object<string,string>} */style;\n\n    for (var prop in obj) {\n      if (has(obj, prop)) {\n        elStyle[prop] = obj[prop];\n      }\n    }\n  }\n};\n\n/**\n * Updates a single attribute on an Element.\n * @param {!Element} el\n * @param {string} name The attribute's name.\n * @param {*} value The attribute's value. If the value is an object or\n *     function it is set on the Element, otherwise, it is set as an HTML\n *     attribute.\n */\nvar applyAttributeTyped = function (el, name, value) {\n  var type = typeof value;\n\n  if (type === 'object' || type === 'function') {\n    applyProp(el, name, value);\n  } else {\n    applyAttr(el, name, /** @type {?(boolean|number|string)} */value);\n  }\n};\n\n/**\n * Calls the appropriate attribute mutator for this attribute.\n * @param {!Element} el\n * @param {string} name The attribute's name.\n * @param {*} value The attribute's value.\n */\nvar updateAttribute = function (el, name, value) {\n  var data = getData(el);\n  var attrs = data.attrs;\n\n  if (attrs[name] === value) {\n    return;\n  }\n\n  var mutator = attributes[name] || attributes[symbols.default];\n  mutator(el, name, value);\n\n  attrs[name] = value;\n};\n\n/**\n * A publicly mutable object to provide custom mutators for attributes.\n * @const {!Object<string, function(!Element, string, *)>}\n */\nvar attributes = createMap();\n\n// Special generic mutator that's called for any attribute that does not\n// have a specific mutator.\nattributes[symbols.default] = applyAttributeTyped;\n\nattributes[symbols.placeholder] = function () {};\n\nattributes['style'] = applyStyle;\n\n/**\n * Gets the namespace to create an element (of a given tag) in.\n * @param {string} tag The tag to get the namespace for.\n * @param {?Node} parent\n * @return {?string} The namespace to create the tag in.\n */\nvar getNamespaceForTag = function (tag, parent) {\n  if (tag === 'svg') {\n    return 'http://www.w3.org/2000/svg';\n  }\n\n  if (getData(parent).nodeName === 'foreignObject') {\n    return null;\n  }\n\n  return parent.namespaceURI;\n};\n\n/**\n * Creates an Element.\n * @param {Document} doc The document with which to create the Element.\n * @param {?Node} parent\n * @param {string} tag The tag for the Element.\n * @param {?string=} key A key to identify the Element.\n * @param {?Array<*>=} statics An array of attribute name/value pairs of the\n *     static attributes for the Element.\n * @return {!Element}\n */\nvar createElement = function (doc, parent, tag, key, statics) {\n  var namespace = getNamespaceForTag(tag, parent);\n  var el = undefined;\n\n  if (namespace) {\n    el = doc.createElementNS(namespace, tag);\n  } else {\n    el = doc.createElement(tag);\n  }\n\n  initData(el, tag, key);\n\n  if (statics) {\n    for (var i = 0; i < statics.length; i += 2) {\n      updateAttribute(el, /** @type {!string}*/statics[i], statics[i + 1]);\n    }\n  }\n\n  return el;\n};\n\n/**\n * Creates a Text Node.\n * @param {Document} doc The document with which to create the Element.\n * @return {!Text}\n */\nvar createText = function (doc) {\n  var node = doc.createTextNode('');\n  initData(node, '#text', null);\n  return node;\n};\n\n/**\n * Creates a mapping that can be used to look up children using a key.\n * @param {?Node} el\n * @return {!Object<string, !Element>} A mapping of keys to the children of the\n *     Element.\n */\nvar createKeyMap = function (el) {\n  var map = createMap();\n  var child = el.firstElementChild;\n\n  while (child) {\n    var key = getData(child).key;\n\n    if (key) {\n      map[key] = child;\n    }\n\n    child = child.nextElementSibling;\n  }\n\n  return map;\n};\n\n/**\n * Retrieves the mapping of key to child node for a given Element, creating it\n * if necessary.\n * @param {?Node} el\n * @return {!Object<string, !Node>} A mapping of keys to child Elements\n */\nvar getKeyMap = function (el) {\n  var data = getData(el);\n\n  if (!data.keyMap) {\n    data.keyMap = createKeyMap(el);\n  }\n\n  return data.keyMap;\n};\n\n/**\n * Retrieves a child from the parent with the given key.\n * @param {?Node} parent\n * @param {?string=} key\n * @return {?Node} The child corresponding to the key.\n */\nvar getChild = function (parent, key) {\n  return key ? getKeyMap(parent)[key] : null;\n};\n\n/**\n * Registers an element as being a child. The parent will keep track of the\n * child using the key. The child can be retrieved using the same key using\n * getKeyMap. The provided key should be unique within the parent Element.\n * @param {?Node} parent The parent of child.\n * @param {string} key A key to identify the child with.\n * @param {!Node} child The child to register.\n */\nvar registerChild = function (parent, key, child) {\n  getKeyMap(parent)[key] = child;\n};\n\n/**\n * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @const */\nvar notifications = {\n  /**\n   * Called after patch has compleated with any Nodes that have been created\n   * and added to the DOM.\n   * @type {?function(Array<!Node>)}\n   */\n  nodesCreated: null,\n\n  /**\n   * Called after patch has compleated with any Nodes that have been removed\n   * from the DOM.\n   * Note it's an applications responsibility to handle any childNodes.\n   * @type {?function(Array<!Node>)}\n   */\n  nodesDeleted: null\n};\n\n/**\n * Keeps track of the state of a patch.\n * @constructor\n */\nfunction Context() {\n  /**\n   * @type {(Array<!Node>|undefined)}\n   */\n  this.created = notifications.nodesCreated && [];\n\n  /**\n   * @type {(Array<!Node>|undefined)}\n   */\n  this.deleted = notifications.nodesDeleted && [];\n}\n\n/**\n * @param {!Node} node\n */\nContext.prototype.markCreated = function (node) {\n  if (this.created) {\n    this.created.push(node);\n  }\n};\n\n/**\n * @param {!Node} node\n */\nContext.prototype.markDeleted = function (node) {\n  if (this.deleted) {\n    this.deleted.push(node);\n  }\n};\n\n/**\n * Notifies about nodes that were created during the patch opearation.\n */\nContext.prototype.notifyChanges = function () {\n  if (this.created && this.created.length > 0) {\n    notifications.nodesCreated(this.created);\n  }\n\n  if (this.deleted && this.deleted.length > 0) {\n    notifications.nodesDeleted(this.deleted);\n  }\n};\n\n/**\n* Makes sure that keyed Element matches the tag name provided.\n* @param {!string} nodeName The nodeName of the node that is being matched.\n* @param {string=} tag The tag name of the Element.\n* @param {?string=} key The key of the Element.\n*/\nvar assertKeyedTagMatches = function (nodeName, tag, key) {\n  if (nodeName !== tag) {\n    throw new Error('Was expecting node with key \"' + key + '\" to be a ' + tag + ', not a ' + nodeName + '.');\n  }\n};\n\n/** @type {?Context} */\nvar context = null;\n\n/** @type {?Node} */\nvar currentNode = null;\n\n/** @type {?Node} */\nvar currentParent = null;\n\n/** @type {?Element|?DocumentFragment} */\nvar root = null;\n\n/** @type {?Document} */\nvar doc = null;\n\n/**\n * Returns a patcher function that sets up and restores a patch context,\n * running the run function with the provided data.\n * @param {function((!Element|!DocumentFragment),!function(T),T=)} run\n * @return {function((!Element|!DocumentFragment),!function(T),T=)}\n * @template T\n */\nvar patchFactory = function (run) {\n  /**\n   * TODO(moz): These annotations won't be necessary once we switch to Closure\n   * Compiler's new type inference. Remove these once the switch is done.\n   *\n   * @param {(!Element|!DocumentFragment)} node\n   * @param {!function(T)} fn\n   * @param {T=} data\n   * @template T\n   */\n  var f = function (node, fn, data) {\n    var prevContext = context;\n    var prevRoot = root;\n    var prevDoc = doc;\n    var prevCurrentNode = currentNode;\n    var prevCurrentParent = currentParent;\n    var previousInAttributes = false;\n    var previousInSkip = false;\n\n    context = new Context();\n    root = node;\n    doc = node.ownerDocument;\n    currentParent = node.parentNode;\n\n    if ('production' !== 'production') {}\n\n    run(node, fn, data);\n\n    if ('production' !== 'production') {}\n\n    context.notifyChanges();\n\n    context = prevContext;\n    root = prevRoot;\n    doc = prevDoc;\n    currentNode = prevCurrentNode;\n    currentParent = prevCurrentParent;\n  };\n  return f;\n};\n\n/**\n * Patches the document starting at node with the provided function. This\n * function may be called during an existing patch operation.\n * @param {!Element|!DocumentFragment} node The Element or Document\n *     to patch.\n * @param {!function(T)} fn A function containing elementOpen/elementClose/etc.\n *     calls that describe the DOM.\n * @param {T=} data An argument passed to fn to represent DOM state.\n * @template T\n */\nvar patchInner = patchFactory(function (node, fn, data) {\n  currentNode = node;\n\n  enterNode();\n  fn(data);\n  exitNode();\n\n  if ('production' !== 'production') {}\n});\n\n/**\n * Patches an Element with the the provided function. Exactly one top level\n * element call should be made corresponding to `node`.\n * @param {!Element} node The Element where the patch should start.\n * @param {!function(T)} fn A function containing elementOpen/elementClose/etc.\n *     calls that describe the DOM. This should have at most one top level\n *     element call.\n * @param {T=} data An argument passed to fn to represent DOM state.\n * @template T\n */\nvar patchOuter = patchFactory(function (node, fn, data) {\n  currentNode = /** @type {!Element} */{ nextSibling: node };\n\n  fn(data);\n\n  if ('production' !== 'production') {}\n});\n\n/**\n * Checks whether or not the current node matches the specified nodeName and\n * key.\n *\n * @param {?string} nodeName The nodeName for this node.\n * @param {?string=} key An optional key that identifies a node.\n * @return {boolean} True if the node matches, false otherwise.\n */\nvar matches = function (nodeName, key) {\n  var data = getData(currentNode);\n\n  // Key check is done using double equals as we want to treat a null key the\n  // same as undefined. This should be okay as the only values allowed are\n  // strings, null and undefined so the == semantics are not too weird.\n  return nodeName === data.nodeName && key == data.key;\n};\n\n/**\n * Aligns the virtual Element definition with the actual DOM, moving the\n * corresponding DOM node to the correct location or creating it if necessary.\n * @param {string} nodeName For an Element, this should be a valid tag string.\n *     For a Text, this should be #text.\n * @param {?string=} key The key used to identify this element.\n * @param {?Array<*>=} statics For an Element, this should be an array of\n *     name-value pairs.\n */\nvar alignWithDOM = function (nodeName, key, statics) {\n  if (currentNode && matches(nodeName, key)) {\n    return;\n  }\n\n  var node = undefined;\n\n  // Check to see if the node has moved within the parent.\n  if (key) {\n    node = getChild(currentParent, key);\n    if (node && 'production' !== 'production') {\n      assertKeyedTagMatches(getData(node).nodeName, nodeName, key);\n    }\n  }\n\n  // Create the node if it doesn't exist.\n  if (!node) {\n    if (nodeName === '#text') {\n      node = createText(doc);\n    } else {\n      node = createElement(doc, currentParent, nodeName, key, statics);\n    }\n\n    if (key) {\n      registerChild(currentParent, key, node);\n    }\n\n    context.markCreated(node);\n  }\n\n  // If the node has a key, remove it from the DOM to prevent a large number\n  // of re-orders in the case that it moved far or was completely removed.\n  // Since we hold on to a reference through the keyMap, we can always add it\n  // back.\n  if (currentNode && getData(currentNode).key) {\n    currentParent.replaceChild(node, currentNode);\n    getData(currentParent).keyMapValid = false;\n  } else {\n    currentParent.insertBefore(node, currentNode);\n  }\n\n  currentNode = node;\n};\n\n/**\n * Clears out any unvisited Nodes, as the corresponding virtual element\n * functions were never called for them.\n */\nvar clearUnvisitedDOM = function () {\n  var node = currentParent;\n  var data = getData(node);\n  var keyMap = data.keyMap;\n  var keyMapValid = data.keyMapValid;\n  var child = node.lastChild;\n  var key = undefined;\n\n  if (child === currentNode && keyMapValid) {\n    return;\n  }\n\n  if (data.attrs[symbols.placeholder] && node !== root) {\n    if ('production' !== 'production') {}\n    return;\n  }\n\n  while (child !== currentNode) {\n    node.removeChild(child);\n    context.markDeleted( /** @type {!Node}*/child);\n\n    key = getData(child).key;\n    if (key) {\n      delete keyMap[key];\n    }\n    child = node.lastChild;\n  }\n\n  // Clean the keyMap, removing any unusued keys.\n  if (!keyMapValid) {\n    for (key in keyMap) {\n      child = keyMap[key];\n      if (child.parentNode !== node) {\n        context.markDeleted(child);\n        delete keyMap[key];\n      }\n    }\n\n    data.keyMapValid = true;\n  }\n};\n\n/**\n * Changes to the first child of the current node.\n */\nvar enterNode = function () {\n  currentParent = currentNode;\n  currentNode = null;\n};\n\n/**\n * Changes to the next sibling of the current node.\n */\nvar nextNode = function () {\n  if (currentNode) {\n    currentNode = currentNode.nextSibling;\n  } else {\n    currentNode = currentParent.firstChild;\n  }\n};\n\n/**\n * Changes to the parent of the current node, removing any unvisited children.\n */\nvar exitNode = function () {\n  clearUnvisitedDOM();\n\n  currentNode = currentParent;\n  currentParent = currentParent.parentNode;\n};\n\n/**\n * Makes sure that the current node is an Element with a matching tagName and\n * key.\n *\n * @param {string} tag The element's tag.\n * @param {?string=} key The key used to identify this element. This can be an\n *     empty string, but performance may be better if a unique value is used\n *     when iterating over an array of items.\n * @param {?Array<*>=} statics An array of attribute name/value pairs of the\n *     static attributes for the Element. These will only be set once when the\n *     Element is created.\n * @return {!Element} The corresponding Element.\n */\nvar coreElementOpen = function (tag, key, statics) {\n  nextNode();\n  alignWithDOM(tag, key, statics);\n  enterNode();\n  return (/** @type {!Element} */currentParent\n  );\n};\n\n/**\n * Closes the currently open Element, removing any unvisited children if\n * necessary.\n *\n * @return {!Element} The corresponding Element.\n */\nvar coreElementClose = function () {\n  if ('production' !== 'production') {}\n\n  exitNode();\n  return (/** @type {!Element} */currentNode\n  );\n};\n\n/**\n * Makes sure the current node is a Text node and creates a Text node if it is\n * not.\n *\n * @return {!Text} The corresponding Text Node.\n */\nvar coreText = function () {\n  nextNode();\n  alignWithDOM('#text', null, null);\n  return (/** @type {!Text} */currentNode\n  );\n};\n\n/**\n * Gets the current Element being patched.\n * @return {!Element}\n */\nvar currentElement = function () {\n  if ('production' !== 'production') {}\n  return (/** @type {!Element} */currentParent\n  );\n};\n\n/**\n * Skips the children in a subtree, allowing an Element to be closed without\n * clearing out the children.\n */\nvar skip = function () {\n  if ('production' !== 'production') {}\n  currentNode = currentParent.lastChild;\n};\n\n/**\n * The offset in the virtual element declaration where the attributes are\n * specified.\n * @const\n */\nvar ATTRIBUTES_OFFSET = 3;\n\n/**\n * Builds an array of arguments for use with elementOpenStart, attr and\n * elementOpenEnd.\n * @const {Array<*>}\n */\nvar argsBuilder = [];\n\n/**\n * @param {string} tag The element's tag.\n * @param {?string=} key The key used to identify this element. This can be an\n *     empty string, but performance may be better if a unique value is used\n *     when iterating over an array of items.\n * @param {?Array<*>=} statics An array of attribute name/value pairs of the\n *     static attributes for the Element. These will only be set once when the\n *     Element is created.\n * @param {...*} const_args Attribute name/value pairs of the dynamic attributes\n *     for the Element.\n * @return {!Element} The corresponding Element.\n */\nvar elementOpen = function (tag, key, statics, const_args) {\n  if ('production' !== 'production') {}\n\n  var node = coreElementOpen(tag, key, statics);\n  var data = getData(node);\n\n  /*\n   * Checks to see if one or more attributes have changed for a given Element.\n   * When no attributes have changed, this is much faster than checking each\n   * individual argument. When attributes have changed, the overhead of this is\n   * minimal.\n   */\n  var attrsArr = data.attrsArr;\n  var newAttrs = data.newAttrs;\n  var attrsChanged = false;\n  var i = ATTRIBUTES_OFFSET;\n  var j = 0;\n\n  for (; i < arguments.length; i += 1, j += 1) {\n    if (attrsArr[j] !== arguments[i]) {\n      attrsChanged = true;\n      break;\n    }\n  }\n\n  for (; i < arguments.length; i += 1, j += 1) {\n    attrsArr[j] = arguments[i];\n  }\n\n  if (j < attrsArr.length) {\n    attrsChanged = true;\n    attrsArr.length = j;\n  }\n\n  /*\n   * Actually perform the attribute update.\n   */\n  if (attrsChanged) {\n    for (i = ATTRIBUTES_OFFSET; i < arguments.length; i += 2) {\n      newAttrs[arguments[i]] = arguments[i + 1];\n    }\n\n    for (var _attr in newAttrs) {\n      updateAttribute(node, _attr, newAttrs[_attr]);\n      newAttrs[_attr] = undefined;\n    }\n  }\n\n  return node;\n};\n\n/**\n * Declares a virtual Element at the current location in the document. This\n * corresponds to an opening tag and a elementClose tag is required. This is\n * like elementOpen, but the attributes are defined using the attr function\n * rather than being passed as arguments. Must be folllowed by 0 or more calls\n * to attr, then a call to elementOpenEnd.\n * @param {string} tag The element's tag.\n * @param {?string=} key The key used to identify this element. This can be an\n *     empty string, but performance may be better if a unique value is used\n *     when iterating over an array of items.\n * @param {?Array<*>=} statics An array of attribute name/value pairs of the\n *     static attributes for the Element. These will only be set once when the\n *     Element is created.\n */\nvar elementOpenStart = function (tag, key, statics) {\n  if ('production' !== 'production') {}\n\n  argsBuilder[0] = tag;\n  argsBuilder[1] = key;\n  argsBuilder[2] = statics;\n};\n\n/***\n * Defines a virtual attribute at this point of the DOM. This is only valid\n * when called between elementOpenStart and elementOpenEnd.\n *\n * @param {string} name\n * @param {*} value\n */\nvar attr = function (name, value) {\n  if ('production' !== 'production') {}\n\n  argsBuilder.push(name, value);\n};\n\n/**\n * Closes an open tag started with elementOpenStart.\n * @return {!Element} The corresponding Element.\n */\nvar elementOpenEnd = function () {\n  if ('production' !== 'production') {}\n\n  var node = elementOpen.apply(null, argsBuilder);\n  argsBuilder.length = 0;\n  return node;\n};\n\n/**\n * Closes an open virtual Element.\n *\n * @param {string} tag The element's tag.\n * @return {!Element} The corresponding Element.\n */\nvar elementClose = function (tag) {\n  if ('production' !== 'production') {}\n\n  var node = coreElementClose();\n\n  if ('production' !== 'production') {}\n\n  return node;\n};\n\n/**\n * Declares a virtual Element at the current location in the document that has\n * no children.\n * @param {string} tag The element's tag.\n * @param {?string=} key The key used to identify this element. This can be an\n *     empty string, but performance may be better if a unique value is used\n *     when iterating over an array of items.\n * @param {?Array<*>=} statics An array of attribute name/value pairs of the\n *     static attributes for the Element. These will only be set once when the\n *     Element is created.\n * @param {...*} const_args Attribute name/value pairs of the dynamic attributes\n *     for the Element.\n * @return {!Element} The corresponding Element.\n */\nvar elementVoid = function (tag, key, statics, const_args) {\n  elementOpen.apply(null, arguments);\n  return elementClose(tag);\n};\n\n/**\n * Declares a virtual Element at the current location in the document that is a\n * placeholder element. Children of this Element can be manually managed and\n * will not be cleared by the library.\n *\n * A key must be specified to make sure that this node is correctly preserved\n * across all conditionals.\n *\n * @param {string} tag The element's tag.\n * @param {string} key The key used to identify this element.\n * @param {?Array<*>=} statics An array of attribute name/value pairs of the\n *     static attributes for the Element. These will only be set once when the\n *     Element is created.\n * @param {...*} const_args Attribute name/value pairs of the dynamic attributes\n *     for the Element.\n * @return {!Element} The corresponding Element.\n */\nvar elementPlaceholder = function (tag, key, statics, const_args) {\n  if ('production' !== 'production') {}\n\n  elementOpen.apply(null, arguments);\n  skip();\n  return elementClose(tag);\n};\n\n/**\n * Declares a virtual Text at this point in the document.\n *\n * @param {string|number|boolean} value The value of the Text.\n * @param {...(function((string|number|boolean)):string)} const_args\n *     Functions to format the value which are called only when the value has\n *     changed.\n * @return {!Text} The corresponding text node.\n */\nvar text = function (value, const_args) {\n  if ('production' !== 'production') {}\n\n  var node = coreText();\n  var data = getData(node);\n\n  if (data.text !== value) {\n    data.text = /** @type {string} */value;\n\n    var formatted = value;\n    for (var i = 1; i < arguments.length; i += 1) {\n      /*\n       * Call the formatter function directly to prevent leaking arguments.\n       * https://github.com/google/incremental-dom/pull/204#issuecomment-178223574\n       */\n      var fn = arguments[i];\n      formatted = fn(formatted);\n    }\n\n    node.data = formatted;\n  }\n\n  return node;\n};\n\nexports.patch = patchInner;\nexports.patchInner = patchInner;\nexports.patchOuter = patchOuter;\nexports.currentElement = currentElement;\nexports.skip = skip;\nexports.elementVoid = elementVoid;\nexports.elementOpenStart = elementOpenStart;\nexports.elementOpenEnd = elementOpenEnd;\nexports.elementOpen = elementOpen;\nexports.elementClose = elementClose;\nexports.elementPlaceholder = elementPlaceholder;\nexports.text = text;\nexports.attr = attr;\nexports.symbols = symbols;\nexports.attributes = attributes;\nexports.applyAttr = applyAttr;\nexports.applyProp = applyProp;\nexports.notifications = notifications;\n\n//# sourceMappingURL=incremental-dom-cjs.js.map","'use strict'\nmodule.exports = (typeof self === 'object' && self.self === self && self) ||\n  (typeof global === 'object' && global.global === global && global) ||\n  this\n","const nativeHints = [\n  'native code',\n  '[object MutationObserverConstructor]' // for mobile safari iOS 9.0\n];\nexport default fn => nativeHints.map(\n  (hint) => (fn || '').toString().indexOf([hint]) > -1\n).reduce((a, b) => a || b);\n","/**\n * Polyfill Object.is for IE\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n */\nif (!Object.is) {\n  Object.is = function (x, y) {\n    // SameValue algorithm\n    if (x === y) { // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  };\n}\nexport default Object.is;\n","import root from 'window-or-global';\n\nconst Event = ((TheEvent) => {\n  if (TheEvent) {\n    try {\n      new TheEvent('emit-init'); // eslint-disable-line no-new\n    } catch (e) {\n      return undefined;\n    }\n  }\n  return TheEvent;\n})(root.Event);\n\nfunction createCustomEvent (name, opts = {}) {\n  const { detail } = opts;\n  delete opts.detail;\n\n  let e;\n  if (Event) {\n    e = new Event(name, opts);\n    Object.defineProperty(e, 'detail', { value: detail });\n  } else {\n    e = document.createEvent('CustomEvent');\n    Object.defineProperty(e, 'composed', { value: opts.composed });\n    e.initCustomEvent(name, opts.bubbles, opts.cancelable, detail);\n  }\n  return e;\n}\n\nexport default function (elem, name, opts = {}) {\n  if (opts.bubbles === undefined) {\n    opts.bubbles = true;\n  }\n  if (opts.cancelable === undefined) {\n    opts.cancelable = true;\n  }\n  if (opts.composed === undefined) {\n    opts.composed = true;\n  }\n  return elem.dispatchEvent(createCustomEvent(name, opts));\n}\n","import * as prop from './api/prop';\nimport * as symbols from './api/symbols';\nimport * as vdom from './api/vdom';\nimport Component from './api/component';\nimport define from './api/define';\nimport emit from './api/emit';\nimport link from './api/link';\nimport props from './api/props';\nimport ready from './api/ready';\n\nconst h = vdom.builder();\n\nexport {\n  Component,\n  define,\n  emit,\n  h,\n  link,\n  prop,\n  props,\n  ready,\n  symbols,\n  vdom\n};\n","/*! Kefir.js v3.7.0\n *  https://github.com/rpominov/kefir\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.Kefir = global.Kefir || {})));\n}(this, function (exports) { 'use strict';\n\n\tfunction createObj(proto) {\n\t  var F = function () {};\n\t  F.prototype = proto;\n\t  return new F();\n\t}\n\n\tfunction extend(target /*, mixin1, mixin2...*/) {\n\t  var length = arguments.length,\n\t      i = void 0,\n\t      prop = void 0;\n\t  for (i = 1; i < length; i++) {\n\t    for (prop in arguments[i]) {\n\t      target[prop] = arguments[i][prop];\n\t    }\n\t  }\n\t  return target;\n\t}\n\n\tfunction inherit(Child, Parent /*, mixin1, mixin2...*/) {\n\t  var length = arguments.length,\n\t      i = void 0;\n\t  Child.prototype = createObj(Parent.prototype);\n\t  Child.prototype.constructor = Child;\n\t  for (i = 2; i < length; i++) {\n\t    extend(Child.prototype, arguments[i]);\n\t  }\n\t  return Child;\n\t}\n\n\tvar NOTHING = ['<nothing>'];\n\tvar END = 'end';\n\tvar VALUE = 'value';\n\tvar ERROR = 'error';\n\tvar ANY = 'any';\n\n\tfunction concat(a, b) {\n\t  var result = void 0,\n\t      length = void 0,\n\t      i = void 0,\n\t      j = void 0;\n\t  if (a.length === 0) {\n\t    return b;\n\t  }\n\t  if (b.length === 0) {\n\t    return a;\n\t  }\n\t  j = 0;\n\t  result = new Array(a.length + b.length);\n\t  length = a.length;\n\t  for (i = 0; i < length; i++, j++) {\n\t    result[j] = a[i];\n\t  }\n\t  length = b.length;\n\t  for (i = 0; i < length; i++, j++) {\n\t    result[j] = b[i];\n\t  }\n\t  return result;\n\t}\n\n\tfunction find(arr, value) {\n\t  var length = arr.length,\n\t      i = void 0;\n\t  for (i = 0; i < length; i++) {\n\t    if (arr[i] === value) {\n\t      return i;\n\t    }\n\t  }\n\t  return -1;\n\t}\n\n\tfunction findByPred(arr, pred) {\n\t  var length = arr.length,\n\t      i = void 0;\n\t  for (i = 0; i < length; i++) {\n\t    if (pred(arr[i])) {\n\t      return i;\n\t    }\n\t  }\n\t  return -1;\n\t}\n\n\tfunction cloneArray(input) {\n\t  var length = input.length,\n\t      result = new Array(length),\n\t      i = void 0;\n\t  for (i = 0; i < length; i++) {\n\t    result[i] = input[i];\n\t  }\n\t  return result;\n\t}\n\n\tfunction remove(input, index) {\n\t  var length = input.length,\n\t      result = void 0,\n\t      i = void 0,\n\t      j = void 0;\n\t  if (index >= 0 && index < length) {\n\t    if (length === 1) {\n\t      return [];\n\t    } else {\n\t      result = new Array(length - 1);\n\t      for (i = 0, j = 0; i < length; i++) {\n\t        if (i !== index) {\n\t          result[j] = input[i];\n\t          j++;\n\t        }\n\t      }\n\t      return result;\n\t    }\n\t  } else {\n\t    return input;\n\t  }\n\t}\n\n\tfunction map(input, fn) {\n\t  var length = input.length,\n\t      result = new Array(length),\n\t      i = void 0;\n\t  for (i = 0; i < length; i++) {\n\t    result[i] = fn(input[i]);\n\t  }\n\t  return result;\n\t}\n\n\tfunction forEach(arr, fn) {\n\t  var length = arr.length,\n\t      i = void 0;\n\t  for (i = 0; i < length; i++) {\n\t    fn(arr[i]);\n\t  }\n\t}\n\n\tfunction fillArray(arr, value) {\n\t  var length = arr.length,\n\t      i = void 0;\n\t  for (i = 0; i < length; i++) {\n\t    arr[i] = value;\n\t  }\n\t}\n\n\tfunction contains(arr, value) {\n\t  return find(arr, value) !== -1;\n\t}\n\n\tfunction slide(cur, next, max) {\n\t  var length = Math.min(max, cur.length + 1),\n\t      offset = cur.length - length + 1,\n\t      result = new Array(length),\n\t      i = void 0;\n\t  for (i = offset; i < length; i++) {\n\t    result[i - offset] = cur[i];\n\t  }\n\t  result[length - 1] = next;\n\t  return result;\n\t}\n\n\tfunction callSubscriber(type, fn, event) {\n\t  if (type === ANY) {\n\t    fn(event);\n\t  } else if (type === event.type) {\n\t    if (type === VALUE || type === ERROR) {\n\t      fn(event.value);\n\t    } else {\n\t      fn();\n\t    }\n\t  }\n\t}\n\n\tfunction Dispatcher() {\n\t  this._items = [];\n\t  this._spies = [];\n\t  this._inLoop = 0;\n\t  this._removedItems = null;\n\t}\n\n\textend(Dispatcher.prototype, {\n\t  add: function (type, fn) {\n\t    this._items = concat(this._items, [{ type: type, fn: fn }]);\n\t    return this._items.length;\n\t  },\n\t  remove: function (type, fn) {\n\t    var index = findByPred(this._items, function (x) {\n\t      return x.type === type && x.fn === fn;\n\t    });\n\n\t    // if we're currently in a notification loop,\n\t    // remember this subscriber was removed\n\t    if (this._inLoop !== 0 && index !== -1) {\n\t      if (this._removedItems === null) {\n\t        this._removedItems = [];\n\t      }\n\t      this._removedItems.push(this._items[index]);\n\t    }\n\n\t    this._items = remove(this._items, index);\n\t    return this._items.length;\n\t  },\n\t  addSpy: function (fn) {\n\t    this._spies = concat(this._spies, [fn]);\n\t    return this._spies.length;\n\t  },\n\n\n\t  // Because spies are only ever a function that perform logging as\n\t  // their only side effect, we don't need the same complicated\n\t  // removal logic like in remove()\n\t  removeSpy: function (fn) {\n\t    this._spies = remove(this._spies, this._spies.indexOf(fn));\n\t    return this._spies.length;\n\t  },\n\t  dispatch: function (event) {\n\t    this._inLoop++;\n\t    for (var i = 0, spies = this._spies; this._spies !== null && i < spies.length; i++) {\n\t      spies[i](event);\n\t    }\n\n\t    for (var _i = 0, items = this._items; _i < items.length; _i++) {\n\n\t      // cleanup was called\n\t      if (this._items === null) {\n\t        break;\n\t      }\n\n\t      // this subscriber was removed\n\t      if (this._removedItems !== null && contains(this._removedItems, items[_i])) {\n\t        continue;\n\t      }\n\n\t      callSubscriber(items[_i].type, items[_i].fn, event);\n\t    }\n\t    this._inLoop--;\n\t    if (this._inLoop === 0) {\n\t      this._removedItems = null;\n\t    }\n\t  },\n\t  cleanup: function () {\n\t    this._items = null;\n\t    this._spies = null;\n\t  }\n\t});\n\n\tfunction Observable() {\n\t  this._dispatcher = new Dispatcher();\n\t  this._active = false;\n\t  this._alive = true;\n\t  this._activating = false;\n\t  this._logHandlers = null;\n\t  this._spyHandlers = null;\n\t}\n\n\textend(Observable.prototype, {\n\n\t  _name: 'observable',\n\n\t  _onActivation: function () {},\n\t  _onDeactivation: function () {},\n\t  _setActive: function (active) {\n\t    if (this._active !== active) {\n\t      this._active = active;\n\t      if (active) {\n\t        this._activating = true;\n\t        this._onActivation();\n\t        this._activating = false;\n\t      } else {\n\t        this._onDeactivation();\n\t      }\n\t    }\n\t  },\n\t  _clear: function () {\n\t    this._setActive(false);\n\t    this._dispatcher.cleanup();\n\t    this._dispatcher = null;\n\t    this._logHandlers = null;\n\t  },\n\t  _emit: function (type, x) {\n\t    switch (type) {\n\t      case VALUE:\n\t        return this._emitValue(x);\n\t      case ERROR:\n\t        return this._emitError(x);\n\t      case END:\n\t        return this._emitEnd();\n\t    }\n\t  },\n\t  _emitValue: function (value) {\n\t    if (this._alive) {\n\t      this._dispatcher.dispatch({ type: VALUE, value: value });\n\t    }\n\t  },\n\t  _emitError: function (value) {\n\t    if (this._alive) {\n\t      this._dispatcher.dispatch({ type: ERROR, value: value });\n\t    }\n\t  },\n\t  _emitEnd: function () {\n\t    if (this._alive) {\n\t      this._alive = false;\n\t      this._dispatcher.dispatch({ type: END });\n\t      this._clear();\n\t    }\n\t  },\n\t  _on: function (type, fn) {\n\t    if (this._alive) {\n\t      this._dispatcher.add(type, fn);\n\t      this._setActive(true);\n\t    } else {\n\t      callSubscriber(type, fn, { type: END });\n\t    }\n\t    return this;\n\t  },\n\t  _off: function (type, fn) {\n\t    if (this._alive) {\n\t      var count = this._dispatcher.remove(type, fn);\n\t      if (count === 0) {\n\t        this._setActive(false);\n\t      }\n\t    }\n\t    return this;\n\t  },\n\t  onValue: function (fn) {\n\t    return this._on(VALUE, fn);\n\t  },\n\t  onError: function (fn) {\n\t    return this._on(ERROR, fn);\n\t  },\n\t  onEnd: function (fn) {\n\t    return this._on(END, fn);\n\t  },\n\t  onAny: function (fn) {\n\t    return this._on(ANY, fn);\n\t  },\n\t  offValue: function (fn) {\n\t    return this._off(VALUE, fn);\n\t  },\n\t  offError: function (fn) {\n\t    return this._off(ERROR, fn);\n\t  },\n\t  offEnd: function (fn) {\n\t    return this._off(END, fn);\n\t  },\n\t  offAny: function (fn) {\n\t    return this._off(ANY, fn);\n\t  },\n\t  observe: function (observerOrOnValue, onError, onEnd) {\n\t    var _this = this;\n\t    var closed = false;\n\n\t    var observer = !observerOrOnValue || typeof observerOrOnValue === 'function' ? { value: observerOrOnValue, error: onError, end: onEnd } : observerOrOnValue;\n\n\t    var handler = function (event) {\n\t      if (event.type === END) {\n\t        closed = true;\n\t      }\n\t      if (event.type === VALUE && observer.value) {\n\t        observer.value(event.value);\n\t      } else if (event.type === ERROR && observer.error) {\n\t        observer.error(event.value);\n\t      } else if (event.type === END && observer.end) {\n\t        observer.end(event.value);\n\t      }\n\t    };\n\n\t    this.onAny(handler);\n\n\t    return {\n\t      unsubscribe: function () {\n\t        if (!closed) {\n\t          _this.offAny(handler);\n\t          closed = true;\n\t        }\n\t      },\n\n\t      get closed() {\n\t        return closed;\n\t      }\n\t    };\n\t  },\n\n\n\t  // A and B must be subclasses of Stream and Property (order doesn't matter)\n\t  _ofSameType: function (A, B) {\n\t    return A.prototype.getType() === this.getType() ? A : B;\n\t  },\n\t  setName: function (sourceObs /* optional */, selfName) {\n\t    this._name = selfName ? sourceObs._name + '.' + selfName : sourceObs;\n\t    return this;\n\t  },\n\t  log: function () {\n\t    var name = arguments.length <= 0 || arguments[0] === undefined ? this.toString() : arguments[0];\n\n\n\t    var isCurrent = void 0;\n\t    var handler = function (event) {\n\t      var type = '<' + event.type + (isCurrent ? ':current' : '') + '>';\n\t      if (event.type === END) {\n\t        console.log(name, type);\n\t      } else {\n\t        console.log(name, type, event.value);\n\t      }\n\t    };\n\n\t    if (this._alive) {\n\t      if (!this._logHandlers) {\n\t        this._logHandlers = [];\n\t      }\n\t      this._logHandlers.push({ name: name, handler: handler });\n\t    }\n\n\t    isCurrent = true;\n\t    this.onAny(handler);\n\t    isCurrent = false;\n\n\t    return this;\n\t  },\n\t  offLog: function () {\n\t    var name = arguments.length <= 0 || arguments[0] === undefined ? this.toString() : arguments[0];\n\n\n\t    if (this._logHandlers) {\n\t      var handlerIndex = findByPred(this._logHandlers, function (obj) {\n\t        return obj.name === name;\n\t      });\n\t      if (handlerIndex !== -1) {\n\t        this.offAny(this._logHandlers[handlerIndex].handler);\n\t        this._logHandlers.splice(handlerIndex, 1);\n\t      }\n\t    }\n\n\t    return this;\n\t  },\n\t  spy: function () {\n\t    var name = arguments.length <= 0 || arguments[0] === undefined ? this.toString() : arguments[0];\n\n\t    var handler = function (event) {\n\t      var type = '<' + event.type + '>';\n\t      if (event.type === END) {\n\t        console.log(name, type);\n\t      } else {\n\t        console.log(name, type, event.value);\n\t      }\n\t    };\n\t    if (this._alive) {\n\t      if (!this._spyHandlers) {\n\t        this._spyHandlers = [];\n\t      }\n\t      this._spyHandlers.push({ name: name, handler: handler });\n\t      this._dispatcher.addSpy(handler);\n\t    }\n\t    return this;\n\t  },\n\t  offSpy: function () {\n\t    var name = arguments.length <= 0 || arguments[0] === undefined ? this.toString() : arguments[0];\n\n\t    if (this._spyHandlers) {\n\t      var handlerIndex = findByPred(this._spyHandlers, function (obj) {\n\t        return obj.name === name;\n\t      });\n\t      if (handlerIndex !== -1) {\n\t        this._dispatcher.removeSpy(this._spyHandlers[handlerIndex].handler);\n\t        this._spyHandlers.splice(handlerIndex, 1);\n\t      }\n\t    }\n\t    return this;\n\t  }\n\t});\n\n\t// extend() can't handle `toString` in IE8\n\tObservable.prototype.toString = function () {\n\t  return '[' + this._name + ']';\n\t};\n\n\tfunction Stream() {\n\t  Observable.call(this);\n\t}\n\n\tinherit(Stream, Observable, {\n\n\t  _name: 'stream',\n\n\t  getType: function () {\n\t    return 'stream';\n\t  }\n\t});\n\n\tfunction Property() {\n\t  Observable.call(this);\n\t  this._currentEvent = null;\n\t}\n\n\tinherit(Property, Observable, {\n\n\t  _name: 'property',\n\n\t  _emitValue: function (value) {\n\t    if (this._alive) {\n\t      this._currentEvent = { type: VALUE, value: value };\n\t      if (!this._activating) {\n\t        this._dispatcher.dispatch({ type: VALUE, value: value });\n\t      }\n\t    }\n\t  },\n\t  _emitError: function (value) {\n\t    if (this._alive) {\n\t      this._currentEvent = { type: ERROR, value: value };\n\t      if (!this._activating) {\n\t        this._dispatcher.dispatch({ type: ERROR, value: value });\n\t      }\n\t    }\n\t  },\n\t  _emitEnd: function () {\n\t    if (this._alive) {\n\t      this._alive = false;\n\t      if (!this._activating) {\n\t        this._dispatcher.dispatch({ type: END });\n\t      }\n\t      this._clear();\n\t    }\n\t  },\n\t  _on: function (type, fn) {\n\t    if (this._alive) {\n\t      this._dispatcher.add(type, fn);\n\t      this._setActive(true);\n\t    }\n\t    if (this._currentEvent !== null) {\n\t      callSubscriber(type, fn, this._currentEvent);\n\t    }\n\t    if (!this._alive) {\n\t      callSubscriber(type, fn, { type: END });\n\t    }\n\t    return this;\n\t  },\n\t  getType: function () {\n\t    return 'property';\n\t  }\n\t});\n\n\tvar neverS = new Stream();\n\tneverS._emitEnd();\n\tneverS._name = 'never';\n\n\tfunction never() {\n\t  return neverS;\n\t}\n\n\tfunction timeBased(mixin) {\n\n\t  function AnonymousStream(wait, options) {\n\t    var _this = this;\n\n\t    Stream.call(this);\n\t    this._wait = wait;\n\t    this._intervalId = null;\n\t    this._$onTick = function () {\n\t      return _this._onTick();\n\t    };\n\t    this._init(options);\n\t  }\n\n\t  inherit(AnonymousStream, Stream, {\n\t    _init: function () {},\n\t    _free: function () {},\n\t    _onTick: function () {},\n\t    _onActivation: function () {\n\t      this._intervalId = setInterval(this._$onTick, this._wait);\n\t    },\n\t    _onDeactivation: function () {\n\t      if (this._intervalId !== null) {\n\t        clearInterval(this._intervalId);\n\t        this._intervalId = null;\n\t      }\n\t    },\n\t    _clear: function () {\n\t      Stream.prototype._clear.call(this);\n\t      this._$onTick = null;\n\t      this._free();\n\t    }\n\t  }, mixin);\n\n\t  return AnonymousStream;\n\t}\n\n\tvar S = timeBased({\n\n\t  _name: 'later',\n\n\t  _init: function (_ref) {\n\t    var x = _ref.x;\n\n\t    this._x = x;\n\t  },\n\t  _free: function () {\n\t    this._x = null;\n\t  },\n\t  _onTick: function () {\n\t    this._emitValue(this._x);\n\t    this._emitEnd();\n\t  }\n\t});\n\n\tfunction later(wait, x) {\n\t  return new S(wait, { x: x });\n\t}\n\n\tvar S$1 = timeBased({\n\n\t  _name: 'interval',\n\n\t  _init: function (_ref) {\n\t    var x = _ref.x;\n\n\t    this._x = x;\n\t  },\n\t  _free: function () {\n\t    this._x = null;\n\t  },\n\t  _onTick: function () {\n\t    this._emitValue(this._x);\n\t  }\n\t});\n\n\tfunction interval(wait, x) {\n\t  return new S$1(wait, { x: x });\n\t}\n\n\tvar S$2 = timeBased({\n\n\t  _name: 'sequentially',\n\n\t  _init: function (_ref) {\n\t    var xs = _ref.xs;\n\n\t    this._xs = cloneArray(xs);\n\t  },\n\t  _free: function () {\n\t    this._xs = null;\n\t  },\n\t  _onTick: function () {\n\t    if (this._xs.length === 1) {\n\t      this._emitValue(this._xs[0]);\n\t      this._emitEnd();\n\t    } else {\n\t      this._emitValue(this._xs.shift());\n\t    }\n\t  }\n\t});\n\n\tfunction sequentially(wait, xs) {\n\t  return xs.length === 0 ? never() : new S$2(wait, { xs: xs });\n\t}\n\n\tvar S$3 = timeBased({\n\n\t  _name: 'fromPoll',\n\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _onTick: function () {\n\t    var fn = this._fn;\n\t    this._emitValue(fn());\n\t  }\n\t});\n\n\tfunction fromPoll(wait, fn) {\n\t  return new S$3(wait, { fn: fn });\n\t}\n\n\tfunction emitter(obs) {\n\n\t  function value(x) {\n\t    obs._emitValue(x);\n\t    return obs._active;\n\t  }\n\n\t  function error(x) {\n\t    obs._emitError(x);\n\t    return obs._active;\n\t  }\n\n\t  function end() {\n\t    obs._emitEnd();\n\t    return obs._active;\n\t  }\n\n\t  function event(e) {\n\t    obs._emit(e.type, e.value);\n\t    return obs._active;\n\t  }\n\n\t  return {\n\t    value: value,\n\t    error: error,\n\t    end: end,\n\t    event: event,\n\n\t    // legacy\n\t    emit: value,\n\t    emitEvent: event\n\t  };\n\t}\n\n\tvar S$4 = timeBased({\n\n\t  _name: 'withInterval',\n\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t    this._emitter = emitter(this);\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t    this._emitter = null;\n\t  },\n\t  _onTick: function () {\n\t    var fn = this._fn;\n\t    fn(this._emitter);\n\t  }\n\t});\n\n\tfunction withInterval(wait, fn) {\n\t  return new S$4(wait, { fn: fn });\n\t}\n\n\tfunction S$5(fn) {\n\t  Stream.call(this);\n\t  this._fn = fn;\n\t  this._unsubscribe = null;\n\t}\n\n\tinherit(S$5, Stream, {\n\n\t  _name: 'stream',\n\n\t  _onActivation: function () {\n\t    var fn = this._fn;\n\t    var unsubscribe = fn(emitter(this));\n\t    this._unsubscribe = typeof unsubscribe === 'function' ? unsubscribe : null;\n\n\t    // fix https://github.com/rpominov/kefir/issues/35\n\t    if (!this._active) {\n\t      this._callUnsubscribe();\n\t    }\n\t  },\n\t  _callUnsubscribe: function () {\n\t    if (this._unsubscribe !== null) {\n\t      this._unsubscribe();\n\t      this._unsubscribe = null;\n\t    }\n\t  },\n\t  _onDeactivation: function () {\n\t    this._callUnsubscribe();\n\t  },\n\t  _clear: function () {\n\t    Stream.prototype._clear.call(this);\n\t    this._fn = null;\n\t  }\n\t});\n\n\tfunction stream(fn) {\n\t  return new S$5(fn);\n\t}\n\n\tfunction fromCallback(callbackConsumer) {\n\n\t  var called = false;\n\n\t  return stream(function (emitter) {\n\n\t    if (!called) {\n\t      callbackConsumer(function (x) {\n\t        emitter.emit(x);\n\t        emitter.end();\n\t      });\n\t      called = true;\n\t    }\n\t  }).setName('fromCallback');\n\t}\n\n\tfunction fromNodeCallback(callbackConsumer) {\n\n\t  var called = false;\n\n\t  return stream(function (emitter) {\n\n\t    if (!called) {\n\t      callbackConsumer(function (error, x) {\n\t        if (error) {\n\t          emitter.error(error);\n\t        } else {\n\t          emitter.emit(x);\n\t        }\n\t        emitter.end();\n\t      });\n\t      called = true;\n\t    }\n\t  }).setName('fromNodeCallback');\n\t}\n\n\tfunction spread(fn, length) {\n\t  switch (length) {\n\t    case 0:\n\t      return function () {\n\t        return fn();\n\t      };\n\t    case 1:\n\t      return function (a) {\n\t        return fn(a[0]);\n\t      };\n\t    case 2:\n\t      return function (a) {\n\t        return fn(a[0], a[1]);\n\t      };\n\t    case 3:\n\t      return function (a) {\n\t        return fn(a[0], a[1], a[2]);\n\t      };\n\t    case 4:\n\t      return function (a) {\n\t        return fn(a[0], a[1], a[2], a[3]);\n\t      };\n\t    default:\n\t      return function (a) {\n\t        return fn.apply(null, a);\n\t      };\n\t  }\n\t}\n\n\tfunction apply(fn, c, a) {\n\t  var aLength = a ? a.length : 0;\n\t  if (c == null) {\n\t    switch (aLength) {\n\t      case 0:\n\t        return fn();\n\t      case 1:\n\t        return fn(a[0]);\n\t      case 2:\n\t        return fn(a[0], a[1]);\n\t      case 3:\n\t        return fn(a[0], a[1], a[2]);\n\t      case 4:\n\t        return fn(a[0], a[1], a[2], a[3]);\n\t      default:\n\t        return fn.apply(null, a);\n\t    }\n\t  } else {\n\t    switch (aLength) {\n\t      case 0:\n\t        return fn.call(c);\n\t      default:\n\t        return fn.apply(c, a);\n\t    }\n\t  }\n\t}\n\n\tfunction fromSubUnsub(sub, unsub, transformer /* Function | falsey */) {\n\t  return stream(function (emitter) {\n\n\t    var handler = transformer ? function () {\n\t      emitter.emit(apply(transformer, this, arguments));\n\t    } : function (x) {\n\t      emitter.emit(x);\n\t    };\n\n\t    sub(handler);\n\t    return function () {\n\t      return unsub(handler);\n\t    };\n\t  }).setName('fromSubUnsub');\n\t}\n\n\tvar pairs = [['addEventListener', 'removeEventListener'], ['addListener', 'removeListener'], ['on', 'off']];\n\n\tfunction fromEvents(target, eventName, transformer) {\n\t  var sub = void 0,\n\t      unsub = void 0;\n\n\t  for (var i = 0; i < pairs.length; i++) {\n\t    if (typeof target[pairs[i][0]] === 'function' && typeof target[pairs[i][1]] === 'function') {\n\t      sub = pairs[i][0];\n\t      unsub = pairs[i][1];\n\t      break;\n\t    }\n\t  }\n\n\t  if (sub === undefined) {\n\t    throw new Error('target don\\'t support any of ' + 'addEventListener/removeEventListener, addListener/removeListener, on/off method pair');\n\t  }\n\n\t  return fromSubUnsub(function (handler) {\n\t    return target[sub](eventName, handler);\n\t  }, function (handler) {\n\t    return target[unsub](eventName, handler);\n\t  }, transformer).setName('fromEvents');\n\t}\n\n\t// HACK:\n\t//   We don't call parent Class constructor, but instead putting all necessary\n\t//   properties into prototype to simulate ended Property\n\t//   (see Propperty and Observable classes).\n\n\tfunction P(value) {\n\t  this._currentEvent = { type: 'value', value: value, current: true };\n\t}\n\n\tinherit(P, Property, {\n\t  _name: 'constant',\n\t  _active: false,\n\t  _activating: false,\n\t  _alive: false,\n\t  _dispatcher: null,\n\t  _logHandlers: null\n\t});\n\n\tfunction constant(x) {\n\t  return new P(x);\n\t}\n\n\t// HACK:\n\t//   We don't call parent Class constructor, but instead putting all necessary\n\t//   properties into prototype to simulate ended Property\n\t//   (see Propperty and Observable classes).\n\n\tfunction P$1(value) {\n\t  this._currentEvent = { type: 'error', value: value, current: true };\n\t}\n\n\tinherit(P$1, Property, {\n\t  _name: 'constantError',\n\t  _active: false,\n\t  _activating: false,\n\t  _alive: false,\n\t  _dispatcher: null,\n\t  _logHandlers: null\n\t});\n\n\tfunction constantError(x) {\n\t  return new P$1(x);\n\t}\n\n\tfunction createConstructor(BaseClass, name) {\n\t  return function AnonymousObservable(source, options) {\n\t    var _this = this;\n\n\t    BaseClass.call(this);\n\t    this._source = source;\n\t    this._name = source._name + '.' + name;\n\t    this._init(options);\n\t    this._$handleAny = function (event) {\n\t      return _this._handleAny(event);\n\t    };\n\t  };\n\t}\n\n\tfunction createClassMethods(BaseClass) {\n\t  return {\n\t    _init: function () {},\n\t    _free: function () {},\n\t    _handleValue: function (x) {\n\t      this._emitValue(x);\n\t    },\n\t    _handleError: function (x) {\n\t      this._emitError(x);\n\t    },\n\t    _handleEnd: function () {\n\t      this._emitEnd();\n\t    },\n\t    _handleAny: function (event) {\n\t      switch (event.type) {\n\t        case VALUE:\n\t          return this._handleValue(event.value);\n\t        case ERROR:\n\t          return this._handleError(event.value);\n\t        case END:\n\t          return this._handleEnd();\n\t      }\n\t    },\n\t    _onActivation: function () {\n\t      this._source.onAny(this._$handleAny);\n\t    },\n\t    _onDeactivation: function () {\n\t      this._source.offAny(this._$handleAny);\n\t    },\n\t    _clear: function () {\n\t      BaseClass.prototype._clear.call(this);\n\t      this._source = null;\n\t      this._$handleAny = null;\n\t      this._free();\n\t    }\n\t  };\n\t}\n\n\tfunction createStream(name, mixin) {\n\t  var S = createConstructor(Stream, name);\n\t  inherit(S, Stream, createClassMethods(Stream), mixin);\n\t  return S;\n\t}\n\n\tfunction createProperty(name, mixin) {\n\t  var P = createConstructor(Property, name);\n\t  inherit(P, Property, createClassMethods(Property), mixin);\n\t  return P;\n\t}\n\n\tvar P$2 = createProperty('toProperty', {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._getInitialCurrent = fn;\n\t  },\n\t  _onActivation: function () {\n\t    if (this._getInitialCurrent !== null) {\n\t      var getInitial = this._getInitialCurrent;\n\t      this._emitValue(getInitial());\n\t    }\n\t    this._source.onAny(this._$handleAny); // copied from patterns/one-source\n\t  }\n\t});\n\n\tfunction toProperty(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n\t  if (fn !== null && typeof fn !== 'function') {\n\t    throw new Error('You should call toProperty() with a function or no arguments.');\n\t  }\n\t  return new P$2(obs, { fn: fn });\n\t}\n\n\tvar S$6 = createStream('changes', {\n\t  _handleValue: function (x) {\n\t    if (!this._activating) {\n\t      this._emitValue(x);\n\t    }\n\t  },\n\t  _handleError: function (x) {\n\t    if (!this._activating) {\n\t      this._emitError(x);\n\t    }\n\t  }\n\t});\n\n\tfunction changes(obs) {\n\t  return new S$6(obs);\n\t}\n\n\tfunction fromPromise(promise) {\n\n\t  var called = false;\n\n\t  var result = stream(function (emitter) {\n\t    if (!called) {\n\t      var onValue = function (x) {\n\t        emitter.emit(x);\n\t        emitter.end();\n\t      };\n\t      var onError = function (x) {\n\t        emitter.error(x);\n\t        emitter.end();\n\t      };\n\t      var _promise = promise.then(onValue, onError);\n\n\t      // prevent libraries like 'Q' or 'when' from swallowing exceptions\n\t      if (_promise && typeof _promise.done === 'function') {\n\t        _promise.done();\n\t      }\n\n\t      called = true;\n\t    }\n\t  });\n\n\t  return toProperty(result, null).setName('fromPromise');\n\t}\n\n\tfunction getGlodalPromise() {\n\t  if (typeof Promise === 'function') {\n\t    return Promise;\n\t  } else {\n\t    throw new Error('There isn\\'t default Promise, use shim or parameter');\n\t  }\n\t}\n\n\tfunction toPromise (obs) {\n\t  var Promise = arguments.length <= 1 || arguments[1] === undefined ? getGlodalPromise() : arguments[1];\n\n\t  var last = null;\n\t  return new Promise(function (resolve, reject) {\n\t    obs.onAny(function (event) {\n\t      if (event.type === END && last !== null) {\n\t        (last.type === VALUE ? resolve : reject)(last.value);\n\t        last = null;\n\t      } else {\n\t        last = event;\n\t      }\n\t    });\n\t  });\n\t}\n\n\tvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {}\n\n\tfunction createCommonjsModule(fn, module) {\n\t\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n\t}\n\n\tvar ponyfill = createCommonjsModule(function (module, exports) {\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports['default'] = symbolObservablePonyfill;\n\tfunction symbolObservablePonyfill(root) {\n\t\tvar result;\n\t\tvar _Symbol = root.Symbol;\n\n\t\tif (typeof _Symbol === 'function') {\n\t\t\tif (_Symbol.observable) {\n\t\t\t\tresult = _Symbol.observable;\n\t\t\t} else {\n\t\t\t\tresult = _Symbol('observable');\n\t\t\t\t_Symbol.observable = result;\n\t\t\t}\n\t\t} else {\n\t\t\tresult = '@@observable';\n\t\t}\n\n\t\treturn result;\n\t};\n\t});\n\n\tvar require$$0$1 = (ponyfill && typeof ponyfill === 'object' && 'default' in ponyfill ? ponyfill['default'] : ponyfill);\n\n\tvar index$1 = createCommonjsModule(function (module, exports) {\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\n\tvar _ponyfill = require$$0$1;\n\n\tvar _ponyfill2 = _interopRequireDefault(_ponyfill);\n\n\tfunction _interopRequireDefault(obj) {\n\t\treturn obj && obj.__esModule ? obj : { 'default': obj };\n\t}\n\n\tvar root = undefined; /* global window */\n\n\tif (typeof commonjsGlobal !== 'undefined') {\n\t\troot = commonjsGlobal;\n\t} else if (typeof window !== 'undefined') {\n\t\troot = window;\n\t}\n\n\tvar result = (0, _ponyfill2['default'])(root);\n\texports['default'] = result;\n\t});\n\n\tvar require$$0 = (index$1 && typeof index$1 === 'object' && 'default' in index$1 ? index$1['default'] : index$1);\n\n\tvar index = createCommonjsModule(function (module) {\n\tmodule.exports = require$$0;\n\t});\n\n\tvar $$observable = (index && typeof index === 'object' && 'default' in index ? index['default'] : index);\n\n\tfunction fromESObservable(_observable) {\n\t  var observable = _observable[$$observable] ? _observable[$$observable]() : _observable;\n\t  return stream(function (emitter) {\n\t    var unsub = observable.subscribe({\n\t      error: function (error) {\n\t        emitter.error(error);\n\t        emitter.end();\n\t      },\n\t      next: function (value) {\n\t        emitter.emit(value);\n\t      },\n\t      complete: function () {\n\t        emitter.end();\n\t      }\n\t    });\n\n\t    if (unsub.unsubscribe) {\n\t      return function () {\n\t        unsub.unsubscribe();\n\t      };\n\t    } else {\n\t      return unsub;\n\t    }\n\t  }).setName('fromESObservable');\n\t}\n\n\tfunction ESObservable(observable) {\n\t  this._observable = observable.takeErrors(1);\n\t}\n\n\textend(ESObservable.prototype, {\n\t  subscribe: function (observerOrOnNext, onError, onComplete) {\n\t    var _this = this;\n\n\t    var observer = typeof observerOrOnNext === 'function' ? { next: observerOrOnNext, error: onError, complete: onComplete } : observerOrOnNext;\n\n\t    var fn = function (event) {\n\t      if (event.type === END) {\n\t        closed = true;\n\t      }\n\n\t      if (event.type === VALUE && observer.next) {\n\t        observer.next(event.value);\n\t      } else if (event.type === ERROR && observer.error) {\n\t        observer.error(event.value);\n\t      } else if (event.type === END && observer.complete) {\n\t        observer.complete(event.value);\n\t      }\n\t    };\n\n\t    this._observable.onAny(fn);\n\t    var closed = false;\n\n\t    var subscription = {\n\t      unsubscribe: function () {\n\t        closed = true;\n\t        _this._observable.offAny(fn);\n\t      },\n\t      get closed() {\n\t        return closed;\n\t      }\n\t    };\n\t    return subscription;\n\t  }\n\t});\n\n\t// Need to assign directly b/c Symbols aren't enumerable.\n\tESObservable.prototype[$$observable] = function () {\n\t  return this;\n\t};\n\n\tfunction toESObservable() {\n\t  return new ESObservable(this);\n\t}\n\n\tfunction collect(source, keys, values) {\n\t  for (var prop in source) {\n\t    if (source.hasOwnProperty(prop)) {\n\t      keys.push(prop);\n\t      values.push(source[prop]);\n\t    }\n\t  }\n\t}\n\n\tfunction defaultErrorsCombinator(errors) {\n\t  var latestError = void 0;\n\t  for (var i = 0; i < errors.length; i++) {\n\t    if (errors[i] !== undefined) {\n\t      if (latestError === undefined || latestError.index < errors[i].index) {\n\t        latestError = errors[i];\n\t      }\n\t    }\n\t  }\n\t  return latestError.error;\n\t}\n\n\tfunction Combine(active, passive, combinator) {\n\t  var _this = this;\n\n\t  Stream.call(this);\n\t  this._activeCount = active.length;\n\t  this._sources = concat(active, passive);\n\t  this._combinator = combinator;\n\t  this._aliveCount = 0;\n\t  this._latestValues = new Array(this._sources.length);\n\t  this._latestErrors = new Array(this._sources.length);\n\t  fillArray(this._latestValues, NOTHING);\n\t  this._emitAfterActivation = false;\n\t  this._endAfterActivation = false;\n\t  this._latestErrorIndex = 0;\n\n\t  this._$handlers = [];\n\n\t  var _loop = function (i) {\n\t    _this._$handlers.push(function (event) {\n\t      return _this._handleAny(i, event);\n\t    });\n\t  };\n\n\t  for (var i = 0; i < this._sources.length; i++) {\n\t    _loop(i);\n\t  }\n\t}\n\n\tinherit(Combine, Stream, {\n\n\t  _name: 'combine',\n\n\t  _onActivation: function () {\n\t    this._aliveCount = this._activeCount;\n\n\t    // we need to suscribe to _passive_ sources before _active_\n\t    // (see https://github.com/rpominov/kefir/issues/98)\n\t    for (var i = this._activeCount; i < this._sources.length; i++) {\n\t      this._sources[i].onAny(this._$handlers[i]);\n\t    }\n\t    for (var _i = 0; _i < this._activeCount; _i++) {\n\t      this._sources[_i].onAny(this._$handlers[_i]);\n\t    }\n\n\t    if (this._emitAfterActivation) {\n\t      this._emitAfterActivation = false;\n\t      this._emitIfFull();\n\t    }\n\t    if (this._endAfterActivation) {\n\t      this._emitEnd();\n\t    }\n\t  },\n\t  _onDeactivation: function () {\n\t    var length = this._sources.length,\n\t        i = void 0;\n\t    for (i = 0; i < length; i++) {\n\t      this._sources[i].offAny(this._$handlers[i]);\n\t    }\n\t  },\n\t  _emitIfFull: function () {\n\t    var hasAllValues = true;\n\t    var hasErrors = false;\n\t    var length = this._latestValues.length;\n\t    var valuesCopy = new Array(length);\n\t    var errorsCopy = new Array(length);\n\n\t    for (var i = 0; i < length; i++) {\n\t      valuesCopy[i] = this._latestValues[i];\n\t      errorsCopy[i] = this._latestErrors[i];\n\n\t      if (valuesCopy[i] === NOTHING) {\n\t        hasAllValues = false;\n\t      }\n\n\t      if (errorsCopy[i] !== undefined) {\n\t        hasErrors = true;\n\t      }\n\t    }\n\n\t    if (hasAllValues) {\n\t      var combinator = this._combinator;\n\t      this._emitValue(combinator(valuesCopy));\n\t    }\n\t    if (hasErrors) {\n\t      this._emitError(defaultErrorsCombinator(errorsCopy));\n\t    }\n\t  },\n\t  _handleAny: function (i, event) {\n\n\t    if (event.type === VALUE || event.type === ERROR) {\n\n\t      if (event.type === VALUE) {\n\t        this._latestValues[i] = event.value;\n\t        this._latestErrors[i] = undefined;\n\t      }\n\t      if (event.type === ERROR) {\n\t        this._latestValues[i] = NOTHING;\n\t        this._latestErrors[i] = {\n\t          index: this._latestErrorIndex++,\n\t          error: event.value\n\t        };\n\t      }\n\n\t      if (i < this._activeCount) {\n\t        if (this._activating) {\n\t          this._emitAfterActivation = true;\n\t        } else {\n\t          this._emitIfFull();\n\t        }\n\t      }\n\t    } else {\n\t      // END\n\n\t      if (i < this._activeCount) {\n\t        this._aliveCount--;\n\t        if (this._aliveCount === 0) {\n\t          if (this._activating) {\n\t            this._endAfterActivation = true;\n\t          } else {\n\t            this._emitEnd();\n\t          }\n\t        }\n\t      }\n\t    }\n\t  },\n\t  _clear: function () {\n\t    Stream.prototype._clear.call(this);\n\t    this._sources = null;\n\t    this._latestValues = null;\n\t    this._latestErrors = null;\n\t    this._combinator = null;\n\t    this._$handlers = null;\n\t  }\n\t});\n\n\tfunction combineAsArray(active) {\n\t  var passive = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];\n\t  var combinator = arguments[2];\n\n\t  if (!Array.isArray(passive)) {\n\t    throw new Error('Combine can only combine active and passive collections of the same type.');\n\t  }\n\n\t  combinator = combinator ? spread(combinator, active.length + passive.length) : function (x) {\n\t    return x;\n\t  };\n\t  return active.length === 0 ? never() : new Combine(active, passive, combinator);\n\t}\n\n\tfunction combineAsObject(active) {\n\t  var passive = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t  var combinator = arguments[2];\n\n\t  if (typeof passive !== 'object' || Array.isArray(passive)) {\n\t    throw new Error('Combine can only combine active and passive collections of the same type.');\n\t  }\n\n\t  var keys = [],\n\t      activeObservables = [],\n\t      passiveObservables = [];\n\n\t  collect(active, keys, activeObservables);\n\t  collect(passive, keys, passiveObservables);\n\n\t  var objectify = function (values) {\n\t    var event = {};\n\t    for (var i = values.length - 1; 0 <= i; i--) {\n\t      event[keys[i]] = values[i];\n\t    }\n\t    return combinator ? combinator(event) : event;\n\t  };\n\n\t  return activeObservables.length === 0 ? never() : new Combine(activeObservables, passiveObservables, objectify);\n\t}\n\n\tfunction combine(active, passive, combinator) {\n\t  if (typeof passive === 'function') {\n\t    combinator = passive;\n\t    passive = undefined;\n\t  }\n\n\t  return Array.isArray(active) ? combineAsArray(active, passive, combinator) : combineAsObject(active, passive, combinator);\n\t}\n\n\tvar Observable$1 = {\n\t  empty: function () {\n\t    return never();\n\t  },\n\n\n\t  // Monoid based on merge() seems more useful than one based on concat().\n\t  concat: function (a, b) {\n\t    return a.merge(b);\n\t  },\n\t  of: function (x) {\n\t    return constant(x);\n\t  },\n\t  map: function (fn, obs) {\n\t    return obs.map(fn);\n\t  },\n\t  bimap: function (fnErr, fnVal, obs) {\n\t    return obs.mapErrors(fnErr).map(fnVal);\n\t  },\n\n\n\t  // This ap strictly speaking incompatible with chain. If we derive ap from chain we get\n\t  // different (not very useful) behavior. But spec requires that if method can be derived\n\t  // it must have the same behavior as hand-written method. We intentionally violate the spec\n\t  // in hope that it won't cause many troubles in practice. And in return we have more useful type.\n\t  ap: function (obsFn, obsVal) {\n\t    return combine([obsFn, obsVal], function (fn, val) {\n\t      return fn(val);\n\t    });\n\t  },\n\t  chain: function (fn, obs) {\n\t    return obs.flatMap(fn);\n\t  }\n\t};\n\n\n\n\tvar staticLand = Object.freeze({\n\t  Observable: Observable$1\n\t});\n\n\tvar mixin = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    this._emitValue(fn(x));\n\t  }\n\t};\n\n\tvar S$7 = createStream('map', mixin);\n\tvar P$3 = createProperty('map', mixin);\n\n\tvar id = function (x) {\n\t  return x;\n\t};\n\n\tfunction map$1(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? id : arguments[1];\n\n\t  return new (obs._ofSameType(S$7, P$3))(obs, { fn: fn });\n\t}\n\n\tvar mixin$1 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    if (fn(x)) {\n\t      this._emitValue(x);\n\t    }\n\t  }\n\t};\n\n\tvar S$8 = createStream('filter', mixin$1);\n\tvar P$4 = createProperty('filter', mixin$1);\n\n\tvar id$1 = function (x) {\n\t  return x;\n\t};\n\n\tfunction filter(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? id$1 : arguments[1];\n\n\t  return new (obs._ofSameType(S$8, P$4))(obs, { fn: fn });\n\t}\n\n\tvar mixin$2 = {\n\t  _init: function (_ref) {\n\t    var n = _ref.n;\n\n\t    this._n = n;\n\t    if (n <= 0) {\n\t      this._emitEnd();\n\t    }\n\t  },\n\t  _handleValue: function (x) {\n\t    this._n--;\n\t    this._emitValue(x);\n\t    if (this._n === 0) {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t};\n\n\tvar S$9 = createStream('take', mixin$2);\n\tvar P$5 = createProperty('take', mixin$2);\n\n\tfunction take(obs, n) {\n\t  return new (obs._ofSameType(S$9, P$5))(obs, { n: n });\n\t}\n\n\tvar mixin$3 = {\n\t  _init: function (_ref) {\n\t    var n = _ref.n;\n\n\t    this._n = n;\n\t    if (n <= 0) {\n\t      this._emitEnd();\n\t    }\n\t  },\n\t  _handleError: function (x) {\n\t    this._n--;\n\t    this._emitError(x);\n\t    if (this._n === 0) {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t};\n\n\tvar S$10 = createStream('takeErrors', mixin$3);\n\tvar P$6 = createProperty('takeErrors', mixin$3);\n\n\tfunction takeErrors(obs, n) {\n\t  return new (obs._ofSameType(S$10, P$6))(obs, { n: n });\n\t}\n\n\tvar mixin$4 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    if (fn(x)) {\n\t      this._emitValue(x);\n\t    } else {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t};\n\n\tvar S$11 = createStream('takeWhile', mixin$4);\n\tvar P$7 = createProperty('takeWhile', mixin$4);\n\n\tvar id$2 = function (x) {\n\t  return x;\n\t};\n\n\tfunction takeWhile(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? id$2 : arguments[1];\n\n\t  return new (obs._ofSameType(S$11, P$7))(obs, { fn: fn });\n\t}\n\n\tvar mixin$5 = {\n\t  _init: function () {\n\t    this._lastValue = NOTHING;\n\t  },\n\t  _free: function () {\n\t    this._lastValue = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    this._lastValue = x;\n\t  },\n\t  _handleEnd: function () {\n\t    if (this._lastValue !== NOTHING) {\n\t      this._emitValue(this._lastValue);\n\t    }\n\t    this._emitEnd();\n\t  }\n\t};\n\n\tvar S$12 = createStream('last', mixin$5);\n\tvar P$8 = createProperty('last', mixin$5);\n\n\tfunction last(obs) {\n\t  return new (obs._ofSameType(S$12, P$8))(obs);\n\t}\n\n\tvar mixin$6 = {\n\t  _init: function (_ref) {\n\t    var n = _ref.n;\n\n\t    this._n = Math.max(0, n);\n\t  },\n\t  _handleValue: function (x) {\n\t    if (this._n === 0) {\n\t      this._emitValue(x);\n\t    } else {\n\t      this._n--;\n\t    }\n\t  }\n\t};\n\n\tvar S$13 = createStream('skip', mixin$6);\n\tvar P$9 = createProperty('skip', mixin$6);\n\n\tfunction skip(obs, n) {\n\t  return new (obs._ofSameType(S$13, P$9))(obs, { n: n });\n\t}\n\n\tvar mixin$7 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    if (this._fn !== null && !fn(x)) {\n\t      this._fn = null;\n\t    }\n\t    if (this._fn === null) {\n\t      this._emitValue(x);\n\t    }\n\t  }\n\t};\n\n\tvar S$14 = createStream('skipWhile', mixin$7);\n\tvar P$10 = createProperty('skipWhile', mixin$7);\n\n\tvar id$3 = function (x) {\n\t  return x;\n\t};\n\n\tfunction skipWhile(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? id$3 : arguments[1];\n\n\t  return new (obs._ofSameType(S$14, P$10))(obs, { fn: fn });\n\t}\n\n\tvar mixin$8 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t    this._prev = NOTHING;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t    this._prev = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    if (this._prev === NOTHING || !fn(this._prev, x)) {\n\t      this._prev = x;\n\t      this._emitValue(x);\n\t    }\n\t  }\n\t};\n\n\tvar S$15 = createStream('skipDuplicates', mixin$8);\n\tvar P$11 = createProperty('skipDuplicates', mixin$8);\n\n\tvar eq = function (a, b) {\n\t  return a === b;\n\t};\n\n\tfunction skipDuplicates(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? eq : arguments[1];\n\n\t  return new (obs._ofSameType(S$15, P$11))(obs, { fn: fn });\n\t}\n\n\tvar mixin$9 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\t    var seed = _ref.seed;\n\n\t    this._fn = fn;\n\t    this._prev = seed;\n\t  },\n\t  _free: function () {\n\t    this._prev = null;\n\t    this._fn = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    if (this._prev !== NOTHING) {\n\t      var fn = this._fn;\n\t      this._emitValue(fn(this._prev, x));\n\t    }\n\t    this._prev = x;\n\t  }\n\t};\n\n\tvar S$16 = createStream('diff', mixin$9);\n\tvar P$12 = createProperty('diff', mixin$9);\n\n\tfunction defaultFn(a, b) {\n\t  return [a, b];\n\t}\n\n\tfunction diff(obs, fn) {\n\t  var seed = arguments.length <= 2 || arguments[2] === undefined ? NOTHING : arguments[2];\n\n\t  return new (obs._ofSameType(S$16, P$12))(obs, { fn: fn || defaultFn, seed: seed });\n\t}\n\n\tvar P$13 = createProperty('scan', {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\t    var seed = _ref.seed;\n\n\t    this._fn = fn;\n\t    this._seed = seed;\n\t    if (seed !== NOTHING) {\n\t      this._emitValue(seed);\n\t    }\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t    this._seed = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    if (this._currentEvent === null || this._currentEvent.type === ERROR) {\n\t      this._emitValue(this._seed === NOTHING ? x : fn(this._seed, x));\n\t    } else {\n\t      this._emitValue(fn(this._currentEvent.value, x));\n\t    }\n\t  }\n\t});\n\n\tfunction scan(obs, fn) {\n\t  var seed = arguments.length <= 2 || arguments[2] === undefined ? NOTHING : arguments[2];\n\n\t  return new P$13(obs, { fn: fn, seed: seed });\n\t}\n\n\tvar mixin$10 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    var xs = fn(x);\n\t    for (var i = 0; i < xs.length; i++) {\n\t      this._emitValue(xs[i]);\n\t    }\n\t  }\n\t};\n\n\tvar S$17 = createStream('flatten', mixin$10);\n\n\tvar id$4 = function (x) {\n\t  return x;\n\t};\n\n\tfunction flatten(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? id$4 : arguments[1];\n\n\t  return new S$17(obs, { fn: fn });\n\t}\n\n\tvar END_MARKER = {};\n\n\tvar mixin$11 = {\n\t  _init: function (_ref) {\n\t    var _this = this;\n\n\t    var wait = _ref.wait;\n\n\t    this._wait = Math.max(0, wait);\n\t    this._buff = [];\n\t    this._$shiftBuff = function () {\n\t      var value = _this._buff.shift();\n\t      if (value === END_MARKER) {\n\t        _this._emitEnd();\n\t      } else {\n\t        _this._emitValue(value);\n\t      }\n\t    };\n\t  },\n\t  _free: function () {\n\t    this._buff = null;\n\t    this._$shiftBuff = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    if (this._activating) {\n\t      this._emitValue(x);\n\t    } else {\n\t      this._buff.push(x);\n\t      setTimeout(this._$shiftBuff, this._wait);\n\t    }\n\t  },\n\t  _handleEnd: function () {\n\t    if (this._activating) {\n\t      this._emitEnd();\n\t    } else {\n\t      this._buff.push(END_MARKER);\n\t      setTimeout(this._$shiftBuff, this._wait);\n\t    }\n\t  }\n\t};\n\n\tvar S$18 = createStream('delay', mixin$11);\n\tvar P$14 = createProperty('delay', mixin$11);\n\n\tfunction delay(obs, wait) {\n\t  return new (obs._ofSameType(S$18, P$14))(obs, { wait: wait });\n\t}\n\n\tvar now = Date.now ? function () {\n\t  return Date.now();\n\t} : function () {\n\t  return new Date().getTime();\n\t};\n\n\tvar mixin$12 = {\n\t  _init: function (_ref) {\n\t    var _this = this;\n\n\t    var wait = _ref.wait;\n\t    var leading = _ref.leading;\n\t    var trailing = _ref.trailing;\n\n\t    this._wait = Math.max(0, wait);\n\t    this._leading = leading;\n\t    this._trailing = trailing;\n\t    this._trailingValue = null;\n\t    this._timeoutId = null;\n\t    this._endLater = false;\n\t    this._lastCallTime = 0;\n\t    this._$trailingCall = function () {\n\t      return _this._trailingCall();\n\t    };\n\t  },\n\t  _free: function () {\n\t    this._trailingValue = null;\n\t    this._$trailingCall = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    if (this._activating) {\n\t      this._emitValue(x);\n\t    } else {\n\t      var curTime = now();\n\t      if (this._lastCallTime === 0 && !this._leading) {\n\t        this._lastCallTime = curTime;\n\t      }\n\t      var remaining = this._wait - (curTime - this._lastCallTime);\n\t      if (remaining <= 0) {\n\t        this._cancelTrailing();\n\t        this._lastCallTime = curTime;\n\t        this._emitValue(x);\n\t      } else if (this._trailing) {\n\t        this._cancelTrailing();\n\t        this._trailingValue = x;\n\t        this._timeoutId = setTimeout(this._$trailingCall, remaining);\n\t      }\n\t    }\n\t  },\n\t  _handleEnd: function () {\n\t    if (this._activating) {\n\t      this._emitEnd();\n\t    } else {\n\t      if (this._timeoutId) {\n\t        this._endLater = true;\n\t      } else {\n\t        this._emitEnd();\n\t      }\n\t    }\n\t  },\n\t  _cancelTrailing: function () {\n\t    if (this._timeoutId !== null) {\n\t      clearTimeout(this._timeoutId);\n\t      this._timeoutId = null;\n\t    }\n\t  },\n\t  _trailingCall: function () {\n\t    this._emitValue(this._trailingValue);\n\t    this._timeoutId = null;\n\t    this._trailingValue = null;\n\t    this._lastCallTime = !this._leading ? 0 : now();\n\t    if (this._endLater) {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t};\n\n\tvar S$19 = createStream('throttle', mixin$12);\n\tvar P$15 = createProperty('throttle', mixin$12);\n\n\tfunction throttle(obs, wait) {\n\t  var _ref2 = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n\t  var _ref2$leading = _ref2.leading;\n\t  var leading = _ref2$leading === undefined ? true : _ref2$leading;\n\t  var _ref2$trailing = _ref2.trailing;\n\t  var trailing = _ref2$trailing === undefined ? true : _ref2$trailing;\n\n\t  return new (obs._ofSameType(S$19, P$15))(obs, { wait: wait, leading: leading, trailing: trailing });\n\t}\n\n\tvar mixin$13 = {\n\t  _init: function (_ref) {\n\t    var _this = this;\n\n\t    var wait = _ref.wait;\n\t    var immediate = _ref.immediate;\n\n\t    this._wait = Math.max(0, wait);\n\t    this._immediate = immediate;\n\t    this._lastAttempt = 0;\n\t    this._timeoutId = null;\n\t    this._laterValue = null;\n\t    this._endLater = false;\n\t    this._$later = function () {\n\t      return _this._later();\n\t    };\n\t  },\n\t  _free: function () {\n\t    this._laterValue = null;\n\t    this._$later = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    if (this._activating) {\n\t      this._emitValue(x);\n\t    } else {\n\t      this._lastAttempt = now();\n\t      if (this._immediate && !this._timeoutId) {\n\t        this._emitValue(x);\n\t      }\n\t      if (!this._timeoutId) {\n\t        this._timeoutId = setTimeout(this._$later, this._wait);\n\t      }\n\t      if (!this._immediate) {\n\t        this._laterValue = x;\n\t      }\n\t    }\n\t  },\n\t  _handleEnd: function () {\n\t    if (this._activating) {\n\t      this._emitEnd();\n\t    } else {\n\t      if (this._timeoutId && !this._immediate) {\n\t        this._endLater = true;\n\t      } else {\n\t        this._emitEnd();\n\t      }\n\t    }\n\t  },\n\t  _later: function () {\n\t    var last = now() - this._lastAttempt;\n\t    if (last < this._wait && last >= 0) {\n\t      this._timeoutId = setTimeout(this._$later, this._wait - last);\n\t    } else {\n\t      this._timeoutId = null;\n\t      if (!this._immediate) {\n\t        this._emitValue(this._laterValue);\n\t        this._laterValue = null;\n\t      }\n\t      if (this._endLater) {\n\t        this._emitEnd();\n\t      }\n\t    }\n\t  }\n\t};\n\n\tvar S$20 = createStream('debounce', mixin$13);\n\tvar P$16 = createProperty('debounce', mixin$13);\n\n\tfunction debounce(obs, wait) {\n\t  var _ref2 = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n\t  var _ref2$immediate = _ref2.immediate;\n\t  var immediate = _ref2$immediate === undefined ? false : _ref2$immediate;\n\n\t  return new (obs._ofSameType(S$20, P$16))(obs, { wait: wait, immediate: immediate });\n\t}\n\n\tvar mixin$14 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleError: function (x) {\n\t    var fn = this._fn;\n\t    this._emitError(fn(x));\n\t  }\n\t};\n\n\tvar S$21 = createStream('mapErrors', mixin$14);\n\tvar P$17 = createProperty('mapErrors', mixin$14);\n\n\tvar id$5 = function (x) {\n\t  return x;\n\t};\n\n\tfunction mapErrors(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? id$5 : arguments[1];\n\n\t  return new (obs._ofSameType(S$21, P$17))(obs, { fn: fn });\n\t}\n\n\tvar mixin$15 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleError: function (x) {\n\t    var fn = this._fn;\n\t    if (fn(x)) {\n\t      this._emitError(x);\n\t    }\n\t  }\n\t};\n\n\tvar S$22 = createStream('filterErrors', mixin$15);\n\tvar P$18 = createProperty('filterErrors', mixin$15);\n\n\tvar id$6 = function (x) {\n\t  return x;\n\t};\n\n\tfunction filterErrors(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? id$6 : arguments[1];\n\n\t  return new (obs._ofSameType(S$22, P$18))(obs, { fn: fn });\n\t}\n\n\tvar mixin$16 = {\n\t  _handleValue: function () {}\n\t};\n\n\tvar S$23 = createStream('ignoreValues', mixin$16);\n\tvar P$19 = createProperty('ignoreValues', mixin$16);\n\n\tfunction ignoreValues(obs) {\n\t  return new (obs._ofSameType(S$23, P$19))(obs);\n\t}\n\n\tvar mixin$17 = {\n\t  _handleError: function () {}\n\t};\n\n\tvar S$24 = createStream('ignoreErrors', mixin$17);\n\tvar P$20 = createProperty('ignoreErrors', mixin$17);\n\n\tfunction ignoreErrors(obs) {\n\t  return new (obs._ofSameType(S$24, P$20))(obs);\n\t}\n\n\tvar mixin$18 = {\n\t  _handleEnd: function () {}\n\t};\n\n\tvar S$25 = createStream('ignoreEnd', mixin$18);\n\tvar P$21 = createProperty('ignoreEnd', mixin$18);\n\n\tfunction ignoreEnd(obs) {\n\t  return new (obs._ofSameType(S$25, P$21))(obs);\n\t}\n\n\tvar mixin$19 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleEnd: function () {\n\t    var fn = this._fn;\n\t    this._emitValue(fn());\n\t    this._emitEnd();\n\t  }\n\t};\n\n\tvar S$26 = createStream('beforeEnd', mixin$19);\n\tvar P$22 = createProperty('beforeEnd', mixin$19);\n\n\tfunction beforeEnd(obs, fn) {\n\t  return new (obs._ofSameType(S$26, P$22))(obs, { fn: fn });\n\t}\n\n\tvar mixin$20 = {\n\t  _init: function (_ref) {\n\t    var min = _ref.min;\n\t    var max = _ref.max;\n\n\t    this._max = max;\n\t    this._min = min;\n\t    this._buff = [];\n\t  },\n\t  _free: function () {\n\t    this._buff = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    this._buff = slide(this._buff, x, this._max);\n\t    if (this._buff.length >= this._min) {\n\t      this._emitValue(this._buff);\n\t    }\n\t  }\n\t};\n\n\tvar S$27 = createStream('slidingWindow', mixin$20);\n\tvar P$23 = createProperty('slidingWindow', mixin$20);\n\n\tfunction slidingWindow(obs, max) {\n\t  var min = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];\n\n\t  return new (obs._ofSameType(S$27, P$23))(obs, { min: min, max: max });\n\t}\n\n\tvar mixin$21 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\t    var flushOnEnd = _ref.flushOnEnd;\n\n\t    this._fn = fn;\n\t    this._flushOnEnd = flushOnEnd;\n\t    this._buff = [];\n\t  },\n\t  _free: function () {\n\t    this._buff = null;\n\t  },\n\t  _flush: function () {\n\t    if (this._buff !== null && this._buff.length !== 0) {\n\t      this._emitValue(this._buff);\n\t      this._buff = [];\n\t    }\n\t  },\n\t  _handleValue: function (x) {\n\t    this._buff.push(x);\n\t    var fn = this._fn;\n\t    if (!fn(x)) {\n\t      this._flush();\n\t    }\n\t  },\n\t  _handleEnd: function () {\n\t    if (this._flushOnEnd) {\n\t      this._flush();\n\t    }\n\t    this._emitEnd();\n\t  }\n\t};\n\n\tvar S$28 = createStream('bufferWhile', mixin$21);\n\tvar P$24 = createProperty('bufferWhile', mixin$21);\n\n\tvar id$7 = function (x) {\n\t  return x;\n\t};\n\n\tfunction bufferWhile(obs, fn) {\n\t  var _ref2 = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n\t  var _ref2$flushOnEnd = _ref2.flushOnEnd;\n\t  var flushOnEnd = _ref2$flushOnEnd === undefined ? true : _ref2$flushOnEnd;\n\n\t  return new (obs._ofSameType(S$28, P$24))(obs, { fn: fn || id$7, flushOnEnd: flushOnEnd });\n\t}\n\n\tvar mixin$22 = {\n\t  _init: function (_ref) {\n\t    var count = _ref.count;\n\t    var flushOnEnd = _ref.flushOnEnd;\n\n\t    this._count = count;\n\t    this._flushOnEnd = flushOnEnd;\n\t    this._buff = [];\n\t  },\n\t  _free: function () {\n\t    this._buff = null;\n\t  },\n\t  _flush: function () {\n\t    if (this._buff !== null && this._buff.length !== 0) {\n\t      this._emitValue(this._buff);\n\t      this._buff = [];\n\t    }\n\t  },\n\t  _handleValue: function (x) {\n\t    this._buff.push(x);\n\t    if (this._buff.length >= this._count) {\n\t      this._flush();\n\t    }\n\t  },\n\t  _handleEnd: function () {\n\t    if (this._flushOnEnd) {\n\t      this._flush();\n\t    }\n\t    this._emitEnd();\n\t  }\n\t};\n\n\tvar S$29 = createStream('bufferWithCount', mixin$22);\n\tvar P$25 = createProperty('bufferWithCount', mixin$22);\n\n\tfunction bufferWhile$1(obs, count) {\n\t  var _ref2 = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n\t  var _ref2$flushOnEnd = _ref2.flushOnEnd;\n\t  var flushOnEnd = _ref2$flushOnEnd === undefined ? true : _ref2$flushOnEnd;\n\n\t  return new (obs._ofSameType(S$29, P$25))(obs, { count: count, flushOnEnd: flushOnEnd });\n\t}\n\n\tvar mixin$23 = {\n\t  _init: function (_ref) {\n\t    var _this = this;\n\n\t    var wait = _ref.wait;\n\t    var count = _ref.count;\n\t    var flushOnEnd = _ref.flushOnEnd;\n\n\t    this._wait = wait;\n\t    this._count = count;\n\t    this._flushOnEnd = flushOnEnd;\n\t    this._intervalId = null;\n\t    this._$onTick = function () {\n\t      return _this._flush();\n\t    };\n\t    this._buff = [];\n\t  },\n\t  _free: function () {\n\t    this._$onTick = null;\n\t    this._buff = null;\n\t  },\n\t  _flush: function () {\n\t    if (this._buff !== null) {\n\t      this._emitValue(this._buff);\n\t      this._buff = [];\n\t    }\n\t  },\n\t  _handleValue: function (x) {\n\t    this._buff.push(x);\n\t    if (this._buff.length >= this._count) {\n\t      clearInterval(this._intervalId);\n\t      this._flush();\n\t      this._intervalId = setInterval(this._$onTick, this._wait);\n\t    }\n\t  },\n\t  _handleEnd: function () {\n\t    if (this._flushOnEnd && this._buff.length !== 0) {\n\t      this._flush();\n\t    }\n\t    this._emitEnd();\n\t  },\n\t  _onActivation: function () {\n\t    this._intervalId = setInterval(this._$onTick, this._wait);\n\t    this._source.onAny(this._$handleAny); // copied from patterns/one-source\n\t  },\n\t  _onDeactivation: function () {\n\t    if (this._intervalId !== null) {\n\t      clearInterval(this._intervalId);\n\t      this._intervalId = null;\n\t    }\n\t    this._source.offAny(this._$handleAny); // copied from patterns/one-source\n\t  }\n\t};\n\n\tvar S$30 = createStream('bufferWithTimeOrCount', mixin$23);\n\tvar P$26 = createProperty('bufferWithTimeOrCount', mixin$23);\n\n\tfunction bufferWithTimeOrCount(obs, wait, count) {\n\t  var _ref2 = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];\n\n\t  var _ref2$flushOnEnd = _ref2.flushOnEnd;\n\t  var flushOnEnd = _ref2$flushOnEnd === undefined ? true : _ref2$flushOnEnd;\n\n\t  return new (obs._ofSameType(S$30, P$26))(obs, { wait: wait, count: count, flushOnEnd: flushOnEnd });\n\t}\n\n\tfunction xformForObs(obs) {\n\t  return {\n\t    '@@transducer/step': function (res, input) {\n\t      obs._emitValue(input);\n\t      return null;\n\t    },\n\t    '@@transducer/result': function () {\n\t      obs._emitEnd();\n\t      return null;\n\t    }\n\t  };\n\t}\n\n\tvar mixin$24 = {\n\t  _init: function (_ref) {\n\t    var transducer = _ref.transducer;\n\n\t    this._xform = transducer(xformForObs(this));\n\t  },\n\t  _free: function () {\n\t    this._xform = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    if (this._xform['@@transducer/step'](null, x) !== null) {\n\t      this._xform['@@transducer/result'](null);\n\t    }\n\t  },\n\t  _handleEnd: function () {\n\t    this._xform['@@transducer/result'](null);\n\t  }\n\t};\n\n\tvar S$31 = createStream('transduce', mixin$24);\n\tvar P$27 = createProperty('transduce', mixin$24);\n\n\tfunction transduce(obs, transducer) {\n\t  return new (obs._ofSameType(S$31, P$27))(obs, { transducer: transducer });\n\t}\n\n\tvar mixin$25 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._handler = fn;\n\t    this._emitter = emitter(this);\n\t  },\n\t  _free: function () {\n\t    this._handler = null;\n\t    this._emitter = null;\n\t  },\n\t  _handleAny: function (event) {\n\t    this._handler(this._emitter, event);\n\t  }\n\t};\n\n\tvar S$32 = createStream('withHandler', mixin$25);\n\tvar P$28 = createProperty('withHandler', mixin$25);\n\n\tfunction withHandler(obs, fn) {\n\t  return new (obs._ofSameType(S$32, P$28))(obs, { fn: fn });\n\t}\n\n\tvar isArray = Array.isArray || function (xs) {\n\t  return Object.prototype.toString.call(xs) === '[object Array]';\n\t};\n\n\tfunction Zip(sources, combinator) {\n\t  var _this = this;\n\n\t  Stream.call(this);\n\n\t  this._buffers = map(sources, function (source) {\n\t    return isArray(source) ? cloneArray(source) : [];\n\t  });\n\t  this._sources = map(sources, function (source) {\n\t    return isArray(source) ? never() : source;\n\t  });\n\n\t  this._combinator = combinator ? spread(combinator, this._sources.length) : function (x) {\n\t    return x;\n\t  };\n\t  this._aliveCount = 0;\n\n\t  this._$handlers = [];\n\n\t  var _loop = function (i) {\n\t    _this._$handlers.push(function (event) {\n\t      return _this._handleAny(i, event);\n\t    });\n\t  };\n\n\t  for (var i = 0; i < this._sources.length; i++) {\n\t    _loop(i);\n\t  }\n\t}\n\n\tinherit(Zip, Stream, {\n\n\t  _name: 'zip',\n\n\t  _onActivation: function () {\n\n\t    // if all sources are arrays\n\t    while (this._isFull()) {\n\t      this._emit();\n\t    }\n\n\t    var length = this._sources.length;\n\t    this._aliveCount = length;\n\t    for (var i = 0; i < length && this._active; i++) {\n\t      this._sources[i].onAny(this._$handlers[i]);\n\t    }\n\t  },\n\t  _onDeactivation: function () {\n\t    for (var i = 0; i < this._sources.length; i++) {\n\t      this._sources[i].offAny(this._$handlers[i]);\n\t    }\n\t  },\n\t  _emit: function () {\n\t    var values = new Array(this._buffers.length);\n\t    for (var i = 0; i < this._buffers.length; i++) {\n\t      values[i] = this._buffers[i].shift();\n\t    }\n\t    var combinator = this._combinator;\n\t    this._emitValue(combinator(values));\n\t  },\n\t  _isFull: function () {\n\t    for (var i = 0; i < this._buffers.length; i++) {\n\t      if (this._buffers[i].length === 0) {\n\t        return false;\n\t      }\n\t    }\n\t    return true;\n\t  },\n\t  _handleAny: function (i, event) {\n\t    if (event.type === VALUE) {\n\t      this._buffers[i].push(event.value);\n\t      if (this._isFull()) {\n\t        this._emit();\n\t      }\n\t    }\n\t    if (event.type === ERROR) {\n\t      this._emitError(event.value);\n\t    }\n\t    if (event.type === END) {\n\t      this._aliveCount--;\n\t      if (this._aliveCount === 0) {\n\t        this._emitEnd();\n\t      }\n\t    }\n\t  },\n\t  _clear: function () {\n\t    Stream.prototype._clear.call(this);\n\t    this._sources = null;\n\t    this._buffers = null;\n\t    this._combinator = null;\n\t    this._$handlers = null;\n\t  }\n\t});\n\n\tfunction zip(observables, combinator /* Function | falsey */) {\n\t  return observables.length === 0 ? never() : new Zip(observables, combinator);\n\t}\n\n\tvar id$8 = function (x) {\n\t  return x;\n\t};\n\n\tfunction AbstractPool() {\n\t  var _this = this;\n\n\t  var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n\t  var _ref$queueLim = _ref.queueLim;\n\t  var queueLim = _ref$queueLim === undefined ? 0 : _ref$queueLim;\n\t  var _ref$concurLim = _ref.concurLim;\n\t  var concurLim = _ref$concurLim === undefined ? -1 : _ref$concurLim;\n\t  var _ref$drop = _ref.drop;\n\t  var drop = _ref$drop === undefined ? 'new' : _ref$drop;\n\n\t  Stream.call(this);\n\n\t  this._queueLim = queueLim < 0 ? -1 : queueLim;\n\t  this._concurLim = concurLim < 0 ? -1 : concurLim;\n\t  this._drop = drop;\n\t  this._queue = [];\n\t  this._curSources = [];\n\t  this._$handleSubAny = function (event) {\n\t    return _this._handleSubAny(event);\n\t  };\n\t  this._$endHandlers = [];\n\t  this._currentlyAdding = null;\n\n\t  if (this._concurLim === 0) {\n\t    this._emitEnd();\n\t  }\n\t}\n\n\tinherit(AbstractPool, Stream, {\n\n\t  _name: 'abstractPool',\n\n\t  _add: function (obj, toObs /* Function | falsey */) {\n\t    toObs = toObs || id$8;\n\t    if (this._concurLim === -1 || this._curSources.length < this._concurLim) {\n\t      this._addToCur(toObs(obj));\n\t    } else {\n\t      if (this._queueLim === -1 || this._queue.length < this._queueLim) {\n\t        this._addToQueue(toObs(obj));\n\t      } else if (this._drop === 'old') {\n\t        this._removeOldest();\n\t        this._add(obj, toObs);\n\t      }\n\t    }\n\t  },\n\t  _addAll: function (obss) {\n\t    var _this2 = this;\n\n\t    forEach(obss, function (obs) {\n\t      return _this2._add(obs);\n\t    });\n\t  },\n\t  _remove: function (obs) {\n\t    if (this._removeCur(obs) === -1) {\n\t      this._removeQueue(obs);\n\t    }\n\t  },\n\t  _addToQueue: function (obs) {\n\t    this._queue = concat(this._queue, [obs]);\n\t  },\n\t  _addToCur: function (obs) {\n\t    if (this._active) {\n\n\t      // HACK:\n\t      //\n\t      // We have two optimizations for cases when `obs` is ended. We don't want\n\t      // to add such observable to the list, but only want to emit events\n\t      // from it (if it has some).\n\t      //\n\t      // Instead of this hacks, we could just did following,\n\t      // but it would be 5-8 times slower:\n\t      //\n\t      //     this._curSources = concat(this._curSources, [obs]);\n\t      //     this._subscribe(obs);\n\t      //\n\n\t      // #1\n\t      // This one for cases when `obs` already ended\n\t      // e.g., Kefir.constant() or Kefir.never()\n\t      if (!obs._alive) {\n\t        if (obs._currentEvent) {\n\t          this._emit(obs._currentEvent.type, obs._currentEvent.value);\n\t        }\n\t        return;\n\t      }\n\n\t      // #2\n\t      // This one is for cases when `obs` going to end synchronously on\n\t      // first subscriber e.g., Kefir.stream(em => {em.emit(1); em.end()})\n\t      this._currentlyAdding = obs;\n\t      obs.onAny(this._$handleSubAny);\n\t      this._currentlyAdding = null;\n\t      if (obs._alive) {\n\t        this._curSources = concat(this._curSources, [obs]);\n\t        if (this._active) {\n\t          this._subToEnd(obs);\n\t        }\n\t      }\n\t    } else {\n\t      this._curSources = concat(this._curSources, [obs]);\n\t    }\n\t  },\n\t  _subToEnd: function (obs) {\n\t    var _this3 = this;\n\n\t    var onEnd = function () {\n\t      return _this3._removeCur(obs);\n\t    };\n\t    this._$endHandlers.push({ obs: obs, handler: onEnd });\n\t    obs.onEnd(onEnd);\n\t  },\n\t  _subscribe: function (obs) {\n\t    obs.onAny(this._$handleSubAny);\n\n\t    // it can become inactive in responce of subscribing to `obs.onAny` above\n\t    if (this._active) {\n\t      this._subToEnd(obs);\n\t    }\n\t  },\n\t  _unsubscribe: function (obs) {\n\t    obs.offAny(this._$handleSubAny);\n\n\t    var onEndI = findByPred(this._$endHandlers, function (obj) {\n\t      return obj.obs === obs;\n\t    });\n\t    if (onEndI !== -1) {\n\t      obs.offEnd(this._$endHandlers[onEndI].handler);\n\t      this._$endHandlers.splice(onEndI, 1);\n\t    }\n\t  },\n\t  _handleSubAny: function (event) {\n\t    if (event.type === VALUE) {\n\t      this._emitValue(event.value);\n\t    } else if (event.type === ERROR) {\n\t      this._emitError(event.value);\n\t    }\n\t  },\n\t  _removeQueue: function (obs) {\n\t    var index = find(this._queue, obs);\n\t    this._queue = remove(this._queue, index);\n\t    return index;\n\t  },\n\t  _removeCur: function (obs) {\n\t    if (this._active) {\n\t      this._unsubscribe(obs);\n\t    }\n\t    var index = find(this._curSources, obs);\n\t    this._curSources = remove(this._curSources, index);\n\t    if (index !== -1) {\n\t      if (this._queue.length !== 0) {\n\t        this._pullQueue();\n\t      } else if (this._curSources.length === 0) {\n\t        this._onEmpty();\n\t      }\n\t    }\n\t    return index;\n\t  },\n\t  _removeOldest: function () {\n\t    this._removeCur(this._curSources[0]);\n\t  },\n\t  _pullQueue: function () {\n\t    if (this._queue.length !== 0) {\n\t      this._queue = cloneArray(this._queue);\n\t      this._addToCur(this._queue.shift());\n\t    }\n\t  },\n\t  _onActivation: function () {\n\t    for (var i = 0, sources = this._curSources; i < sources.length && this._active; i++) {\n\t      this._subscribe(sources[i]);\n\t    }\n\t  },\n\t  _onDeactivation: function () {\n\t    for (var i = 0, sources = this._curSources; i < sources.length; i++) {\n\t      this._unsubscribe(sources[i]);\n\t    }\n\t    if (this._currentlyAdding !== null) {\n\t      this._unsubscribe(this._currentlyAdding);\n\t    }\n\t  },\n\t  _isEmpty: function () {\n\t    return this._curSources.length === 0;\n\t  },\n\t  _onEmpty: function () {},\n\t  _clear: function () {\n\t    Stream.prototype._clear.call(this);\n\t    this._queue = null;\n\t    this._curSources = null;\n\t    this._$handleSubAny = null;\n\t    this._$endHandlers = null;\n\t  }\n\t});\n\n\tfunction Merge(sources) {\n\t  AbstractPool.call(this);\n\t  this._addAll(sources);\n\t  this._initialised = true;\n\t}\n\n\tinherit(Merge, AbstractPool, {\n\n\t  _name: 'merge',\n\n\t  _onEmpty: function () {\n\t    if (this._initialised) {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t});\n\n\tfunction merge(observables) {\n\t  return observables.length === 0 ? never() : new Merge(observables);\n\t}\n\n\tfunction S$33(generator) {\n\t  var _this = this;\n\n\t  Stream.call(this);\n\t  this._generator = generator;\n\t  this._source = null;\n\t  this._inLoop = false;\n\t  this._iteration = 0;\n\t  this._$handleAny = function (event) {\n\t    return _this._handleAny(event);\n\t  };\n\t}\n\n\tinherit(S$33, Stream, {\n\n\t  _name: 'repeat',\n\n\t  _handleAny: function (event) {\n\t    if (event.type === END) {\n\t      this._source = null;\n\t      this._getSource();\n\t    } else {\n\t      this._emit(event.type, event.value);\n\t    }\n\t  },\n\t  _getSource: function () {\n\t    if (!this._inLoop) {\n\t      this._inLoop = true;\n\t      var generator = this._generator;\n\t      while (this._source === null && this._alive && this._active) {\n\t        this._source = generator(this._iteration++);\n\t        if (this._source) {\n\t          this._source.onAny(this._$handleAny);\n\t        } else {\n\t          this._emitEnd();\n\t        }\n\t      }\n\t      this._inLoop = false;\n\t    }\n\t  },\n\t  _onActivation: function () {\n\t    if (this._source) {\n\t      this._source.onAny(this._$handleAny);\n\t    } else {\n\t      this._getSource();\n\t    }\n\t  },\n\t  _onDeactivation: function () {\n\t    if (this._source) {\n\t      this._source.offAny(this._$handleAny);\n\t    }\n\t  },\n\t  _clear: function () {\n\t    Stream.prototype._clear.call(this);\n\t    this._generator = null;\n\t    this._source = null;\n\t    this._$handleAny = null;\n\t  }\n\t});\n\n\tfunction repeat (generator) {\n\t  return new S$33(generator);\n\t}\n\n\tfunction concat$1(observables) {\n\t  return repeat(function (index) {\n\t    return observables.length > index ? observables[index] : false;\n\t  }).setName('concat');\n\t}\n\n\tfunction Pool() {\n\t  AbstractPool.call(this);\n\t}\n\n\tinherit(Pool, AbstractPool, {\n\n\t  _name: 'pool',\n\n\t  plug: function (obs) {\n\t    this._add(obs);\n\t    return this;\n\t  },\n\t  unplug: function (obs) {\n\t    this._remove(obs);\n\t    return this;\n\t  }\n\t});\n\n\tfunction FlatMap(source, fn, options) {\n\t  var _this = this;\n\n\t  AbstractPool.call(this, options);\n\t  this._source = source;\n\t  this._fn = fn;\n\t  this._mainEnded = false;\n\t  this._lastCurrent = null;\n\t  this._$handleMain = function (event) {\n\t    return _this._handleMain(event);\n\t  };\n\t}\n\n\tinherit(FlatMap, AbstractPool, {\n\t  _onActivation: function () {\n\t    AbstractPool.prototype._onActivation.call(this);\n\t    if (this._active) {\n\t      this._source.onAny(this._$handleMain);\n\t    }\n\t  },\n\t  _onDeactivation: function () {\n\t    AbstractPool.prototype._onDeactivation.call(this);\n\t    this._source.offAny(this._$handleMain);\n\t    this._hadNoEvSinceDeact = true;\n\t  },\n\t  _handleMain: function (event) {\n\n\t    if (event.type === VALUE) {\n\t      // Is latest value before deactivation survived, and now is 'current' on this activation?\n\t      // We don't want to handle such values, to prevent to constantly add\n\t      // same observale on each activation/deactivation when our main source\n\t      // is a `Kefir.conatant()` for example.\n\t      var sameCurr = this._activating && this._hadNoEvSinceDeact && this._lastCurrent === event.value;\n\t      if (!sameCurr) {\n\t        this._add(event.value, this._fn);\n\t      }\n\t      this._lastCurrent = event.value;\n\t      this._hadNoEvSinceDeact = false;\n\t    }\n\n\t    if (event.type === ERROR) {\n\t      this._emitError(event.value);\n\t    }\n\n\t    if (event.type === END) {\n\t      if (this._isEmpty()) {\n\t        this._emitEnd();\n\t      } else {\n\t        this._mainEnded = true;\n\t      }\n\t    }\n\t  },\n\t  _onEmpty: function () {\n\t    if (this._mainEnded) {\n\t      this._emitEnd();\n\t    }\n\t  },\n\t  _clear: function () {\n\t    AbstractPool.prototype._clear.call(this);\n\t    this._source = null;\n\t    this._lastCurrent = null;\n\t    this._$handleMain = null;\n\t  }\n\t});\n\n\tfunction FlatMapErrors(source, fn) {\n\t  FlatMap.call(this, source, fn);\n\t}\n\n\tinherit(FlatMapErrors, FlatMap, {\n\n\t  // Same as in FlatMap, only VALUE/ERROR flipped\n\t  _handleMain: function (event) {\n\n\t    if (event.type === ERROR) {\n\t      var sameCurr = this._activating && this._hadNoEvSinceDeact && this._lastCurrent === event.value;\n\t      if (!sameCurr) {\n\t        this._add(event.value, this._fn);\n\t      }\n\t      this._lastCurrent = event.value;\n\t      this._hadNoEvSinceDeact = false;\n\t    }\n\n\t    if (event.type === VALUE) {\n\t      this._emitValue(event.value);\n\t    }\n\n\t    if (event.type === END) {\n\t      if (this._isEmpty()) {\n\t        this._emitEnd();\n\t      } else {\n\t        this._mainEnded = true;\n\t      }\n\t    }\n\t  }\n\t});\n\n\tfunction createConstructor$1(BaseClass, name) {\n\t  return function AnonymousObservable(primary, secondary, options) {\n\t    var _this = this;\n\n\t    BaseClass.call(this);\n\t    this._primary = primary;\n\t    this._secondary = secondary;\n\t    this._name = primary._name + '.' + name;\n\t    this._lastSecondary = NOTHING;\n\t    this._$handleSecondaryAny = function (event) {\n\t      return _this._handleSecondaryAny(event);\n\t    };\n\t    this._$handlePrimaryAny = function (event) {\n\t      return _this._handlePrimaryAny(event);\n\t    };\n\t    this._init(options);\n\t  };\n\t}\n\n\tfunction createClassMethods$1(BaseClass) {\n\t  return {\n\t    _init: function () {},\n\t    _free: function () {},\n\t    _handlePrimaryValue: function (x) {\n\t      this._emitValue(x);\n\t    },\n\t    _handlePrimaryError: function (x) {\n\t      this._emitError(x);\n\t    },\n\t    _handlePrimaryEnd: function () {\n\t      this._emitEnd();\n\t    },\n\t    _handleSecondaryValue: function (x) {\n\t      this._lastSecondary = x;\n\t    },\n\t    _handleSecondaryError: function (x) {\n\t      this._emitError(x);\n\t    },\n\t    _handleSecondaryEnd: function () {},\n\t    _handlePrimaryAny: function (event) {\n\t      switch (event.type) {\n\t        case VALUE:\n\t          return this._handlePrimaryValue(event.value);\n\t        case ERROR:\n\t          return this._handlePrimaryError(event.value);\n\t        case END:\n\t          return this._handlePrimaryEnd(event.value);\n\t      }\n\t    },\n\t    _handleSecondaryAny: function (event) {\n\t      switch (event.type) {\n\t        case VALUE:\n\t          return this._handleSecondaryValue(event.value);\n\t        case ERROR:\n\t          return this._handleSecondaryError(event.value);\n\t        case END:\n\t          this._handleSecondaryEnd(event.value);\n\t          this._removeSecondary();\n\t      }\n\t    },\n\t    _removeSecondary: function () {\n\t      if (this._secondary !== null) {\n\t        this._secondary.offAny(this._$handleSecondaryAny);\n\t        this._$handleSecondaryAny = null;\n\t        this._secondary = null;\n\t      }\n\t    },\n\t    _onActivation: function () {\n\t      if (this._secondary !== null) {\n\t        this._secondary.onAny(this._$handleSecondaryAny);\n\t      }\n\t      if (this._active) {\n\t        this._primary.onAny(this._$handlePrimaryAny);\n\t      }\n\t    },\n\t    _onDeactivation: function () {\n\t      if (this._secondary !== null) {\n\t        this._secondary.offAny(this._$handleSecondaryAny);\n\t      }\n\t      this._primary.offAny(this._$handlePrimaryAny);\n\t    },\n\t    _clear: function () {\n\t      BaseClass.prototype._clear.call(this);\n\t      this._primary = null;\n\t      this._secondary = null;\n\t      this._lastSecondary = null;\n\t      this._$handleSecondaryAny = null;\n\t      this._$handlePrimaryAny = null;\n\t      this._free();\n\t    }\n\t  };\n\t}\n\n\tfunction createStream$1(name, mixin) {\n\t  var S = createConstructor$1(Stream, name);\n\t  inherit(S, Stream, createClassMethods$1(Stream), mixin);\n\t  return S;\n\t}\n\n\tfunction createProperty$1(name, mixin) {\n\t  var P = createConstructor$1(Property, name);\n\t  inherit(P, Property, createClassMethods$1(Property), mixin);\n\t  return P;\n\t}\n\n\tvar mixin$26 = {\n\t  _handlePrimaryValue: function (x) {\n\t    if (this._lastSecondary !== NOTHING && this._lastSecondary) {\n\t      this._emitValue(x);\n\t    }\n\t  },\n\t  _handleSecondaryEnd: function () {\n\t    if (this._lastSecondary === NOTHING || !this._lastSecondary) {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t};\n\n\tvar S$34 = createStream$1('filterBy', mixin$26);\n\tvar P$29 = createProperty$1('filterBy', mixin$26);\n\n\tfunction filterBy(primary, secondary) {\n\t  return new (primary._ofSameType(S$34, P$29))(primary, secondary);\n\t}\n\n\tvar id2 = function (_, x) {\n\t  return x;\n\t};\n\n\tfunction sampledBy(passive, active, combinator) {\n\t  var _combinator = combinator ? function (a, b) {\n\t    return combinator(b, a);\n\t  } : id2;\n\t  return combine([active], [passive], _combinator).setName(passive, 'sampledBy');\n\t}\n\n\tvar mixin$27 = {\n\t  _handlePrimaryValue: function (x) {\n\t    if (this._lastSecondary !== NOTHING) {\n\t      this._emitValue(x);\n\t    }\n\t  },\n\t  _handleSecondaryEnd: function () {\n\t    if (this._lastSecondary === NOTHING) {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t};\n\n\tvar S$35 = createStream$1('skipUntilBy', mixin$27);\n\tvar P$30 = createProperty$1('skipUntilBy', mixin$27);\n\n\tfunction skipUntilBy(primary, secondary) {\n\t  return new (primary._ofSameType(S$35, P$30))(primary, secondary);\n\t}\n\n\tvar mixin$28 = {\n\t  _handleSecondaryValue: function () {\n\t    this._emitEnd();\n\t  }\n\t};\n\n\tvar S$36 = createStream$1('takeUntilBy', mixin$28);\n\tvar P$31 = createProperty$1('takeUntilBy', mixin$28);\n\n\tfunction takeUntilBy(primary, secondary) {\n\t  return new (primary._ofSameType(S$36, P$31))(primary, secondary);\n\t}\n\n\tvar mixin$29 = {\n\t  _init: function () {\n\t    var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n\t    var _ref$flushOnEnd = _ref.flushOnEnd;\n\t    var flushOnEnd = _ref$flushOnEnd === undefined ? true : _ref$flushOnEnd;\n\n\t    this._buff = [];\n\t    this._flushOnEnd = flushOnEnd;\n\t  },\n\t  _free: function () {\n\t    this._buff = null;\n\t  },\n\t  _flush: function () {\n\t    if (this._buff !== null) {\n\t      this._emitValue(this._buff);\n\t      this._buff = [];\n\t    }\n\t  },\n\t  _handlePrimaryEnd: function () {\n\t    if (this._flushOnEnd) {\n\t      this._flush();\n\t    }\n\t    this._emitEnd();\n\t  },\n\t  _onActivation: function () {\n\t    this._primary.onAny(this._$handlePrimaryAny);\n\t    if (this._alive && this._secondary !== null) {\n\t      this._secondary.onAny(this._$handleSecondaryAny);\n\t    }\n\t  },\n\t  _handlePrimaryValue: function (x) {\n\t    this._buff.push(x);\n\t  },\n\t  _handleSecondaryValue: function () {\n\t    this._flush();\n\t  },\n\t  _handleSecondaryEnd: function () {\n\t    if (!this._flushOnEnd) {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t};\n\n\tvar S$37 = createStream$1('bufferBy', mixin$29);\n\tvar P$32 = createProperty$1('bufferBy', mixin$29);\n\n\tfunction bufferBy(primary, secondary, options /* optional */) {\n\t  return new (primary._ofSameType(S$37, P$32))(primary, secondary, options);\n\t}\n\n\tvar mixin$30 = {\n\t  _init: function () {\n\t    var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n\t    var _ref$flushOnEnd = _ref.flushOnEnd;\n\t    var flushOnEnd = _ref$flushOnEnd === undefined ? true : _ref$flushOnEnd;\n\t    var _ref$flushOnChange = _ref.flushOnChange;\n\t    var flushOnChange = _ref$flushOnChange === undefined ? false : _ref$flushOnChange;\n\n\t    this._buff = [];\n\t    this._flushOnEnd = flushOnEnd;\n\t    this._flushOnChange = flushOnChange;\n\t  },\n\t  _free: function () {\n\t    this._buff = null;\n\t  },\n\t  _flush: function () {\n\t    if (this._buff !== null) {\n\t      this._emitValue(this._buff);\n\t      this._buff = [];\n\t    }\n\t  },\n\t  _handlePrimaryEnd: function () {\n\t    if (this._flushOnEnd) {\n\t      this._flush();\n\t    }\n\t    this._emitEnd();\n\t  },\n\t  _handlePrimaryValue: function (x) {\n\t    this._buff.push(x);\n\t    if (this._lastSecondary !== NOTHING && !this._lastSecondary) {\n\t      this._flush();\n\t    }\n\t  },\n\t  _handleSecondaryEnd: function () {\n\t    if (!this._flushOnEnd && (this._lastSecondary === NOTHING || this._lastSecondary)) {\n\t      this._emitEnd();\n\t    }\n\t  },\n\t  _handleSecondaryValue: function (x) {\n\t    if (this._flushOnChange && !x) {\n\t      this._flush();\n\t    }\n\n\t    // from default _handleSecondaryValue\n\t    this._lastSecondary = x;\n\t  }\n\t};\n\n\tvar S$38 = createStream$1('bufferWhileBy', mixin$30);\n\tvar P$33 = createProperty$1('bufferWhileBy', mixin$30);\n\n\tfunction bufferWhileBy(primary, secondary, options /* optional */) {\n\t  return new (primary._ofSameType(S$38, P$33))(primary, secondary, options);\n\t}\n\n\tvar f = function () {\n\t  return false;\n\t};\n\tvar t = function () {\n\t  return true;\n\t};\n\n\tfunction awaiting(a, b) {\n\t  var result = merge([map$1(a, t), map$1(b, f)]);\n\t  result = skipDuplicates(result);\n\t  result = toProperty(result, f);\n\t  return result.setName(a, 'awaiting');\n\t}\n\n\tvar mixin$31 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    var result = fn(x);\n\t    if (result.convert) {\n\t      this._emitError(result.error);\n\t    } else {\n\t      this._emitValue(x);\n\t    }\n\t  }\n\t};\n\n\tvar S$39 = createStream('valuesToErrors', mixin$31);\n\tvar P$34 = createProperty('valuesToErrors', mixin$31);\n\n\tvar defFn = function (x) {\n\t  return { convert: true, error: x };\n\t};\n\n\tfunction valuesToErrors(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? defFn : arguments[1];\n\n\t  return new (obs._ofSameType(S$39, P$34))(obs, { fn: fn });\n\t}\n\n\tvar mixin$32 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleError: function (x) {\n\t    var fn = this._fn;\n\t    var result = fn(x);\n\t    if (result.convert) {\n\t      this._emitValue(result.value);\n\t    } else {\n\t      this._emitError(x);\n\t    }\n\t  }\n\t};\n\n\tvar S$40 = createStream('errorsToValues', mixin$32);\n\tvar P$35 = createProperty('errorsToValues', mixin$32);\n\n\tvar defFn$1 = function (x) {\n\t  return { convert: true, value: x };\n\t};\n\n\tfunction errorsToValues(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? defFn$1 : arguments[1];\n\n\t  return new (obs._ofSameType(S$40, P$35))(obs, { fn: fn });\n\t}\n\n\tvar mixin$33 = {\n\t  _handleError: function (x) {\n\t    this._emitError(x);\n\t    this._emitEnd();\n\t  }\n\t};\n\n\tvar S$41 = createStream('endOnError', mixin$33);\n\tvar P$36 = createProperty('endOnError', mixin$33);\n\n\tfunction endOnError(obs) {\n\t  return new (obs._ofSameType(S$41, P$36))(obs);\n\t}\n\n\tObservable.prototype.toProperty = function (fn) {\n\t  return toProperty(this, fn);\n\t};\n\n\tObservable.prototype.changes = function () {\n\t  return changes(this);\n\t};\n\n\tObservable.prototype.toPromise = function (Promise) {\n\t  return toPromise(this, Promise);\n\t};\n\n\tObservable.prototype.toESObservable = toESObservable;\n\tObservable.prototype[$$observable] = toESObservable;\n\n\tObservable.prototype.map = function (fn) {\n\t  return map$1(this, fn);\n\t};\n\n\tObservable.prototype.filter = function (fn) {\n\t  return filter(this, fn);\n\t};\n\n\tObservable.prototype.take = function (n) {\n\t  return take(this, n);\n\t};\n\n\tObservable.prototype.takeErrors = function (n) {\n\t  return takeErrors(this, n);\n\t};\n\n\tObservable.prototype.takeWhile = function (fn) {\n\t  return takeWhile(this, fn);\n\t};\n\n\tObservable.prototype.last = function () {\n\t  return last(this);\n\t};\n\n\tObservable.prototype.skip = function (n) {\n\t  return skip(this, n);\n\t};\n\n\tObservable.prototype.skipWhile = function (fn) {\n\t  return skipWhile(this, fn);\n\t};\n\n\tObservable.prototype.skipDuplicates = function (fn) {\n\t  return skipDuplicates(this, fn);\n\t};\n\n\tObservable.prototype.diff = function (fn, seed) {\n\t  return diff(this, fn, seed);\n\t};\n\n\tObservable.prototype.scan = function (fn, seed) {\n\t  return scan(this, fn, seed);\n\t};\n\n\tObservable.prototype.flatten = function (fn) {\n\t  return flatten(this, fn);\n\t};\n\n\tObservable.prototype.delay = function (wait) {\n\t  return delay(this, wait);\n\t};\n\n\tObservable.prototype.throttle = function (wait, options) {\n\t  return throttle(this, wait, options);\n\t};\n\n\tObservable.prototype.debounce = function (wait, options) {\n\t  return debounce(this, wait, options);\n\t};\n\n\tObservable.prototype.mapErrors = function (fn) {\n\t  return mapErrors(this, fn);\n\t};\n\n\tObservable.prototype.filterErrors = function (fn) {\n\t  return filterErrors(this, fn);\n\t};\n\n\tObservable.prototype.ignoreValues = function () {\n\t  return ignoreValues(this);\n\t};\n\n\tObservable.prototype.ignoreErrors = function () {\n\t  return ignoreErrors(this);\n\t};\n\n\tObservable.prototype.ignoreEnd = function () {\n\t  return ignoreEnd(this);\n\t};\n\n\tObservable.prototype.beforeEnd = function (fn) {\n\t  return beforeEnd(this, fn);\n\t};\n\n\tObservable.prototype.slidingWindow = function (max, min) {\n\t  return slidingWindow(this, max, min);\n\t};\n\n\tObservable.prototype.bufferWhile = function (fn, options) {\n\t  return bufferWhile(this, fn, options);\n\t};\n\n\tObservable.prototype.bufferWithCount = function (count, options) {\n\t  return bufferWhile$1(this, count, options);\n\t};\n\n\tObservable.prototype.bufferWithTimeOrCount = function (wait, count, options) {\n\t  return bufferWithTimeOrCount(this, wait, count, options);\n\t};\n\n\tObservable.prototype.transduce = function (transducer) {\n\t  return transduce(this, transducer);\n\t};\n\n\tObservable.prototype.withHandler = function (fn) {\n\t  return withHandler(this, fn);\n\t};\n\n\tObservable.prototype.combine = function (other, combinator) {\n\t  return combine([this, other], combinator);\n\t};\n\n\tObservable.prototype.zip = function (other, combinator) {\n\t  return zip([this, other], combinator);\n\t};\n\n\tObservable.prototype.merge = function (other) {\n\t  return merge([this, other]);\n\t};\n\n\tObservable.prototype.concat = function (other) {\n\t  return concat$1([this, other]);\n\t};\n\n\tvar pool = function () {\n\t  return new Pool();\n\t};\n\n\tObservable.prototype.flatMap = function (fn) {\n\t  return new FlatMap(this, fn).setName(this, 'flatMap');\n\t};\n\tObservable.prototype.flatMapLatest = function (fn) {\n\t  return new FlatMap(this, fn, { concurLim: 1, drop: 'old' }).setName(this, 'flatMapLatest');\n\t};\n\tObservable.prototype.flatMapFirst = function (fn) {\n\t  return new FlatMap(this, fn, { concurLim: 1 }).setName(this, 'flatMapFirst');\n\t};\n\tObservable.prototype.flatMapConcat = function (fn) {\n\t  return new FlatMap(this, fn, { queueLim: -1, concurLim: 1 }).setName(this, 'flatMapConcat');\n\t};\n\tObservable.prototype.flatMapConcurLimit = function (fn, limit) {\n\t  return new FlatMap(this, fn, { queueLim: -1, concurLim: limit }).setName(this, 'flatMapConcurLimit');\n\t};\n\n\tObservable.prototype.flatMapErrors = function (fn) {\n\t  return new FlatMapErrors(this, fn).setName(this, 'flatMapErrors');\n\t};\n\n\tObservable.prototype.filterBy = function (other) {\n\t  return filterBy(this, other);\n\t};\n\n\tObservable.prototype.sampledBy = function (other, combinator) {\n\t  return sampledBy(this, other, combinator);\n\t};\n\n\tObservable.prototype.skipUntilBy = function (other) {\n\t  return skipUntilBy(this, other);\n\t};\n\n\tObservable.prototype.takeUntilBy = function (other) {\n\t  return takeUntilBy(this, other);\n\t};\n\n\tObservable.prototype.bufferBy = function (other, options) {\n\t  return bufferBy(this, other, options);\n\t};\n\n\tObservable.prototype.bufferWhileBy = function (other, options) {\n\t  return bufferWhileBy(this, other, options);\n\t};\n\n\t// Deprecated\n\t// -----------------------------------------------------------------------------\n\n\tvar DEPRECATION_WARNINGS = true;\n\tfunction dissableDeprecationWarnings() {\n\t  DEPRECATION_WARNINGS = false;\n\t}\n\n\tfunction warn(msg) {\n\t  if (DEPRECATION_WARNINGS && console && typeof console.warn === 'function') {\n\t    var msg2 = '\\nHere is an Error object for you containing the call stack:';\n\t    console.warn(msg, msg2, new Error());\n\t  }\n\t}\n\n\tObservable.prototype.awaiting = function (other) {\n\t  warn('You are using deprecated .awaiting() method, see https://github.com/rpominov/kefir/issues/145');\n\t  return awaiting(this, other);\n\t};\n\n\tObservable.prototype.valuesToErrors = function (fn) {\n\t  warn('You are using deprecated .valuesToErrors() method, see https://github.com/rpominov/kefir/issues/149');\n\t  return valuesToErrors(this, fn);\n\t};\n\n\tObservable.prototype.errorsToValues = function (fn) {\n\t  warn('You are using deprecated .errorsToValues() method, see https://github.com/rpominov/kefir/issues/149');\n\t  return errorsToValues(this, fn);\n\t};\n\n\tObservable.prototype.endOnError = function () {\n\t  warn('You are using deprecated .endOnError() method, see https://github.com/rpominov/kefir/issues/150');\n\t  return endOnError(this);\n\t};\n\n\t// Exports\n\t// --------------------------------------------------------------------------\n\n\tvar Kefir = { Observable: Observable, Stream: Stream, Property: Property, never: never, later: later, interval: interval, sequentially: sequentially,\n\t  fromPoll: fromPoll, withInterval: withInterval, fromCallback: fromCallback, fromNodeCallback: fromNodeCallback, fromEvents: fromEvents, stream: stream,\n\t  constant: constant, constantError: constantError, fromPromise: fromPromise, fromESObservable: fromESObservable, combine: combine, zip: zip, merge: merge,\n\t  concat: concat$1, Pool: Pool, pool: pool, repeat: repeat, staticLand: staticLand };\n\n\tKefir.Kefir = Kefir;\n\n\texports.dissableDeprecationWarnings = dissableDeprecationWarnings;\n\texports.Kefir = Kefir;\n\texports.Observable = Observable;\n\texports.Stream = Stream;\n\texports.Property = Property;\n\texports.never = never;\n\texports.later = later;\n\texports.interval = interval;\n\texports.sequentially = sequentially;\n\texports.fromPoll = fromPoll;\n\texports.withInterval = withInterval;\n\texports.fromCallback = fromCallback;\n\texports.fromNodeCallback = fromNodeCallback;\n\texports.fromEvents = fromEvents;\n\texports.stream = stream;\n\texports.constant = constant;\n\texports.constantError = constantError;\n\texports.fromPromise = fromPromise;\n\texports.fromESObservable = fromESObservable;\n\texports.combine = combine;\n\texports.zip = zip;\n\texports.merge = merge;\n\texports.concat = concat$1;\n\texports.Pool = Pool;\n\texports.pool = pool;\n\texports.repeat = repeat;\n\texports.staticLand = staticLand;\n\texports['default'] = Kefir;\n\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\n}));","import { define, h } from 'skatejs';\nimport {startDragging, stopDragging, draggableHostStyle} from './draggable.js';\n\nconst css = ` :host {display: inline-table} handle-box {display: inline-table}`\n\nconst HandleBox = define(\"handle-box\",{\n    attached(elem){\n      startDragging(elem);\n    },\n    detached(elem){\n      stopDragging(elem);\n    },\n    render(elem){\n      return [h(\"slot\",\"\"),h(\"style\",draggableHostStyle+css)]\n    },\n    rendered(elem){\n    }\n})\n\nexport default HandleBox\n","import { define, h } from 'skatejs';\nimport {detach, reattach} from './detachable.js';\n\nconst css = ` :host {display: inline-table} loose-box {display: inline-table}`\n\nconst DetachedBox = define(\"detached-box\",{\n    attached(elem){\n      detach(elem);\n    },\n    detached(elem){\n      reattach(elem);\n    },\n    render(elem){\n      return [h(\"slot\",\"\"),h(\"style\",css)]\n    },\n    rendered(elem){\n    }\n})\n\nexport default DetachedBox\n","// from http://stackoverflow.com/a/38149758/1189799\n\nexport const parentSelector = function(el, selector, stopSelector) {\n  var retval = null;\n  while (el) {\n    if (el.matches(selector)) {\n      retval = el;\n      break\n    } else if (stopSelector && el.matches(stopSelector)) {\n      break\n    }\n    el = el.parentElement;\n  }\n  return retval;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","var matcher = function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n};\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!element.matches) {\n    var vendorMatches = element.webkitMatchesSelector\n        || element.msMatchesSelector\n        || element.mozMatchesSelector\n        || element.oMatchesSelector;\n    matcher = function(selector) {\n      return function() {\n        return vendorMatches.call(this, selector);\n      };\n    };\n  }\n}\n\nexport default matcher;\n","export var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n","var sqrt3 = Math.sqrt(3);\n\nexport default {\n  draw: function(context, size) {\n    var y = -Math.sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n","/*\n * $Id: combinatorics.js,v 0.25 2013/03/11 15:42:14 dankogai Exp dankogai $\n *\n *  Licensed under the MIT license.\n *  http://www.opensource.org/licenses/mit-license.php\n *\n *  References:\n *    http://www.ruby-doc.org/core-2.0/Array.html#method-i-combination\n *    http://www.ruby-doc.org/core-2.0/Array.html#method-i-permutation\n *    http://en.wikipedia.org/wiki/Factorial_number_system\n */\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define([], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.Combinatorics = factory();\n    }\n}(this, function () {\n    'use strict';\n    var version = \"0.5.2\";\n    /* combinatory arithmetics */\n    var P = function(m, n) {\n        var p = 1;\n        while (n--) p *= m--;\n        return p;\n    };\n    var C = function(m, n) {\n        if (n > m) {\n            return 0;\n        }\n        return P(m, n) / P(n, n);\n    };\n    var factorial = function(n) {\n        return P(n, n);\n    };\n    var factoradic = function(n, d) {\n        var f = 1;\n        if (!d) {\n            for (d = 1; f < n; f *= ++d);\n            if (f > n) f /= d--;\n        } else {\n            f = factorial(d);\n        }\n        var result = [0];\n        for (; d; f /= d--) {\n            result[d] = Math.floor(n / f);\n            n %= f;\n        }\n        return result;\n    };\n    /* common methods */\n    var addProperties = function(dst, src) {\n        Object.keys(src).forEach(function(p) {\n            Object.defineProperty(dst, p, {\n                value: src[p],\n                configurable: p == 'next'\n            });\n        });\n    };\n    var hideProperty = function(o, p) {\n        Object.defineProperty(o, p, {\n            writable: true\n        });\n    };\n    var toArray = function(f) {\n        var e, result = [];\n        this.init();\n        while (e = this.next()) result.push(f ? f(e) : e);\n        this.init();\n        return result;\n    };\n    var common = {\n        toArray: toArray,\n        map: toArray,\n        forEach: function(f) {\n            var e;\n            this.init();\n            while (e = this.next()) f(e);\n            this.init();\n        },\n        filter: function(f) {\n            var e, result = [];\n            this.init();\n            while (e = this.next()) if (f(e)) result.push(e);\n            this.init();\n            return result;\n        },\n        lazyMap: function(f) {\n            this._lazyMap = f;\n            return this;\n        },\n        lazyFilter: function(f) {\n            Object.defineProperty(this, 'next', {\n                writable: true\n            });\n            if (typeof f !== 'function') {\n                this.next = this._next;\n            } else {\n                if (typeof (this._next) !== 'function') {\n                    this._next = this.next;\n                }\n                var _next = this._next.bind(this);\n                this.next = (function() {\n                    var e;\n                    while (e = _next()) {\n                        if (f(e))\n                            return e;\n                    }\n                    return e;\n                }).bind(this);\n            }\n            Object.defineProperty(this, 'next', {\n                writable: false\n            });\n            return this;\n        }\n\n    };\n    /* power set */\n    var power = function(ary, fun) {\n        var size = 1 << ary.length,\n            sizeOf = function() {\n                return size;\n            },\n            that = Object.create(ary.slice(), {\n                length: {\n                    get: sizeOf\n                }\n            });\n        hideProperty(that, 'index');\n        addProperties(that, {\n            valueOf: sizeOf,\n            init: function() {\n                that.index = 0;\n            },\n            nth: function(n) {\n                if (n >= size) return;\n                var i = 0,\n                    result = [];\n                for (; n; n >>>= 1, i++) if (n & 1) result.push(this[i]);\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            },\n            next: function() {\n                return this.nth(this.index++);\n            }\n        });\n        addProperties(that, common);\n        that.init();\n        return (typeof (fun) === 'function') ? that.map(fun) : that;\n    };\n    /* combination */\n    var nextIndex = function(n) {\n        var smallest = n & -n,\n            ripple = n + smallest,\n            new_smallest = ripple & -ripple,\n            ones = ((new_smallest / smallest) >> 1) - 1;\n        return ripple | ones;\n    };\n    var combination = function(ary, nelem, fun) {\n        if (!nelem) nelem = ary.length;\n        if (nelem < 1) throw new RangeError;\n        if (nelem > ary.length) throw new RangeError;\n        var first = (1 << nelem) - 1,\n            size = C(ary.length, nelem),\n            maxIndex = 1 << ary.length,\n            sizeOf = function() {\n                return size;\n            },\n            that = Object.create(ary.slice(), {\n                length: {\n                    get: sizeOf\n                }\n            });\n        hideProperty(that, 'index');\n        addProperties(that, {\n            valueOf: sizeOf,\n            init: function() {\n                this.index = first;\n            },\n            next: function() {\n                if (this.index >= maxIndex) return;\n                var i = 0,\n                    n = this.index,\n                    result = [];\n                for (; n; n >>>= 1, i++) {\n                    if (n & 1) result[result.length] = this[i];\n                }\n\n                this.index = nextIndex(this.index);\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            }\n        });\n        addProperties(that, common);\n        that.init();\n        return (typeof (fun) === 'function') ? that.map(fun) : that;\n    };\n    /* bigcombination */\n    var bigNextIndex = function(n, nelem) {\n\n        var result = n;\n        var j = nelem;\n        var i = 0;\n        for (i = result.length - 1; i >= 0; i--) {\n            if (result[i] == 1) {\n                j--;\n            } else {\n                break;\n            }\n        } \n        if (j == 0) {\n            // Overflow\n            result[result.length] = 1;\n            for (var k = result.length - 2; k >= 0; k--) {\n                result[k] = (k < nelem-1)?1:0;\n            }\n        } else {\n            // Normal\n\n            // first zero after 1\n            var i1 = -1;\n            var i0 = -1;\n            for (var i = 0; i < result.length; i++) {\n                if (result[i] == 0 && i1 != -1) {\n                    i0 = i;\n                }\n                if (result[i] == 1) {\n                    i1 = i;\n                }\n                if (i0 != -1 && i1 != -1) {\n                    result[i0] = 1;\n                    result[i1] = 0;\n                    break;\n                }\n            }\n\n            j = nelem;\n            for (var i = result.length - 1; i >= i1; i--) {\n                if (result[i] == 1)\n                    j--;\n            }\n            for (var i = 0; i < i1; i++) {\n                result[i] = (i < j)?1:0;\n            }\n        }\n\n        return result;\n\n    };\n    var buildFirst = function(nelem) {\n        var result = [];\n        for (var i = 0; i < nelem; i++) {\n            result[i] = 1;\n        }\n        result[0] = 1;\n        return result;\n    };\n    var bigCombination = function(ary, nelem, fun) {\n        if (!nelem) nelem = ary.length;\n        if (nelem < 1) throw new RangeError;\n        if (nelem > ary.length) throw new RangeError;\n        var first = buildFirst(nelem),\n            size = C(ary.length, nelem),\n            maxIndex = ary.length,\n            sizeOf = function() {\n                return size;\n            },\n            that = Object.create(ary.slice(), {\n                length: {\n                    get: sizeOf\n                }\n            });\n        hideProperty(that, 'index');\n        addProperties(that, {\n            valueOf: sizeOf,\n            init: function() {\n                this.index = first.concat();\n            },\n            next: function() {\n                if (this.index.length > maxIndex) return;\n                var i = 0,\n                    n = this.index,\n                    result = [];\n                for (var j = 0; j < n.length; j++, i++) {\n                    if (n[j])\n                        result[result.length] = this[i];\n                }\n                bigNextIndex(this.index, nelem);\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            }\n        });\n        addProperties(that, common);\n        that.init();\n        return (typeof (fun) === 'function') ? that.map(fun) : that;\n    };\n    /* permutation */\n    var _permutation = function(ary) {\n        var that = ary.slice(),\n            size = factorial(that.length);\n        that.index = 0;\n        that.next = function() {\n            if (this.index >= size) return;\n            var copy = this.slice(),\n                digits = factoradic(this.index, this.length),\n                result = [],\n                i = this.length - 1;\n            for (; i >= 0; --i) result.push(copy.splice(digits[i], 1)[0]);\n            this.index++;\n            return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n        };\n        return that;\n    };\n    // which is really a permutation of combination\n    var permutation = function(ary, nelem, fun) {\n        if (!nelem) nelem = ary.length;\n        if (nelem < 1) throw new RangeError;\n        if (nelem > ary.length) throw new RangeError;\n        var size = P(ary.length, nelem),\n            sizeOf = function() {\n                return size;\n            },\n            that = Object.create(ary.slice(), {\n                length: {\n                    get: sizeOf\n                }\n            });\n        hideProperty(that, 'cmb');\n        hideProperty(that, 'per');\n        addProperties(that, {\n            valueOf: function() {\n                return size;\n            },\n            init: function() {\n                this.cmb = combination(ary, nelem);\n                this.per = _permutation(this.cmb.next());\n            },\n            next: function() {\n                var result = this.per.next();\n                if (!result) {\n                    var cmb = this.cmb.next();\n                    if (!cmb) return;\n                    this.per = _permutation(cmb);\n                    return this.next();\n                }\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            }\n        });\n        addProperties(that, common);\n        that.init();\n        return (typeof (fun) === 'function') ? that.map(fun) : that;\n    };\n\n    var PC = function(m) {\n        var total = 0;\n        for (var n = 1; n <= m; n++) {\n            var p = P(m,n);\n            total += p;\n        };\n        return total;\n    };\n    // which is really a permutation of combination\n    var permutationCombination = function(ary, fun) {\n        // if (!nelem) nelem = ary.length;\n        // if (nelem < 1) throw new RangeError;\n        // if (nelem > ary.length) throw new RangeError;\n        var size = PC(ary.length),\n            sizeOf = function() {\n                return size;\n            },\n            that = Object.create(ary.slice(), {\n                length: {\n                    get: sizeOf\n                }\n            });\n        hideProperty(that, 'cmb');\n        hideProperty(that, 'per');\n        hideProperty(that, 'nelem');\n        addProperties(that, {\n            valueOf: function() {\n                return size;\n            },\n            init: function() {\n                this.nelem = 1;\n                // console.log(\"Starting nelem: \" + this.nelem);\n                this.cmb = combination(ary, this.nelem);\n                this.per = _permutation(this.cmb.next());\n            },\n            next: function() {\n                var result = this.per.next();\n                if (!result) {\n                    var cmb = this.cmb.next();\n                    if (!cmb) {\n                        this.nelem++;\n                        // console.log(\"increment nelem: \" + this.nelem + \" vs \" + ary.length);\n                        if (this.nelem > ary.length) return;\n                        this.cmb = combination(ary, this.nelem);\n                        cmb = this.cmb.next();\n                        if (!cmb) return;\n                    }\n                    this.per = _permutation(cmb);\n                    return this.next();\n                }\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            }\n        });\n        addProperties(that, common);\n        that.init();\n        return (typeof (fun) === 'function') ? that.map(fun) : that;\n    };\n    /* Cartesian Product */\n    var arraySlice = Array.prototype.slice;\n    var cartesianProduct = function() {\n        if (!arguments.length) throw new RangeError;\n        var args = arraySlice.call(arguments),\n            size = args.reduce(function(p, a) {\n                return p * a.length;\n            }, 1),\n            sizeOf = function() {\n                return size;\n            },\n            dim = args.length,\n            that = Object.create(args, {\n                length: {\n                    get: sizeOf\n                }\n            });\n        if (!size) throw new RangeError;\n        hideProperty(that, 'index');\n        addProperties(that, {\n            valueOf: sizeOf,\n            dim: dim,\n            init: function() {\n                this.index = 0;\n            },\n            get: function() {\n                if (arguments.length !== this.length) return;\n                var result = [],\n                    d = 0;\n                for (; d < dim; d++) {\n                    var i = arguments[d];\n                    if (i >= this[d].length) return;\n                    result.push(this[d][i]);\n                }\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            },\n            nth: function(n) {\n                var result = [],\n                    d = 0;\n                for (; d < dim; d++) {\n                    var l = this[d].length;\n                    var i = n % l;\n                    result.push(this[d][i]);\n                    n -= i;\n                    n /= l;\n                }\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            },\n            next: function() {\n                if (this.index >= size) return;\n                var result = this.nth(this.index);\n                this.index++;\n                return result;\n            }\n        });\n        addProperties(that, common);\n        that.init();\n        return that;\n    };\n    /* baseN */\n    var baseN = function(ary, nelem, fun) {\n                if (!nelem) nelem = ary.length;\n        if (nelem < 1) throw new RangeError;\n        var base = ary.length,\n                size = Math.pow(base, nelem);\n        var sizeOf = function() {\n                return size;\n            },\n            that = Object.create(ary.slice(), {\n                length: {\n                    get: sizeOf\n                }\n            });\n        hideProperty(that, 'index');\n        addProperties(that, {\n            valueOf: sizeOf,\n            init: function() {\n                that.index = 0;\n            },\n            nth: function(n) {\n                if (n >= size) return;\n                var result = [];\n                for (var i = 0; i < nelem; i++) {\n                    var d = n % base;\n                    result.push(ary[d])\n                    n -= d; n /= base\n                }\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            },\n            next: function() {\n                return this.nth(this.index++);\n            }\n        });\n        addProperties(that, common);\n        that.init();\n        return (typeof (fun) === 'function') ? that.map(fun) : that;\n    };\n\n    /* export */\n    var Combinatorics = Object.create(null);\n    addProperties(Combinatorics, {\n        C: C,\n        P: P,\n        factorial: factorial,\n        factoradic: factoradic,\n        cartesianProduct: cartesianProduct,\n        combination: combination,\n        bigCombination: bigCombination,\n        permutation: permutation,\n        permutationCombination: permutationCombination,\n        power: power,\n        baseN: baseN,\n        VERSION: version\n    });\n    return Combinatorics;\n}));\n","exports = module.exports = Victor;\n\n/**\n * # Victor - A JavaScript 2D vector class with methods for common vector operations\n */\n\n/**\n * Constructor. Will also work without the `new` keyword\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = Victor(42, 1337);\n *\n * @param {Number} x Value of the x axis\n * @param {Number} y Value of the y axis\n * @return {Victor}\n * @api public\n */\nfunction Victor (x, y) {\n\tif (!(this instanceof Victor)) {\n\t\treturn new Victor(x, y);\n\t}\n\n\t/**\n\t * The X axis\n\t *\n\t * ### Examples:\n\t *     var vec = new Victor.fromArray(42, 21);\n\t *\n\t *     vec.x;\n\t *     // => 42\n\t *\n\t * @api public\n\t */\n\tthis.x = x || 0;\n\n\t/**\n\t * The Y axis\n\t *\n\t * ### Examples:\n\t *     var vec = new Victor.fromArray(42, 21);\n\t *\n\t *     vec.y;\n\t *     // => 21\n\t *\n\t * @api public\n\t */\n\tthis.y = y || 0;\n};\n\n/**\n * # Static\n */\n\n/**\n * Creates a new instance from an array\n *\n * ### Examples:\n *     var vec = Victor.fromArray([42, 21]);\n *\n *     vec.toString();\n *     // => x:42, y:21\n *\n * @name Victor.fromArray\n * @param {Array} array Array with the x and y values at index 0 and 1 respectively\n * @return {Victor} The new instance\n * @api public\n */\nVictor.fromArray = function (arr) {\n\treturn new Victor(arr[0] || 0, arr[1] || 0);\n};\n\n/**\n * Creates a new instance from an object\n *\n * ### Examples:\n *     var vec = Victor.fromObject({ x: 42, y: 21 });\n *\n *     vec.toString();\n *     // => x:42, y:21\n *\n * @name Victor.fromObject\n * @param {Object} obj Object with the values for x and y\n * @return {Victor} The new instance\n * @api public\n */\nVictor.fromObject = function (obj) {\n\treturn new Victor(obj.x || 0, obj.y || 0);\n};\n\n/**\n * # Manipulation\n *\n * These functions are chainable.\n */\n\n/**\n * Adds another vector's X axis to this one\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.addX(vec2);\n *     vec1.toString();\n *     // => x:30, y:10\n *\n * @param {Victor} vector The other vector you want to add to this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addX = function (vec) {\n\tthis.x += vec.x;\n\treturn this;\n};\n\n/**\n * Adds another vector's Y axis to this one\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.addY(vec2);\n *     vec1.toString();\n *     // => x:10, y:40\n *\n * @param {Victor} vector The other vector you want to add to this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addY = function (vec) {\n\tthis.y += vec.y;\n\treturn this;\n};\n\n/**\n * Adds another vector to this one\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.add(vec2);\n *     vec1.toString();\n *     // => x:30, y:40\n *\n * @param {Victor} vector The other vector you want to add to this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.add = function (vec) {\n\tthis.x += vec.x;\n\tthis.y += vec.y;\n\treturn this;\n};\n\n/**\n * Adds the given scalar to both vector axis\n *\n * ### Examples:\n *     var vec = new Victor(1, 2);\n *\n *     vec.addScalar(2);\n *     vec.toString();\n *     // => x: 3, y: 4\n *\n * @param {Number} scalar The scalar to add\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addScalar = function (scalar) {\n\tthis.x += scalar;\n\tthis.y += scalar;\n\treturn this;\n};\n\n/**\n * Adds the given scalar to the X axis\n *\n * ### Examples:\n *     var vec = new Victor(1, 2);\n *\n *     vec.addScalarX(2);\n *     vec.toString();\n *     // => x: 3, y: 2\n *\n * @param {Number} scalar The scalar to add\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addScalarX = function (scalar) {\n\tthis.x += scalar;\n\treturn this;\n};\n\n/**\n * Adds the given scalar to the Y axis\n *\n * ### Examples:\n *     var vec = new Victor(1, 2);\n *\n *     vec.addScalarY(2);\n *     vec.toString();\n *     // => x: 1, y: 4\n *\n * @param {Number} scalar The scalar to add\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addScalarY = function (scalar) {\n\tthis.y += scalar;\n\treturn this;\n};\n\n/**\n * Subtracts the X axis of another vector from this one\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.subtractX(vec2);\n *     vec1.toString();\n *     // => x:80, y:50\n *\n * @param {Victor} vector The other vector you want subtract from this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractX = function (vec) {\n\tthis.x -= vec.x;\n\treturn this;\n};\n\n/**\n * Subtracts the Y axis of another vector from this one\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.subtractY(vec2);\n *     vec1.toString();\n *     // => x:100, y:20\n *\n * @param {Victor} vector The other vector you want subtract from this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractY = function (vec) {\n\tthis.y -= vec.y;\n\treturn this;\n};\n\n/**\n * Subtracts another vector from this one\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.subtract(vec2);\n *     vec1.toString();\n *     // => x:80, y:20\n *\n * @param {Victor} vector The other vector you want subtract from this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtract = function (vec) {\n\tthis.x -= vec.x;\n\tthis.y -= vec.y;\n\treturn this;\n};\n\n/**\n * Subtracts the given scalar from both axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 200);\n *\n *     vec.subtractScalar(20);\n *     vec.toString();\n *     // => x: 80, y: 180\n *\n * @param {Number} scalar The scalar to subtract\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractScalar = function (scalar) {\n\tthis.x -= scalar;\n\tthis.y -= scalar;\n\treturn this;\n};\n\n/**\n * Subtracts the given scalar from the X axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 200);\n *\n *     vec.subtractScalarX(20);\n *     vec.toString();\n *     // => x: 80, y: 200\n *\n * @param {Number} scalar The scalar to subtract\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractScalarX = function (scalar) {\n\tthis.x -= scalar;\n\treturn this;\n};\n\n/**\n * Subtracts the given scalar from the Y axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 200);\n *\n *     vec.subtractScalarY(20);\n *     vec.toString();\n *     // => x: 100, y: 180\n *\n * @param {Number} scalar The scalar to subtract\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractScalarY = function (scalar) {\n\tthis.y -= scalar;\n\treturn this;\n};\n\n/**\n * Divides the X axis by the x component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 0);\n *\n *     vec.divideX(vec2);\n *     vec.toString();\n *     // => x:50, y:50\n *\n * @param {Victor} vector The other vector you want divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideX = function (vector) {\n\tthis.x /= vector.x;\n\treturn this;\n};\n\n/**\n * Divides the Y axis by the y component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(0, 2);\n *\n *     vec.divideY(vec2);\n *     vec.toString();\n *     // => x:100, y:25\n *\n * @param {Victor} vector The other vector you want divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideY = function (vector) {\n\tthis.y /= vector.y;\n\treturn this;\n};\n\n/**\n * Divides both vector axis by a axis values of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 2);\n *\n *     vec.divide(vec2);\n *     vec.toString();\n *     // => x:50, y:25\n *\n * @param {Victor} vector The vector to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divide = function (vector) {\n\tthis.x /= vector.x;\n\tthis.y /= vector.y;\n\treturn this;\n};\n\n/**\n * Divides both vector axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.divideScalar(2);\n *     vec.toString();\n *     // => x:50, y:25\n *\n * @param {Number} The scalar to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideScalar = function (scalar) {\n\tif (scalar !== 0) {\n\t\tthis.x /= scalar;\n\t\tthis.y /= scalar;\n\t} else {\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\n\treturn this;\n};\n\n/**\n * Divides the X axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.divideScalarX(2);\n *     vec.toString();\n *     // => x:50, y:50\n *\n * @param {Number} The scalar to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideScalarX = function (scalar) {\n\tif (scalar !== 0) {\n\t\tthis.x /= scalar;\n\t} else {\n\t\tthis.x = 0;\n\t}\n\treturn this;\n};\n\n/**\n * Divides the Y axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.divideScalarY(2);\n *     vec.toString();\n *     // => x:100, y:25\n *\n * @param {Number} The scalar to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideScalarY = function (scalar) {\n\tif (scalar !== 0) {\n\t\tthis.y /= scalar;\n\t} else {\n\t\tthis.y = 0;\n\t}\n\treturn this;\n};\n\n/**\n * Inverts the X axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.invertX();\n *     vec.toString();\n *     // => x:-100, y:50\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.invertX = function () {\n\tthis.x *= -1;\n\treturn this;\n};\n\n/**\n * Inverts the Y axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.invertY();\n *     vec.toString();\n *     // => x:100, y:-50\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.invertY = function () {\n\tthis.y *= -1;\n\treturn this;\n};\n\n/**\n * Inverts both axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.invert();\n *     vec.toString();\n *     // => x:-100, y:-50\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.invert = function () {\n\tthis.invertX();\n\tthis.invertY();\n\treturn this;\n};\n\n/**\n * Multiplies the X axis by X component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 0);\n *\n *     vec.multiplyX(vec2);\n *     vec.toString();\n *     // => x:200, y:50\n *\n * @param {Victor} vector The vector to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyX = function (vector) {\n\tthis.x *= vector.x;\n\treturn this;\n};\n\n/**\n * Multiplies the Y axis by Y component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(0, 2);\n *\n *     vec.multiplyX(vec2);\n *     vec.toString();\n *     // => x:100, y:100\n *\n * @param {Victor} vector The vector to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyY = function (vector) {\n\tthis.y *= vector.y;\n\treturn this;\n};\n\n/**\n * Multiplies both vector axis by values from a given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 2);\n *\n *     vec.multiply(vec2);\n *     vec.toString();\n *     // => x:200, y:100\n *\n * @param {Victor} vector The vector to multiply by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiply = function (vector) {\n\tthis.x *= vector.x;\n\tthis.y *= vector.y;\n\treturn this;\n};\n\n/**\n * Multiplies both vector axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.multiplyScalar(2);\n *     vec.toString();\n *     // => x:200, y:100\n *\n * @param {Number} The scalar to multiply by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyScalar = function (scalar) {\n\tthis.x *= scalar;\n\tthis.y *= scalar;\n\treturn this;\n};\n\n/**\n * Multiplies the X axis by the given scalar\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.multiplyScalarX(2);\n *     vec.toString();\n *     // => x:200, y:50\n *\n * @param {Number} The scalar to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyScalarX = function (scalar) {\n\tthis.x *= scalar;\n\treturn this;\n};\n\n/**\n * Multiplies the Y axis by the given scalar\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.multiplyScalarY(2);\n *     vec.toString();\n *     // => x:100, y:100\n *\n * @param {Number} The scalar to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyScalarY = function (scalar) {\n\tthis.y *= scalar;\n\treturn this;\n};\n\n/**\n * Normalize\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.normalize = function () {\n\tvar length = this.length();\n\n\tif (length === 0) {\n\t\tthis.x = 1;\n\t\tthis.y = 0;\n\t} else {\n\t\tthis.divide(Victor(length, length));\n\t}\n\treturn this;\n};\n\nVictor.prototype.norm = Victor.prototype.normalize;\n\n/**\n * If the absolute vector axis is greater than `max`, multiplies the axis by `factor`\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.limit(80, 0.9);\n *     vec.toString();\n *     // => x:90, y:50\n *\n * @param {Number} max The maximum value for both x and y axis\n * @param {Number} factor Factor by which the axis are to be multiplied with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.limit = function (max, factor) {\n\tif (Math.abs(this.x) > max){ this.x *= factor; }\n\tif (Math.abs(this.y) > max){ this.y *= factor; }\n\treturn this;\n};\n\n/**\n * Randomizes both vector axis with a value between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomize(new Victor(50, 60), new Victor(70, 80`));\n *     vec.toString();\n *     // => x:67, y:73\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomize = function (topLeft, bottomRight) {\n\tthis.randomizeX(topLeft, bottomRight);\n\tthis.randomizeY(topLeft, bottomRight);\n\n\treturn this;\n};\n\n/**\n * Randomizes the y axis with a value between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomizeX(new Victor(50, 60), new Victor(70, 80`));\n *     vec.toString();\n *     // => x:55, y:50\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomizeX = function (topLeft, bottomRight) {\n\tvar min = Math.min(topLeft.x, bottomRight.x);\n\tvar max = Math.max(topLeft.x, bottomRight.x);\n\tthis.x = random(min, max);\n\treturn this;\n};\n\n/**\n * Randomizes the y axis with a value between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomizeY(new Victor(50, 60), new Victor(70, 80`));\n *     vec.toString();\n *     // => x:100, y:66\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomizeY = function (topLeft, bottomRight) {\n\tvar min = Math.min(topLeft.y, bottomRight.y);\n\tvar max = Math.max(topLeft.y, bottomRight.y);\n\tthis.y = random(min, max);\n\treturn this;\n};\n\n/**\n * Randomly randomizes either axis between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomizeAny(new Victor(50, 60), new Victor(70, 80));\n *     vec.toString();\n *     // => x:100, y:77\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomizeAny = function (topLeft, bottomRight) {\n\tif (!! Math.round(Math.random())) {\n\t\tthis.randomizeX(topLeft, bottomRight);\n\t} else {\n\t\tthis.randomizeY(topLeft, bottomRight);\n\t}\n\treturn this;\n};\n\n/**\n * Rounds both axis to an integer value\n *\n * ### Examples:\n *     var vec = new Victor(100.2, 50.9);\n *\n *     vec.unfloat();\n *     vec.toString();\n *     // => x:100, y:51\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.unfloat = function () {\n\tthis.x = Math.round(this.x);\n\tthis.y = Math.round(this.y);\n\treturn this;\n};\n\n/**\n * Rounds both axis to a certain precision\n *\n * ### Examples:\n *     var vec = new Victor(100.2, 50.9);\n *\n *     vec.unfloat();\n *     vec.toString();\n *     // => x:100, y:51\n *\n * @param {Number} Precision (default: 8)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.toFixed = function (precision) {\n\tif (typeof precision === 'undefined') { precision = 8; }\n\tthis.x = this.x.toFixed(precision);\n\tthis.y = this.y.toFixed(precision);\n\treturn this;\n};\n\n/**\n * Performs a linear blend / interpolation of the X axis towards another vector\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 100);\n *     var vec2 = new Victor(200, 200);\n *\n *     vec1.mixX(vec2, 0.5);\n *     vec.toString();\n *     // => x:150, y:100\n *\n * @param {Victor} vector The other vector\n * @param {Number} amount The blend amount (optional, default: 0.5)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.mixX = function (vec, amount) {\n\tif (typeof amount === 'undefined') {\n\t\tamount = 0.5;\n\t}\n\n\tthis.x = (1 - amount) * this.x + amount * vec.x;\n\treturn this;\n};\n\n/**\n * Performs a linear blend / interpolation of the Y axis towards another vector\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 100);\n *     var vec2 = new Victor(200, 200);\n *\n *     vec1.mixY(vec2, 0.5);\n *     vec.toString();\n *     // => x:100, y:150\n *\n * @param {Victor} vector The other vector\n * @param {Number} amount The blend amount (optional, default: 0.5)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.mixY = function (vec, amount) {\n\tif (typeof amount === 'undefined') {\n\t\tamount = 0.5;\n\t}\n\n\tthis.y = (1 - amount) * this.y + amount * vec.y;\n\treturn this;\n};\n\n/**\n * Performs a linear blend / interpolation towards another vector\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 100);\n *     var vec2 = new Victor(200, 200);\n *\n *     vec1.mix(vec2, 0.5);\n *     vec.toString();\n *     // => x:150, y:150\n *\n * @param {Victor} vector The other vector\n * @param {Number} amount The blend amount (optional, default: 0.5)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.mix = function (vec, amount) {\n\tthis.mixX(vec, amount);\n\tthis.mixY(vec, amount);\n\treturn this;\n};\n\n/**\n * # Products\n */\n\n/**\n * Creates a clone of this vector\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = vec1.clone();\n *\n *     vec2.toString();\n *     // => x:10, y:10\n *\n * @return {Victor} A clone of the vector\n * @api public\n */\nVictor.prototype.clone = function () {\n\treturn new Victor(this.x, this.y);\n};\n\n/**\n * Copies another vector's X component in to its own\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 20);\n *     var vec2 = vec1.copyX(vec1);\n *\n *     vec2.toString();\n *     // => x:20, y:10\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.copyX = function (vec) {\n\tthis.x = vec.x;\n\treturn this;\n};\n\n/**\n * Copies another vector's Y component in to its own\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 20);\n *     var vec2 = vec1.copyY(vec1);\n *\n *     vec2.toString();\n *     // => x:10, y:20\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.copyY = function (vec) {\n\tthis.y = vec.y;\n\treturn this;\n};\n\n/**\n * Copies another vector's X and Y components in to its own\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 20);\n *     var vec2 = vec1.copy(vec1);\n *\n *     vec2.toString();\n *     // => x:20, y:20\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.copy = function (vec) {\n\tthis.copyX(vec);\n\tthis.copyY(vec);\n\treturn this;\n};\n\n/**\n * Sets the vector to zero (0,0)\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *\t\t var1.zero();\n *     vec1.toString();\n *     // => x:0, y:0\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.zero = function () {\n\tthis.x = this.y = 0;\n\treturn this;\n};\n\n/**\n * Calculates the dot product of this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.dot(vec2);\n *     // => 23000\n *\n * @param {Victor} vector The second vector\n * @return {Number} Dot product\n * @api public\n */\nVictor.prototype.dot = function (vec2) {\n\treturn this.x * vec2.x + this.y * vec2.y;\n};\n\nVictor.prototype.cross = function (vec2) {\n\treturn (this.x * vec2.y ) - (this.y * vec2.x );\n};\n\n/**\n * Projects a vector onto another vector, setting itself to the result.\n *\n * ### Examples:\n *     var vec = new Victor(100, 0);\n *     var vec2 = new Victor(100, 100);\n *\n *     vec.projectOnto(vec2);\n *     vec.toString();\n *     // => x:50, y:50\n *\n * @param {Victor} vector The other vector you want to project this vector onto\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.projectOnto = function (vec2) {\n    var coeff = ( (this.x * vec2.x)+(this.y * vec2.y) ) / ((vec2.x*vec2.x)+(vec2.y*vec2.y));\n    this.x = coeff * vec2.x;\n    this.y = coeff * vec2.y;\n    return this;\n};\n\n\nVictor.prototype.horizontalAngle = function () {\n\treturn Math.atan2(this.y, this.x);\n};\n\nVictor.prototype.horizontalAngleDeg = function () {\n\treturn radian2degrees(this.horizontalAngle());\n};\n\nVictor.prototype.verticalAngle = function () {\n\treturn Math.atan2(this.x, this.y);\n};\n\nVictor.prototype.verticalAngleDeg = function () {\n\treturn radian2degrees(this.verticalAngle());\n};\n\nVictor.prototype.angle = Victor.prototype.horizontalAngle;\nVictor.prototype.angleDeg = Victor.prototype.horizontalAngleDeg;\nVictor.prototype.direction = Victor.prototype.horizontalAngle;\n\nVictor.prototype.rotate = function (angle) {\n\tvar nx = (this.x * Math.cos(angle)) - (this.y * Math.sin(angle));\n\tvar ny = (this.x * Math.sin(angle)) + (this.y * Math.cos(angle));\n\n\tthis.x = nx;\n\tthis.y = ny;\n\n\treturn this;\n};\n\nVictor.prototype.rotateDeg = function (angle) {\n\tangle = degrees2radian(angle);\n\treturn this.rotate(angle);\n};\n\nVictor.prototype.rotateTo = function(rotation) {\n\treturn this.rotate(rotation-this.angle());\n};\n\nVictor.prototype.rotateToDeg = function(rotation) {\n\trotation = degrees2radian(rotation);\n\treturn this.rotateTo(rotation);\n};\n\nVictor.prototype.rotateBy = function (rotation) {\n\tvar angle = this.angle() + rotation;\n\n\treturn this.rotate(angle);\n};\n\nVictor.prototype.rotateByDeg = function (rotation) {\n\trotation = degrees2radian(rotation);\n\treturn this.rotateBy(rotation);\n};\n\n/**\n * Calculates the distance of the X axis between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceX(vec2);\n *     // => -100\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distanceX = function (vec) {\n\treturn this.x - vec.x;\n};\n\n/**\n * Same as `distanceX()` but always returns an absolute number\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.absDistanceX(vec2);\n *     // => 100\n *\n * @param {Victor} vector The second vector\n * @return {Number} Absolute distance\n * @api public\n */\nVictor.prototype.absDistanceX = function (vec) {\n\treturn Math.abs(this.distanceX(vec));\n};\n\n/**\n * Calculates the distance of the Y axis between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceY(vec2);\n *     // => -10\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distanceY = function (vec) {\n\treturn this.y - vec.y;\n};\n\n/**\n * Same as `distanceY()` but always returns an absolute number\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceY(vec2);\n *     // => 10\n *\n * @param {Victor} vector The second vector\n * @return {Number} Absolute distance\n * @api public\n */\nVictor.prototype.absDistanceY = function (vec) {\n\treturn Math.abs(this.distanceY(vec));\n};\n\n/**\n * Calculates the euclidean distance between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distance(vec2);\n *     // => 100.4987562112089\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distance = function (vec) {\n\treturn Math.sqrt(this.distanceSq(vec));\n};\n\n/**\n * Calculates the squared euclidean distance between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceSq(vec2);\n *     // => 10100\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distanceSq = function (vec) {\n\tvar dx = this.distanceX(vec),\n\t\tdy = this.distanceY(vec);\n\n\treturn dx * dx + dy * dy;\n};\n\n/**\n * Calculates the length or magnitude of the vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.length();\n *     // => 111.80339887498948\n *\n * @return {Number} Length / Magnitude\n * @api public\n */\nVictor.prototype.length = function () {\n\treturn Math.sqrt(this.lengthSq());\n};\n\n/**\n * Squared length / magnitude\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.lengthSq();\n *     // => 12500\n *\n * @return {Number} Length / Magnitude\n * @api public\n */\nVictor.prototype.lengthSq = function () {\n\treturn this.x * this.x + this.y * this.y;\n};\n\nVictor.prototype.magnitude = Victor.prototype.length;\n\n/**\n * Returns a true if vector is (0, 0)\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     vec.zero();\n *\n *     // => true\n *\n * @return {Boolean}\n * @api public\n */\nVictor.prototype.isZero = function() {\n\treturn this.x === 0 && this.y === 0;\n};\n\n/**\n * Returns a true if this vector is the same as another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(100, 50);\n *     vec1.isEqualTo(vec2);\n *\n *     // => true\n *\n * @return {Boolean}\n * @api public\n */\nVictor.prototype.isEqualTo = function(vec2) {\n\treturn this.x === vec2.x && this.y === vec2.y;\n};\n\n/**\n * # Utility Methods\n */\n\n/**\n * Returns an string representation of the vector\n *\n * ### Examples:\n *     var vec = new Victor(10, 20);\n *\n *     vec.toString();\n *     // => x:10, y:20\n *\n * @return {String}\n * @api public\n */\nVictor.prototype.toString = function () {\n\treturn 'x:' + this.x + ', y:' + this.y;\n};\n\n/**\n * Returns an array representation of the vector\n *\n * ### Examples:\n *     var vec = new Victor(10, 20);\n *\n *     vec.toArray();\n *     // => [10, 20]\n *\n * @return {Array}\n * @api public\n */\nVictor.prototype.toArray = function () {\n\treturn [ this.x, this.y ];\n};\n\n/**\n * Returns an object representation of the vector\n *\n * ### Examples:\n *     var vec = new Victor(10, 20);\n *\n *     vec.toObject();\n *     // => { x: 10, y: 20 }\n *\n * @return {Object}\n * @api public\n */\nVictor.prototype.toObject = function () {\n\treturn { x: this.x, y: this.y };\n};\n\n\nvar degrees = 180 / Math.PI;\n\nfunction random (min, max) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nfunction radian2degrees (rad) {\n\treturn rad * degrees;\n}\n\nfunction degrees2radian (deg) {\n\treturn deg / degrees;\n}\n","import {line,symbol,symbolTriangle as triangle} from 'd3-shape'\nimport {nearbyEdgePoints} from \"./nearbyRectEdges.js\"\n\nexport const rectCache = Symbol();\nexport const rectInViewport = Symbol();\n// const skipFrames = 10;\n// const skip = Symbol();\n// const rectsEq = (r1,r2) => r1.top == r2.top && r1.bottom == r2.bottom && r1.left == r2.left && r1.right == r2.right\nexport const cacheBoundingRect =  (el) => {\n  // if (el[skip] <= skipFrames) {\n  //   el[skip] += 1\n  //   return\n  // }\n  // var oldRect = el[rectCache]\n  var rect = el[rectCache] = el.getBoundingClientRect()\n  // if (rectsEq(rect, oldRect)) { el[skip] = 0};\n  el[rectInViewport] = (\n        rect.top >= 0 ||\n        rect.left >= 0 ||\n        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) ||\n        rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n    );\n}\n\nexport const drawEdge = (ctx,edge,graph) => {\n  if ( edge.source[rectInViewport] || edge.target[rectInViewport] ) {\n    var R1 = edge.source[rectCache];\n    var R2 = edge.target[rectCache];\n    var pts = nearbyEdgePoints(R1,R2,edge.source.round,edge.target.round,undefined,0)\n\n    var color = edge.color ? edge.color : graph.color;\n    var thickness = edge.thickness ? edge.thickness : graph.thickness\n    var segments = edge.segments ? edge.segments : graph.segments\n    segments = segments ? segments : []\n    ctx.setLineDash(segments)\n    ctx.strokeStyle = color;\n    ctx.fillStyle = color;\n    ctx.lineWidth = thickness;\n\n    var size = thickness*1;\n    const markerBuffer = 1 + 2*size;\n    const lineBuffer = markerBuffer+3;\n    // var fill = 'magenta'\n    // var stroke = '#222'\n    // var strokeWidth = 2\n\n    // ctx.strokeStyle = \"yellow\";\n    // ctx.fillStyle = \"black\";\n    // ctx.lineWidth = 2;\n    var diff = pts[1].clone().subtract(pts[0])\n    var len = diff.length();\n\n    ctx.beginPath()\n      ctx.save()\n        ctx.translate(pts[0].x,pts[0].y)\n        ctx.rotate(Math.atan2(diff.y,diff.x));\n\n        ctx.moveTo(lineBuffer,0)\n        ctx.lineTo(len-lineBuffer,0)\n        ctx.stroke();\n    ctx.closePath();\n    ctx.beginPath();\n        if(edge.direction <= 0){\n          ctx.save()\n            ctx.rotate(-Math.PI/2)\n            ctx.translate(0,7+markerBuffer)\n            triangle.draw(ctx,5*size*size+25);\n          ctx.restore()\n        }\n        // ctx.rect(lineBuffer,-size/2,len-2*lineBuffer,size);\n        if(edge.direction >= 0){\n          ctx.translate(len,0);\n          ctx.rotate(Math.PI/2);\n          ctx.translate(0,7+markerBuffer);\n          triangle.draw(ctx,5*size*size+25);\n        }\n      ctx.restore();\n\n      ctx.setLineDash([])\n      ctx.stroke();\n      ctx.fill();\n    ctx.closePath();\n  }\n}\n","'use strict';\n\n/**\n * Clone an object\n *\n *     clone(x)\n *\n * Can clone any primitive type, array, and object.\n * If x has a function clone, this function will be invoked to clone the object.\n *\n * @param {*} x\n * @return {*} clone\n */\nexports.clone = function clone(x) {\n  var type = typeof x;\n\n  // immutable primitive types\n  if (type === 'number' || type === 'string' || type === 'boolean' ||\n      x === null || x === undefined) {\n    return x;\n  }\n\n  // use clone function of the object when available\n  if (typeof x.clone === 'function') {\n    return x.clone();\n  }\n\n  // array\n  if (Array.isArray(x)) {\n    return x.map(function (value) {\n      return clone(value);\n    });\n  }\n\n  if (x instanceof Number)    return new Number(x.valueOf());\n  if (x instanceof String)    return new String(x.valueOf());\n  if (x instanceof Boolean)   return new Boolean(x.valueOf());\n  if (x instanceof Date)      return new Date(x.valueOf());\n  if (x && x.isBigNumber === true) return x; // bignumbers are immutable\n  if (x instanceof RegExp)  throw new TypeError('Cannot clone ' + x);  // TODO: clone a RegExp\n\n  // object\n  var m = {};\n  for (var key in x) {\n    if (x.hasOwnProperty(key)) {\n      m[key] = clone(x[key]);\n    }\n  }\n  return m;\n};\n\n/**\n * Extend object a with the properties of object b\n * @param {Object} a\n * @param {Object} b\n * @return {Object} a\n */\nexports.extend = function(a, b) {\n  for (var prop in b) {\n    if (b.hasOwnProperty(prop)) {\n      a[prop] = b[prop];\n    }\n  }\n  return a;\n};\n\n/**\n * Deep extend an object a with the properties of object b\n * @param {Object} a\n * @param {Object} b\n * @returns {Object}\n */\nexports.deepExtend = function deepExtend (a, b) {\n  // TODO: add support for Arrays to deepExtend\n  if (Array.isArray(b)) {\n    throw new TypeError('Arrays are not supported by deepExtend');\n  }\n\n  for (var prop in b) {\n    if (b.hasOwnProperty(prop)) {\n      if (b[prop] && b[prop].constructor === Object) {\n        if (a[prop] === undefined) {\n          a[prop] = {};\n        }\n        if (a[prop].constructor === Object) {\n          deepExtend(a[prop], b[prop]);\n        }\n        else {\n          a[prop] = b[prop];\n        }\n      } else if (Array.isArray(b[prop])) {\n        throw new TypeError('Arrays are not supported by deepExtend');\n      } else {\n        a[prop] = b[prop];\n      }\n    }\n  }\n  return a;\n};\n\n/**\n * Deep test equality of all fields in two pairs of arrays or objects.\n * @param {Array | Object} a\n * @param {Array | Object} b\n * @returns {boolean}\n */\nexports.deepEqual = function deepEqual (a, b) {\n  var prop, i, len;\n  if (Array.isArray(a)) {\n    if (!Array.isArray(b)) {\n      return false;\n    }\n\n    if (a.length != b.length) {\n      return false;\n    }\n\n    for (i = 0, len = a.length; i < len; i++) {\n      if (!exports.deepEqual(a[i], b[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  else if (a instanceof Object) {\n    if (Array.isArray(b) || !(b instanceof Object)) {\n      return false;\n    }\n\n    for (prop in a) {\n      //noinspection JSUnfilteredForInLoop\n      if (!exports.deepEqual(a[prop], b[prop])) {\n        return false;\n      }\n    }\n    for (prop in b) {\n      //noinspection JSUnfilteredForInLoop\n      if (!exports.deepEqual(a[prop], b[prop])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  else {\n    return (typeof a === typeof b) && (a == b);\n  }\n};\n\n/**\n * Test whether the current JavaScript engine supports Object.defineProperty\n * @returns {boolean} returns true if supported\n */\nexports.canDefineProperty = function () {\n  // test needed for broken IE8 implementation\n  try {\n    if (Object.defineProperty) {\n      Object.defineProperty({}, 'x', { get: function () {} });\n      return true;\n    }\n  } catch (e) {}\n\n  return false;\n};\n\n/**\n * Attach a lazy loading property to a constant.\n * The given function `fn` is called once when the property is first requested.\n * On older browsers (<IE8), the function will fall back to direct evaluation\n * of the properties value.\n * @param {Object} object   Object where to add the property\n * @param {string} prop     Property name\n * @param {Function} fn     Function returning the property value. Called\n *                          without arguments.\n */\nexports.lazy = function (object, prop, fn) {\n  if (exports.canDefineProperty()) {\n    var _uninitialized = true;\n    var _value;\n    Object.defineProperty(object, prop, {\n      get: function () {\n        if (_uninitialized) {\n          _value = fn();\n          _uninitialized = false;\n        }\n        return _value;\n      },\n\n      set: function (value) {\n        _value = value;\n        _uninitialized = false;\n      },\n\n      configurable: true,\n      enumerable: true\n    });\n  }\n  else {\n    // fall back to immediate evaluation\n    object[prop] = fn();\n  }\n};\n\n/**\n * Traverse a path into an object.\n * When a namespace is missing, it will be created\n * @param {Object} object\n * @param {string} path   A dot separated string like 'name.space'\n * @return {Object} Returns the object at the end of the path\n */\nexports.traverse = function(object, path) {\n  var obj = object;\n\n  if (path) {\n    var names = path.split('.');\n    for (var i = 0; i < names.length; i++) {\n      var name = names[i];\n      if (!(name in obj)) {\n        obj[name] = {};\n      }\n      obj = obj[name];\n    }\n  }\n\n  return obj;\n};\n\n/**\n * Test whether an object is a factory. a factory has fields:\n *\n * - factory: function (type: Object, config: Object, load: function, typed: function [, math: Object])   (required)\n * - name: string (optional)\n * - path: string    A dot separated path (optional)\n * - math: boolean   If true (false by default), the math namespace is passed\n *                   as fifth argument of the factory function\n *\n * @param {*} object\n * @returns {boolean}\n */\nexports.isFactory = function (object) {\n  return object && typeof object.factory === 'function';\n};\n","/**\n * typed-function\n *\n * Type checking for JavaScript functions\n *\n * https://github.com/josdejong/typed-function\n */\n'use strict';\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    // OldNode. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like OldNode.\n    module.exports = factory();\n  } else {\n    // Browser globals (root is window)\n    root.typed = factory();\n  }\n}(this, function () {\n  // factory function to create a new instance of typed-function\n  // TODO: allow passing configuration, types, tests via the factory function\n  function create() {\n    /**\n     * Get a type test function for a specific data type\n     * @param {string} name                   Name of a data type like 'number' or 'string'\n     * @returns {Function(obj: *) : boolean}  Returns a type testing function.\n     *                                        Throws an error for an unknown type.\n     */\n    function getTypeTest(name) {\n      var test;\n      for (var i = 0; i < typed.types.length; i++) {\n        var entry = typed.types[i];\n        if (entry.name === name) {\n          test = entry.test;\n          break;\n        }\n      }\n\n      if (!test) {\n        var hint;\n        for (i = 0; i < typed.types.length; i++) {\n          entry = typed.types[i];\n          if (entry.name.toLowerCase() == name.toLowerCase()) {\n            hint = entry.name;\n            break;\n          }\n        }\n\n        throw new Error('Unknown type \"' + name + '\"' +\n            (hint ? ('. Did you mean \"' + hint + '\"?') : ''));\n      }\n      return test;\n    }\n\n    /**\n     * Retrieve the function name from a set of functions, and check\n     * whether the name of all functions match (if given)\n     * @param {Array.<function>} fns\n     */\n    function getName (fns) {\n      var name = '';\n\n      for (var i = 0; i < fns.length; i++) {\n        var fn = fns[i];\n\n        // merge function name when this is a typed function\n        if (fn.signatures && fn.name != '') {\n          if (name == '') {\n            name = fn.name;\n          }\n          else if (name != fn.name) {\n            var err = new Error('Function names do not match (expected: ' + name + ', actual: ' + fn.name + ')');\n            err.data = {\n              actual: fn.name,\n              expected: name\n            };\n            throw err;\n          }\n        }\n      }\n\n      return name;\n    }\n\n    /**\n     * Create an ArgumentsError. Creates messages like:\n     *\n     *   Unexpected type of argument (expected: ..., actual: ..., index: ...)\n     *   Too few arguments (expected: ..., index: ...)\n     *   Too many arguments (expected: ..., actual: ...)\n     *\n     * @param {String} fn         Function name\n     * @param {number} argCount   Number of arguments\n     * @param {Number} index      Current argument index\n     * @param {*} actual          Current argument\n     * @param {string} [expected] An optional, comma separated string with\n     *                            expected types on given index\n     * @extends Error\n     */\n    function createError(fn, argCount, index, actual, expected) {\n      var actualType = getTypeOf(actual);\n      var _expected = expected ? expected.split(',') : null;\n      var _fn = (fn || 'unnamed');\n      var anyType = _expected && contains(_expected, 'any');\n      var message;\n      var data = {\n        fn: fn,\n        index: index,\n        actual: actual,\n        expected: _expected\n      };\n\n      if (_expected) {\n        if (argCount > index && !anyType) {\n          // unexpected type\n          message = 'Unexpected type of argument in function ' + _fn +\n              ' (expected: ' + _expected.join(' or ') + ', actual: ' + actualType + ', index: ' + index + ')';\n        }\n        else {\n          // too few arguments\n          message = 'Too few arguments in function ' + _fn +\n              ' (expected: ' + _expected.join(' or ') + ', index: ' + index + ')';\n        }\n      }\n      else {\n        // too many arguments\n        message = 'Too many arguments in function ' + _fn +\n            ' (expected: ' + index + ', actual: ' + argCount + ')'\n      }\n\n      var err = new TypeError(message);\n      err.data = data;\n      return err;\n    }\n\n    /**\n     * Collection with function references (local shortcuts to functions)\n     * @constructor\n     * @param {string} [name='refs']  Optional name for the refs, used to generate\n     *                                JavaScript code\n     */\n    function Refs(name) {\n      this.name = name || 'refs';\n      this.categories = {};\n    }\n\n    /**\n     * Add a function reference.\n     * @param {Function} fn\n     * @param {string} [category='fn']    A function category, like 'fn' or 'signature'\n     * @returns {string} Returns the function name, for example 'fn0' or 'signature2'\n     */\n    Refs.prototype.add = function (fn, category) {\n      var cat = category || 'fn';\n      if (!this.categories[cat]) this.categories[cat] = [];\n\n      var index = this.categories[cat].indexOf(fn);\n      if (index == -1) {\n        index = this.categories[cat].length;\n        this.categories[cat].push(fn);\n      }\n\n      return cat + index;\n    };\n\n    /**\n     * Create code lines for all function references\n     * @returns {string} Returns the code containing all function references\n     */\n    Refs.prototype.toCode = function () {\n      var code = [];\n      var path = this.name + '.categories';\n      var categories = this.categories;\n\n      for (var cat in categories) {\n        if (categories.hasOwnProperty(cat)) {\n          var category = categories[cat];\n\n          for (var i = 0; i < category.length; i++) {\n            code.push('var ' + cat + i + ' = ' + path + '[\\'' + cat + '\\'][' + i + '];');\n          }\n        }\n      }\n\n      return code.join('\\n');\n    };\n\n    /**\n     * A function parameter\n     * @param {string | string[] | Param} types    A parameter type like 'string',\n     *                                             'number | boolean'\n     * @param {boolean} [varArgs=false]            Variable arguments if true\n     * @constructor\n     */\n    function Param(types, varArgs) {\n      // parse the types, can be a string with types separated by pipe characters |\n      if (typeof types === 'string') {\n        // parse variable arguments operator (ellipses '...number')\n        var _types = types.trim();\n        var _varArgs = _types.substr(0, 3) === '...';\n        if (_varArgs) {\n          _types = _types.substr(3);\n        }\n        if (_types === '') {\n          this.types = ['any'];\n        }\n        else {\n          this.types = _types.split('|');\n          for (var i = 0; i < this.types.length; i++) {\n            this.types[i] = this.types[i].trim();\n          }\n        }\n      }\n      else if (Array.isArray(types)) {\n        this.types = types;\n      }\n      else if (types instanceof Param) {\n        return types.clone();\n      }\n      else {\n        throw new Error('String or Array expected');\n      }\n\n      // can hold a type to which to convert when handling this parameter\n      this.conversions = [];\n      // TODO: implement better API for conversions, be able to add conversions via constructor (support a new type Object?)\n\n      // variable arguments\n      this.varArgs = _varArgs || varArgs || false;\n\n      // check for any type arguments\n      this.anyType = this.types.indexOf('any') !== -1;\n    }\n\n    /**\n     * Order Params\n     * any type ('any') will be ordered last, and object as second last (as other\n     * types may be an object as well, like Array).\n     *\n     * @param {Param} a\n     * @param {Param} b\n     * @returns {number} Returns 1 if a > b, -1 if a < b, and else 0.\n     */\n    Param.compare = function (a, b) {\n      // TODO: simplify parameter comparison, it's a mess\n      if (a.anyType) return 1;\n      if (b.anyType) return -1;\n\n      if (contains(a.types, 'Object')) return 1;\n      if (contains(b.types, 'Object')) return -1;\n\n      if (a.hasConversions()) {\n        if (b.hasConversions()) {\n          var i, ac, bc;\n\n          for (i = 0; i < a.conversions.length; i++) {\n            if (a.conversions[i] !== undefined) {\n              ac = a.conversions[i];\n              break;\n            }\n          }\n\n          for (i = 0; i < b.conversions.length; i++) {\n            if (b.conversions[i] !== undefined) {\n              bc = b.conversions[i];\n              break;\n            }\n          }\n\n          return typed.conversions.indexOf(ac) - typed.conversions.indexOf(bc);\n        }\n        else {\n          return 1;\n        }\n      }\n      else {\n        if (b.hasConversions()) {\n          return -1;\n        }\n        else {\n          // both params have no conversions\n          var ai, bi;\n\n          for (i = 0; i < typed.types.length; i++) {\n            if (typed.types[i].name === a.types[0]) {\n              ai = i;\n              break;\n            }\n          }\n\n          for (i = 0; i < typed.types.length; i++) {\n            if (typed.types[i].name === b.types[0]) {\n              bi = i;\n              break;\n            }\n          }\n\n          return ai - bi;\n        }\n      }\n    };\n\n    /**\n     * Test whether this parameters types overlap an other parameters types.\n     * Will not match ['any'] with ['number']\n     * @param {Param} other\n     * @return {boolean} Returns true when there are overlapping types\n     */\n    Param.prototype.overlapping = function (other) {\n      for (var i = 0; i < this.types.length; i++) {\n        if (contains(other.types, this.types[i])) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    /**\n     * Test whether this parameters types matches an other parameters types.\n     * When any of the two parameters contains `any`, true is returned\n     * @param {Param} other\n     * @return {boolean} Returns true when there are matching types\n     */\n    Param.prototype.matches = function (other) {\n      return this.anyType || other.anyType || this.overlapping(other);\n    };\n\n    /**\n     * Create a clone of this param\n     * @returns {Param} Returns a cloned version of this param\n     */\n    Param.prototype.clone = function () {\n      var param = new Param(this.types.slice(), this.varArgs);\n      param.conversions = this.conversions.slice();\n      return param;\n    };\n\n    /**\n     * Test whether this parameter contains conversions\n     * @returns {boolean} Returns true if the parameter contains one or\n     *                    multiple conversions.\n     */\n    Param.prototype.hasConversions = function () {\n      return this.conversions.length > 0;\n    };\n\n    /**\n     * Tests whether this parameters contains any of the provided types\n     * @param {Object} types  A Map with types, like {'number': true}\n     * @returns {boolean}     Returns true when the parameter contains any\n     *                        of the provided types\n     */\n    Param.prototype.contains = function (types) {\n      for (var i = 0; i < this.types.length; i++) {\n        if (types[this.types[i]]) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    /**\n     * Return a string representation of this params types, like 'string' or\n     * 'number | boolean' or '...number'\n     * @param {boolean} [toConversion]   If true, the returned types string\n     *                                   contains the types where the parameter\n     *                                   will convert to. If false (default)\n     *                                   the \"from\" types are returned\n     * @returns {string}\n     */\n    Param.prototype.toString = function (toConversion) {\n      var types = [];\n      var keys = {};\n\n      for (var i = 0; i < this.types.length; i++) {\n        var conversion = this.conversions[i];\n        var type = toConversion && conversion ? conversion.to : this.types[i];\n        if (!(type in keys)) {\n          keys[type] = true;\n          types.push(type);\n        }\n      }\n\n      return (this.varArgs ? '...' : '') + types.join('|');\n    };\n\n    /**\n     * A function signature\n     * @param {string | string[] | Param[]} params\n     *                         Array with the type(s) of each parameter,\n     *                         or a comma separated string with types\n     * @param {Function} fn    The actual function\n     * @constructor\n     */\n    function Signature(params, fn) {\n      var _params;\n      if (typeof params === 'string') {\n        _params = (params !== '') ? params.split(',') : [];\n      }\n      else if (Array.isArray(params)) {\n        _params = params;\n      }\n      else {\n        throw new Error('string or Array expected');\n      }\n\n      this.params = new Array(_params.length);\n      this.anyType = false;\n      this.varArgs = false;\n      for (var i = 0; i < _params.length; i++) {\n        var param = new Param(_params[i]);\n        this.params[i] = param;\n        if (param.anyType) {\n          this.anyType = true;\n        }\n        if (i === _params.length - 1) {\n          // the last argument\n          this.varArgs = param.varArgs;\n        }\n        else {\n          // non-last argument\n          if (param.varArgs) {\n            throw new SyntaxError('Unexpected variable arguments operator \"...\"');\n          }\n        }\n      }\n\n      this.fn = fn;\n    }\n\n    /**\n     * Create a clone of this signature\n     * @returns {Signature} Returns a cloned version of this signature\n     */\n    Signature.prototype.clone = function () {\n      return new Signature(this.params.slice(), this.fn);\n    };\n\n    /**\n     * Expand a signature: split params with union types in separate signatures\n     * For example split a Signature \"string | number\" into two signatures.\n     * @return {Signature[]} Returns an array with signatures (at least one)\n     */\n    Signature.prototype.expand = function () {\n      var signatures = [];\n\n      function recurse(signature, path) {\n        if (path.length < signature.params.length) {\n          var i, newParam, conversion;\n\n          var param = signature.params[path.length];\n          if (param.varArgs) {\n            // a variable argument. do not split the types in the parameter\n            newParam = param.clone();\n\n            // add conversions to the parameter\n            // recurse for all conversions\n            for (i = 0; i < typed.conversions.length; i++) {\n              conversion = typed.conversions[i];\n              if (!contains(param.types, conversion.from) && contains(param.types, conversion.to)) {\n                var j = newParam.types.length;\n                newParam.types[j] = conversion.from;\n                newParam.conversions[j] = conversion;\n              }\n            }\n\n            recurse(signature, path.concat(newParam));\n          }\n          else {\n            // split each type in the parameter\n            for (i = 0; i < param.types.length; i++) {\n              recurse(signature, path.concat(new Param(param.types[i])));\n            }\n\n            // recurse for all conversions\n            for (i = 0; i < typed.conversions.length; i++) {\n              conversion = typed.conversions[i];\n              if (!contains(param.types, conversion.from) && contains(param.types, conversion.to)) {\n                newParam = new Param(conversion.from);\n                newParam.conversions[0] = conversion;\n                recurse(signature, path.concat(newParam));\n              }\n            }\n          }\n        }\n        else {\n          signatures.push(new Signature(path, signature.fn));\n        }\n      }\n\n      recurse(this, []);\n\n      return signatures;\n    };\n\n    /**\n     * Compare two signatures.\n     *\n     * When two params are equal and contain conversions, they will be sorted\n     * by lowest index of the first conversions.\n     *\n     * @param {Signature} a\n     * @param {Signature} b\n     * @returns {number} Returns 1 if a > b, -1 if a < b, and else 0.\n     */\n    Signature.compare = function (a, b) {\n      if (a.params.length > b.params.length) return 1;\n      if (a.params.length < b.params.length) return -1;\n\n      // count the number of conversions\n      var i;\n      var len = a.params.length; // a and b have equal amount of params\n      var ac = 0;\n      var bc = 0;\n      for (i = 0; i < len; i++) {\n        if (a.params[i].hasConversions()) ac++;\n        if (b.params[i].hasConversions()) bc++;\n      }\n\n      if (ac > bc) return 1;\n      if (ac < bc) return -1;\n\n      // compare the order per parameter\n      for (i = 0; i < a.params.length; i++) {\n        var cmp = Param.compare(a.params[i], b.params[i]);\n        if (cmp !== 0) {\n          return cmp;\n        }\n      }\n\n      return 0;\n    };\n\n    /**\n     * Test whether any of the signatures parameters has conversions\n     * @return {boolean} Returns true when any of the parameters contains\n     *                   conversions.\n     */\n    Signature.prototype.hasConversions = function () {\n      for (var i = 0; i < this.params.length; i++) {\n        if (this.params[i].hasConversions()) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    /**\n     * Test whether this signature should be ignored.\n     * Checks whether any of the parameters contains a type listed in\n     * typed.ignore\n     * @return {boolean} Returns true when the signature should be ignored\n     */\n    Signature.prototype.ignore = function () {\n      // create a map with ignored types\n      var types = {};\n      for (var i = 0; i < typed.ignore.length; i++) {\n        types[typed.ignore[i]] = true;\n      }\n\n      // test whether any of the parameters contains this type\n      for (i = 0; i < this.params.length; i++) {\n        if (this.params[i].contains(types)) {\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    /**\n     * Test whether the path of this signature matches a given path.\n     * @param {Param[]} params\n     */\n    Signature.prototype.paramsStartWith = function (params) {\n      if (params.length === 0) {\n        return true;\n      }\n\n      var aLast = last(this.params);\n      var bLast = last(params);\n\n      for (var i = 0; i < params.length; i++) {\n        var a = this.params[i] || (aLast.varArgs ? aLast: null);\n        var b = params[i]      || (bLast.varArgs ? bLast: null);\n\n        if (!a ||  !b || !a.matches(b)) {\n          return false;\n        }\n      }\n\n      return true;\n    };\n\n    /**\n     * Generate the code to invoke this signature\n     * @param {Refs} refs\n     * @param {string} prefix\n     * @returns {string} Returns code\n     */\n    Signature.prototype.toCode = function (refs, prefix) {\n      var code = [];\n\n      var args = new Array(this.params.length);\n      for (var i = 0; i < this.params.length; i++) {\n        var param = this.params[i];\n        var conversion = param.conversions[0];\n        if (param.varArgs) {\n          args[i] = 'varArgs';\n        }\n        else if (conversion) {\n          args[i] = refs.add(conversion.convert, 'convert') + '(arg' + i + ')';\n        }\n        else {\n          args[i] = 'arg' + i;\n        }\n      }\n\n      var ref = this.fn ? refs.add(this.fn, 'signature') : undefined;\n      if (ref) {\n        return prefix + 'return ' + ref + '(' + args.join(', ') + '); // signature: ' + this.params.join(', ');\n      }\n\n      return code.join('\\n');\n    };\n\n    /**\n     * Return a string representation of the signature\n     * @returns {string}\n     */\n    Signature.prototype.toString = function () {\n      return this.params.join(', ');\n    };\n\n    /**\n     * A group of signatures with the same parameter on given index\n     * @param {Param[]} path\n     * @param {Signature} [signature]\n     * @param {Node[]} childs\n     * @param {boolean} [fallThrough=false]\n     * @constructor\n     */\n    function Node(path, signature, childs, fallThrough) {\n      this.path = path || [];\n      this.param = path[path.length - 1] || null;\n      this.signature = signature || null;\n      this.childs = childs || [];\n      this.fallThrough = fallThrough || false;\n    }\n\n    /**\n     * Generate code for this group of signatures\n     * @param {Refs} refs\n     * @param {string} prefix\n     * @returns {string} Returns the code as string\n     */\n    Node.prototype.toCode = function (refs, prefix) {\n      // TODO: split this function in multiple functions, it's too large\n      var code = [];\n\n      if (this.param) {\n        var index = this.path.length - 1;\n        var conversion = this.param.conversions[0];\n        var comment = '// type: ' + (conversion ?\n                (conversion.from + ' (convert to ' + conversion.to + ')') :\n                this.param);\n\n        // non-root node (path is non-empty)\n        if (this.param.varArgs) {\n          if (this.param.anyType) {\n            // variable arguments with any type\n            code.push(prefix + 'if (arguments.length > ' + index + ') {');\n            code.push(prefix + '  var varArgs = [];');\n            code.push(prefix + '  for (var i = ' + index + '; i < arguments.length; i++) {');\n            code.push(prefix + '    varArgs.push(arguments[i]);');\n            code.push(prefix + '  }');\n            code.push(this.signature.toCode(refs, prefix + '  '));\n            code.push(prefix + '}');\n          }\n          else {\n            // variable arguments with a fixed type\n            var getTests = function (types, arg) {\n              var tests = [];\n              for (var i = 0; i < types.length; i++) {\n                tests[i] = refs.add(getTypeTest(types[i]), 'test') + '(' + arg + ')';\n              }\n              return tests.join(' || ');\n            }.bind(this);\n\n            var allTypes = this.param.types;\n            var exactTypes = [];\n            for (var i = 0; i < allTypes.length; i++) {\n              if (this.param.conversions[i] === undefined) {\n                exactTypes.push(allTypes[i]);\n              }\n            }\n\n            code.push(prefix + 'if (' + getTests(allTypes, 'arg' + index) + ') { ' + comment);\n            code.push(prefix + '  var varArgs = [arg' + index + '];');\n            code.push(prefix + '  for (var i = ' + (index + 1) + '; i < arguments.length; i++) {');\n            code.push(prefix + '    if (' + getTests(exactTypes, 'arguments[i]') + ') {');\n            code.push(prefix + '      varArgs.push(arguments[i]);');\n\n            for (var i = 0; i < allTypes.length; i++) {\n              var conversion_i = this.param.conversions[i];\n              if (conversion_i) {\n                var test = refs.add(getTypeTest(allTypes[i]), 'test');\n                var convert = refs.add(conversion_i.convert, 'convert');\n                code.push(prefix + '    }');\n                code.push(prefix + '    else if (' + test + '(arguments[i])) {');\n                code.push(prefix + '      varArgs.push(' + convert + '(arguments[i]));');\n              }\n            }\n            code.push(prefix + '    } else {');\n            code.push(prefix + '      throw createError(name, arguments.length, i, arguments[i], \\'' + exactTypes.join(',') + '\\');');\n            code.push(prefix + '    }');\n            code.push(prefix + '  }');\n            code.push(this.signature.toCode(refs, prefix + '  '));\n            code.push(prefix + '}');\n          }\n        }\n        else {\n          if (this.param.anyType) {\n            // any type\n            code.push(prefix + '// type: any');\n            code.push(this._innerCode(refs, prefix));\n          }\n          else {\n            // regular type\n            var type = this.param.types[0];\n            var test = type !== 'any' ? refs.add(getTypeTest(type), 'test') : null;\n\n            code.push(prefix + 'if (' + test + '(arg' + index + ')) { ' + comment);\n            code.push(this._innerCode(refs, prefix + '  '));\n            code.push(prefix + '}');\n          }\n        }\n      }\n      else {\n        // root node (path is empty)\n        code.push(this._innerCode(refs, prefix));\n      }\n\n      return code.join('\\n');\n    };\n\n    /**\n     * Generate inner code for this group of signatures.\n     * This is a helper function of Node.prototype.toCode\n     * @param {Refs} refs\n     * @param {string} prefix\n     * @returns {string} Returns the inner code as string\n     * @private\n     */\n    Node.prototype._innerCode = function (refs, prefix) {\n      var code = [];\n      var i;\n\n      if (this.signature) {\n        code.push(prefix + 'if (arguments.length === ' + this.path.length + ') {');\n        code.push(this.signature.toCode(refs, prefix + '  '));\n        code.push(prefix + '}');\n      }\n\n      for (i = 0; i < this.childs.length; i++) {\n        code.push(this.childs[i].toCode(refs, prefix));\n      }\n\n      // TODO: shouldn't the this.param.anyType check be redundant\n      if (!this.fallThrough || (this.param && this.param.anyType)) {\n        var exceptions = this._exceptions(refs, prefix);\n        if (exceptions) {\n          code.push(exceptions);\n        }\n      }\n\n      return code.join('\\n');\n    };\n\n\n    /**\n     * Generate code to throw exceptions\n     * @param {Refs} refs\n     * @param {string} prefix\n     * @returns {string} Returns the inner code as string\n     * @private\n     */\n    Node.prototype._exceptions = function (refs, prefix) {\n      var index = this.path.length;\n\n      if (this.childs.length === 0) {\n        // TODO: can this condition be simplified? (we have a fall-through here)\n        return [\n          prefix + 'if (arguments.length > ' + index + ') {',\n          prefix + '  throw createError(name, arguments.length, ' + index + ', arguments[' + index + ']);',\n          prefix + '}'\n        ].join('\\n');\n      }\n      else {\n        var keys = {};\n        var types = [];\n\n        for (var i = 0; i < this.childs.length; i++) {\n          var node = this.childs[i];\n          if (node.param) {\n            for (var j = 0; j < node.param.types.length; j++) {\n              var type = node.param.types[j];\n              if (!(type in keys) && !node.param.conversions[j]) {\n                keys[type] = true;\n                types.push(type);\n              }\n            }\n          }\n        }\n\n        return prefix + 'throw createError(name, arguments.length, ' + index + ', arguments[' + index + '], \\'' + types.join(',') + '\\');';\n      }\n    };\n\n    /**\n     * Split all raw signatures into an array with expanded Signatures\n     * @param {Object.<string, Function>} rawSignatures\n     * @return {Signature[]} Returns an array with expanded signatures\n     */\n    function parseSignatures(rawSignatures) {\n      // FIXME: need to have deterministic ordering of signatures, do not create via object\n      var signature;\n      var keys = {};\n      var signatures = [];\n      var i;\n\n      for (var types in rawSignatures) {\n        if (rawSignatures.hasOwnProperty(types)) {\n          var fn = rawSignatures[types];\n          signature = new Signature(types, fn);\n\n          if (signature.ignore()) {\n            continue;\n          }\n\n          var expanded = signature.expand();\n\n          for (i = 0; i < expanded.length; i++) {\n            var signature_i = expanded[i];\n            var key = signature_i.toString();\n            var existing = keys[key];\n            if (!existing) {\n              keys[key] = signature_i;\n            }\n            else {\n              var cmp = Signature.compare(signature_i, existing);\n              if (cmp < 0) {\n                // override if sorted first\n                keys[key] = signature_i;\n              }\n              else if (cmp === 0) {\n                throw new Error('Signature \"' + key + '\" is defined twice');\n              }\n              // else: just ignore\n            }\n          }\n        }\n      }\n\n      // convert from map to array\n      for (key in keys) {\n        if (keys.hasOwnProperty(key)) {\n          signatures.push(keys[key]);\n        }\n      }\n\n      // order the signatures\n      signatures.sort(function (a, b) {\n        return Signature.compare(a, b);\n      });\n\n      // filter redundant conversions from signatures with varArgs\n      // TODO: simplify this loop or move it to a separate function\n      for (i = 0; i < signatures.length; i++) {\n        signature = signatures[i];\n\n        if (signature.varArgs) {\n          var index = signature.params.length - 1;\n          var param = signature.params[index];\n\n          var t = 0;\n          while (t < param.types.length) {\n            if (param.conversions[t]) {\n              var type = param.types[t];\n\n              for (var j = 0; j < signatures.length; j++) {\n                var other = signatures[j];\n                var p = other.params[index];\n\n                if (other !== signature &&\n                    p &&\n                    contains(p.types, type) && !p.conversions[index]) {\n                  // this (conversion) type already exists, remove it\n                  param.types.splice(t, 1);\n                  param.conversions.splice(t, 1);\n                  t--;\n                  break;\n                }\n              }\n            }\n            t++;\n          }\n        }\n      }\n\n      return signatures;\n    }\n\n    /**\n     * Filter all any type signatures\n     * @param {Signature[]} signatures\n     * @return {Signature[]} Returns only any type signatures\n     */\n    function filterAnyTypeSignatures (signatures) {\n      var filtered = [];\n\n      for (var i = 0; i < signatures.length; i++) {\n        if (signatures[i].anyType) {\n          filtered.push(signatures[i]);\n        }\n      }\n\n      return filtered;\n    }\n\n    /**\n     * create a map with normalized signatures as key and the function as value\n     * @param {Signature[]} signatures   An array with split signatures\n     * @return {Object.<string, Function>} Returns a map with normalized\n     *                                     signatures as key, and the function\n     *                                     as value.\n     */\n    function mapSignatures(signatures) {\n      var normalized = {};\n\n      for (var i = 0; i < signatures.length; i++) {\n        var signature = signatures[i];\n        if (signature.fn && !signature.hasConversions()) {\n          var params = signature.params.join(',');\n          normalized[params] = signature.fn;\n        }\n      }\n\n      return normalized;\n    }\n\n    /**\n     * Parse signatures recursively in a node tree.\n     * @param {Signature[]} signatures  Array with expanded signatures\n     * @param {Param[]} path            Traversed path of parameter types\n     * @param {Signature[]} anys\n     * @return {Node}                   Returns a node tree\n     */\n    function parseTree(signatures, path, anys) {\n      var i, signature;\n      var index = path.length;\n      var nodeSignature;\n\n      var filtered = [];\n      for (i = 0; i < signatures.length; i++) {\n        signature = signatures[i];\n\n        // filter the first signature with the correct number of params\n        if (signature.params.length === index && !nodeSignature) {\n          nodeSignature = signature;\n        }\n\n        if (signature.params[index] != undefined) {\n          filtered.push(signature);\n        }\n      }\n\n      // sort the filtered signatures by param\n      filtered.sort(function (a, b) {\n        return Param.compare(a.params[index], b.params[index]);\n      });\n\n      // recurse over the signatures\n      var entries = [];\n      for (i = 0; i < filtered.length; i++) {\n        signature = filtered[i];\n        // group signatures with the same param at current index\n        var param = signature.params[index];\n\n        // TODO: replace the next filter loop\n        var existing = entries.filter(function (entry) {\n          return entry.param.overlapping(param);\n        })[0];\n\n        //var existing;\n        //for (var j = 0; j < entries.length; j++) {\n        //  if (entries[j].param.overlapping(param)) {\n        //    existing = entries[j];\n        //    break;\n        //  }\n        //}\n\n        if (existing) {\n          if (existing.param.varArgs) {\n            throw new Error('Conflicting types \"' + existing.param + '\" and \"' + param + '\"');\n          }\n          existing.signatures.push(signature);\n        }\n        else {\n          entries.push({\n            param: param,\n            signatures: [signature]\n          });\n        }\n      }\n\n      // find all any type signature that can still match our current path\n      var matchingAnys = [];\n      for (i = 0; i < anys.length; i++) {\n        if (anys[i].paramsStartWith(path)) {\n          matchingAnys.push(anys[i]);\n        }\n      }\n\n      // see if there are any type signatures that don't match any of the\n      // signatures that we have in our tree, i.e. we have alternative\n      // matching signature(s) outside of our current tree and we should\n      // fall through to them instead of throwing an exception\n      var fallThrough = false;\n      for (i = 0; i < matchingAnys.length; i++) {\n        if (!contains(signatures, matchingAnys[i])) {\n          fallThrough = true;\n          break;\n        }\n      }\n\n      // parse the childs\n      var childs = new Array(entries.length);\n      for (i = 0; i < entries.length; i++) {\n        var entry = entries[i];\n        childs[i] = parseTree(entry.signatures, path.concat(entry.param), matchingAnys)\n      }\n\n      return new Node(path, nodeSignature, childs, fallThrough);\n    }\n\n    /**\n     * Generate an array like ['arg0', 'arg1', 'arg2']\n     * @param {number} count Number of arguments to generate\n     * @returns {Array} Returns an array with argument names\n     */\n    function getArgs(count) {\n      // create an array with all argument names\n      var args = [];\n      for (var i = 0; i < count; i++) {\n        args[i] = 'arg' + i;\n      }\n\n      return args;\n    }\n\n    /**\n     * Compose a function from sub-functions each handling a single type signature.\n     * Signatures:\n     *   typed(signature: string, fn: function)\n     *   typed(name: string, signature: string, fn: function)\n     *   typed(signatures: Object.<string, function>)\n     *   typed(name: string, signatures: Object.<string, function>)\n     *\n     * @param {string | null} name\n     * @param {Object.<string, Function>} signatures\n     * @return {Function} Returns the typed function\n     * @private\n     */\n    function _typed(name, signatures) {\n      var refs = new Refs();\n\n      // parse signatures, expand them\n      var _signatures = parseSignatures(signatures);\n      if (_signatures.length == 0) {\n        throw new Error('No signatures provided');\n      }\n\n      // filter all any type signatures\n      var anys = filterAnyTypeSignatures(_signatures);\n\n      // parse signatures into a node tree\n      var node = parseTree(_signatures, [], anys);\n\n      //var util = require('util');\n      //console.log('ROOT');\n      //console.log(util.inspect(node, { depth: null }));\n\n      // generate code for the typed function\n      var code = [];\n      var _name = name || '';\n      var _args = getArgs(maxParams(_signatures));\n      code.push('function ' + _name + '(' + _args.join(', ') + ') {');\n      code.push('  \"use strict\";');\n      code.push('  var name = \\'' + _name + '\\';');\n      code.push(node.toCode(refs, '  ', false));\n      code.push('}');\n\n      // generate body for the factory function\n      var body = [\n        refs.toCode(),\n        'return ' + code.join('\\n')\n      ].join('\\n');\n\n      // evaluate the JavaScript code and attach function references\n      var factory = (new Function(refs.name, 'createError', body));\n      var fn = factory(refs, createError);\n\n      //console.log('FN\\n' + fn.toString()); // TODO: cleanup\n\n      // attach the signatures with sub-functions to the constructed function\n      fn.signatures = mapSignatures(_signatures);\n\n      return fn;\n    }\n\n    /**\n     * Calculate the maximum number of parameters in givens signatures\n     * @param {Signature[]} signatures\n     * @returns {number} The maximum number of parameters\n     */\n    function maxParams(signatures) {\n      var max = 0;\n\n      for (var i = 0; i < signatures.length; i++) {\n        var len = signatures[i].params.length;\n        if (len > max) {\n          max = len;\n        }\n      }\n\n      return max;\n    }\n\n    /**\n     * Get the type of a value\n     * @param {*} x\n     * @returns {string} Returns a string with the type of value\n     */\n    function getTypeOf(x) {\n      var obj;\n\n      for (var i = 0; i < typed.types.length; i++) {\n        var entry = typed.types[i];\n\n        if (entry.name === 'Object') {\n          // Array and Date are also Object, so test for Object afterwards\n          obj = entry;\n        }\n        else {\n          if (entry.test(x)) return entry.name;\n        }\n      }\n\n      // at last, test whether an object\n      if (obj && obj.test(x)) return obj.name;\n\n      return 'unknown';\n    }\n\n    /**\n     * Test whether an array contains some item\n     * @param {Array} array\n     * @param {*} item\n     * @return {boolean} Returns true if array contains item, false if not.\n     */\n    function contains(array, item) {\n      return array.indexOf(item) !== -1;\n    }\n\n    /**\n     * Returns the last item in the array\n     * @param {Array} array\n     * @return {*} item\n     */\n    function last (array) {\n      return array[array.length - 1];\n    }\n\n    // data type tests\n    var types = [\n      { name: 'number',    test: function (x) { return typeof x === 'number' } },\n      { name: 'string',    test: function (x) { return typeof x === 'string' } },\n      { name: 'boolean',   test: function (x) { return typeof x === 'boolean' } },\n      { name: 'Function',  test: function (x) { return typeof x === 'function'} },\n      { name: 'Array',     test: Array.isArray },\n      { name: 'Date',      test: function (x) { return x instanceof Date } },\n      { name: 'RegExp',    test: function (x) { return x instanceof RegExp } },\n      { name: 'Object',    test: function (x) { return typeof x === 'object' } },\n      { name: 'null',      test: function (x) { return x === null } },\n      { name: 'undefined', test: function (x) { return x === undefined } }\n    ];\n\n    // configuration\n    var config = {};\n\n    // type conversions. Order is important\n    var conversions = [];\n\n    // types to be ignored\n    var ignore = [];\n\n    // temporary object for holding types and conversions, for constructing\n    // the `typed` function itself\n    // TODO: find a more elegant solution for this\n    var typed = {\n      config: config,\n      types: types,\n      conversions: conversions,\n      ignore: ignore\n    };\n\n    /**\n     * Construct the typed function itself with various signatures\n     *\n     * Signatures:\n     *\n     *   typed(signatures: Object.<string, function>)\n     *   typed(name: string, signatures: Object.<string, function>)\n     */\n    typed = _typed('typed', {\n      'Object': function (signatures) {\n        var fns = [];\n        for (var signature in signatures) {\n          if (signatures.hasOwnProperty(signature)) {\n            fns.push(signatures[signature]);\n          }\n        }\n        var name = getName(fns);\n\n        return _typed(name, signatures);\n      },\n      'string, Object': _typed,\n      // TODO: add a signature 'Array.<function>'\n      '...Function': function (fns) {\n        var err;\n        var name = getName(fns);\n        var signatures = {};\n\n        for (var i = 0; i < fns.length; i++) {\n          var fn = fns[i];\n\n          // test whether this is a typed-function\n          if (!(typeof fn.signatures === 'object')) {\n            err = new TypeError('Function is no typed-function (index: ' + i + ')');\n            err.data = {index: i};\n            throw err;\n          }\n\n          // merge the signatures\n          for (var signature in fn.signatures) {\n            if (fn.signatures.hasOwnProperty(signature)) {\n              if (signatures.hasOwnProperty(signature)) {\n                if (fn.signatures[signature] !== signatures[signature]) {\n                  err = new Error('Signature \"' + signature + '\" is defined twice');\n                  err.data = {signature: signature};\n                  throw err;\n                }\n                // else: both signatures point to the same function, that's fine\n              }\n              else {\n                signatures[signature] = fn.signatures[signature];\n              }\n            }\n          }\n        }\n\n        return _typed(name, signatures);\n      }\n    });\n\n    /**\n     * Find a specific signature from a (composed) typed function, for\n     * example:\n     *\n     *   typed.find(fn, ['number', 'string'])\n     *   typed.find(fn, 'number, string')\n     *\n     * Function find only only works for exact matches.\n     *\n     * @param {Function} fn                   A typed-function\n     * @param {string | string[]} signature   Signature to be found, can be\n     *                                        an array or a comma separated string.\n     * @return {Function}                     Returns the matching signature, or\n     *                                        throws an errror when no signature\n     *                                        is found.\n     */\n    function find (fn, signature) {\n      if (!fn.signatures) {\n        throw new TypeError('Function is no typed-function');\n      }\n\n      // normalize input\n      var arr;\n      if (typeof signature === 'string') {\n        arr = signature.split(',');\n        for (var i = 0; i < arr.length; i++) {\n          arr[i] = arr[i].trim();\n        }\n      }\n      else if (Array.isArray(signature)) {\n        arr = signature;\n      }\n      else {\n        throw new TypeError('String array or a comma separated string expected');\n      }\n\n      var str = arr.join(',');\n\n      // find an exact match\n      var match = fn.signatures[str];\n      if (match) {\n        return match;\n      }\n\n      // TODO: extend find to match non-exact signatures\n\n      throw new TypeError('Signature not found (signature: ' + (fn.name || 'unnamed') + '(' + arr.join(', ') + '))');\n    }\n\n    /**\n     * Convert a given value to another data type.\n     * @param {*} value\n     * @param {string} type\n     */\n    function convert (value, type) {\n      var from = getTypeOf(value);\n\n      // check conversion is needed\n      if (type === from) {\n        return value;\n      }\n\n      for (var i = 0; i < typed.conversions.length; i++) {\n        var conversion = typed.conversions[i];\n        if (conversion.from === from && conversion.to === type) {\n          return conversion.convert(value);\n        }\n      }\n\n      throw new Error('Cannot convert from ' + from + ' to ' + type);\n    }\n\n    // attach types and conversions to the final `typed` function\n    typed.config = config;\n    typed.types = types;\n    typed.conversions = conversions;\n    typed.ignore = ignore;\n    typed.create = create;\n    typed.find = find;\n    typed.convert = convert;\n\n    // add a type\n    typed.addType = function (type) {\n      if (!type || typeof type.name !== 'string' || typeof type.test !== 'function') {\n        throw new TypeError('Object with properties {name: string, test: function} expected');\n      }\n\n      typed.types.push(type);\n    };\n\n    // add a conversion\n    typed.addConversion = function (conversion) {\n      if (!conversion\n          || typeof conversion.from !== 'string'\n          || typeof conversion.to !== 'string'\n          || typeof conversion.convert !== 'function') {\n        throw new TypeError('Object with properties {from: string, to: string, convert: function} expected');\n      }\n\n      typed.conversions.push(conversion);\n    };\n\n    return typed;\n  }\n\n  return create();\n}));\n","'use strict';\n\n/**\n * Format a number using methods toPrecision, toFixed, toExponential.\n * @param {number | string} value\n * @constructor\n */\nfunction NumberFormatter (value) {\n  // parse the input value\n  var match = String(value).toLowerCase().match(/^0*?(-?)(\\d+\\.?\\d*)(e([+-]?\\d+))?$/);\n  if (!match) {\n    throw new SyntaxError('Invalid number');\n  }\n\n  var sign         = match[1];\n  var coefficients = match[2];\n  var exponent     = parseFloat(match[4] || '0');\n\n  var dot = coefficients.indexOf('.');\n  exponent += (dot !== -1) ? (dot - 1) : (coefficients.length - 1);\n\n  this.sign = sign;\n  this.coefficients = coefficients\n      .replace('.', '')  // remove the dot (must be removed before removing leading zeros)\n      .replace(/^0*/, function (zeros) {\n        // remove leading zeros, add their count to the exponent\n        exponent -= zeros.length;\n        return '';\n      })\n      .replace(/0*$/, '') // remove trailing zeros\n      .split('')\n      .map(function (d) {\n        return parseInt(d);\n      });\n\n  if (this.coefficients.length === 0) {\n    this.coefficients.push(0);\n    exponent++;\n  }\n\n  this.exponent = exponent;\n}\n\n\n/**\n * Format a number with engineering notation.\n * @param {number} [precision=0]        Optional number of decimals after the\n *                                      decimal point. Zero by default.\n */\nNumberFormatter.prototype.toEngineering = function(precision) {\n  var rounded = this.roundDigits(precision);\n\n  var e = rounded.exponent;\n  var c = rounded.coefficients;\n\n  // find nearest lower multiple of 3 for exponent\n  var newExp = e % 3 === 0 ? e : (e < 0 ? (e - 3) - (e % 3) : e - (e % 3));\n\n  // concatenate coefficients with necessary zeros\n  var significandsDiff = e >= 0 ? e : Math.abs(newExp);\n\n  // add zeros if necessary (for ex: 1e+8)\n  if (c.length - 1 < significandsDiff) c = c.concat(zeros(significandsDiff - (c.length - 1)));\n\n  // find difference in exponents\n  var expDiff = Math.abs(e - newExp);\n\n  var decimalIdx = 1;\n  var str = '';\n\n  // push decimal index over by expDiff times\n  while (--expDiff >= 0) decimalIdx++;\n\n  // if all coefficient values are zero after the decimal point, don't add a decimal value. \n  // otherwise concat with the rest of the coefficients\n  var decimals = c.slice(decimalIdx).join('');\n  var decimalVal = decimals.match(/[1-9]/) ? ('.' + decimals) : '';\n\n  str = c.slice(0, decimalIdx).join('') + decimalVal;\n\n  str += 'e' + (e >= 0 ? '+' : '') + newExp.toString();\n  return rounded.sign + str;\n}\n\n/**\n * Format a number with fixed notation.\n * @param {number} [precision=0]        Optional number of decimals after the\n *                                      decimal point. Zero by default.\n */\nNumberFormatter.prototype.toFixed = function (precision) {\n  var rounded = this.roundDigits(this.exponent + 1 + (precision || 0));\n  var c = rounded.coefficients;\n  var p = rounded.exponent + 1; // exponent may have changed\n\n  // append zeros if needed\n  var pp = p + (precision || 0);\n  if (c.length < pp) {\n    c = c.concat(zeros(pp - c.length));\n  }\n\n  // prepend zeros if needed\n  if (p < 0) {\n    c = zeros(-p + 1).concat(c);\n    p = 1;\n  }\n\n  // insert a dot if needed\n  if (precision) {\n    c.splice(p, 0, (p === 0) ? '0.' : '.');\n  }\n\n  return this.sign + c.join('');\n};\n\n/**\n * Format a number in exponential notation. Like '1.23e+5', '2.3e+0', '3.500e-3'\n * @param {number} [precision]  Number of digits in formatted output.\n *                              If not provided, the maximum available digits\n *                              is used.\n */\nNumberFormatter.prototype.toExponential = function (precision) {\n  // round if needed, else create a clone\n  var rounded = precision ? this.roundDigits(precision) : this.clone();\n  var c = rounded.coefficients;\n  var e = rounded.exponent;\n\n  // append zeros if needed\n  if (c.length < precision) {\n    c = c.concat(zeros(precision - c.length));\n  }\n\n  // format as `C.CCCe+EEE` or `C.CCCe-EEE`\n  var first = c.shift();\n  return this.sign + first + (c.length > 0 ? ('.' + c.join('')) : '') +\n      'e' + (e >= 0 ? '+' : '') + e;\n};\n\n/**\n * Format a number with a certain precision\n * @param {number} [precision=undefined] Optional number of digits.\n * @param {{lower: number | undefined, upper: number | undefined}} [options]\n *                                       By default:\n *                                         lower = 1e-3 (excl)\n *                                         upper = 1e+5 (incl)\n * @return {string}\n */\nNumberFormatter.prototype.toPrecision = function(precision, options) {\n  // determine lower and upper bound for exponential notation.\n  var lower = (options && options.lower !== undefined) ? options.lower : 1e-3;\n  var upper = (options && options.upper !== undefined) ? options.upper : 1e+5;\n\n  var abs = Math.abs(Math.pow(10, this.exponent));\n  if (abs < lower || abs >= upper) {\n    // exponential notation\n    return this.toExponential(precision);\n  }\n  else {\n    var rounded = precision ? this.roundDigits(precision) : this.clone();\n    var c = rounded.coefficients;\n    var e = rounded.exponent;\n\n    // append trailing zeros\n    if (c.length < precision) {\n      c = c.concat(zeros(precision - c.length));\n    }\n\n    // append trailing zeros\n    // TODO: simplify the next statement\n    c = c.concat(zeros(e - c.length + 1 +\n        (c.length < precision ? precision - c.length : 0)));\n\n    // prepend zeros\n    c = zeros(-e).concat(c);\n\n    var dot = e > 0 ? e : 0;\n    if (dot < c.length - 1) {\n      c.splice(dot + 1, 0, '.');\n    }\n\n    return this.sign + c.join('');\n  }\n};\n\n/**\n * Crete a clone of the NumberFormatter\n * @return {NumberFormatter} Returns a clone of the NumberFormatter\n */\nNumberFormatter.prototype.clone = function () {\n  var clone = new NumberFormatter('0');\n  clone.sign = this.sign;\n  clone.coefficients = this.coefficients.slice(0);\n  clone.exponent = this.exponent;\n  return clone;\n};\n\n/**\n * Round the number of digits of a number *\n * @param {number} precision  A positive integer\n * @return {NumberFormatter}  Returns a new NumberFormatter with the rounded\n *                            digits\n */\nNumberFormatter.prototype.roundDigits = function (precision) {\n  var rounded = this.clone();\n  var c = rounded.coefficients;\n\n  // prepend zeros if needed\n  while (precision <= 0) {\n    c.unshift(0);\n    rounded.exponent++;\n    precision++;\n  }\n\n  if (c.length > precision) {\n    var removed = c.splice(precision, c.length - precision);\n\n    if (removed[0] >= 5) {\n      var i = precision - 1;\n      c[i]++;\n      while (c[i] === 10) {\n        c.pop();\n        if (i === 0) {\n          c.unshift(0);\n          rounded.exponent++;\n          i++;\n        }\n        i--;\n        c[i]++;\n      }\n    }\n  }\n\n  return rounded;\n};\n\n/**\n * Create an array filled with zeros.\n * @param {number} length\n * @return {Array}\n */\nfunction zeros(length) {\n  var arr = [];\n  for (var i = 0; i < length; i++) {\n    arr.push(0);\n  }\n  return arr;\n}\n\nmodule.exports = NumberFormatter;\n","'use strict';\n\nvar NumberFormatter = require('./NumberFormatter');\n\n/**\n * Test whether value is a number\n * @param {*} value\n * @return {boolean} isNumber\n */\nexports.isNumber = function(value) {\n  return typeof value === 'number';\n};\n\n/**\n * Check if a number is integer\n * @param {number | boolean} value\n * @return {boolean} isInteger\n */\nexports.isInteger = function(value) {\n  return isFinite(value)\n      ? (value == Math.round(value))\n      : false;\n  // Note: we use ==, not ===, as we can have Booleans as well\n};\n\n/**\n * Calculate the sign of a number\n * @param {number} x\n * @returns {*}\n */\nexports.sign = Math.sign || function(x) {\n  if (x > 0) {\n    return 1;\n  }\n  else if (x < 0) {\n    return -1;\n  }\n  else {\n    return 0;\n  }\n};\n\n/**\n * Convert a number to a formatted string representation.\n *\n * Syntax:\n *\n *    format(value)\n *    format(value, options)\n *    format(value, precision)\n *    format(value, fn)\n *\n * Where:\n *\n *    {number} value   The value to be formatted\n *    {Object} options An object with formatting options. Available options:\n *                     {string} notation\n *                         Number notation. Choose from:\n *                         'fixed'          Always use regular number notation.\n *                                          For example '123.40' and '14000000'\n *                         'exponential'    Always use exponential notation.\n *                                          For example '1.234e+2' and '1.4e+7'\n *                         'engineering'    Always use engineering notation.\n *                                          For example '123.4e+0' and '14.0e+6'\n *                         'auto' (default) Regular number notation for numbers\n *                                          having an absolute value between\n *                                          `lower` and `upper` bounds, and uses\n *                                          exponential notation elsewhere.\n *                                          Lower bound is included, upper bound\n *                                          is excluded.\n *                                          For example '123.4' and '1.4e7'.\n *                     {number} precision   A number between 0 and 16 to round\n *                                          the digits of the number.\n *                                          In case of notations 'exponential' and\n *                                          'auto', `precision` defines the total\n *                                          number of significant digits returned\n *                                          and is undefined by default.\n *                                          In case of notation 'fixed',\n *                                          `precision` defines the number of\n *                                          significant digits after the decimal\n *                                          point, and is 0 by default.\n *                     {Object} exponential An object containing two parameters,\n *                                          {number} lower and {number} upper,\n *                                          used by notation 'auto' to determine\n *                                          when to return exponential notation.\n *                                          Default values are `lower=1e-3` and\n *                                          `upper=1e5`.\n *                                          Only applicable for notation `auto`.\n *    {Function} fn    A custom formatting function. Can be used to override the\n *                     built-in notations. Function `fn` is called with `value` as\n *                     parameter and must return a string. Is useful for example to\n *                     format all values inside a matrix in a particular way.\n *\n * Examples:\n *\n *    format(6.4);                                        // '6.4'\n *    format(1240000);                                    // '1.24e6'\n *    format(1/3);                                        // '0.3333333333333333'\n *    format(1/3, 3);                                     // '0.333'\n *    format(21385, 2);                                   // '21000'\n *    format(12.071, {notation: 'fixed'});                // '12'\n *    format(2.3,    {notation: 'fixed', precision: 2});  // '2.30'\n *    format(52.8,   {notation: 'exponential'});          // '5.28e+1'\n *    format(12345678, {notation: 'engineering'});        // '12.345678e+6'\n *\n * @param {number} value\n * @param {Object | Function | number} [options]\n * @return {string} str The formatted value\n */\nexports.format = function(value, options) {\n  if (typeof options === 'function') {\n    // handle format(value, fn)\n    return options(value);\n  }\n\n  // handle special cases\n  if (value === Infinity) {\n    return 'Infinity';\n  }\n  else if (value === -Infinity) {\n    return '-Infinity';\n  }\n  else if (isNaN(value)) {\n    return 'NaN';\n  }\n\n  // default values for options\n  var notation = 'auto';\n  var precision = undefined;\n\n  if (options) {\n    // determine notation from options\n    if (options.notation) {\n      notation = options.notation;\n    }\n\n    // determine precision from options\n    if (exports.isNumber(options)) {\n      precision = options;\n    }\n    else if (options.precision) {\n      precision = options.precision;\n    }\n  }\n\n  // handle the various notations\n  switch (notation) {\n    case 'fixed':\n      return exports.toFixed(value, precision);\n\n    case 'exponential':\n      return exports.toExponential(value, precision);\n\n    case 'engineering':\n      return exports.toEngineering(value, precision);\n\n    case 'auto':\n      return exports\n          .toPrecision(value, precision, options && options.exponential)\n\n          // remove trailing zeros after the decimal point\n          .replace(/((\\.\\d*?)(0+))($|e)/, function () {\n            var digits = arguments[2];\n            var e = arguments[4];\n            return (digits !== '.') ? digits + e : e;\n          });\n\n    default:\n      throw new Error('Unknown notation \"' + notation + '\". ' +\n          'Choose \"auto\", \"exponential\", or \"fixed\".');\n  }\n};\n\n/**\n * Format a number in exponential notation. Like '1.23e+5', '2.3e+0', '3.500e-3'\n * @param {number} value\n * @param {number} [precision]  Number of digits in formatted output.\n *                              If not provided, the maximum available digits\n *                              is used.\n * @returns {string} str\n */\nexports.toExponential = function(value, precision) {\n  return new NumberFormatter(value).toExponential(precision);\n};\n\n/**\n * Format a number in engineering notation. Like '1.23e+6', '2.3e+0', '3.500e-3'\n * @param {number} value\n * @param {number} [precision]  Number of digits in formatted output.\n *                              If not provided, the maximum available digits\n *                              is used.\n * @returns {string} str\n */\nexports.toEngineering = function(value, precision) {\n  return new NumberFormatter(value).toEngineering(precision);\n};\n\n/**\n * Format a number with fixed notation.\n * @param {number} value\n * @param {number} [precision=0]        Optional number of decimals after the\n *                                      decimal point. Zero by default.\n */\nexports.toFixed = function(value, precision) {\n  return new NumberFormatter(value).toFixed(precision);\n};\n\n/**\n * Format a number with a certain precision\n * @param {number} value\n * @param {number} [precision=undefined] Optional number of digits.\n * @param {{lower: number, upper: number}} [options]  By default:\n *                                                    lower = 1e-3 (excl)\n *                                                    upper = 1e+5 (incl)\n * @return {string}\n */\nexports.toPrecision = function(value, precision, options) {\n  return new NumberFormatter(value).toPrecision(precision, options);\n};\n\n/**\n * Count the number of significant digits of a number.\n *\n * For example:\n *   2.34 returns 3\n *   0.0034 returns 2\n *   120.5e+30 returns 4\n *\n * @param {number} value\n * @return {number} digits   Number of significant digits\n */\nexports.digits = function(value) {\n  return value\n      .toExponential()\n      .replace(/e.*$/, '')          // remove exponential notation\n      .replace( /^0\\.?0*|\\./, '')   // remove decimal point and leading zeros\n      .length\n};\n\n/**\n * Minimum number added to one that makes the result different than one\n */\nexports.DBL_EPSILON = Number.EPSILON || 2.2204460492503130808472633361816E-16;\n\n/**\n * Compares two floating point numbers.\n * @param {number} x          First value to compare\n * @param {number} y          Second value to compare\n * @param {number} [epsilon]  The maximum relative difference between x and y\n *                            If epsilon is undefined or null, the function will\n *                            test whether x and y are exactly equal.\n * @return {boolean} whether the two numbers are nearly equal\n*/\nexports.nearlyEqual = function(x, y, epsilon) {\n  // if epsilon is null or undefined, test whether x and y are exactly equal\n  if (epsilon == null) {\n    return x == y;\n  }\n\n  // use \"==\" operator, handles infinities\n  if (x == y) {\n    return true;\n  }\n\n  // NaN\n  if (isNaN(x) || isNaN(y)) {\n    return false;\n  }\n\n  // at this point x and y should be finite\n  if(isFinite(x) && isFinite(y)) {\n    // check numbers are very close, needed when comparing numbers near zero\n    var diff = Math.abs(x - y);\n    if (diff < exports.DBL_EPSILON) {\n      return true;\n    }\n    else {\n      // use relative error\n      return diff <= Math.max(Math.abs(x), Math.abs(y)) * epsilon;\n    }\n  }\n\n  // Infinite and Number or negative Infinite and positive Infinite cases\n  return false;\n};\n","var typedFunction = require('typed-function');\nvar digits = require('./../utils/number').digits;\n\n// returns a new instance of typed-function\nvar createTyped = function () {\n  // initially, return the original instance of typed-function\n  // consecutively, return a new instance from typed.create.\n  createTyped = typedFunction.create;\n  return typedFunction;\n};\n\n/**\n * Factory function for creating a new typed instance\n * @param {Object} type   Object with data types like Complex and BigNumber\n * @returns {Function}\n */\nexports.create = function create(type) {\n  // TODO: typed-function must be able to silently ignore signatures with unknown data types\n\n  // get a new instance of typed-function\n  var typed = createTyped();\n\n  // define all types. The order of the types determines in which order function\n  // arguments are type-checked (so for performance it's important to put the\n  // most used types first).\n  typed.types = [\n    { name: 'number',               test: function (x) { return typeof x === 'number'; } },\n    { name: 'Complex',              test: function (x) { return x && x.isComplex; } },\n    { name: 'BigNumber',            test: function (x) { return x && x.isBigNumber; } },\n    { name: 'Fraction',             test: function (x) { return x && x.isFraction; } },\n    { name: 'Unit',                 test: function (x) { return x && x.isUnit; } },\n    { name: 'string',               test: function (x) { return typeof x === 'string'; } },\n    { name: 'Array',                test: Array.isArray },\n    { name: 'Matrix',               test: function (x) { return x && x.isMatrix; } },\n    { name: 'DenseMatrix',          test: function (x) { return x && x.isDenseMatrix; } },\n    { name: 'SparseMatrix',         test: function (x) { return x && x.isSparseMatrix; } },\n    { name: 'ImmutableDenseMatrix', test: function (x) { return x && x.isImmutableDenseMatrix; } },\n    { name: 'Range',                test: function (x) { return x && x.isRange; } },\n    { name: 'Index',                test: function (x) { return x && x.isIndex; } },\n    { name: 'boolean',              test: function (x) { return typeof x === 'boolean'; } },\n    { name: 'ResultSet',            test: function (x) { return x && x.isResultSet; } },\n    { name: 'Help',                 test: function (x) { return x && x.isHelp; } },\n    { name: 'function',             test: function (x) { return typeof x === 'function';} },\n    { name: 'Date',                 test: function (x) { return x instanceof Date; } },\n    { name: 'RegExp',               test: function (x) { return x instanceof RegExp; } },\n    { name: 'Object',               test: function (x) { return typeof x === 'object'; } },\n    { name: 'null',                 test: function (x) { return x === null; } },\n    { name: 'undefined',            test: function (x) { return x === undefined; } }\n  ];\n\n  // TODO: add conversion from BigNumber to number?\n  typed.conversions = [\n    {\n      from: 'number',\n      to: 'BigNumber',\n      convert: function (x) {\n        // note: conversion from number to BigNumber can fail if x has >15 digits\n        if (digits(x) > 15) {\n          throw new TypeError('Cannot implicitly convert a number with >15 significant digits to BigNumber ' +\n          '(value: ' + x + '). ' +\n          'Use function bignumber(x) to convert to BigNumber.');\n        }\n        return new type.BigNumber(x);\n      }\n    }, {\n      from: 'number',\n      to: 'Complex',\n      convert: function (x) {\n        return new type.Complex(x, 0);\n      }\n    }, {\n      from: 'number',\n      to: 'string',\n      convert: function (x) {\n        return x + '';\n      }\n    }, {\n      from: 'BigNumber',\n      to: 'Complex',\n      convert: function (x) {\n        return new type.Complex(x.toNumber(), 0);\n      }\n    }, {\n      from: 'Fraction',\n      to: 'BigNumber',\n      convert: function (x) {\n        throw new TypeError('Cannot implicitly convert a Fraction to BigNumber or vice versa. ' +\n            'Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.');\n      }\n    }, {\n      from: 'Fraction',\n      to: 'Complex',\n      convert: function (x) {\n        return new type.Complex(x.valueOf(), 0);\n      }\n    }, {\n      from: 'number',\n      to: 'Fraction',\n      convert: function (x) {\n        if (digits(x) > 15) {\n          throw new TypeError('Cannot implicitly convert a number with >15 significant digits to Fraction ' +\n              '(value: ' + x + '). ' +\n              'Use function fraction(x) to convert to Fraction.');\n        }\n        return new type.Fraction(x);\n      }\n    }, {\n    // FIXME: add conversion from Fraction to number, for example for `sqrt(fraction(1,3))`\n    //  from: 'Fraction',\n    //  to: 'number',\n    //  convert: function (x) {\n    //    return x.valueOf();\n    //  }\n    //}, {\n      from: 'string',\n      to: 'number',\n      convert: function (x) {\n        var n = Number(x);\n        if (isNaN(n)) {\n          throw new Error('Cannot convert \"' + x + '\" to a number');\n        }\n        return n;\n      }\n    }, {\n      from: 'boolean',\n      to: 'number',\n      convert: function (x) {\n        return +x;\n      }\n    }, {\n      from: 'boolean',\n      to: 'BigNumber',\n      convert: function (x) {\n        return new type.BigNumber(+x);\n      }\n    }, {\n      from: 'boolean',\n      to: 'Fraction',\n      convert: function (x) {\n        return new type.Fraction(+x);\n      }\n    }, {\n      from: 'boolean',\n      to: 'string',\n      convert: function (x) {\n        return +x;\n      }\n    }, {\n      from: 'null',\n      to: 'number',\n      convert: function () {\n        return 0;\n      }\n    }, {\n      from: 'null',\n      to: 'string',\n      convert: function () {\n        return 'null';\n      }\n    }, {\n      from: 'null',\n      to: 'BigNumber',\n      convert: function () {\n        return new type.BigNumber(0);\n      }\n    }, {\n      from: 'null',\n      to: 'Fraction',\n      convert: function () {\n        return new type.Fraction(0);\n      }\n    }, {\n      from: 'Array',\n      to: 'Matrix',\n      convert: function (array) {\n        // TODO: how to decide on the right type of matrix to create?\n        return new type.DenseMatrix(array);\n      }\n    }, {\n      from: 'Matrix',\n      to: 'Array',\n      convert: function (matrix) {\n        return matrix.valueOf();\n      }\n    }\n  ];\n\n  return typed;\n};\n","function E () {\n\t// Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n\ton: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n","var Emitter = require('tiny-emitter');\n\n/**\n * Extend given object with emitter functions `on`, `off`, `once`, `emit`\n * @param {Object} obj\n * @return {Object} obj\n */\nexports.mixin = function (obj) {\n  // create event emitter\n  var emitter = new Emitter();\n\n  // bind methods to obj (we don't want to expose the emitter.e Array...)\n  obj.on   = emitter.on.bind(emitter);\n  obj.off  = emitter.off.bind(emitter);\n  obj.once = emitter.once.bind(emitter);\n  obj.emit = emitter.emit.bind(emitter);\n\n  return obj;\n};\n","'use strict';\n\n/**\n * Create a syntax error with the message:\n *     'Wrong number of arguments in function <fn> (<count> provided, <min>-<max> expected)'\n * @param {string} fn     Function name\n * @param {number} count  Actual argument count\n * @param {number} min    Minimum required argument count\n * @param {number} [max]  Maximum required argument count\n * @extends Error\n */\nfunction ArgumentsError(fn, count, min, max) {\n  if (!(this instanceof ArgumentsError)) {\n    throw new SyntaxError('Constructor must be called with the new operator');\n  }\n\n  this.fn = fn;\n  this.count = count;\n  this.min = min;\n  this.max = max;\n\n  this.message = 'Wrong number of arguments in function ' + fn +\n      ' (' + count + ' provided, ' +\n      min + ((max != undefined) ? ('-' + max) : '') + ' expected)';\n\n  this.stack = (new Error()).stack;\n}\n\nArgumentsError.prototype = new Error();\nArgumentsError.prototype.constructor = Error;\nArgumentsError.prototype.name = 'ArgumentsError';\nArgumentsError.prototype.isArgumentsError = true;\n\nmodule.exports = ArgumentsError;\n","'use strict';\n\nvar lazy = require('../../utils/object').lazy;\nvar isFactory = require('../../utils/object').isFactory;\nvar traverse = require('../../utils/object').traverse;\nvar extend = require('../../utils/object').extend;\nvar ArgumentsError = require('../../error/ArgumentsError');\n\nfunction factory (type, config, load, typed, math) {\n  /**\n   * Import functions from an object or a module\n   *\n   * Syntax:\n   *\n   *    math.import(object)\n   *    math.import(object, options)\n   *\n   * Where:\n   *\n   * - `object: Object`\n   *   An object with functions to be imported.\n   * - `options: Object` An object with import options. Available options:\n   *   - `override: boolean`\n   *     If true, existing functions will be overwritten. False by default.\n   *   - `silent: boolean`\n   *     If true, the function will not throw errors on duplicates or invalid\n   *     types. False by default.\n   *   - `wrap: boolean`\n   *     If true, the functions will be wrapped in a wrapper function\n   *     which converts data types like Matrix to primitive data types like Array.\n   *     The wrapper is needed when extending math.js with libraries which do not\n   *     support these data type. False by default.\n   *\n   * Examples:\n   *\n   *    // define new functions and variables\n   *    math.import({\n   *      myvalue: 42,\n   *      hello: function (name) {\n   *        return 'hello, ' + name + '!';\n   *      }\n   *    });\n   *\n   *    // use the imported function and variable\n   *    math.myvalue * 2;               // 84\n   *    math.hello('user');             // 'hello, user!'\n   *\n   *    // import the npm module 'numbers'\n   *    // (must be installed first with `npm install numbers`)\n   *    math.import(require('numbers'), {wrap: true});\n   *\n   *    math.fibonacci(7); // returns 13\n   *\n   * @param {Object | Array} object   Object with functions to be imported.\n   * @param {Object} [options]        Import options.\n   */\n  function math_import(object, options) {\n    var num = arguments.length;\n    if (num != 1 && num != 2) {\n      throw new ArgumentsError('import', num, 1, 2);\n    }\n\n    if (!options) {\n      options = {};\n    }\n\n    if (isFactory(object)) {\n      _importFactory(object, options);\n    }\n    // TODO: allow a typed-function with name too\n    else if (Array.isArray(object)) {\n      object.forEach(function (entry) {\n        math_import(entry, options);\n      });\n    }\n    else if (typeof object === 'object') {\n      // a map with functions\n      for (var name in object) {\n        if (object.hasOwnProperty(name)) {\n          var value = object[name];\n          if (isSupportedType(value)) {\n            _import(name, value, options);\n          }\n          else if (isFactory(object)) {\n            _importFactory(object, options);\n          }\n          else {\n            math_import(value, options);\n          }\n        }\n      }\n    }\n    else {\n      if (!options.silent) {\n        throw new TypeError('Factory, Object, or Array expected');\n      }\n    }\n  }\n\n  /**\n   * Add a property to the math namespace and create a chain proxy for it.\n   * @param {string} name\n   * @param {*} value\n   * @param {Object} options  See import for a description of the options\n   * @private\n   */\n  function _import(name, value, options) {\n    if (options.wrap && typeof value === 'function') {\n      // create a wrapper around the function\n      value = _wrap(value);\n    }\n\n    if (isTypedFunction(math[name]) && isTypedFunction(value)) {\n      if (options.override) {\n        // give the typed function the right name\n        value = typed(name, value.signatures);\n      }\n      else {\n        // merge the existing and typed function\n        value = typed(math[name], value);\n      }\n\n      math[name] = value;\n      _importTransform(name, value);\n      math.emit('import', name, function resolver() {\n        return value;\n      });\n      return;\n    }\n\n    if (math[name] === undefined || options.override) {\n      math[name] = value;\n      _importTransform(name, value);\n      math.emit('import', name, function resolver() {\n        return value;\n      });\n      return;\n    }\n\n    if (!options.silent) {\n      throw new Error('Cannot import \"' + name + '\": already exists');\n    }\n  }\n\n  function _importTransform (name, value) {\n    if (value && typeof value.transform === 'function') {\n      math.expression.transform[name] = value.transform;\n    }\n  }\n\n  /**\n   * Create a wrapper a round an function which converts the arguments\n   * to their primitive values (like convert a Matrix to Array)\n   * @param {Function} fn\n   * @return {Function} Returns the wrapped function\n   * @private\n   */\n  function _wrap (fn) {\n    var wrapper = function wrapper () {\n      var args = [];\n      for (var i = 0, len = arguments.length; i < len; i++) {\n        var arg = arguments[i];\n        args[i] = arg && arg.valueOf();\n      }\n      return fn.apply(math, args);\n    };\n\n    if (fn.transform) {\n      wrapper.transform = fn.transform;\n    }\n\n    return wrapper;\n  }\n\n  /**\n   * Import an instance of a factory into math.js\n   * @param {{factory: Function, name: string, path: string, math: boolean}} factory\n   * @param {Object} options  See import for a description of the options\n   * @private\n   */\n  function _importFactory(factory, options) {\n    if (typeof factory.name === 'string') {\n      var name = factory.name;\n      var namespace = factory.path ? traverse(math, factory.path) : math;\n      var existing = namespace.hasOwnProperty(name) ? namespace[name] : undefined;\n\n      var resolver = function () {\n        var instance = load(factory);\n\n        if (isTypedFunction(existing) && isTypedFunction(instance)) {\n          if (options.override) {\n            // replace the existing typed function (nothing to do)\n          }\n          else {\n            // merge the existing and new typed function\n            instance = typed(existing, instance);\n          }\n\n          return instance;\n        }\n\n        if (existing === undefined || options.override) {\n          return instance;\n        }\n\n        if (!options.silent) {\n          throw new Error('Cannot import \"' + name + '\": already exists');\n        }\n      };\n\n      if (factory.lazy !== false) {\n        lazy(namespace, name, resolver);\n      }\n      else {\n        namespace[name] = resolver();\n      }\n\n      math.emit('import', name, resolver, factory.path);\n    }\n    else {\n      // unnamed factory.\n      // no lazy loading\n      load(factory);\n    }\n  }\n\n  /**\n   * Check whether given object is a type which can be imported\n   * @param {Function | number | string | boolean | null | Unit | Complex} object\n   * @return {boolean}\n   * @private\n   */\n  function isSupportedType(object) {\n    return typeof object == 'function'\n        || typeof object === 'number'\n        || typeof object === 'string'\n        || typeof object === 'boolean'\n        || object === null\n        || (object && object.isUnit === true)\n        || (object && object.isComplex === true)\n        || (object && object.isBigNumber === true)\n        || (object && object.isFraction === true)\n        || (object && object.isMatrix === true)\n        || (object && Array.isArray(object) === true)\n  }\n\n  /**\n   * Test whether a given thing is a typed-function\n   * @param {*} fn\n   * @return {boolean} Returns true when `fn` is a typed-function\n   */\n  function isTypedFunction (fn) {\n    return typeof fn === 'function' && typeof fn.signatures === 'object';\n  }\n\n  return math_import;\n}\n\nexports.math = true; // request access to the math namespace as 5th argument of the factory function\nexports.name = 'import';\nexports.factory = factory;\nexports.lazy = true;\n","'use strict';\n\nvar object = require('../../utils/object');\n\nfunction factory (type, config, load, typed, math) {\n  var MATRIX = ['Matrix', 'Array'];                   // valid values for option matrix\n  var NUMBER = ['number', 'BigNumber', 'Fraction'];   // valid values for option number\n\n  /**\n   * Set configuration options for math.js, and get current options.\n   * Will emit a 'config' event, with arguments (curr, prev).\n   *\n   * Syntax:\n   *\n   *     math.config(config: Object): Object\n   *\n   * Examples:\n   *\n   *     math.config().number;                // outputs 'number'\n   *     math.eval('0.4');                    // outputs number 0.4\n   *     math.config({number: 'Fraction'});\n   *     math.eval('0.4');                    // outputs Fraction 2/5\n   *\n   * @param {Object} [options] Available options:\n   *                            {number} epsilon\n   *                              Minimum relative difference between two\n   *                              compared values, used by all comparison functions.\n   *                            {string} matrix\n   *                              A string 'Matrix' (default) or 'Array'.\n   *                            {string} number\n   *                              A string 'number' (default), 'BigNumber', or 'Fraction'\n   *                            {number} precision\n   *                              The number of significant digits for BigNumbers.\n   *                              Not applicable for Numbers.\n   *                            {string} parenthesis\n   *                              How to display parentheses in LaTeX and string\n   *                              output.\n   * @return {Object} Returns the current configuration\n   */\n  function _config(options) {\n    if (options) {\n      var prev = object.clone(config);\n\n      // validate some of the options\n      validateOption(options, 'matrix', MATRIX);\n      validateOption(options, 'number', NUMBER);\n\n      // merge options\n      object.deepExtend(config, options);\n\n      var curr = object.clone(config);\n\n      // emit 'config' event\n      math.emit('config', curr, prev);\n\n      return curr;\n    }\n    else {\n      return object.clone(config);\n    }\n  }\n\n  // attach the valid options to the function so they can be extended\n  _config.MATRIX = MATRIX;\n  _config.NUMBER = NUMBER;\n\n  return _config;\n}\n\n/**\n * Test whether an Array contains a specific item.\n * @param {Array.<string>} array\n * @param {string} item\n * @return {boolean}\n */\nfunction contains (array, item) {\n  return array.indexOf(item) !== -1;\n}\n\n/**\n * Find a string in an array. Case insensitive search\n * @param {Array.<string>} array\n * @param {string} item\n * @return {number} Returns the index when found. Returns -1 when not found\n */\nfunction findIndex (array, item) {\n  return array\n      .map(function (i) {\n        return i.toLowerCase();\n      })\n      .indexOf(item.toLowerCase());\n}\n\n/**\n * Validate an option\n * @param {Object} options         Object with options\n * @param {string} name            Name of the option to validate\n * @param {Array.<string>} values  Array with valid values for this option\n */\nfunction validateOption(options, name, values) {\n  if (options[name] !== undefined && !contains(values, options[name])) {\n    var index = findIndex(values, options[name]);\n    if (index !== -1) {\n      // right value, wrong casing\n      // TODO: lower case values are deprecated since v3, remove this warning some day.\n      console.warn('Warning: Wrong casing for configuration option \"' + name + '\", should be \"' + values[index] + '\" instead of \"' + options[name] + '\".');\n\n      options[name] = values[index]; // change the option to the right casing\n    }\n    else {\n      // unknown value\n      console.warn('Warning: Unknown value \"' + options[name] + '\" for configuration option \"' + name + '\". Available options: ' + values.map(JSON.stringify).join(', ') + '.');\n    }\n  }\n}\n\nexports.name = 'config';\nexports.math = true; // request the math namespace as fifth argument\nexports.factory = factory;\n","var isFactory = require('./../utils/object').isFactory;\nvar deepExtend = require('./../utils/object').deepExtend;\nvar typedFactory = require('./typed');\nvar emitter = require('./../utils/emitter');\n\nvar importFactory = require('./function/import');\nvar configFactory = require('./function/config');\n\n/**\n * Math.js core. Creates a new, empty math.js instance\n * @param {Object} [options] Available options:\n *                            {number} epsilon\n *                              Minimum relative difference between two\n *                              compared values, used by all comparison functions.\n *                            {string} matrix\n *                              A string 'Matrix' (default) or 'Array'.\n *                            {string} number\n *                              A string 'number' (default), 'BigNumber', or 'Fraction'\n *                            {number} precision\n *                              The number of significant digits for BigNumbers.\n *                              Not applicable for Numbers.\n *                            {boolean} predictable\n *                              Predictable output type of functions. When true,\n *                              output type depends only on the input types. When\n *                              false (default), output type can vary depending\n *                              on input values. For example `math.sqrt(-2)`\n *                              returns `NaN` when predictable is false, and\n *                              returns `complex('2i')` when true.\n * @returns {Object} Returns a bare-bone math.js instance containing\n *                   functions:\n *                   - `import` to add new functions\n *                   - `config` to change configuration\n *                   - `on`, `off`, `once`, `emit` for events\n */\nexports.create = function create (options) {\n  // simple test for ES5 support\n  if (typeof Object.create !== 'function') {\n    throw new Error('ES5 not supported by this JavaScript engine. ' +\n    'Please load the es5-shim and es5-sham library for compatibility.');\n  }\n\n  // cached factories and instances\n  var factories = [];\n  var instances = [];\n\n  // create a namespace for the mathjs instance, and attach emitter functions\n  var math = emitter.mixin({});\n  math.type = {};\n  math.expression = {\n    transform: Object.create(math)\n  };\n\n  // create a new typed instance\n  math.typed = typedFactory.create(math.type);\n\n  // create configuration options. These are private\n  var _config = {\n    // minimum relative difference between two compared values,\n    // used by all comparison functions\n    epsilon: 1e-12,\n\n    // type of default matrix output. Choose 'matrix' (default) or 'array'\n    matrix: 'Matrix',\n\n    // type of default number output. Choose 'number' (default) 'BigNumber', or 'Fraction\n    number: 'number',\n\n    // number of significant digits in BigNumbers\n    precision: 64,\n\n    // predictable output type of functions. When true, output type depends only\n    // on the input types. When false (default), output type can vary depending\n    // on input values. For example `math.sqrt(-2)` returns `NaN` when\n    // predictable is false, and returns `complex('2i')` when true.\n    predictable: false\n  };\n\n  /**\n   * Load a function or data type from a factory.\n   * If the function or data type already exists, the existing instance is\n   * returned.\n   * @param {{type: string, name: string, factory: Function}} factory\n   * @returns {*}\n   */\n  function load (factory) {\n    if (!isFactory(factory)) {\n      throw new Error('Factory object with properties `type`, `name`, and `factory` expected');\n    }\n\n    var index = factories.indexOf(factory);\n    var instance;\n    if (index === -1) {\n      // doesn't yet exist\n      if (factory.math === true) {\n        // pass with math namespace\n        instance = factory.factory(math.type, _config, load, math.typed, math);\n      }\n      else {\n        instance = factory.factory(math.type, _config, load, math.typed);\n      }\n\n      // append to the cache\n      factories.push(factory);\n      instances.push(instance);\n    }\n    else {\n      // already existing function, return the cached instance\n      instance = instances[index];\n    }\n\n    return instance;\n  }\n\n  // load the import and config functions\n  math['import'] = load(importFactory);\n  math['config'] = load(configFactory);\n\n  // apply options\n  if (options) {\n    math.config(options);\n  }\n\n  return math;\n};\n","/**\n * Convert a BigNumber to a formatted string representation.\n *\n * Syntax:\n *\n *    format(value)\n *    format(value, options)\n *    format(value, precision)\n *    format(value, fn)\n *\n * Where:\n *\n *    {number} value   The value to be formatted\n *    {Object} options An object with formatting options. Available options:\n *                     {string} notation\n *                         Number notation. Choose from:\n *                         'fixed'          Always use regular number notation.\n *                                          For example '123.40' and '14000000'\n *                         'exponential'    Always use exponential notation.\n *                                          For example '1.234e+2' and '1.4e+7'\n *                         'auto' (default) Regular number notation for numbers\n *                                          having an absolute value between\n *                                          `lower` and `upper` bounds, and uses\n *                                          exponential notation elsewhere.\n *                                          Lower bound is included, upper bound\n *                                          is excluded.\n *                                          For example '123.4' and '1.4e7'.\n *                     {number} precision   A number between 0 and 16 to round\n *                                          the digits of the number.\n *                                          In case of notations 'exponential' and\n *                                          'auto', `precision` defines the total\n *                                          number of significant digits returned\n *                                          and is undefined by default.\n *                                          In case of notation 'fixed',\n *                                          `precision` defines the number of\n *                                          significant digits after the decimal\n *                                          point, and is 0 by default.\n *                     {Object} exponential An object containing two parameters,\n *                                          {number} lower and {number} upper,\n *                                          used by notation 'auto' to determine\n *                                          when to return exponential notation.\n *                                          Default values are `lower=1e-3` and\n *                                          `upper=1e5`.\n *                                          Only applicable for notation `auto`.\n *    {Function} fn    A custom formatting function. Can be used to override the\n *                     built-in notations. Function `fn` is called with `value` as\n *                     parameter and must return a string. Is useful for example to\n *                     format all values inside a matrix in a particular way.\n *\n * Examples:\n *\n *    format(6.4);                                        // '6.4'\n *    format(1240000);                                    // '1.24e6'\n *    format(1/3);                                        // '0.3333333333333333'\n *    format(1/3, 3);                                     // '0.333'\n *    format(21385, 2);                                   // '21000'\n *    format(12.071, {notation: 'fixed'});                // '12'\n *    format(2.3,    {notation: 'fixed', precision: 2});  // '2.30'\n *    format(52.8,   {notation: 'exponential'});          // '5.28e+1'\n *\n * @param {BigNumber} value\n * @param {Object | Function | number} [options]\n * @return {string} str The formatted value\n */\nexports.format = function (value, options) {\n  if (typeof options === 'function') {\n    // handle format(value, fn)\n    return options(value);\n  }\n\n  // handle special cases\n  if (!value.isFinite()) {\n    return value.isNaN() ? 'NaN' : (value.gt(0) ? 'Infinity' : '-Infinity');\n  }\n\n  // default values for options\n  var notation = 'auto';\n  var precision = undefined;\n\n  if (options !== undefined) {\n    // determine notation from options\n    if (options.notation) {\n      notation = options.notation;\n    }\n\n    // determine precision from options\n    if (typeof options === 'number') {\n      precision = options;\n    }\n    else if (options.precision) {\n      precision = options.precision;\n    }\n  }\n\n  // handle the various notations\n  switch (notation) {\n    case 'fixed':\n      return exports.toFixed(value, precision);\n\n    case 'exponential':\n      return exports.toExponential(value, precision);\n\n    case 'auto':\n      // determine lower and upper bound for exponential notation.\n      // TODO: implement support for upper and lower to be BigNumbers themselves\n      var lower = 1e-3;\n      var upper = 1e5;\n      if (options && options.exponential) {\n        if (options.exponential.lower !== undefined) {\n          lower = options.exponential.lower;\n        }\n        if (options.exponential.upper !== undefined) {\n          upper = options.exponential.upper;\n        }\n      }\n\n      // adjust the configuration of the BigNumber constructor (yeah, this is quite tricky...)\n      var oldConfig = {\n        toExpNeg: value.constructor.toExpNeg,\n        toExpPos: value.constructor.toExpPos\n      };\n\n      value.constructor.config({\n        toExpNeg: Math.round(Math.log(lower) / Math.LN10),\n        toExpPos: Math.round(Math.log(upper) / Math.LN10)\n      });\n\n      // handle special case zero\n      if (value.isZero()) return '0';\n\n      // determine whether or not to output exponential notation\n      var str;\n      var abs = value.abs();\n      if (abs.gte(lower) && abs.lt(upper)) {\n        // normal number notation\n        str = value.toSignificantDigits(precision).toFixed();\n      }\n      else {\n        // exponential notation\n        str = exports.toExponential(value, precision);\n      }\n\n      // remove trailing zeros after the decimal point\n      return str.replace(/((\\.\\d*?)(0+))($|e)/, function () {\n        var digits = arguments[2];\n        var e = arguments[4];\n        return (digits !== '.') ? digits + e : e;\n      });\n\n    default:\n      throw new Error('Unknown notation \"' + notation + '\". ' +\n          'Choose \"auto\", \"exponential\", or \"fixed\".');\n  }\n};\n\n/**\n * Format a number in exponential notation. Like '1.23e+5', '2.3e+0', '3.500e-3'\n * @param {BigNumber} value\n * @param {number} [precision]  Number of digits in formatted output.\n *                              If not provided, the maximum available digits\n *                              is used.\n * @returns {string} str\n */\nexports.toExponential = function (value, precision) {\n  if (precision !== undefined) {\n    return value.toExponential(precision - 1); // Note the offset of one\n  }\n  else {\n    return value.toExponential();\n  }\n};\n\n/**\n * Format a number with fixed notation.\n * @param {BigNumber} value\n * @param {number} [precision=0]        Optional number of decimals after the\n *                                      decimal point. Zero by default.\n */\nexports.toFixed = function (value, precision) {\n  return value.toFixed(precision || 0);\n  // Note: the (precision || 0) is needed as the toFixed of BigNumber has an\n  // undefined default precision instead of 0.\n};\n","'use strict';\n\nvar formatNumber = require('./number').format;\nvar formatBigNumber = require('./bignumber/formatter').format;\n\n/**\n * Test whether value is a string\n * @param {*} value\n * @return {boolean} isString\n */\nexports.isString = function(value) {\n  return typeof value === 'string';\n};\n\n/**\n * Check if a text ends with a certain string.\n * @param {string} text\n * @param {string} search\n */\nexports.endsWith = function(text, search) {\n  var start = text.length - search.length;\n  var end = text.length;\n  return (text.substring(start, end) === search);\n};\n\n/**\n * Format a value of any type into a string.\n *\n * Usage:\n *     math.format(value)\n *     math.format(value, precision)\n *\n * When value is a function:\n *\n * - When the function has a property `syntax`, it returns this\n *   syntax description.\n * - In other cases, a string `'function'` is returned.\n *\n * When `value` is an Object:\n *\n * - When the object contains a property `format` being a function, this\n *   function is invoked as `value.format(options)` and the result is returned.\n * - When the object has its own `toString` method, this method is invoked\n *   and the result is returned.\n * - In other cases the function will loop over all object properties and\n *   return JSON object notation like '{\"a\": 2, \"b\": 3}'.\n *\n * Example usage:\n *     math.format(2/7);                // '0.2857142857142857'\n *     math.format(math.pi, 3);         // '3.14'\n *     math.format(new Complex(2, 3));  // '2 + 3i'\n *     math.format('hello');            // '\"hello\"'\n *\n * @param {*} value             Value to be stringified\n * @param {Object | number | Function} [options]  Formatting options. See\n *                                                lib/utils/number:format for a\n *                                                description of the available\n *                                                options.\n * @return {string} str\n */\nexports.format = function(value, options) {\n  if (typeof value === 'number') {\n    return formatNumber(value, options);\n  }\n\n  if (value && value.isBigNumber === true) {\n    return formatBigNumber(value, options);\n  }\n\n  if (value && value.isFraction === true) {\n    if (!options || options.fraction !== 'decimal') {\n      // output as ratio, like '1/3'\n      return (value.s * value.n) + '/' + value.d;\n    }\n    else {\n      // output as decimal, like '0.(3)'\n      return value.toString();\n    }\n  }\n\n  if (Array.isArray(value)) {\n    return formatArray(value, options);\n  }\n\n  if (exports.isString(value)) {\n    return '\"' + value + '\"';\n  }\n\n  if (typeof value === 'function') {\n    return value.syntax ? String(value.syntax) : 'function';\n  }\n\n  if (value && typeof value === 'object') {\n    if (typeof value.format === 'function') {\n      return value.format(options);\n    }\n    else if (value && value.toString() !== {}.toString()) {\n      // this object has a non-native toString method, use that one\n      return value.toString();\n    }\n    else {\n      var entries = [];\n\n      for (var key in value) {\n        if (value.hasOwnProperty(key)) {\n          entries.push('\"' + key + '\": ' + exports.format(value[key], options));\n        }\n      }\n\n      return '{' + entries.join(', ') + '}';\n    }\n  }\n\n  return String(value);\n};\n\n/**\n * Recursively format an n-dimensional matrix\n * Example output: \"[[1, 2], [3, 4]]\"\n * @param {Array} array\n * @param {Object | number | Function} [options]  Formatting options. See\n *                                                lib/utils/number:format for a\n *                                                description of the available\n *                                                options.\n * @returns {string} str\n */\nfunction formatArray (array, options) {\n  if (Array.isArray(array)) {\n    var str = '[';\n    var len = array.length;\n    for (var i = 0; i < len; i++) {\n      if (i != 0) {\n        str += ', ';\n      }\n      str += formatArray(array[i], options);\n    }\n    str += ']';\n    return str;\n  }\n  else {\n    return exports.format(array, options);\n  }\n}\n","'use strict';\n\n/**\n * Determine the type of a variable\n *\n *     type(x)\n *\n * The following types are recognized:\n *\n *     'undefined'\n *     'null'\n *     'boolean'\n *     'number'\n *     'string'\n *     'Array'\n *     'Function'\n *     'Date'\n *     'RegExp'\n *     'Object'\n *\n * @param {*} x\n * @return {string} Returns the name of the type. Primitive types are lower case,\n *                  non-primitive types are upper-camel-case.\n *                  For example 'number', 'string', 'Array', 'Date'.\n */\nexports.type = function(x) {\n  var type = typeof x;\n\n  if (type === 'object') {\n    if (x === null)           return 'null';\n    if (x instanceof Boolean) return 'boolean';\n    if (x instanceof Number)  return 'number';\n    if (x instanceof String)  return 'string';\n    if (Array.isArray(x))     return 'Array';\n    if (x instanceof Date)    return 'Date';\n    if (x instanceof RegExp)  return 'RegExp';\n\n    return 'Object';\n  }\n\n  if (type === 'function')    return 'Function';\n\n  return type;\n};\n\n/**\n * Test whether a value is a scalar\n * @param x\n * @return {boolean} Returns true when x is a scalar, returns false when\n *                   x is a Matrix or Array.\n */\nexports.isScalar = function (x) {\n  return !((x && x.isMatrix) || Array.isArray(x));\n};\n","'use strict';\n\n/**\n * Create a range error with the message:\n *     'Dimension mismatch (<actual size> != <expected size>)'\n * @param {number | number[]} actual        The actual size\n * @param {number | number[]} expected      The expected size\n * @param {string} [relation='!=']          Optional relation between actual\n *                                          and expected size: '!=', '<', etc.\n * @extends RangeError\n */\nfunction DimensionError(actual, expected, relation) {\n  if (!(this instanceof DimensionError)) {\n    throw new SyntaxError('Constructor must be called with the new operator');\n  }\n\n  this.actual   = actual;\n  this.expected = expected;\n  this.relation = relation;\n\n  this.message = 'Dimension mismatch (' +\n      (Array.isArray(actual) ? ('[' + actual.join(', ') + ']') : actual) +\n      ' ' + (this.relation || '!=') + ' ' +\n      (Array.isArray(expected) ? ('[' + expected.join(', ') + ']') : expected) +\n      ')';\n\n  this.stack = (new Error()).stack;\n}\n\nDimensionError.prototype = new RangeError();\nDimensionError.prototype.constructor = RangeError;\nDimensionError.prototype.name = 'DimensionError';\nDimensionError.prototype.isDimensionError = true;\n\nmodule.exports = DimensionError;\n","'use strict';\n\n/**\n * Create a range error with the message:\n *     'Index out of range (index < min)'\n *     'Index out of range (index < max)'\n *\n * @param {number} index     The actual index\n * @param {number} [min=0]   Minimum index (included)\n * @param {number} [max]     Maximum index (excluded)\n * @extends RangeError\n */\nfunction IndexError(index, min, max) {\n  if (!(this instanceof IndexError)) {\n    throw new SyntaxError('Constructor must be called with the new operator');\n  }\n\n  this.index = index;\n  if (arguments.length < 3) {\n    this.min = 0;\n    this.max = min;\n  }\n  else {\n    this.min = min;\n    this.max = max;\n  }\n\n  if (this.min !== undefined && this.index < this.min) {\n    this.message = 'Index out of range (' + this.index + ' < ' + this.min + ')';\n  }\n  else if (this.max !== undefined && this.index >= this.max) {\n    this.message = 'Index out of range (' + this.index + ' > ' + (this.max - 1) + ')';\n  }\n  else {\n    this.message = 'Index out of range (' + this.index + ')';\n  }\n\n  this.stack = (new Error()).stack;\n}\n\nIndexError.prototype = new RangeError();\nIndexError.prototype.constructor = RangeError;\nIndexError.prototype.name = 'IndexError';\nIndexError.prototype.isIndexError = true;\n\nmodule.exports = IndexError;\n","'use strict';\n\nvar number = require('./number');\nvar string = require('./string');\nvar object = require('./object');\nvar types = require('./types');\n\nvar DimensionError = require('../error/DimensionError');\nvar IndexError = require('../error/IndexError');\n\n/**\n * Calculate the size of a multi dimensional array.\n * This function checks the size of the first entry, it does not validate\n * whether all dimensions match. (use function `validate` for that)\n * @param {Array} x\n * @Return {Number[]} size\n */\nexports.size = function (x) {\n  var s = [];\n\n  while (Array.isArray(x)) {\n    s.push(x.length);\n    x = x[0];\n  }\n\n  return s;\n};\n\n/**\n * Recursively validate whether each element in a multi dimensional array\n * has a size corresponding to the provided size array.\n * @param {Array} array    Array to be validated\n * @param {number[]} size  Array with the size of each dimension\n * @param {number} dim   Current dimension\n * @throws DimensionError\n * @private\n */\nfunction _validate(array, size, dim) {\n  var i;\n  var len = array.length;\n\n  if (len != size[dim]) {\n    throw new DimensionError(len, size[dim]);\n  }\n\n  if (dim < size.length - 1) {\n    // recursively validate each child array\n    var dimNext = dim + 1;\n    for (i = 0; i < len; i++) {\n      var child = array[i];\n      if (!Array.isArray(child)) {\n        throw new DimensionError(size.length - 1, size.length, '<');\n      }\n      _validate(array[i], size, dimNext);\n    }\n  }\n  else {\n    // last dimension. none of the childs may be an array\n    for (i = 0; i < len; i++) {\n      if (Array.isArray(array[i])) {\n        throw new DimensionError(size.length + 1, size.length, '>');\n      }\n    }\n  }\n}\n\n/**\n * Validate whether each element in a multi dimensional array has\n * a size corresponding to the provided size array.\n * @param {Array} array    Array to be validated\n * @param {number[]} size  Array with the size of each dimension\n * @throws DimensionError\n */\nexports.validate = function(array, size) {\n  var isScalar = (size.length == 0);\n  if (isScalar) {\n    // scalar\n    if (Array.isArray(array)) {\n      throw new DimensionError(array.length, 0);\n    }\n  }\n  else {\n    // array\n    _validate(array, size, 0);\n  }\n};\n\n/**\n * Test whether index is an integer number with index >= 0 and index < length\n * when length is provided\n * @param {number} index    Zero-based index\n * @param {number} [length] Length of the array\n */\nexports.validateIndex = function(index, length) {\n  if (!number.isNumber(index) || !number.isInteger(index)) {\n    throw new TypeError('Index must be an integer (value: ' + index + ')');\n  }\n  if (index < 0 || (typeof length === 'number' && index >= length)) {\n    throw new IndexError(index, length);\n  }\n};\n\n// a constant used to specify an undefined defaultValue\nexports.UNINITIALIZED = {};\n\n/**\n * Resize a multi dimensional array. The resized array is returned.\n * @param {Array} array         Array to be resized\n * @param {Array.<number>} size Array with the size of each dimension\n * @param {*} [defaultValue=0]  Value to be filled in in new entries,\n *                              zero by default. To leave new entries undefined,\n *                              specify array.UNINITIALIZED as defaultValue\n * @return {Array} array         The resized array\n */\nexports.resize = function(array, size, defaultValue) {\n  // TODO: add support for scalars, having size=[] ?\n\n  // check the type of the arguments\n  if (!Array.isArray(array) || !Array.isArray(size)) {\n    throw new TypeError('Array expected');\n  }\n  if (size.length === 0) {\n    throw new Error('Resizing to scalar is not supported');\n  }\n\n  // check whether size contains positive integers\n  size.forEach(function (value) {\n    if (!number.isNumber(value) || !number.isInteger(value) || value < 0) {\n      throw new TypeError('Invalid size, must contain positive integers ' +\n          '(size: ' + string.format(size) + ')');\n    }\n  });\n\n  // recursively resize the array\n  var _defaultValue = (defaultValue !== undefined) ? defaultValue : 0;\n  _resize(array, size, 0, _defaultValue);\n\n  return array;\n};\n\n/**\n * Recursively resize a multi dimensional array\n * @param {Array} array         Array to be resized\n * @param {number[]} size       Array with the size of each dimension\n * @param {number} dim          Current dimension\n * @param {*} [defaultValue]    Value to be filled in in new entries,\n *                              undefined by default.\n * @private\n */\nfunction _resize (array, size, dim, defaultValue) {\n  var i;\n  var elem;\n  var oldLen = array.length;\n  var newLen = size[dim];\n  var minLen = Math.min(oldLen, newLen);\n\n  // apply new length\n  array.length = newLen;\n\n  if (dim < size.length - 1) {\n    // non-last dimension\n    var dimNext = dim + 1;\n\n    // resize existing child arrays\n    for (i = 0; i < minLen; i++) {\n      // resize child array\n      elem = array[i];\n      if (!Array.isArray(elem)) {\n        elem = [elem]; // add a dimension\n        array[i] = elem;\n      }\n      _resize(elem, size, dimNext, defaultValue);\n    }\n\n    // create new child arrays\n    for (i = minLen; i < newLen; i++) {\n      // get child array\n      elem = [];\n      array[i] = elem;\n\n      // resize new child array\n      _resize(elem, size, dimNext, defaultValue);\n    }\n  }\n  else {\n    // last dimension\n\n    // remove dimensions of existing values\n    for (i = 0; i < minLen; i++) {\n      while (Array.isArray(array[i])) {\n        array[i] = array[i][0];\n      }\n    }\n\n    if(defaultValue !== exports.UNINITIALIZED) {\n      // fill new elements with the default value\n      for (i = minLen; i < newLen; i++) {\n        array[i] = defaultValue;\n      }\n    }\n  }\n}\n\n/**\n * Squeeze a multi dimensional array\n * @param {Array} array\n * @param {Array} [size]\n * @returns {Array} returns the array itself\n */\nexports.squeeze = function(array, size) {\n  var s = size || exports.size(array);\n\n  // squeeze outer dimensions\n  while (Array.isArray(array) && array.length === 1) {\n    array = array[0];\n    s.shift();\n  }\n\n  // find the first dimension to be squeezed\n  var dims = s.length;\n  while (s[dims - 1] === 1) {\n    dims--;\n  }\n\n  // squeeze inner dimensions\n  if (dims < s.length) {\n    array = _squeeze(array, dims, 0);\n    s.length = dims;\n  }\n\n  return array;\n};\n\n/**\n * Recursively squeeze a multi dimensional array\n * @param {Array} array\n * @param {number} dims Required number of dimensions\n * @param {number} dim  Current dimension\n * @returns {Array | *} Returns the squeezed array\n * @private\n */\nfunction _squeeze (array, dims, dim) {\n  var i, ii;\n\n  if (dim < dims) {\n    var next = dim + 1;\n    for (i = 0, ii = array.length; i < ii; i++) {\n      array[i] = _squeeze(array[i], dims, next);\n    }\n  }\n  else {\n    while (Array.isArray(array)) {\n      array = array[0];\n    }\n  }\n\n  return array;\n}\n\n/**\n * Unsqueeze a multi dimensional array: add dimensions when missing\n * \n * Paramter `size` will be mutated to match the new, unqueezed matrix size.\n * \n * @param {Array} array\n * @param {number} dims     Desired number of dimensions of the array\n * @param {number} [outer]  Number of outer dimensions to be added\n * @param {Array} [size]    Current size of array.\n * @returns {Array} returns the array itself\n * @private\n */\nexports.unsqueeze = function(array, dims, outer, size) {\n  var s = size || exports.size(array);\n\n  // unsqueeze outer dimensions\n  if (outer) {\n    for (var i = 0; i < outer; i++) {\n      array = [array];\n      s.unshift(1);\n    }\n  }\n\n  // unsqueeze inner dimensions\n  array = _unsqueeze(array, dims, 0);\n  while (s.length < dims) {\n    s.push(1);\n  }\n\n  return array;\n};\n\n/**\n * Recursively unsqueeze a multi dimensional array\n * @param {Array} array\n * @param {number} dims Required number of dimensions\n * @param {number} dim  Current dimension\n * @returns {Array | *} Returns the squeezed array\n * @private\n */\nfunction _unsqueeze (array, dims, dim) {\n  var i, ii;\n\n  if (Array.isArray(array)) {\n    var next = dim + 1;\n    for (i = 0, ii = array.length; i < ii; i++) {\n      array[i] = _unsqueeze(array[i], dims, next);\n    }\n  }\n  else {\n    for (var d = dim; d < dims; d++) {\n      array = [array];\n    }\n  }\n\n  return array;\n}\n/**\n * Flatten a multi dimensional array, put all elements in a one dimensional\n * array\n * @param {Array} array   A multi dimensional array\n * @return {Array}        The flattened array (1 dimensional)\n */\nexports.flatten = function(array) {\n  if (!Array.isArray(array)) {\n    //if not an array, return as is\n    return array;\n  }\n  var flat = [];\n\n  array.forEach(function callback(value) {\n    if (Array.isArray(value)) {\n      value.forEach(callback);  //traverse through sub-arrays recursively\n    }\n    else {\n      flat.push(value);\n    }\n  });\n\n  return flat;\n};\n\n/**\n * Test whether an object is an array\n * @param {*} value\n * @return {boolean} isArray\n */\nexports.isArray = Array.isArray;\n","// function utils\n\n/*\n * Memoize a given function by caching the computed result.\n * The cache of a memoized function can be cleared by deleting the `cache`\n * property of the function.\n *\n * @param {function} fn                     The function to be memoized.\n *                                          Must be a pure function.\n * @param {function(args: Array)} [hasher]  A custom hash builder.\n *                                          Is JSON.stringify by default.\n * @return {function}                       Returns the memoized function\n */\nexports.memoize = function(fn, hasher) {\n  return function memoize() {\n    if (typeof memoize.cache !== 'object') {\n      memoize.cache = {};\n    }\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    var hash = hasher ? hasher(args) : JSON.stringify(args);\n    if (!(hash in memoize.cache)) {\n      return memoize.cache[hash] = fn.apply(fn, args);\n    }\n    return memoize.cache[hash];\n  };\n};\n\n/**\n * Find the maximum number of arguments expected by a typed function.\n * @param {function} fn   A typed function\n * @return {number} Returns the maximum number of expected arguments.\n *                  Returns -1 when no signatures where found on the function.\n */\nexports.maxArgumentCount = function (fn) {\n  return Object.keys(fn.signatures || {})\n      .reduce(function (args, signature) {\n        var count = (signature.match(/,/g) || []).length + 1;\n        return Math.max(args, count);\n      }, -1);\n};\n","'use strict';\n\nexports.array = require('./array');\nexports['boolean'] = require('./boolean');\nexports['function'] = require('./function');\nexports.number = require('./number');\nexports.object = require('./object');\nexports.string = require('./string');\nexports.types = require('./types');\nexports.emitter = require('./emitter');\n","'use strict';\n\nvar util = require('../../utils/index');\n\nvar string = util.string;\n\nvar isString = string.isString;\n\nfunction factory (type, config, load, typed) {\n  /**\n   * @constructor Matrix\n   *\n   * A Matrix is a wrapper around an Array. A matrix can hold a multi dimensional\n   * array. A matrix can be constructed as:\n   *     var matrix = math.matrix(data)\n   *\n   * Matrix contains the functions to resize, get and set values, get the size,\n   * clone the matrix and to convert the matrix to a vector, array, or scalar.\n   * Furthermore, one can iterate over the matrix using map and forEach.\n   * The internal Array of the Matrix can be accessed using the function valueOf.\n   *\n   * Example usage:\n   *     var matrix = math.matrix([[1, 2], [3, 4]]);\n   *     matix.size();              // [2, 2]\n   *     matrix.resize([3, 2], 5);\n   *     matrix.valueOf();          // [[1, 2], [3, 4], [5, 5]]\n   *     matrix.subset([1,2])       // 3 (indexes are zero-based)\n   *\n   */\n  function Matrix() {\n    if (!(this instanceof Matrix)) {\n      throw new SyntaxError('Constructor must be called with the new operator');\n    }\n  }\n\n  /**\n   * Attach type information\n   */\n  Matrix.prototype.type = 'Matrix';\n  Matrix.prototype.isMatrix = true;\n\n  /**\n   * Get the Matrix storage constructor for the given format.\n   *\n   * @param {string} format       The Matrix storage format.\n   *\n   * @return {Function}           The Matrix storage constructor.\n   */\n  Matrix.storage = function (format) {\n    // check storage format is a string\n    if (!isString(format)) {\n      throw new TypeError('format must be a string value');\n    }\n\n    // get storage format constructor\n    var constructor = Matrix._storage[format];\n    if (!constructor) {\n      throw new SyntaxError('Unsupported matrix storage format: ' + format);\n    }\n\n    // return storage constructor\n    return constructor;\n  };\n\n  // a map with all constructors for all storage types\n  Matrix._storage = {};\n\n  /**\n   * Get the storage format used by the matrix.\n   *\n   * Usage:\n   *     var format = matrix.storage()                   // retrieve storage format\n   *\n   * @return {string}           The storage format.\n   */\n  Matrix.prototype.storage = function () {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke storage on a Matrix interface');\n  };\n  \n  /**\n   * Get the datatype of the data stored in the matrix.\n   *\n   * Usage:\n   *     var format = matrix.datatype()                   // retrieve matrix datatype\n   *\n   * @return {string}           The datatype.\n   */\n  Matrix.prototype.datatype = function () {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke datatype on a Matrix interface');\n  };\n\n  /**\n   * Create a new Matrix With the type of the current matrix instance\n   * @param {Array | Object} data\n   * @param {string} [datatype]\n   */\n  Matrix.prototype.create = function (data, datatype) {\n    throw new Error('Cannot invoke create on a Matrix interface');\n  };\n\n  /**\n   * Get a subset of the matrix, or replace a subset of the matrix.\n   *\n   * Usage:\n   *     var subset = matrix.subset(index)               // retrieve subset\n   *     var value = matrix.subset(index, replacement)   // replace subset\n   *\n   * @param {Index} index\n   * @param {Array | Matrix | *} [replacement]\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be filled with zeros.\n   */\n  Matrix.prototype.subset = function (index, replacement, defaultValue) {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke subset on a Matrix interface');\n  };\n\n  /**\n   * Get a single element from the matrix.\n   * @param {number[]} index   Zero-based index\n   * @return {*} value\n   */\n  Matrix.prototype.get = function (index) {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke get on a Matrix interface');\n  };\n\n  /**\n   * Replace a single element in the matrix.\n   * @param {number[]} index   Zero-based index\n   * @param {*} value\n   * @param {*} [defaultValue]        Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be left undefined.\n   * @return {Matrix} self\n   */\n  Matrix.prototype.set = function (index, value, defaultValue) {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke set on a Matrix interface');\n  };\n\n  /**\n   * Resize the matrix to the given size. Returns a copy of the matrix when \n   * `copy=true`, otherwise return the matrix itself (resize in place).\n   *\n   * @param {number[]} size           The new size the matrix should have.\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries.\n   *                                  If not provided, the matrix elements will\n   *                                  be filled with zeros.\n   * @param {boolean} [copy]          Return a resized copy of the matrix\n   *\n   * @return {Matrix}                 The resized matrix\n   */\n  Matrix.prototype.resize = function (size, defaultValue) {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke resize on a Matrix interface');\n  };\n\n  /**\n   * Create a clone of the matrix\n   * @return {Matrix} clone\n   */\n  Matrix.prototype.clone = function () {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke clone on a Matrix interface');\n  };\n\n  /**\n   * Retrieve the size of the matrix.\n   * @returns {number[]} size\n   */\n  Matrix.prototype.size = function() {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke size on a Matrix interface');\n  };\n\n  /**\n   * Create a new matrix with the results of the callback function executed on\n   * each entry of the matrix.\n   * @param {Function} callback   The callback function is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Matrix being traversed.\n   * @param {boolean} [skipZeros] Invoke callback function for non-zero values only.\n   *\n   * @return {Matrix} matrix\n   */\n  Matrix.prototype.map = function (callback, skipZeros) {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke map on a Matrix interface');\n  };\n\n  /**\n   * Execute a callback function on each entry of the matrix.\n   * @param {Function} callback   The callback function is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Matrix being traversed.\n   */\n  Matrix.prototype.forEach = function (callback) {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke forEach on a Matrix interface');\n  };\n\n  /**\n   * Create an Array with a copy of the data of the Matrix\n   * @returns {Array} array\n   */\n  Matrix.prototype.toArray = function () {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke toArray on a Matrix interface');\n  };\n\n  /**\n   * Get the primitive value of the Matrix: a multidimensional array\n   * @returns {Array} array\n   */\n  Matrix.prototype.valueOf = function () {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke valueOf on a Matrix interface');\n  };\n\n  /**\n   * Get a string representation of the matrix, with optional formatting options.\n   * @param {Object | number | Function} [options]  Formatting options. See\n   *                                                lib/utils/number:format for a\n   *                                                description of the available\n   *                                                options.\n   * @returns {string} str\n   */\n  Matrix.prototype.format = function (options) {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke format on a Matrix interface');\n  };\n\n  /**\n   * Get a string representation of the matrix\n   * @returns {string} str\n   */\n  Matrix.prototype.toString = function () {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke toString on a Matrix interface');\n  };\n   \n  // exports\n  return Matrix;\n}\n\nexports.name = 'Matrix';\nexports.path = 'type';\nexports.factory = factory;\n","'use strict';\n\nvar util = require('../../utils/index');\nvar DimensionError = require('../../error/DimensionError');\n\nvar string = util.string;\nvar array = util.array;\nvar object = util.object;\nvar number = util.number;\n\nvar isArray = Array.isArray;\nvar isNumber = number.isNumber;\nvar isInteger = number.isInteger;\nvar isString = string.isString;\n\nvar validateIndex = array.validateIndex;\n\nfunction factory (type, config, load, typed) {\n  var Matrix = load(require('./Matrix')); // force loading Matrix (do not use via type.Matrix)\n\n  /**\n   * Dense Matrix implementation. A regular, dense matrix, supporting multi-dimensional matrices. This is the default matrix type.\n   * @class DenseMatrix\n   */\n  function DenseMatrix(data, datatype) {\n    if (!(this instanceof DenseMatrix))\n      throw new SyntaxError('Constructor must be called with the new operator');\n    if (datatype && !isString(datatype))\n      throw new Error('Invalid datatype: ' + datatype);\n\n    if (data && data.isMatrix === true) {\n      // check data is a DenseMatrix\n      if (data.type === 'DenseMatrix') {\n        // clone data & size\n        this._data = object.clone(data._data);\n        this._size = object.clone(data._size);\n        this._datatype = datatype || data._datatype;\n      }\n      else {\n        // build data from existing matrix\n        this._data = data.toArray();\n        this._size = data.size();\n        this._datatype = datatype || data._datatype;\n      }\n    }\n    else if (data && isArray(data.data) && isArray(data.size)) {\n      // initialize fields from JSON representation\n      this._data = data.data;\n      this._size = data.size;\n      this._datatype = datatype || data.datatype;\n    }\n    else if (isArray(data)) {\n      // replace nested Matrices with Arrays\n      this._data = preprocess(data);\n      // get the dimensions of the array\n      this._size = array.size(this._data);\n      // verify the dimensions of the array, TODO: compute size while processing array\n      array.validate(this._data, this._size);\n      // data type unknown\n      this._datatype = datatype;\n    }\n    else if (data) {\n      // unsupported type\n      throw new TypeError('Unsupported type of data (' + util.types.type(data) + ')');\n    }\n    else {\n      // nothing provided\n      this._data = [];\n      this._size = [0];\n      this._datatype = datatype;\n    }\n  }\n  \n  DenseMatrix.prototype = new Matrix();\n\n  /**\n   * Attach type information\n   */\n  DenseMatrix.prototype.type = 'DenseMatrix';\n  DenseMatrix.prototype.isDenseMatrix = true;\n\n  /**\n   * Get the storage format used by the matrix.\n   *\n   * Usage:\n   *     var format = matrix.storage()                   // retrieve storage format\n   *\n   * @memberof DenseMatrix\n   * @return {string}           The storage format.\n   */\n  DenseMatrix.prototype.storage = function () {\n    return 'dense';\n  };\n\n  /**\n   * Get the datatype of the data stored in the matrix.\n   *\n   * Usage:\n   *     var format = matrix.datatype()                   // retrieve matrix datatype\n   *\n   * @memberof DenseMatrix\n   * @return {string}           The datatype.\n   */\n  DenseMatrix.prototype.datatype = function () {\n    return this._datatype;\n  };\n\n  /**\n   * Create a new DenseMatrix\n   * @memberof DenseMatrix\n   * @param {Array} data\n   * @param {string} [datatype]\n   */\n  DenseMatrix.prototype.create = function (data, datatype) {\n    return new DenseMatrix(data, datatype);\n  };\n\n  /**\n   * Get a subset of the matrix, or replace a subset of the matrix.\n   *\n   * Usage:\n   *     var subset = matrix.subset(index)               // retrieve subset\n   *     var value = matrix.subset(index, replacement)   // replace subset\n   *\n   * @memberof DenseMatrix\n   * @param {Index} index\n   * @param {Array | DenseMatrix | *} [replacement]\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be filled with zeros.\n   */\n  DenseMatrix.prototype.subset = function (index, replacement, defaultValue) {\n    switch (arguments.length) {\n      case 1:\n        return _get(this, index);\n\n        // intentional fall through\n      case 2:\n      case 3:\n        return _set(this, index, replacement, defaultValue);\n\n      default:\n        throw new SyntaxError('Wrong number of arguments');\n    }\n  };\n  \n  /**\n   * Get a single element from the matrix.\n   * @memberof DenseMatrix\n   * @param {number[]} index   Zero-based index\n   * @return {*} value\n   */\n  DenseMatrix.prototype.get = function (index) {\n    if (!isArray(index))\n      throw new TypeError('Array expected');\n    if (index.length != this._size.length)\n      throw new DimensionError(index.length, this._size.length);\n\n    // check index\n    for (var x = 0; x < index.length; x++)\n      validateIndex(index[x], this._size[x]);\n\n    var data = this._data;\n    for (var i = 0, ii = index.length; i < ii; i++) {\n      var index_i = index[i];\n      validateIndex(index_i, data.length);\n      data = data[index_i];\n    }\n\n    return data;\n  };\n  \n  /**\n   * Replace a single element in the matrix.\n   * @memberof DenseMatrix\n   * @param {number[]} index   Zero-based index\n   * @param {*} value\n   * @param {*} [defaultValue]        Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be left undefined.\n   * @return {DenseMatrix} self\n   */\n  DenseMatrix.prototype.set = function (index, value, defaultValue) {\n    if (!isArray(index))\n      throw new TypeError('Array expected');\n    if (index.length < this._size.length)\n      throw new DimensionError(index.length, this._size.length, '<');\n\n    var i, ii, index_i;\n\n    // enlarge matrix when needed\n    var size = index.map(function (i) {\n      return i + 1;\n    });\n    _fit(this, size, defaultValue);\n\n    // traverse over the dimensions\n    var data = this._data;\n    for (i = 0, ii = index.length - 1; i < ii; i++) {\n      index_i = index[i];\n      validateIndex(index_i, data.length);\n      data = data[index_i];\n    }\n\n    // set new value\n    index_i = index[index.length - 1];\n    validateIndex(index_i, data.length);\n    data[index_i] = value;\n\n    return this;\n  };\n  \n  /**\n   * Get a submatrix of this matrix\n   * @memberof DenseMatrix\n   * @param {DenseMatrix} matrix\n   * @param {Index} index   Zero-based index\n   * @private\n   */\n  function _get (matrix, index) {\n    if (!index || index.isIndex !== true) {\n      throw new TypeError('Invalid index');\n    }\n\n    var isScalar = index.isScalar();\n    if (isScalar) {\n      // return a scalar\n      return matrix.get(index.min());\n    }\n    else {\n      // validate dimensions\n      var size = index.size();\n      if (size.length != matrix._size.length) {\n        throw new DimensionError(size.length, matrix._size.length);\n      }\n\n      // validate if any of the ranges in the index is out of range\n      var min = index.min();\n      var max = index.max();\n      for (var i = 0, ii = matrix._size.length; i < ii; i++) {\n        validateIndex(min[i], matrix._size[i]);\n        validateIndex(max[i], matrix._size[i]);\n      }\n\n      // retrieve submatrix\n      // TODO: more efficient when creating an empty matrix and setting _data and _size manually\n      return new DenseMatrix(_getSubmatrix(matrix._data, index, size.length, 0), matrix._datatype);\n    }\n  }\n  \n  /**\n   * Recursively get a submatrix of a multi dimensional matrix.\n   * Index is not checked for correct number or length of dimensions.\n   * @memberof DenseMatrix\n   * @param {Array} data\n   * @param {Index} index\n   * @param {number} dims   Total number of dimensions\n   * @param {number} dim    Current dimension\n   * @return {Array} submatrix\n   * @private\n   */\n  function _getSubmatrix (data, index, dims, dim) {\n    var last = (dim == dims - 1);\n    var range = index.dimension(dim);\n\n    if (last) {\n      return range.map(function (i) {\n        return data[i];\n      }).valueOf();\n    }\n    else {\n      return range.map(function (i) {\n        var child = data[i];\n        return _getSubmatrix(child, index, dims, dim + 1);\n      }).valueOf();\n    }\n  }\n  \n  /**\n   * Replace a submatrix in this matrix\n   * Indexes are zero-based.\n   * @memberof DenseMatrix\n   * @param {DenseMatrix} matrix\n   * @param {Index} index\n   * @param {DenseMatrix | Array | *} submatrix\n   * @param {*} defaultValue          Default value, filled in on new entries when\n   *                                  the matrix is resized.\n   * @return {DenseMatrix} matrix\n   * @private\n   */\n  function _set (matrix, index, submatrix, defaultValue) {\n    if (!index || index.isIndex !== true) {\n      throw new TypeError('Invalid index');\n    }\n\n    // get index size and check whether the index contains a single value\n    var iSize = index.size(),\n        isScalar = index.isScalar();\n\n    // calculate the size of the submatrix, and convert it into an Array if needed\n    var sSize;\n    if (submatrix && submatrix.isMatrix === true) {\n      sSize = submatrix.size();\n      submatrix = submatrix.valueOf();\n    }\n    else {\n      sSize = array.size(submatrix);\n    }\n\n    if (isScalar) {\n      // set a scalar\n\n      // check whether submatrix is a scalar\n      if (sSize.length !== 0) {\n        throw new TypeError('Scalar expected');\n      }\n\n      matrix.set(index.min(), submatrix, defaultValue);\n    }\n    else {\n      // set a submatrix\n\n      // validate dimensions\n      if (iSize.length < matrix._size.length) {\n        throw new DimensionError(iSize.length, matrix._size.length, '<');\n      }\n\n      if (sSize.length < iSize.length) {\n        // calculate number of missing outer dimensions\n        var i = 0;\n        var outer = 0;\n        while (iSize[i] === 1 && sSize[i] === 1) {\n          i++;\n        }\n        while (iSize[i] === 1) {\n          outer++;\n          i++;\n        }\n\n        // unsqueeze both outer and inner dimensions\n        submatrix = array.unsqueeze(submatrix, iSize.length, outer, sSize);\n      }\n\n      // check whether the size of the submatrix matches the index size\n      if (!object.deepEqual(iSize, sSize)) {\n        throw new DimensionError(iSize, sSize, '>');\n      }\n\n      // enlarge matrix when needed\n      var size = index.max().map(function (i) {\n        return i + 1;\n      });\n      _fit(matrix, size, defaultValue);\n\n      // insert the sub matrix\n      var dims = iSize.length,\n          dim = 0;\n      _setSubmatrix (matrix._data, index, submatrix, dims, dim);\n    }\n\n    return matrix;\n  }\n  \n  /**\n   * Replace a submatrix of a multi dimensional matrix.\n   * @memberof DenseMatrix\n   * @param {Array} data\n   * @param {Index} index\n   * @param {Array} submatrix\n   * @param {number} dims   Total number of dimensions\n   * @param {number} dim\n   * @private\n   */\n  function _setSubmatrix (data, index, submatrix, dims, dim) {\n    var last = (dim == dims - 1),\n        range = index.dimension(dim);\n\n    if (last) {\n      range.forEach(function (dataIndex, subIndex) {\n        validateIndex(dataIndex);\n        data[dataIndex] = submatrix[subIndex[0]];\n      });\n    }\n    else {\n      range.forEach(function (dataIndex, subIndex) {\n        validateIndex(dataIndex);\n        _setSubmatrix(data[dataIndex], index, submatrix[subIndex[0]], dims, dim + 1);\n      });\n    }\n  }\n  \n  /**\n   * Resize the matrix to the given size. Returns a copy of the matrix when\n   * `copy=true`, otherwise return the matrix itself (resize in place).\n   *\n   * @memberof DenseMatrix\n   * @param {number[]} size           The new size the matrix should have.\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries.\n   *                                  If not provided, the matrix elements will\n   *                                  be filled with zeros.\n   * @param {boolean} [copy]          Return a resized copy of the matrix\n   *\n   * @return {Matrix}                 The resized matrix\n   */\n  DenseMatrix.prototype.resize = function (size, defaultValue, copy) {\n    // validate arguments\n    if (!isArray(size))\n      throw new TypeError('Array expected');\n\n    // matrix to resize\n    var m = copy ? this.clone() : this;\n    // resize matrix\n    return _resize(m, size, defaultValue);\n  };\n  \n  var _resize = function (matrix, size, defaultValue) {\n    // check size\n    if (size.length === 0) {\n      // first value in matrix\n      var v = matrix._data;\n      // go deep\n      while (isArray(v)) {\n        v = v[0];\n      }\n      return v;\n    }\n    // resize matrix\n    matrix._size = size.slice(0); // copy the array\n    matrix._data = array.resize(matrix._data, matrix._size, defaultValue);\n    // return matrix\n    return matrix;\n  };\n  \n  /**\n   * Enlarge the matrix when it is smaller than given size.\n   * If the matrix is larger or equal sized, nothing is done.\n   * @memberof DenseMatrix\n   * @param {DenseMatrix} matrix           The matrix to be resized\n   * @param {number[]} size\n   * @param {*} defaultValue          Default value, filled in on new entries.\n   * @private\n   */\n  function _fit(matrix, size, defaultValue) {\n    var newSize = matrix._size.slice(0), // copy the array\n        changed = false;\n\n    // add dimensions when needed\n    while (newSize.length < size.length) {\n      newSize.push(0);\n      changed = true;\n    }\n\n    // enlarge size when needed\n    for (var i = 0, ii = size.length; i < ii; i++) {\n      if (size[i] > newSize[i]) {\n        newSize[i] = size[i];\n        changed = true;\n      }\n    }\n\n    if (changed) {\n      // resize only when size is changed\n      _resize(matrix, newSize, defaultValue);\n    }\n  }\n  \n  /**\n   * Create a clone of the matrix\n   * @memberof DenseMatrix\n   * @return {DenseMatrix} clone\n   */\n  DenseMatrix.prototype.clone = function () {\n    var m = new DenseMatrix({\n      data: object.clone(this._data),\n      size: object.clone(this._size),\n      datatype: this._datatype\n    });\n    return m;\n  };\n  \n  /**\n   * Retrieve the size of the matrix.\n   * @memberof DenseMatrix\n   * @returns {number[]} size\n   */\n  DenseMatrix.prototype.size = function() {\n    return this._size.slice(0); // return a clone of _size\n  };\n  \n  /**\n   * Create a new matrix with the results of the callback function executed on\n   * each entry of the matrix.\n   * @memberof DenseMatrix\n   * @param {Function} callback   The callback function is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Matrix being traversed.\n   *\n   * @return {DenseMatrix} matrix\n   */\n  DenseMatrix.prototype.map = function (callback) {\n    // matrix instance\n    var me = this;\n    var recurse = function (value, index) {\n      if (isArray(value)) {\n        return value.map(function (child, i) {\n          return recurse(child, index.concat(i));\n        });\n      }\n      else {\n        return callback(value, index, me);\n      }\n    };\n    // return dense format\n    return new DenseMatrix({\n      data: recurse(this._data, []),\n      size: object.clone(this._size),\n      datatype: this._datatype\n    });\n  };\n  \n  /**\n   * Execute a callback function on each entry of the matrix.\n   * @memberof DenseMatrix\n   * @param {Function} callback   The callback function is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Matrix being traversed.\n   */\n  DenseMatrix.prototype.forEach = function (callback) {\n    // matrix instance\n    var me = this;\n    var recurse = function (value, index) {\n      if (isArray(value)) {\n        value.forEach(function (child, i) {\n          recurse(child, index.concat(i));\n        });\n      }\n      else {\n        callback(value, index, me);\n      }\n    };\n    recurse(this._data, []);\n  };\n  \n  /**\n   * Create an Array with a copy of the data of the DenseMatrix\n   * @memberof DenseMatrix\n   * @returns {Array} array\n   */\n  DenseMatrix.prototype.toArray = function () {\n    return object.clone(this._data);\n  };\n  \n  /**\n   * Get the primitive value of the DenseMatrix: a multidimensional array\n   * @memberof DenseMatrix\n   * @returns {Array} array\n   */\n  DenseMatrix.prototype.valueOf = function () {\n    return this._data;\n  };\n  \n  /**\n   * Get a string representation of the matrix, with optional formatting options.\n   * @memberof DenseMatrix\n   * @param {Object | number | Function} [options]  Formatting options. See\n   *                                                lib/utils/number:format for a\n   *                                                description of the available\n   *                                                options.\n   * @returns {string} str\n   */\n  DenseMatrix.prototype.format = function (options) {\n    return string.format(this._data, options);\n  };\n  \n  /**\n   * Get a string representation of the matrix\n   * @memberof DenseMatrix\n   * @returns {string} str\n   */\n  DenseMatrix.prototype.toString = function () {\n    return string.format(this._data);\n  };\n  \n  /**\n   * Get a JSON representation of the matrix\n   * @memberof DenseMatrix\n   * @returns {Object}\n   */\n  DenseMatrix.prototype.toJSON = function () {\n    return {\n      mathjs: 'DenseMatrix',\n      data: this._data,\n      size: this._size,\n      datatype: this._datatype\n    };\n  };\n  \n  /**\n   * Get the kth Matrix diagonal.\n   *\n   * @memberof DenseMatrix\n   * @param {number | BigNumber} [k=0]     The kth diagonal where the vector will retrieved.\n   *\n   * @returns {Array}                      The array vector with the diagonal values.\n   */\n  DenseMatrix.prototype.diagonal = function(k) {\n    // validate k if any\n    if (k) {\n      // convert BigNumber to a number\n      if (k.isBigNumber === true)\n        k = k.toNumber();\n      // is must be an integer\n      if (!isNumber(k) || !isInteger(k)) {\n        throw new TypeError ('The parameter k must be an integer number');\n      }\n    }\n    else {\n      // default value\n      k = 0;\n    }\n\n    var kSuper = k > 0 ? k : 0;\n    var kSub = k < 0 ? -k : 0;\n\n    // rows & columns\n    var rows = this._size[0];\n    var columns = this._size[1];\n\n    // number diagonal values\n    var n = Math.min(rows - kSub, columns -  kSuper);\n    \n    // x is a matrix get diagonal from matrix\n    var data = [];\n    \n    // loop rows\n    for (var i = 0; i < n; i++) {\n      data[i] = this._data[i + kSub][i + kSuper];\n    }\n\n    // create DenseMatrix\n    return new DenseMatrix({\n      data: data,\n      size: [n],\n      datatype: this._datatype\n    });\n  };\n  \n  /**\n   * Create a diagonal matrix.\n   *\n   * @memberof DenseMatrix\n   * @param {Array} size                   The matrix size.\n   * @param {number | Array} value          The values for the diagonal.\n   * @param {number | BigNumber} [k=0]     The kth diagonal where the vector will be filled in.\n   * @param {number} [defaultValue]        The default value for non-diagonal\n   *\n   * @returns {DenseMatrix}\n   */\n  DenseMatrix.diagonal = function (size, value, k, defaultValue, datatype) {\n    if (!isArray(size))\n      throw new TypeError('Array expected, size parameter');\n    if (size.length !== 2)\n      throw new Error('Only two dimensions matrix are supported');\n\n    // map size & validate\n    size = size.map(function (s) {\n      // check it is a big number\n      if (s && s.isBigNumber === true) {\n        // convert it\n        s = s.toNumber();\n      }\n      // validate arguments\n      if (!isNumber(s) || !isInteger(s) || s < 1) {\n        throw new Error('Size values must be positive integers');\n      } \n      return s;\n    });\n\n    // validate k if any\n    if (k) {\n      // convert BigNumber to a number\n      if (k && k.isBigNumber === true)\n        k = k.toNumber();\n      // is must be an integer\n      if (!isNumber(k) || !isInteger(k)) {\n        throw new TypeError ('The parameter k must be an integer number');\n      }\n    }\n    else {\n      // default value\n      k = 0;\n    }\n    \n    if (defaultValue && isString(datatype)) {\n      // convert defaultValue to the same datatype\n      defaultValue = typed.convert(defaultValue, datatype);\n    }\n\n    var kSuper = k > 0 ? k : 0;\n    var kSub = k < 0 ? -k : 0;\n    \n    // rows and columns\n    var rows = size[0];\n    var columns = size[1];\n\n    // number of non-zero items\n    var n = Math.min(rows - kSub, columns -  kSuper);\n\n    // value extraction function\n    var _value;\n\n    // check value\n    if (isArray(value)) {\n      // validate array\n      if (value.length !== n) {\n        // number of values in array must be n\n        throw new Error('Invalid value array length');\n      }\n      // define function\n      _value = function (i) {\n        // return value @ i\n        return value[i];\n      };      \n    }\n    else if (value && value.isMatrix === true) {\n      // matrix size\n      var ms = value.size();\n      // validate matrix\n      if (ms.length !== 1 || ms[0] !== n) {\n        // number of values in array must be n\n        throw new Error('Invalid matrix length');\n      }\n      // define function\n      _value = function (i) {\n        // return value @ i\n        return value.get([i]);\n      };\n    }\n    else {\n      // define function\n      _value = function () {\n        // return value\n        return value;\n      };\n    }\n    \n    // discover default value if needed\n    if (!defaultValue) {\n      // check first value in array\n      defaultValue = (_value(0) && _value(0).isBigNumber === true) ? new type.BigNumber(0) : 0;\n    }\n\n    // empty array\n    var data = [];\n\n    // check we need to resize array\n    if (size.length > 0) {\n      // resize array\n      data = array.resize(data, size, defaultValue);\n      // fill diagonal\n      for (var d = 0; d < n; d++) {\n        data[d + kSub][d + kSuper] = _value(d);\n      }\n    }\n    \n    // create DenseMatrix\n    return new DenseMatrix({\n      data: data,\n      size: [rows, columns]\n    });\n  };\n\n  /**\n   * Generate a matrix from a JSON object\n   * @memberof DenseMatrix\n   * @param {Object} json  An object structured like\n   *                       `{\"mathjs\": \"DenseMatrix\", data: [], size: []}`,\n   *                       where mathjs is optional\n   * @returns {DenseMatrix}\n   */\n  DenseMatrix.fromJSON = function (json) {\n    return new DenseMatrix(json);\n  };\n  \n  /**\n   * Swap rows i and j in Matrix.\n   *\n   * @memberof DenseMatrix\n   * @param {number} i       Matrix row index 1\n   * @param {number} j       Matrix row index 2\n   *\n   * @return {Matrix}        The matrix reference\n   */\n  DenseMatrix.prototype.swapRows = function (i, j) {\n    // check index\n    if (!isNumber(i) || !isInteger(i) || !isNumber(j) || !isInteger(j)) {\n      throw new Error('Row index must be positive integers');\n    }\n    // check dimensions\n    if (this._size.length !== 2) {\n      throw new Error('Only two dimensional matrix is supported');\n    }\n    // validate index\n    validateIndex(i, this._size[0]);\n    validateIndex(j, this._size[0]);\n\n    // swap rows\n    DenseMatrix._swapRows(i, j, this._data);\n    // return current instance\n    return this;\n  };\n\n  /**\n   * Swap rows i and j in Dense Matrix data structure.\n   *\n   * @param {number} i       Matrix row index 1\n   * @param {number} j       Matrix row index 2\n   */\n  DenseMatrix._swapRows = function (i, j, data) {\n    // swap values i <-> j\n    var vi = data[i];\n    data[i] = data[j];\n    data[j] = vi;\n  };\n   \n  /**\n   * Preprocess data, which can be an Array or DenseMatrix with nested Arrays and\n   * Matrices. Replaces all nested Matrices with Arrays\n   * @memberof DenseMatrix\n   * @param {Array} data\n   * @return {Array} data\n   */\n  function preprocess(data) {\n    for (var i = 0, ii = data.length; i < ii; i++) {\n      var elem = data[i];\n      if (isArray(elem)) {\n        data[i] = preprocess(elem);\n      }\n      else if (elem && elem.isMatrix === true) {\n        data[i] = preprocess(elem.valueOf());\n      }\n    }\n\n    return data;\n  }\n\n  // register this type in the base class Matrix\n  type.Matrix._storage.dense = DenseMatrix;\n  type.Matrix._storage['default'] = DenseMatrix;\n\n  // exports\n  return DenseMatrix;\n}\n\nexports.name = 'DenseMatrix';\nexports.path = 'type';\nexports.factory = factory;\nexports.lazy = false;  // no lazy loading, as we alter type.Matrix._storage","'use strict';\n\nvar util = require('../../utils/index');\nvar DimensionError = require('../../error/DimensionError');\n\nvar array = util.array;\nvar object = util.object;\nvar string = util.string;\nvar number = util.number;\n\nvar isArray = Array.isArray;\nvar isNumber = number.isNumber;\nvar isInteger = number.isInteger;\nvar isString = string.isString;\n\nvar validateIndex = array.validateIndex;\n\nfunction factory (type, config, load, typed) {\n  var Matrix = load(require('./Matrix')); // force loading Matrix (do not use via type.Matrix)\n  var equalScalar = load(require('../../function/relational/equalScalar'));\n\n  /**\n   * Sparse Matrix implementation. This type implements a Compressed Column Storage format\n   * for sparse matrices.\n   * @class SparseMatrix\n   */\n  function SparseMatrix(data, datatype) {\n    if (!(this instanceof SparseMatrix))\n      throw new SyntaxError('Constructor must be called with the new operator');\n    if (datatype && !isString(datatype))\n      throw new Error('Invalid datatype: ' + datatype);\n    \n    if (data && data.isMatrix === true) {\n      // create from matrix\n      _createFromMatrix(this, data, datatype);\n    }\n    else if (data && isArray(data.index) && isArray(data.ptr) && isArray(data.size)) {\n      // initialize fields\n      this._values = data.values;\n      this._index = data.index;\n      this._ptr = data.ptr;\n      this._size = data.size;\n      this._datatype = datatype || data.datatype;\n    }\n    else if (isArray(data)) {\n      // create from array\n      _createFromArray(this, data, datatype);\n    }\n    else if (data) {\n      // unsupported type\n      throw new TypeError('Unsupported type of data (' + util.types.type(data) + ')');\n    }\n    else {\n      // nothing provided\n      this._values = [];\n      this._index = [];\n      this._ptr = [0];\n      this._size = [0, 0];\n      this._datatype = datatype;\n    }\n  }\n  \n  var _createFromMatrix = function (matrix, source, datatype) {\n    // check matrix type\n    if (source.type === 'SparseMatrix') {\n      // clone arrays\n      matrix._values = source._values ? object.clone(source._values) : undefined;\n      matrix._index = object.clone(source._index);\n      matrix._ptr = object.clone(source._ptr);\n      matrix._size = object.clone(source._size);\n      matrix._datatype = datatype || source._datatype;\n    }\n    else {\n      // build from matrix data\n      _createFromArray(matrix, source.valueOf(), datatype || source._datatype);\n    }\n  };\n  \n  var _createFromArray = function (matrix, data, datatype) {\n    // initialize fields\n    matrix._values = [];\n    matrix._index = [];\n    matrix._ptr = [];\n    matrix._datatype = datatype;\n    // discover rows & columns, do not use math.size() to avoid looping array twice\n    var rows = data.length;\n    var columns = 0;\n    \n    // equal signature to use\n    var eq = equalScalar;\n    // zero value\n    var zero = 0;\n    \n    if (isString(datatype)) {\n      // find signature that matches (datatype, datatype)\n      eq = typed.find(equalScalar, [datatype, datatype]) || equalScalar;\n      // convert 0 to the same datatype\n      zero = typed.convert(0, datatype);\n    }\n\n    // check we have rows (empty array)\n    if (rows > 0) {\n      // column index\n      var j = 0;\n      do {\n        // store pointer to values index\n        matrix._ptr.push(matrix._index.length);\n        // loop rows\n        for (var i = 0; i < rows; i++) {\n          // current row\n          var row = data[i];\n          // check row is an array\n          if (isArray(row)) {\n            // update columns if needed (only on first column)\n            if (j === 0 && columns < row.length)\n              columns = row.length;\n            // check row has column\n            if (j < row.length) {\n              // value\n              var v = row[j];\n              // check value != 0\n              if (!eq(v, zero)) {\n                // store value\n                matrix._values.push(v);\n                // index\n                matrix._index.push(i);\n              }\n            }\n          }\n          else {\n            // update columns if needed (only on first column)\n            if (j === 0 && columns < 1)\n              columns = 1;\n            // check value != 0 (row is a scalar)\n            if (!eq(row, zero)) {\n              // store value\n              matrix._values.push(row);\n              // index\n              matrix._index.push(i);\n            }\n          }\n        }\n        // increment index\n        j++;      \n      }\n      while (j < columns);\n    }\n    // store number of values in ptr\n    matrix._ptr.push(matrix._index.length);\n    // size\n    matrix._size = [rows, columns];\n  };\n  \n  SparseMatrix.prototype = new Matrix();\n\n  /**\n   * Attach type information\n   */\n  SparseMatrix.prototype.type = 'SparseMatrix';\n  SparseMatrix.prototype.isSparseMatrix = true;\n\n  /**\n   * Get the storage format used by the matrix.\n   *\n   * Usage:\n   *     var format = matrix.storage()                   // retrieve storage format\n   *\n   * @memberof SparseMatrix\n   * @return {string}           The storage format.\n   */\n  SparseMatrix.prototype.storage = function () {\n    return 'sparse';\n  };\n\n  /**\n   * Get the datatype of the data stored in the matrix.\n   *\n   * Usage:\n   *     var format = matrix.datatype()                   // retrieve matrix datatype\n   *\n   * @memberof SparseMatrix\n   * @return {string}           The datatype.\n   */\n  SparseMatrix.prototype.datatype = function () {\n    return this._datatype;\n  };\n\n  /**\n   * Create a new SparseMatrix\n   * @memberof SparseMatrix\n   * @param {Array} data\n   * @param {string} [datatype]\n   */\n  SparseMatrix.prototype.create = function (data, datatype) {\n    return new SparseMatrix(data, datatype);\n  };\n\n  /**\n   * Get the matrix density.\n   *\n   * Usage:\n   *     var density = matrix.density()                   // retrieve matrix density\n   *\n   * @memberof SparseMatrix\n   * @return {number}           The matrix density.\n   */\n  SparseMatrix.prototype.density = function () {\n    // rows & columns\n    var rows = this._size[0];\n    var columns = this._size[1];\n    // calculate density\n    return rows !== 0 && columns !== 0 ? (this._index.length / (rows * columns)) : 0;\n  };\n  \n  /**\n   * Get a subset of the matrix, or replace a subset of the matrix.\n   *\n   * Usage:\n   *     var subset = matrix.subset(index)               // retrieve subset\n   *     var value = matrix.subset(index, replacement)   // replace subset\n   *\n   * @memberof SparseMatrix\n   * @param {Index} index\n   * @param {Array | Maytrix | *} [replacement]\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be filled with zeros.\n   */\n  SparseMatrix.prototype.subset = function (index, replacement, defaultValue) { // check it is a pattern matrix\n    if (!this._values)\n      throw new Error('Cannot invoke subset on a Pattern only matrix');\n\n    // check arguments\n    switch (arguments.length) {\n      case 1:\n        return _getsubset(this, index);\n\n        // intentional fall through\n      case 2:\n      case 3:\n        return _setsubset(this, index, replacement, defaultValue);\n\n      default:\n        throw new SyntaxError('Wrong number of arguments');\n    }\n  };\n  \n  var _getsubset = function (matrix, idx) {\n    // check idx\n    if (!idx || idx.isIndex !== true) {\n      throw new TypeError('Invalid index');\n    }\n\n    var isScalar = idx.isScalar();\n    if (isScalar) {\n      // return a scalar\n      return matrix.get(idx.min());\n    }\n    // validate dimensions\n    var size = idx.size();\n    if (size.length != matrix._size.length) {\n      throw new DimensionError(size.length, matrix._size.length);\n    }\n\n    // vars\n    var i, ii, k, kk;\n    \n    // validate if any of the ranges in the index is out of range\n    var min = idx.min();\n    var max = idx.max();\n    for (i = 0, ii = matrix._size.length; i < ii; i++) {\n      validateIndex(min[i], matrix._size[i]);\n      validateIndex(max[i], matrix._size[i]);\n    }\n    \n    // matrix arrays\n    var mvalues = matrix._values;\n    var mindex = matrix._index;\n    var mptr = matrix._ptr;\n        \n    // rows & columns dimensions for result matrix\n    var rows = idx.dimension(0);\n    var columns = idx.dimension(1);\n    \n    // workspace & permutation vector\n    var w = [];\n    var pv = [];\n    \n    // loop rows in resulting matrix\n    rows.forEach(function (i, r) {\n      // update permutation vector\n      pv[i] = r[0];  \n      // mark i in workspace\n      w[i] = true;\n    });\n\n    // result matrix arrays\n    var values = mvalues ? [] : undefined;\n    var index = [];\n    var ptr = [];\n        \n    // loop columns in result matrix\n    columns.forEach(function (j) {\n      // update ptr\n      ptr.push(index.length);\n      // loop values in column j\n      for (k = mptr[j], kk = mptr[j + 1]; k < kk; k++) {\n        // row\n        i = mindex[k];\n        // check row is in result matrix\n        if (w[i] === true) {\n          // push index\n          index.push(pv[i]);\n          // check we need to process values\n          if (values)\n            values.push(mvalues[k]);\n        }\n      }\n    });\n    // update ptr\n    ptr.push(index.length);\n    \n    // return matrix\n    return new SparseMatrix({\n      values: values,\n      index: index,\n      ptr: ptr,\n      size: size,\n      datatype: matrix._datatype\n    });\n  };\n  \n  var _setsubset = function (matrix, index, submatrix, defaultValue) {\n    // check index\n    if (!index || index.isIndex !== true) {\n      throw new TypeError('Invalid index');\n    }\n    \n    // get index size and check whether the index contains a single value\n    var iSize = index.size(),\n        isScalar = index.isScalar();\n    \n    // calculate the size of the submatrix, and convert it into an Array if needed\n    var sSize;\n    if (submatrix && submatrix.isMatrix === true) {\n      // submatrix size\n      sSize = submatrix.size();\n      // use array representation\n      submatrix = submatrix.toArray();\n    }\n    else {\n      // get submatrix size (array, scalar)\n      sSize = array.size(submatrix);\n    }\n    \n    // check index is a scalar\n    if (isScalar) {\n      // verify submatrix is a scalar\n      if (sSize.length !== 0) {\n        throw new TypeError('Scalar expected');\n      }\n      // set value\n      matrix.set(index.min(), submatrix, defaultValue);\n    }\n    else {\n      // validate dimensions, index size must be one or two dimensions\n      if (iSize.length !== 1 && iSize.length !== 2) {\n        throw new DimensionError(iSize.length, matrix._size.length, '<');\n      }\n      \n      // check submatrix and index have the same dimensions\n      if (sSize.length < iSize.length) {\n        // calculate number of missing outer dimensions\n        var i = 0;\n        var outer = 0;\n        while (iSize[i] === 1 && sSize[i] === 1) {\n          i++;\n        }\n        while (iSize[i] === 1) {\n          outer++;\n          i++;\n        }\n        // unsqueeze both outer and inner dimensions\n        submatrix = array.unsqueeze(submatrix, iSize.length, outer, sSize);\n      }\n      \n      // check whether the size of the submatrix matches the index size\n      if (!object.deepEqual(iSize, sSize)) {\n        throw new DimensionError(iSize, sSize, '>');\n      }\n      \n      // offsets\n      var x0 = index.min()[0];\n      var y0 = index.min()[1];      \n      \n      // submatrix rows and columns\n      var m = sSize[0];\n      var n = sSize[1];\n\n      // loop submatrix\n      for (var x = 0; x < m; x++) {\n        // loop columns\n        for (var y = 0; y < n; y++) {\n          // value at i, j\n          var v = submatrix[x][y];\n          // invoke set (zero value will remove entry from matrix)\n          matrix.set([x + x0, y + y0], v, defaultValue);\n        }\n      }\n    }\n    return matrix;\n  };\n\n  /**\n   * Get a single element from the matrix.\n   * @memberof SparseMatrix\n   * @param {number[]} index   Zero-based index\n   * @return {*} value\n   */\n  SparseMatrix.prototype.get = function (index) {\n    if (!isArray(index))\n      throw new TypeError('Array expected');\n    if (index.length != this._size.length)\n      throw new DimensionError(index.length, this._size.length);\n\n    // check it is a pattern matrix\n    if (!this._values)\n      throw new Error('Cannot invoke get on a Pattern only matrix');\n\n    // row and column\n    var i = index[0];\n    var j = index[1];\n\n    // check i, j are valid\n    validateIndex(i, this._size[0]);\n    validateIndex(j, this._size[1]);\n\n    // find value index\n    var k = _getValueIndex(i, this._ptr[j], this._ptr[j + 1], this._index);\n    // check k is prior to next column k and it is in the correct row\n    if (k < this._ptr[j + 1] && this._index[k] === i)\n      return this._values[k];\n\n    return 0;\n  };\n  \n  /**\n   * Replace a single element in the matrix.\n   * @memberof SparseMatrix\n   * @param {number[]} index   Zero-based index\n   * @param {*} value\n   * @param {*} [defaultValue]        Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be set to zero.\n   * @return {SparseMatrix} self\n   */\n  SparseMatrix.prototype.set = function (index, v, defaultValue) {\n    if (!isArray(index))\n      throw new TypeError('Array expected');\n    if (index.length != this._size.length)\n      throw new DimensionError(index.length, this._size.length);\n\n    // check it is a pattern matrix\n    if (!this._values)\n      throw new Error('Cannot invoke set on a Pattern only matrix');\n      \n    // row and column\n    var i = index[0];\n    var j = index[1];\n\n    // rows & columns\n    var rows = this._size[0];\n    var columns = this._size[1];\n    \n    // equal signature to use\n    var eq = equalScalar;\n    // zero value\n    var zero = 0;\n\n    if (isString(this._datatype)) {\n      // find signature that matches (datatype, datatype)\n      eq = typed.find(equalScalar, [this._datatype, this._datatype]) || equalScalar;\n      // convert 0 to the same datatype\n      zero = typed.convert(0, this._datatype);\n    }\n\n    // check we need to resize matrix\n    if (i > rows - 1 || j > columns - 1) {\n      // resize matrix\n      _resize(this, Math.max(i + 1, rows), Math.max(j + 1, columns), defaultValue);\n      // update rows & columns\n      rows = this._size[0];\n      columns = this._size[1];\n    }\n\n    // check i, j are valid\n    validateIndex(i, rows);\n    validateIndex(j, columns);\n\n    // find value index\n    var k = _getValueIndex(i, this._ptr[j], this._ptr[j + 1], this._index);\n    // check k is prior to next column k and it is in the correct row\n    if (k < this._ptr[j + 1] && this._index[k] === i) {\n      // check value != 0\n      if (!eq(v, zero)) {\n        // update value\n        this._values[k] = v;\n      }\n      else {\n        // remove value from matrix\n        _remove(k, j, this._values, this._index, this._ptr);\n      }\n    }\n    else {\n      // insert value @ (i, j)\n      _insert(k, i, j, v, this._values, this._index, this._ptr);\n    }\n\n    return this;\n  };\n  \n  var _getValueIndex = function(i, top, bottom, index) {\n    // check row is on the bottom side\n    if (bottom - top === 0)\n      return bottom;\n    // loop rows [top, bottom[\n    for (var r = top; r < bottom; r++) {\n      // check we found value index\n      if (index[r] === i)\n        return r;\n    }\n    // we did not find row\n    return top;\n  };\n\n  var _remove = function (k, j, values, index, ptr) {\n    // remove value @ k\n    values.splice(k, 1);\n    index.splice(k, 1);\n    // update pointers\n    for (var x = j + 1; x < ptr.length; x++)\n      ptr[x]--;\n  };\n\n  var _insert = function (k, i, j, v, values, index, ptr) {\n    // insert value\n    values.splice(k, 0, v);\n    // update row for k\n    index.splice(k, 0, i);\n    // update column pointers\n    for (var x = j + 1; x < ptr.length; x++)\n      ptr[x]++;\n  };\n  \n  /**\n   * Resize the matrix to the given size. Returns a copy of the matrix when \n   * `copy=true`, otherwise return the matrix itself (resize in place).\n   *\n   * @memberof SparseMatrix\n   * @param {number[]} size           The new size the matrix should have.\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries.\n   *                                  If not provided, the matrix elements will\n   *                                  be filled with zeros.\n   * @param {boolean} [copy]          Return a resized copy of the matrix\n   *\n   * @return {Matrix}                 The resized matrix\n   */\n  SparseMatrix.prototype.resize = function (size, defaultValue, copy) {    \n    // validate arguments\n    if (!isArray(size))\n      throw new TypeError('Array expected');\n    if (size.length !== 2)\n      throw new Error('Only two dimensions matrix are supported');\n\n    // check sizes\n    size.forEach(function (value) {\n      if (!number.isNumber(value) || !number.isInteger(value) || value < 0) {\n        throw new TypeError('Invalid size, must contain positive integers ' +\n                            '(size: ' + string.format(size) + ')');\n      }\n    });\n    \n    // matrix to resize\n    var m = copy ? this.clone() : this;\n    // resize matrix\n    return _resize(m, size[0], size[1], defaultValue);\n  };\n  \n  var _resize = function (matrix, rows, columns, defaultValue) {\n    // value to insert at the time of growing matrix\n    var value = defaultValue || 0;\n    \n    // equal signature to use\n    var eq = equalScalar;\n    // zero value\n    var zero = 0;\n\n    if (isString(matrix._datatype)) {\n      // find signature that matches (datatype, datatype)\n      eq = typed.find(equalScalar, [matrix._datatype, matrix._datatype]) || equalScalar;\n      // convert 0 to the same datatype\n      zero = typed.convert(0, matrix._datatype);\n      // convert value to the same datatype\n      value = typed.convert(value, matrix._datatype);\n    }\n    \n    // should we insert the value?\n    var ins = !eq(value, zero);\n\n    // old columns and rows\n    var r = matrix._size[0];\n    var c = matrix._size[1];\n\n    var i, j, k;\n\n    // check we need to increase columns\n    if (columns > c) {\n      // loop new columns\n      for (j = c; j < columns; j++) {\n        // update matrix._ptr for current column\n        matrix._ptr[j] = matrix._values.length;\n        // check we need to insert matrix._values\n        if (ins) {\n          // loop rows\n          for (i = 0; i < r; i++) {\n            // add new matrix._values\n            matrix._values.push(value);\n            // update matrix._index\n            matrix._index.push(i);\n          }\n        }        \n      }\n      // store number of matrix._values in matrix._ptr\n      matrix._ptr[columns] = matrix._values.length;\n    }\n    else if (columns < c) {\n      // truncate matrix._ptr\n      matrix._ptr.splice(columns + 1, c - columns);\n      // truncate matrix._values and matrix._index\n      matrix._values.splice(matrix._ptr[columns], matrix._values.length);\n      matrix._index.splice(matrix._ptr[columns], matrix._index.length);\n    }\n    // update columns\n    c = columns;\n\n    // check we need to increase rows\n    if (rows > r) {\n      // check we have to insert values\n      if (ins) {\n        // inserts\n        var n = 0;\n        // loop columns\n        for (j = 0; j < c; j++) {\n          // update matrix._ptr for current column\n          matrix._ptr[j] = matrix._ptr[j] + n;\n          // where to insert matrix._values\n          k = matrix._ptr[j + 1] + n;\n          // pointer\n          var p = 0;\n          // loop new rows, initialize pointer\n          for (i = r; i < rows; i++, p++) {\n            // add value\n            matrix._values.splice(k + p, 0, value);\n            // update matrix._index\n            matrix._index.splice(k + p, 0, i);\n            // increment inserts\n            n++;\n          }\n        }\n        // store number of matrix._values in matrix._ptr\n        matrix._ptr[c] = matrix._values.length;\n      }\n    }\n    else if (rows < r) {\n      // deletes\n      var d = 0;\n      // loop columns\n      for (j = 0; j < c; j++) {\n        // update matrix._ptr for current column\n        matrix._ptr[j] = matrix._ptr[j] - d;\n        // where matrix._values start for next column\n        var k0 = matrix._ptr[j];\n        var k1 = matrix._ptr[j + 1] - d;\n        // loop matrix._index\n        for (k = k0; k < k1; k++) {\n          // row\n          i = matrix._index[k];\n          // check we need to delete value and matrix._index\n          if (i > rows - 1) {\n            // remove value\n            matrix._values.splice(k, 1);\n            // remove item from matrix._index\n            matrix._index.splice(k, 1);\n            // increase deletes\n            d++;\n          }\n        }\n      }\n      // update matrix._ptr for current column\n      matrix._ptr[j] = matrix._values.length;\n    }\n    // update matrix._size\n    matrix._size[0] = rows;\n    matrix._size[1] = columns;\n    // return matrix\n    return matrix;\n  };\n  \n  /**\n   * Create a clone of the matrix\n   * @memberof SparseMatrix\n   * @return {SparseMatrix} clone\n   */\n  SparseMatrix.prototype.clone = function () {\n    var m = new SparseMatrix({\n      values: this._values ? object.clone(this._values) : undefined,\n      index: object.clone(this._index),\n      ptr: object.clone(this._ptr),\n      size: object.clone(this._size),\n      datatype: this._datatype\n    });\n    return m;\n  };\n  \n  /**\n   * Retrieve the size of the matrix.\n   * @memberof SparseMatrix\n   * @returns {number[]} size\n   */\n  SparseMatrix.prototype.size = function() {\n    return this._size.slice(0); // copy the Array\n  };\n  \n  /**\n   * Create a new matrix with the results of the callback function executed on\n   * each entry of the matrix.\n   * @memberof SparseMatrix\n   * @param {Function} callback   The callback function is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Matrix being traversed.\n   * @param {boolean} [skipZeros] Invoke callback function for non-zero values only.\n   *\n   * @return {SparseMatrix} matrix\n   */\n  SparseMatrix.prototype.map = function (callback, skipZeros) {\n    // check it is a pattern matrix\n    if (!this._values)\n      throw new Error('Cannot invoke map on a Pattern only matrix');\n    // matrix instance\n    var me = this;\n    // rows and columns\n    var rows = this._size[0];\n    var columns = this._size[1];\n    // invoke callback\n    var invoke = function (v, i, j) {\n      // invoke callback\n      return callback(v, [i, j], me);\n    };\n    // invoke _map\n    return _map(this, 0, rows - 1, 0, columns - 1, invoke, skipZeros);\n  };\n\n  /**\n   * Create a new matrix with the results of the callback function executed on the interval\n   * [minRow..maxRow, minColumn..maxColumn].\n   */\n  var _map = function (matrix, minRow, maxRow, minColumn, maxColumn, callback, skipZeros) {\n    // result arrays\n    var values = [];\n    var index = [];\n    var ptr = [];\n    \n    // equal signature to use\n    var eq = equalScalar;\n    // zero value\n    var zero = 0;\n\n    if (isString(matrix._datatype)) {\n      // find signature that matches (datatype, datatype)\n      eq = typed.find(equalScalar, [matrix._datatype, matrix._datatype]) || equalScalar;\n      // convert 0 to the same datatype\n      zero = typed.convert(0, matrix._datatype);\n    }\n    \n    // invoke callback\n    var invoke = function (v, x, y) {\n      // invoke callback\n      v = callback(v, x, y);\n      // check value != 0\n      if (!eq(v, zero)) {\n        // store value\n        values.push(v);\n        // index\n        index.push(x);\n      }\n    };\n    // loop columns\n    for (var j = minColumn; j <= maxColumn; j++) {\n      // store pointer to values index\n      ptr.push(values.length);\n      // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\n      var k0 = matrix._ptr[j];\n      var k1 = matrix._ptr[j + 1];\n      // row pointer\n      var p = minRow;\n      // loop k within [k0, k1[\n      for (var k = k0; k < k1; k++) {\n        // row index\n        var i = matrix._index[k];\n        // check i is in range\n        if (i >= minRow && i <= maxRow) {\n          // zero values\n          if (!skipZeros) {\n           for (var x = p; x < i; x++)\n             invoke(0, x - minRow, j - minColumn);\n          }\n          // value @ k\n          invoke(matrix._values[k], i - minRow, j - minColumn);\n        }\n        // update pointer\n        p = i + 1;\n      }\n      // zero values\n      if (!skipZeros) {\n        for (var y = p; y <= maxRow; y++)\n          invoke(0, y - minRow, j - minColumn);\n      }\n    }\n    // store number of values in ptr\n    ptr.push(values.length);\n    // return sparse matrix\n    return new SparseMatrix({\n      values: values,\n      index: index,\n      ptr: ptr,\n      size: [maxRow - minRow + 1, maxColumn - minColumn + 1]\n    });\n  };\n  \n  /**\n   * Execute a callback function on each entry of the matrix.\n   * @memberof SparseMatrix\n   * @param {Function} callback   The callback function is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Matrix being traversed.\n   * @param {boolean} [skipZeros] Invoke callback function for non-zero values only.\n   */\n  SparseMatrix.prototype.forEach = function (callback, skipZeros) {\n    // check it is a pattern matrix\n    if (!this._values)\n      throw new Error('Cannot invoke forEach on a Pattern only matrix');\n    // matrix instance\n    var me = this;\n    // rows and columns\n    var rows = this._size[0];\n    var columns = this._size[1];\n    // loop columns\n    for (var j = 0; j < columns; j++) {\n      // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\n      var k0 = this._ptr[j];\n      var k1 = this._ptr[j + 1];\n      // column pointer\n      var p = 0;\n      // loop k within [k0, k1[\n      for (var k = k0; k < k1; k++) {\n        // row index\n        var i = this._index[k];\n        // check we need to process zeros\n        if (!skipZeros) {\n          // zero values\n          for (var x = p; x < i; x++)\n            callback(0, [x, j], me);\n        }\n        // value @ k\n        callback(this._values[k], [i, j], me);\n        // update pointer\n        p = i + 1;\n      }\n      // check we need to process zeros\n      if (!skipZeros) {\n        // zero values\n        for (var y = p; y < rows; y++)\n          callback(0, [y, j], me);\n      }\n    }\n  };\n  \n  /**\n   * Create an Array with a copy of the data of the SparseMatrix\n   * @memberof SparseMatrix\n   * @returns {Array} array\n   */\n  SparseMatrix.prototype.toArray = function () {\n    return _toArray(this._values, this._index, this._ptr, this._size, true);\n  };\n\n  /**\n   * Get the primitive value of the SparseMatrix: a two dimensions array\n   * @memberof SparseMatrix\n   * @returns {Array} array\n   */\n  SparseMatrix.prototype.valueOf = function () {\n    return _toArray(this._values, this._index, this._ptr, this._size, false);\n  };\n  \n  var _toArray = function (values, index, ptr, size, copy) {    \n    // rows and columns\n    var rows = size[0];\n    var columns = size[1];\n    // result\n    var a = [];\n    // vars\n    var i, j;\n    // initialize array\n    for (i = 0; i < rows; i++) {\n      a[i] = [];\n      for (j = 0; j < columns; j++)\n        a[i][j] = 0;\n    }\n\n    // loop columns\n    for (j = 0; j < columns; j++) {\n      // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\n      var k0 = ptr[j];\n      var k1 = ptr[j + 1];\n      // loop k within [k0, k1[\n      for (var k = k0; k < k1; k++) {\n        // row index\n        i = index[k];\n        // set value (use one for pattern matrix)\n        a[i][j] = values ? (copy ? object.clone(values[k]) : values[k]) : 1;\n      }\n    }\n    return a;\n  };\n  \n  /**\n   * Get a string representation of the matrix, with optional formatting options.\n   * @memberof SparseMatrix\n   * @param {Object | number | Function} [options]  Formatting options. See\n   *                                                lib/utils/number:format for a\n   *                                                description of the available\n   *                                                options.\n   * @returns {string} str\n   */\n  SparseMatrix.prototype.format = function (options) {\n    // rows and columns\n    var rows = this._size[0];\n    var columns = this._size[1];\n    // density\n    var density = this.density();\n    // rows & columns\n    var str = 'Sparse Matrix [' + string.format(rows, options) + ' x ' + string.format(columns, options) + '] density: ' + string.format(density, options) + '\\n';\n    // loop columns\n    for (var j = 0; j < columns; j++) {\n      // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\n      var k0 = this._ptr[j];\n      var k1 = this._ptr[j + 1];\n      // loop k within [k0, k1[\n      for (var k = k0; k < k1; k++) {\n        // row index\n        var i = this._index[k];\n        // append value\n        str += '\\n    (' + string.format(i, options) + ', ' + string.format(j, options) + ') ==> ' + (this._values ? string.format(this._values[k], options) : 'X');\n      }\n    }\n    return str;\n  };\n  \n  /**\n   * Get a string representation of the matrix\n   * @memberof SparseMatrix\n   * @returns {string} str\n   */\n  SparseMatrix.prototype.toString = function () {\n    return string.format(this.toArray());\n  };\n  \n  /**\n   * Get a JSON representation of the matrix\n   * @memberof SparseMatrix\n   * @returns {Object}\n   */\n  SparseMatrix.prototype.toJSON = function () {\n    return {\n      mathjs: 'SparseMatrix',\n      values: this._values,\n      index: this._index,\n      ptr: this._ptr,\n      size: this._size,\n      datatype: this._datatype\n    };\n  };\n\n  /**\n   * Get the kth Matrix diagonal.\n   *\n   * @memberof SparseMatrix\n   * @param {number | BigNumber} [k=0]     The kth diagonal where the vector will retrieved.\n   *\n   * @returns {Matrix}                     The matrix vector with the diagonal values.\n   */\n  SparseMatrix.prototype.diagonal = function(k) {\n    // validate k if any\n    if (k) {\n      // convert BigNumber to a number\n      if (k.isBigNumber === true)\n        k = k.toNumber();\n      // is must be an integer\n      if (!isNumber(k) || !isInteger(k)) {\n        throw new TypeError ('The parameter k must be an integer number');\n      }\n    }\n    else {\n      // default value\n      k = 0;\n    }\n\n    var kSuper = k > 0 ? k : 0;\n    var kSub = k < 0 ? -k : 0;\n    \n    // rows & columns\n    var rows = this._size[0];\n    var columns = this._size[1];\n    \n    // number diagonal values\n    var n = Math.min(rows - kSub, columns -  kSuper);\n    \n    // diagonal arrays\n    var values = [];\n    var index = [];\n    var ptr = [];\n    // initial ptr value\n    ptr[0] = 0;\n    // loop columns\n    for (var j = kSuper; j < columns && values.length < n; j++) {\n      // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\n      var k0 = this._ptr[j];\n      var k1 = this._ptr[j + 1];\n      // loop x within [k0, k1[\n      for (var x = k0; x < k1; x++) {\n        // row index\n        var i = this._index[x];\n        // check row\n        if (i === j - kSuper + kSub) {\n          // value on this column\n          values.push(this._values[x]);\n          // store row\n          index[values.length - 1] = i - kSub;\n          // exit loop\n          break;\n        }\n      }\n    }\n    // close ptr\n    ptr.push(values.length);\n    // return matrix\n    return new SparseMatrix({\n      values: values,\n      index: index,\n      ptr: ptr,\n      size: [n, 1]\n    });\n  };\n  \n  /**\n   * Generate a matrix from a JSON object\n   * @memberof SparseMatrix\n   * @param {Object} json  An object structured like\n   *                       `{\"mathjs\": \"SparseMatrix\", \"values\": [], \"index\": [], \"ptr\": [], \"size\": []}`,\n   *                       where mathjs is optional\n   * @returns {SparseMatrix}\n   */\n  SparseMatrix.fromJSON = function (json) {\n    return new SparseMatrix(json);\n  };\n\n  /**\n   * Create a diagonal matrix.\n   *\n   * @memberof SparseMatrix\n   * @param {Array} size                       The matrix size.\n   * @param {number | Array | Matrix } value   The values for the diagonal.\n   * @param {number | BigNumber} [k=0]         The kth diagonal where the vector will be filled in.\n   * @param {string} [datatype]                The Matrix datatype, values must be of this datatype.\n   *\n   * @returns {SparseMatrix}\n   */\n  SparseMatrix.diagonal = function (size, value, k, defaultValue, datatype) {\n    if (!isArray(size))\n      throw new TypeError('Array expected, size parameter');\n    if (size.length !== 2)\n      throw new Error('Only two dimensions matrix are supported');\n    \n    // map size & validate\n    size = size.map(function (s) {\n      // check it is a big number\n      if (s && s.isBigNumber === true) {\n        // convert it\n        s = s.toNumber();\n      }\n      // validate arguments\n      if (!isNumber(s) || !isInteger(s) || s < 1) {\n        throw new Error('Size values must be positive integers');\n      } \n      return s;\n    });\n    \n    // validate k if any\n    if (k) {\n      // convert BigNumber to a number\n      if (k.isBigNumber === true)\n        k = k.toNumber();\n      // is must be an integer\n      if (!isNumber(k) || !isInteger(k)) {\n        throw new TypeError ('The parameter k must be an integer number');\n      }\n    }\n    else {\n      // default value\n      k = 0;\n    }\n\n    // equal signature to use\n    var eq = equalScalar;\n    // zero value\n    var zero = 0;\n\n    if (isString(datatype)) {\n      // find signature that matches (datatype, datatype)\n      eq = typed.find(equalScalar, [datatype, datatype]) || equalScalar;\n      // convert 0 to the same datatype\n      zero = typed.convert(0, datatype);\n    }\n    \n    var kSuper = k > 0 ? k : 0;\n    var kSub = k < 0 ? -k : 0;\n    \n    // rows and columns\n    var rows = size[0];\n    var columns = size[1];\n    \n    // number of non-zero items\n    var n = Math.min(rows - kSub, columns -  kSuper);\n    \n    // value extraction function\n    var _value;\n      \n    // check value\n    if (isArray(value)) {\n      // validate array\n      if (value.length !== n) {\n        // number of values in array must be n\n        throw new Error('Invalid value array length');\n      }\n      // define function\n      _value = function (i) {\n        // return value @ i\n        return value[i];\n      };\n    }\n    else if (value && value.isMatrix === true) {\n      // matrix size\n      var ms = value.size();\n      // validate matrix\n      if (ms.length !== 1 || ms[0] !== n) {\n        // number of values in array must be n\n        throw new Error('Invalid matrix length');\n      }\n      // define function\n      _value = function (i) {\n        // return value @ i\n        return value.get([i]);\n      };\n    }\n    else {\n      // define function\n      _value = function () {\n        // return value\n        return value;\n      };\n    }\n    \n    // create arrays\n    var values = [];\n    var index = [];\n    var ptr = [];\n    \n    // loop items\n    for (var j = 0; j < columns; j++) {\n      // number of rows with value\n      ptr.push(values.length);\n      // diagonal index\n      var i = j - kSuper;      \n      // check we need to set diagonal value\n      if (i >= 0 && i < n) {\n        // get value @ i\n        var v = _value(i);\n        // check for zero\n        if (!eq(v, zero)) {\n          // column\n          index.push(i + kSub);\n          // add value\n          values.push(v);\n        }\n      }\n    }\n    // last value should be number of values\n    ptr.push(values.length);\n    // create SparseMatrix\n    return new SparseMatrix({\n      values: values,\n      index: index,\n      ptr: ptr,\n      size: [rows, columns]\n    });\n  };\n  \n  /**\n   * Swap rows i and j in Matrix.\n   *\n   * @memberof SparseMatrix\n   * @param {number} i       Matrix row index 1\n   * @param {number} j       Matrix row index 2\n   *\n   * @return {Matrix}        The matrix reference\n   */\n  SparseMatrix.prototype.swapRows = function (i, j) {\n    // check index\n    if (!isNumber(i) || !isInteger(i) || !isNumber(j) || !isInteger(j)) {\n      throw new Error('Row index must be positive integers');\n    }\n    // check dimensions\n    if (this._size.length !== 2) {\n      throw new Error('Only two dimensional matrix is supported');\n    }\n    // validate index\n    validateIndex(i, this._size[0]);\n    validateIndex(j, this._size[0]);\n    \n    // swap rows\n    SparseMatrix._swapRows(i, j, this._size[1], this._values, this._index, this._ptr);\n    // return current instance\n    return this;\n  };\n  \n  /**\n   * Loop rows with data in column j.\n   *\n   * @param {number} j            Column\n   * @param {Array} values        Matrix values\n   * @param {Array} index         Matrix row indeces\n   * @param {Array} ptr           Matrix column pointers\n   * @param {Function} callback   Callback function invoked for every row in column j\n   */\n  SparseMatrix._forEachRow = function (j, values, index, ptr, callback) {\n    // indeces for column j\n    var k0 = ptr[j];\n    var k1 = ptr[j + 1];\n    // loop\n    for (var k = k0; k < k1; k++) {\n      // invoke callback\n      callback(index[k], values[k]);\n    }\n  };\n  \n  /**\n   * Swap rows x and y in Sparse Matrix data structures.\n   *\n   * @param {number} x         Matrix row index 1\n   * @param {number} y         Matrix row index 2\n   * @param {number} columns   Number of columns in matrix\n   * @param {Array} values     Matrix values\n   * @param {Array} index      Matrix row indeces\n   * @param {Array} ptr        Matrix column pointers\n   */\n  SparseMatrix._swapRows = function (x, y, columns, values, index, ptr) {\n    // loop columns\n    for (var j = 0; j < columns; j++) {\n      // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\n      var k0 = ptr[j];\n      var k1 = ptr[j + 1];\n      // find value index @ x\n      var kx = _getValueIndex(x, k0, k1, index);\n      // find value index @ x\n      var ky = _getValueIndex(y, k0, k1, index);\n      // check both rows exist in matrix\n      if (kx < k1 && ky < k1 && index[kx] === x && index[ky] === y) {\n        // swap values (check for pattern matrix)\n        if (values) {\n          var v = values[kx];\n          values[kx] = values[ky];\n          values[ky] = v;\n        }\n        // next column\n        continue;\n      }\n      // check x row exist & no y row\n      if (kx < k1 && index[kx] === x && (ky >= k1 || index[ky] !== y)) {\n        // value @ x (check for pattern matrix)\n        var vx = values ? values[kx] : undefined;\n        // insert value @ y\n        index.splice(ky, 0, y);\n        if (values)\n          values.splice(ky, 0, vx);        \n        // remove value @ x (adjust array index if needed)\n        index.splice(ky <= kx ? kx + 1 : kx, 1);\n        if (values)\n          values.splice(ky <= kx ? kx + 1 : kx, 1);\n        // next column\n        continue;\n      }\n      // check y row exist & no x row\n      if (ky < k1 && index[ky] === y && (kx >= k1 || index[kx] !== x)) {\n        // value @ y (check for pattern matrix)\n        var vy = values ? values[ky] : undefined;\n        // insert value @ x\n        index.splice(kx, 0, x);\n        if (values)\n          values.splice(kx, 0, vy);\n        // remove value @ y (adjust array index if needed)\n        index.splice(kx <= ky ? ky + 1 : ky, 1);\n        if (values)\n          values.splice(kx <= ky ? ky + 1 : ky, 1);\n      }\n    }\n  };\n\n  // register this type in the base class Matrix\n  type.Matrix._storage.sparse = SparseMatrix;\n\n  return SparseMatrix;\n}\n\nexports.name = 'SparseMatrix';\nexports.path = 'type';\nexports.factory = factory;\nexports.lazy = false;  // no lazy loading, as we alter type.Matrix._storage\n","'use strict';\n\n/**\n * Compares two BigNumbers.\n * @param {BigNumber} x       First value to compare\n * @param {BigNumber} y       Second value to compare\n * @param {number} [epsilon]  The maximum relative difference between x and y\n *                            If epsilon is undefined or null, the function will\n *                            test whether x and y are exactly equal.\n * @return {boolean} whether the two numbers are nearly equal\n */\nmodule.exports = function nearlyEqual(x, y, epsilon) {\n  // if epsilon is null or undefined, test whether x and y are exactly equal\n  if (epsilon == null) {\n    return x.eq(y);\n  }\n\n\n  // use \"==\" operator, handles infinities\n  if (x.eq(y)) {\n    return true;\n  }\n\n  // NaN\n  if (x.isNaN() || y.isNaN()) {\n    return false;\n  }\n\n  // at this point x and y should be finite\n  if(x.isFinite() && y.isFinite()) {\n    // check numbers are very close, needed when comparing numbers near zero\n    var diff = x.minus(y).abs();\n    if (diff.isZero()) {\n      return true;\n    }\n    else {\n      // use relative error\n      var max = x.constructor.max(x.abs(), y.abs());\n      return diff.lte(max.times(epsilon));\n    }\n  }\n\n  // Infinite and Number or negative Infinite and positive Infinite cases\n  return false;\n};\n","'use strict';\n\nvar nearlyEqual = require('../../utils/number').nearlyEqual;\nvar bigNearlyEqual = require('../../utils/bignumber/nearlyEqual');\n\nfunction factory (type, config, load, typed) {\n  \n  /**\n   * Test whether two values are equal.\n   *\n   * @param  {number | BigNumber | Fraction | boolean | Complex | Unit} x   First value to compare\n   * @param  {number | BigNumber | Fraction | boolean | Complex} y          Second value to compare\n   * @return {boolean}                                                  Returns true when the compared values are equal, else returns false\n   * @private\n   */\n  var equalScalar = typed('equalScalar', {\n\n    'boolean, boolean': function (x, y) {\n      return x === y;\n    },\n\n    'number, number': function (x, y) {\n      return x === y || nearlyEqual(x, y, config.epsilon);\n    },\n\n    'BigNumber, BigNumber': function (x, y) {\n      return x.eq(y) || bigNearlyEqual(x, y, config.epsilon);\n    },\n\n    'Fraction, Fraction': function (x, y) {\n      return x.equals(y);\n    },\n\n    'Complex, Complex': function (x, y) {\n      return x.equals(y);\n    },\n\n    'Unit, Unit': function (x, y) {\n      if (!x.equalBase(y)) {\n        throw new Error('Cannot compare units with different base');\n      }\n      return equalScalar(x.value, y.value);\n    },\n\n    'string, string': function (x, y) {\n      return x === y;\n    }\n  });\n  \n  return equalScalar;\n}\n\nexports.factory = factory;\n","'use strict';\n\nfunction factory(type, config, load, typed) {\n\n  /**\n   * Add two scalar values, `x + y`.\n   * This function is meant for internal use: it is used by the public function\n   * `add`\n   *\n   * This function does not support collections (Array or Matrix), and does\n   * not validate the number of of inputs.\n   *\n   * @param  {number | BigNumber | Fraction | Complex | Unit} x   First value to add\n   * @param  {number | BigNumber | Fraction | Complex} y          Second value to add\n   * @return {number | BigNumber | Fraction | Complex | Unit}                      Sum of `x` and `y`\n   * @private\n   */\n  var add = typed('add', {\n\n    'number, number': function (x, y) {\n      return x + y;\n    },\n\n    'Complex, Complex': function (x, y) {\n      return x.add(y);\n    },\n\n    'BigNumber, BigNumber': function (x, y) {\n      return x.plus(y);\n    },\n\n    'Fraction, Fraction': function (x, y) {\n      return x.add(y);\n    },\n\n    'Unit, Unit': function (x, y) {\n      if (x.value == null) throw new Error('Parameter x contains a unit with undefined value');\n      if (y.value == null) throw new Error('Parameter y contains a unit with undefined value');\n      if (!x.equalBase(y)) throw new Error('Units do not match');\n\n      var res = x.clone();\n      res.value = add(res.value, y.value);\n      res.fixPrefix = false;\n      return res;\n    }\n  });\n\n  return add;\n}\n\nexports.factory = factory;\n","'use strict';\n\nfunction factory (type, config, load, typed) {\n  /**\n   * Create a Matrix. The function creates a new `math.type.Matrix` object from\n   * an `Array`. A Matrix has utility functions to manipulate the data in the\n   * matrix, like getting the size and getting or setting values in the matrix.\n   * Supported storage formats are 'dense' and 'sparse'.\n   *\n   * Syntax:\n   *\n   *    math.matrix()                         // creates an empty matrix using default storage format (dense).\n   *    math.matrix(data)                     // creates a matrix with initial data using default storage format (dense).\n   *    math.matrix('dense')                  // creates an empty matrix using the given storage format.\n   *    math.matrix(data, 'dense')            // creates a matrix with initial data using the given storage format.\n   *    math.matrix(data, 'sparse')           // creates a sparse matrix with initial data.\n   *    math.matrix(data, 'sparse', 'number') // creates a sparse matrix with initial data, number data type.\n   *\n   * Examples:\n   *\n   *    var m = math.matrix([[1, 2], [3, 4]]);\n   *    m.size();                        // Array [2, 2]\n   *    m.resize([3, 2], 5);\n   *    m.valueOf();                     // Array [[1, 2], [3, 4], [5, 5]]\n   *    m.get([1, 0])                    // number 3\n   *\n   * See also:\n   *\n   *    bignumber, boolean, complex, index, number, string, unit, sparse\n   *\n   * @param {Array | Matrix} [data]    A multi dimensional array\n   * @param {string} [format]          The Matrix storage format\n   *\n   * @return {Matrix} The created matrix\n   */\n  var matrix = typed('matrix', {\n    '': function () {\n      return _create([]);\n    },\n\n    'string': function (format) {\n      return _create([], format);\n    },\n    \n    'string, string': function (format, datatype) {\n      return _create([], format, datatype);\n    },\n\n    'Array': function (data) {\n      return _create(data);\n    },\n      \n    'Matrix': function (data) {\n      return _create(data, data.storage());\n    },\n    \n    'Array | Matrix, string': _create,\n    \n    'Array | Matrix, string, string': _create\n  });\n\n  matrix.toTex = {\n    0: '\\\\begin{bmatrix}\\\\end{bmatrix}',\n    1: '\\\\left(${args[0]}\\\\right)',\n    2: '\\\\left(${args[0]}\\\\right)'\n  };\n\n  return matrix;\n\n  /**\n   * Create a new Matrix with given storage format\n   * @param {Array} data\n   * @param {string} [format]\n   * @param {string} [datatype]\n   * @returns {Matrix} Returns a new Matrix\n   * @private\n   */\n  function _create(data, format, datatype) {\n    // get storage format constructor\n    var M = type.Matrix.storage(format || 'default');\n\n    // create instance\n    return new M(data, datatype);\n  }\n}\n\nexports.name = 'matrix';\nexports.factory = factory;\n","'use strict';\n\nexports.symbols = {\n  // GREEK LETTERS\n  Alpha: 'A',     alpha: '\\\\alpha',\n  Beta: 'B',      beta: '\\\\beta',\n  Gamma: '\\\\Gamma',    gamma: '\\\\gamma',\n  Delta: '\\\\Delta',    delta: '\\\\delta',\n  Epsilon: 'E',   epsilon: '\\\\epsilon',  varepsilon: '\\\\varepsilon',\n  Zeta: 'Z',      zeta: '\\\\zeta',\n  Eta: 'H',       eta: '\\\\eta',\n  Theta: '\\\\Theta',    theta: '\\\\theta',    vartheta: '\\\\vartheta',\n  Iota: 'I',      iota: '\\\\iota',\n  Kappa: 'K',     kappa: '\\\\kappa',    varkappa: '\\\\varkappa',\n  Lambda: '\\\\Lambda',   lambda: '\\\\lambda',\n  Mu: 'M',        mu: '\\\\mu',\n  Nu: 'N',        nu: '\\\\nu',\n  Xi: '\\\\Xi',       xi: '\\\\xi',\n  Omicron: 'O',   omicron: 'o',\n  Pi: '\\\\Pi',       pi: '\\\\pi',       varpi: '\\\\varpi',\n  Rho: 'P',       rho: '\\\\rho',      varrho: '\\\\varrho',\n  Sigma: '\\\\Sigma',    sigma: '\\\\sigma',    varsigma: '\\\\varsigma',\n  Tau: 'T',       tau: '\\\\tau',\n  Upsilon: '\\\\Upsilon',  upsilon: '\\\\upsilon',\n  Phi: '\\\\Phi',      phi: '\\\\phi',      varphi: '\\\\varphi',\n  Chi: 'X',       chi: '\\\\chi',\n  Psi: '\\\\Psi',      psi: '\\\\psi',\n  Omega: '\\\\Omega',    omega: '\\\\omega',\n  //logic\n  'true': '\\\\mathrm{True}',\n  'false': '\\\\mathrm{False}',\n  //other\n  i: 'i', //TODO use \\i ??\n  inf: '\\\\infty',\n  Inf: '\\\\infty',\n  infinity: '\\\\infty',\n  Infinity: '\\\\infty',\n  oo: '\\\\infty',\n  lim: '\\\\lim',\n  'undefined': '\\\\mathbf{?}'\n};\n\nexports.operators = {\n  'transpose': '^\\\\top',\n  'factorial': '!',\n  'pow': '^',\n  'dotPow': '.^\\\\wedge', //TODO find ideal solution\n  'unaryPlus': '+',\n  'unaryMinus': '-',\n  'bitNot': '~', //TODO find ideal solution\n  'not': '\\\\neg',\n  'multiply': '\\\\cdot',\n  'divide': '\\\\frac', //TODO how to handle that properly?\n  'dotMultiply': '.\\\\cdot', //TODO find ideal solution\n  'dotDivide': '.:', //TODO find ideal solution\n  'mod': '\\\\mod',\n  'add': '+',\n  'subtract': '-',\n  'to': '\\\\rightarrow',\n  'leftShift': '<<',\n  'rightArithShift': '>>',\n  'rightLogShift': '>>>',\n  'equal': '=',\n  'unequal': '\\\\neq',\n  'smaller': '<',\n  'larger': '>',\n  'smallerEq': '\\\\leq',\n  'largerEq': '\\\\geq',\n  'bitAnd': '\\\\&',\n  'bitXor': '\\\\underline{|}',\n  'bitOr': '|',\n  'and': '\\\\wedge',\n  'xor': '\\\\veebar',\n  'or': '\\\\vee'\n};\n\nexports.defaultTemplate = '\\\\mathrm{${name}}\\\\left(${args}\\\\right)';\n\nvar units = {\n  deg: '^\\\\circ'\n};\n\n//@param {string} name\n//@param {boolean} isUnit\nexports.toSymbol = function (name, isUnit) {\n  isUnit = typeof isUnit === 'undefined' ? false : isUnit;\n  if (isUnit) {\n    if (units.hasOwnProperty(name)) {\n      return units[name];\n    }\n    return '\\\\mathrm{' + name + '}';\n  }\n\n  if (exports.symbols.hasOwnProperty(name)) {\n    return exports.symbols[name];\n  }\n  else if (name.indexOf('_') !== -1) {\n    //symbol with index (eg. alpha_1)\n    var index = name.indexOf('_');\n    return exports.toSymbol(name.substring(0, index)) + '_{'\n      + exports.toSymbol(name.substring(index + 1)) + '}';\n  }\n  return name;\n};\n","'use strict';\n\nvar DimensionError = require('../../../error/DimensionError');\n\nfunction factory (type, config, load, typed) {\n\n  var DenseMatrix = type.DenseMatrix;\n\n  /**\n   * Iterates over SparseMatrix nonzero items and invokes the callback function f(Dij, Sij). \n   * Callback function invoked NNZ times (number of nonzero items in SparseMatrix).\n   *\n   *\n   *            f(Dij, Sij)  ; S(i,j) !== 0\n   * C(i,j) = \n   *            Dij          ; otherwise\n   *\n   *\n   * @param {Matrix}   denseMatrix       The DenseMatrix instance (D)\n   * @param {Matrix}   sparseMatrix      The SparseMatrix instance (S)\n   * @param {Function} callback          The f(Dij,Sij) operation to invoke, where Dij = DenseMatrix(i,j) and Sij = SparseMatrix(i,j)\n   * @param {boolean}  inverse           A true value indicates callback should be invoked f(Sij,Dij)\n   *\n   * @return {Matrix}                    DenseMatrix (C)\n   *\n   * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97477571\n   */\n  var algorithm01 = function (denseMatrix, sparseMatrix, callback, inverse) {\n    // dense matrix arrays\n    var adata = denseMatrix._data;\n    var asize = denseMatrix._size;\n    var adt = denseMatrix._datatype;\n    // sparse matrix arrays\n    var bvalues = sparseMatrix._values;\n    var bindex = sparseMatrix._index;\n    var bptr = sparseMatrix._ptr;\n    var bsize = sparseMatrix._size;\n    var bdt = sparseMatrix._datatype;\n\n    // validate dimensions\n    if (asize.length !== bsize.length)\n      throw new DimensionError(asize.length, bsize.length);\n\n    // check rows & columns\n    if (asize[0] !== bsize[0] || asize[1] !== bsize[1])\n      throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n\n    // sparse matrix cannot be a Pattern matrix\n    if (!bvalues)\n      throw new Error('Cannot perform operation on Dense Matrix and Pattern Sparse Matrix');\n\n    // rows & columns\n    var rows = asize[0];\n    var columns = asize[1];\n\n    // process data types\n    var dt = typeof adt === 'string' && adt === bdt ? adt : undefined;\n    // callback function\n    var cf = dt ? typed.find(callback, [dt, dt]) : callback;\n\n    // vars\n    var i, j;\n    \n    // result (DenseMatrix)\n    var cdata = [];\n    // initialize c\n    for (i = 0; i < rows; i++)\n      cdata[i] = [];      \n    \n    // workspace\n    var x = [];\n    // marks indicating we have a value in x for a given column\n    var w = [];\n\n    // loop columns in b\n    for (j = 0; j < columns; j++) {\n      // column mark\n      var mark = j + 1;\n      // values in column j\n      for (var k0 = bptr[j], k1 = bptr[j + 1], k = k0; k < k1; k++) {\n        // row\n        i = bindex[k];\n        // update workspace\n        x[i] = inverse ? cf(bvalues[k], adata[i][j]) : cf(adata[i][j], bvalues[k]);\n        // mark i as updated\n        w[i] = mark;\n      }\n      // loop rows\n      for (i = 0; i < rows; i++) {\n        // check row is in workspace\n        if (w[i] === mark) {\n          // c[i][j] was already calculated\n          cdata[i][j] = x[i];\n        }\n        else {\n          // item does not exist in S\n          cdata[i][j] = adata[i][j];\n        }\n      }\n    }\n\n    // return dense matrix\n    return new DenseMatrix({\n      data: cdata,\n      size: [rows, columns],\n      datatype: dt\n    });\n  };\n  \n  return algorithm01;\n}\n\nexports.name = 'algorithm01';\nexports.factory = factory;\n","'use strict';\n\nvar DimensionError = require('../../../error/DimensionError');\n\nfunction factory (type, config, load, typed) {\n\n  var equalScalar = load(require('../../../function/relational/equalScalar'));\n\n  var SparseMatrix = type.SparseMatrix;\n\n  /**\n   * Iterates over SparseMatrix A and SparseMatrix B nonzero items and invokes the callback function f(Aij, Bij). \n   * Callback function invoked MAX(NNZA, NNZB) times\n   *\n   *\n   *            f(Aij, Bij)  ; A(i,j) !== 0 && B(i,j) !== 0\n   * C(i,j) =   A(i,j)       ; A(i,j) !== 0\n   *            B(i,j)       ; B(i,j) !== 0\n   *\n   *\n   * @param {Matrix}   a                 The SparseMatrix instance (A)\n   * @param {Matrix}   b                 The SparseMatrix instance (B)\n   * @param {Function} callback          The f(Aij,Bij) operation to invoke\n   *\n   * @return {Matrix}                    SparseMatrix (C)\n   *\n   * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97620294\n   */\n  var algorithm04 = function (a, b, callback) {\n    // sparse matrix arrays\n    var avalues = a._values;\n    var aindex = a._index;\n    var aptr = a._ptr;\n    var asize = a._size;\n    var adt = a._datatype;\n    // sparse matrix arrays\n    var bvalues = b._values;\n    var bindex = b._index;\n    var bptr = b._ptr;\n    var bsize = b._size;\n    var bdt = b._datatype;\n\n    // validate dimensions\n    if (asize.length !== bsize.length)\n      throw new DimensionError(asize.length, bsize.length);\n\n    // check rows & columns\n    if (asize[0] !== bsize[0] || asize[1] !== bsize[1])\n      throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n\n    // rows & columns\n    var rows = asize[0];\n    var columns = asize[1];\n\n    // datatype\n    var dt;\n    // equal signature to use\n    var eq = equalScalar;\n    // zero value\n    var zero = 0;\n    // callback signature to use\n    var cf = callback;\n\n    // process data types\n    if (typeof adt === 'string' && adt === bdt) {\n      // datatype\n      dt = adt;\n      // find signature that matches (dt, dt)\n      eq = typed.find(equalScalar, [dt, dt]);\n      // convert 0 to the same datatype\n      zero = typed.convert(0, dt);\n      // callback\n      cf = typed.find(callback, [dt, dt]);\n    }\n\n    // result arrays\n    var cvalues = avalues && bvalues ? [] : undefined;\n    var cindex = [];\n    var cptr = [];\n    // matrix\n    var c = new SparseMatrix({\n      values: cvalues,\n      index: cindex,\n      ptr: cptr,\n      size: [rows, columns],\n      datatype: dt\n    });\n\n    // workspace\n    var xa = avalues && bvalues ? [] : undefined;\n    var xb = avalues && bvalues ? [] : undefined;\n    // marks indicating we have a value in x for a given column\n    var wa = [];\n    var wb = [];\n\n    // vars \n    var i, j, k, k0, k1;\n    \n    // loop columns\n    for (j = 0; j < columns; j++) {\n      // update cptr\n      cptr[j] = cindex.length;\n      // columns mark\n      var mark = j + 1;\n      // loop A(:,j)\n      for (k0 = aptr[j], k1 = aptr[j + 1], k = k0; k < k1; k++) {\n        // row\n        i = aindex[k];\n        // update c\n        cindex.push(i);\n        // update workspace\n        wa[i] = mark;\n        // check we need to process values\n        if (xa)\n          xa[i] = avalues[k];\n      }\n      // loop B(:,j)\n      for (k0 = bptr[j], k1 = bptr[j + 1], k = k0; k < k1; k++) {\n        // row\n        i = bindex[k];\n        // check row exists in A\n        if (wa[i] === mark) {\n          // update record in xa @ i\n          if (xa) {\n            // invoke callback\n            var v = cf(xa[i], bvalues[k]);\n            // check for zero\n            if (!eq(v, zero)) {\n              // update workspace\n              xa[i] = v;              \n            }\n            else {\n              // remove mark (index will be removed later)\n              wa[i] = null;\n            }\n          }\n        }\n        else {\n          // update c\n          cindex.push(i);\n          // update workspace\n          wb[i] = mark;\n          // check we need to process values\n          if (xb)\n            xb[i] = bvalues[k];\n        }\n      }\n      // check we need to process values (non pattern matrix)\n      if (xa && xb) {\n        // initialize first index in j\n        k = cptr[j];\n        // loop index in j\n        while (k < cindex.length) {\n          // row\n          i = cindex[k];\n          // check workspace has value @ i\n          if (wa[i] === mark) {\n            // push value (Aij != 0 || (Aij != 0 && Bij != 0))\n            cvalues[k] = xa[i];\n            // increment pointer\n            k++;\n          }\n          else if (wb[i] === mark) {\n            // push value (bij != 0)\n            cvalues[k] = xb[i];\n            // increment pointer\n            k++;\n          }\n          else {\n            // remove index @ k\n            cindex.splice(k, 1);\n          }\n        }\n      }\n    }\n    // update cptr\n    cptr[columns] = cindex.length;\n\n    // return sparse matrix\n    return c;\n  };\n  \n  return algorithm04;\n}\n\nexports.name = 'algorithm04';\nexports.factory = factory;\n","'use strict';\n\nfunction factory (type, config, load, typed) {\n\n  var DenseMatrix = type.DenseMatrix;\n\n  /**\n   * Iterates over SparseMatrix S nonzero items and invokes the callback function f(Sij, b). \n   * Callback function invoked NZ times (number of nonzero items in S).\n   *\n   *\n   *            f(Sij, b)  ; S(i,j) !== 0\n   * C(i,j) =   \n   *            b          ; otherwise\n   *\n   *\n   * @param {Matrix}   s                 The SparseMatrix instance (S)\n   * @param {Scalar}   b                 The Scalar value\n   * @param {Function} callback          The f(Aij,b) operation to invoke\n   * @param {boolean}  inverse           A true value indicates callback should be invoked f(b,Sij)\n   *\n   * @return {Matrix}                    DenseMatrix (C)\n   *\n   * https://github.com/josdejong/mathjs/pull/346#issuecomment-97626813\n   */\n  var algorithm10 = function (s, b, callback, inverse) {\n    // sparse matrix arrays\n    var avalues = s._values;\n    var aindex = s._index;\n    var aptr = s._ptr;\n    var asize = s._size;\n    var adt = s._datatype;\n\n    // sparse matrix cannot be a Pattern matrix\n    if (!avalues)\n      throw new Error('Cannot perform operation on Pattern Sparse Matrix and Scalar value');\n\n    // rows & columns\n    var rows = asize[0];\n    var columns = asize[1];\n\n    // datatype\n    var dt;\n    // callback signature to use\n    var cf = callback;\n\n    // process data types\n    if (typeof adt === 'string') {\n      // datatype\n      dt = adt;\n      // convert b to the same datatype\n      b = typed.convert(b, dt);\n      // callback\n      cf = typed.find(callback, [dt, dt]);\n    }\n\n    // result arrays\n    var cdata = [];\n    // matrix\n    var c = new DenseMatrix({\n      data: cdata,\n      size: [rows, columns],\n      datatype: dt\n    });\n\n    // workspaces\n    var x = [];\n    // marks indicating we have a value in x for a given column\n    var w = [];\n\n    // loop columns\n    for (var j = 0; j < columns; j++) {\n      // columns mark\n      var mark = j + 1;\n      // values in j\n      for (var k0 = aptr[j], k1 = aptr[j + 1], k = k0; k < k1; k++) {\n        // row\n        var r = aindex[k];\n        // update workspace\n        x[r] = avalues[k];\n        w[r] = mark;\n      }\n      // loop rows\n      for (var i = 0; i < rows; i++) {\n        // initialize C on first column\n        if (j === 0) {\n          // create row array\n          cdata[i] = [];\n        }\n        // check sparse matrix has a value @ i,j\n        if (w[i] === mark) {\n          // invoke callback, update C\n          cdata[i][j] = inverse ? cf(b, x[i]) : cf(x[i], b);\n        }\n        else {\n          // dense matrix value @ i, j\n          cdata[i][j] = b;\n        }\n      }\n    }\n\n    // return sparse matrix\n    return c;\n  };\n\n  return algorithm10;\n}\n\nexports.name = 'algorithm10';\nexports.factory = factory;\n","'use strict';\n\nvar util = require('../../../utils/index');\nvar DimensionError = require('../../../error/DimensionError');\n\nvar string = util.string,\n    isString = string.isString;\n\nfunction factory (type, config, load, typed) {\n\n  var DenseMatrix = type.DenseMatrix;\n\n  /**\n   * Iterates over DenseMatrix items and invokes the callback function f(Aij..z, Bij..z). \n   * Callback function invoked MxN times.\n   *\n   * C(i,j,...z) = f(Aij..z, Bij..z)\n   *\n   * @param {Matrix}   a                 The DenseMatrix instance (A)\n   * @param {Matrix}   b                 The DenseMatrix instance (B)\n   * @param {Function} callback          The f(Aij..z,Bij..z) operation to invoke\n   *\n   * @return {Matrix}                    DenseMatrix (C)\n   *\n   * https://github.com/josdejong/mathjs/pull/346#issuecomment-97658658\n   */\n  var algorithm13 = function (a, b, callback) {\n    // a arrays\n    var adata = a._data;\n    var asize = a._size;\n    var adt = a._datatype;\n    // b arrays\n    var bdata = b._data;\n    var bsize = b._size;\n    var bdt = b._datatype;\n    // c arrays\n    var csize = [];\n\n    // validate dimensions\n    if (asize.length !== bsize.length)\n      throw new DimensionError(asize.length, bsize.length);\n\n    // validate each one of the dimension sizes\n    for (var s = 0; s < asize.length; s++) {\n      // must match\n      if (asize[s] !== bsize[s])\n        throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n      // update dimension in c\n      csize[s] = asize[s];\n    }\n\n    // datatype\n    var dt;\n    // callback signature to use\n    var cf = callback;\n\n    // process data types\n    if (typeof adt === 'string' && adt === bdt) {\n      // datatype\n      dt = adt;\n      // convert b to the same datatype\n      b = typed.convert(b, dt);\n      // callback\n      cf = typed.find(callback, [dt, dt]);\n    }\n\n    // populate cdata, iterate through dimensions\n    var cdata = csize.length > 0 ? _iterate(cf, 0, csize, csize[0], adata, bdata) : [];\n    \n    // c matrix\n    return new DenseMatrix({\n      data: cdata,\n      size: csize,\n      datatype: dt\n    });\n  };\n  \n  // recursive function\n  var _iterate = function (f, level, s, n, av, bv) {\n    // initialize array for this level\n    var cv = [];\n    // check we reach the last level\n    if (level === s.length - 1) {\n      // loop arrays in last level\n      for (var i = 0; i < n; i++) {\n        // invoke callback and store value\n        cv[i] = f(av[i], bv[i]);\n      }\n    }\n    else {\n      // iterate current level\n      for (var j = 0; j < n; j++) {\n        // iterate next level\n        cv[j] = _iterate(f, level + 1, s, s[level + 1], av[j], bv[j]);\n      }\n    }\n    return cv;\n  };\n  \n  return algorithm13;\n}\n\nexports.name = 'algorithm13';\nexports.factory = factory;\n","'use strict';\n\nvar clone = require('../../../utils/object').clone;\n\nfunction factory (type, config, load, typed) {\n\n  var DenseMatrix = type.DenseMatrix;\n\n  /**\n   * Iterates over DenseMatrix items and invokes the callback function f(Aij..z, b). \n   * Callback function invoked MxN times.\n   *\n   * C(i,j,...z) = f(Aij..z, b)\n   *\n   * @param {Matrix}   a                 The DenseMatrix instance (A)\n   * @param {Scalar}   b                 The Scalar value\n   * @param {Function} callback          The f(Aij..z,b) operation to invoke\n   * @param {boolean}  inverse           A true value indicates callback should be invoked f(b,Aij..z)\n   *\n   * @return {Matrix}                    DenseMatrix (C)\n   *\n   * https://github.com/josdejong/mathjs/pull/346#issuecomment-97659042\n   */\n  var algorithm14 = function (a, b, callback, inverse) {\n    // a arrays\n    var adata = a._data;\n    var asize = a._size;\n    var adt = a._datatype;\n    \n    // datatype\n    var dt;\n    // callback signature to use\n    var cf = callback;\n\n    // process data types\n    if (typeof adt === 'string') {\n      // datatype\n      dt = adt;\n      // convert b to the same datatype\n      b = typed.convert(b, dt);\n      // callback\n      cf = typed.find(callback, [dt, dt]);\n    }\n    \n    // populate cdata, iterate through dimensions\n    var cdata = asize.length > 0 ? _iterate(cf, 0, asize, asize[0], adata, b, inverse) : [];\n\n    // c matrix\n    return new DenseMatrix({\n      data: cdata,\n      size: clone(asize),\n      datatype: dt\n    });\n  };\n  \n  // recursive function\n  var _iterate = function (f, level, s, n, av, bv, inverse) {\n    // initialize array for this level\n    var cv = [];\n    // check we reach the last level\n    if (level === s.length - 1) {\n      // loop arrays in last level\n      for (var i = 0; i < n; i++) {\n        // invoke callback and store value\n        cv[i] = inverse ? f(bv, av[i]) : f(av[i], bv);\n      }\n    }\n    else {\n      // iterate current level\n      for (var j = 0; j < n; j++) {\n        // iterate next level\n        cv[j] = _iterate(f, level + 1, s, s[level + 1], av[j], bv, inverse);\n      }\n    }\n    return cv;\n  };\n\n  return algorithm14;\n}\n\nexports.name = 'algorithm14';\nexports.factory = factory;\n","'use strict';\n\nvar extend = require('../../utils/object').extend;\n\nfunction factory (type, config, load, typed) {\n\n  var matrix = load(require('../../type/matrix/function/matrix'));\n  var addScalar = load(require('./addScalar'));\n  var latex = require('../../utils/latex.js');\n  \n  var algorithm01 = load(require('../../type/matrix/utils/algorithm01'));\n  var algorithm04 = load(require('../../type/matrix/utils/algorithm04'));\n  var algorithm10 = load(require('../../type/matrix/utils/algorithm10'));\n  var algorithm13 = load(require('../../type/matrix/utils/algorithm13'));\n  var algorithm14 = load(require('../../type/matrix/utils/algorithm14'));\n\n  /**\n   * Add two or more values, `x + y`.\n   * For matrices, the function is evaluated element wise.\n   *\n   * Syntax:\n   *\n   *    math.add(x, y)\n   *    math.add(x, y, z, ...)\n   *\n   * Examples:\n   *\n   *    math.add(2, 3);               // returns number 5\n   *    math.add(2, 3, 4);            // returns number 9\n   *\n   *    var a = math.complex(2, 3);\n   *    var b = math.complex(-4, 1);\n   *    math.add(a, b);               // returns Complex -2 + 4i\n   *\n   *    math.add([1, 2, 3], 4);       // returns Array [5, 6, 7]\n   *\n   *    var c = math.unit('5 cm');\n   *    var d = math.unit('2.1 mm');\n   *    math.add(c, d);               // returns Unit 52.1 mm\n   *\n   *    math.add(\"2.3\", \"4\");         // returns number 6.3\n   *\n   * See also:\n   *\n   *    subtract, sum\n   *\n   * @param  {number | BigNumber | Fraction | Complex | Unit | Array | Matrix} x First value to add\n   * @param  {number | BigNumber | Fraction | Complex | Unit | Array | Matrix} y Second value to add\n   * @return {number | BigNumber | Fraction | Complex | Unit | Array | Matrix} Sum of `x` and `y`\n   */\n  var add = typed('add', extend({\n    // we extend the signatures of addScalar with signatures dealing with matrices\n\n    'Matrix, Matrix': function (x, y) {\n      // result\n      var c;\n      \n      // process matrix storage\n      switch (x.storage()) {\n        case 'sparse':\n          switch (y.storage()) {\n            case 'sparse':\n              // sparse + sparse\n              c = algorithm04(x, y, addScalar);\n              break;\n            default:\n              // sparse + dense\n              c = algorithm01(y, x, addScalar, true);\n              break;\n          }\n          break;\n        default:\n          switch (y.storage()) {\n            case 'sparse':\n              // dense + sparse\n              c = algorithm01(x, y, addScalar, false);\n              break;\n            default:\n              // dense + dense\n              c = algorithm13(x, y, addScalar);\n              break;\n          }\n          break;\n      }\n      return c;\n    },\n    \n    'Array, Array': function (x, y) {\n      // use matrix implementation\n      return add(matrix(x), matrix(y)).valueOf();\n    },\n    \n    'Array, Matrix': function (x, y) {\n      // use matrix implementation\n      return add(matrix(x), y);\n    },\n    \n    'Matrix, Array': function (x, y) {\n      // use matrix implementation\n      return add(x, matrix(y));\n    },\n    \n    'Matrix, any': function (x, y) {\n      // result\n      var c;\n      // check storage format\n      switch (x.storage()) {\n        case 'sparse':\n          c = algorithm10(x, y, addScalar, false);\n          break;\n        default:\n          c = algorithm14(x, y, addScalar, false);\n          break;\n      }\n      return c;\n    },\n    \n    'any, Matrix': function (x, y) {\n      // result\n      var c;\n      // check storage format\n      switch (y.storage()) {\n        case 'sparse':\n          c = algorithm10(y, x, addScalar, true);\n          break;\n        default:\n          c = algorithm14(y, x, addScalar, true);\n          break;\n      }\n      return c;\n    },\n    \n    'Array, any': function (x, y) {\n      // use matrix implementation\n      return algorithm14(matrix(x), y, addScalar, false).valueOf();\n    },\n\n    'any, Array': function (x, y) {\n      // use matrix implementation\n      return algorithm14(matrix(y), x, addScalar, true).valueOf();\n    },\n\n    'any, any': addScalar,\n\n    'any, any, ...any': function (x, y, rest) {\n      var result = add(x, y);\n\n      for (var i = 0; i < rest.length; i++) {\n        result = add(result, rest[i]);\n      }\n\n      return result;\n    }\n  }, addScalar.signatures));\n\n  add.toTex = {\n    2: '\\\\left(${args[0]}' + latex.operators['add'] + '${args[1]}\\\\right)'\n  };\n  \n  return add;\n}\n\nexports.name = 'add';\nexports.factory = factory;\n","'use strict';\n\nfunction factory (type, config, load) {\n  \n  var add = load(require('../../function/arithmetic/add'));\n  var equalScalar = load(require('../../function/relational/equalScalar'));\n  \n  /**\n   * An ordered Sparse Accumulator is a representation for a sparse vector that includes a dense array \n   * of the vector elements and an ordered list of non-zero elements.\n   */\n  function Spa() {\n    if (!(this instanceof Spa))\n      throw new SyntaxError('Constructor must be called with the new operator');\n    \n    // allocate vector, TODO use typed arrays\n    this._values = [];\n    this._heap = new type.FibonacciHeap();\n  }\n\n  /**\n   * Attach type information\n   */\n  Spa.prototype.type = 'Spa';\n  Spa.prototype.isSpa = true;\n\n  /**\n   * Set the value for index i.\n   *\n   * @param {number} i                       The index\n   * @param {number | BigNumber | Complex}   The value at index i\n   */\n  Spa.prototype.set = function (i, v) {\n    // check we have a value @ i\n    if (!this._values[i]) {\n      // insert in heap\n      var node = this._heap.insert(i, v);\n      // set the value @ i\n      this._values[i] = node;\n    }\n    else {\n      // update the value @ i\n      this._values[i].value = v;\n    }\n  };\n  \n  Spa.prototype.get = function (i) {\n    var node = this._values[i];\n    if (node)\n      return node.value;\n    return 0;\n  };\n  \n  Spa.prototype.accumulate = function (i, v) {\n    // node @ i\n    var node = this._values[i];\n    if (!node) {\n      // insert in heap\n      node = this._heap.insert(i, v);\n      // initialize value\n      this._values[i] = node;\n    }\n    else {\n      // accumulate value\n      node.value = add(node.value, v);\n    }\n  };\n  \n  Spa.prototype.forEach = function (from, to, callback) {\n    // references\n    var heap = this._heap;\n    var values = this._values;\n    // nodes\n    var nodes = [];\n    // node with minimum key, save it\n    var node = heap.extractMinimum();\n    if (node)\n      nodes.push(node);\n    // extract nodes from heap (ordered)\n    while (node && node.key <= to) {\n      // check it is in range\n      if (node.key >= from) {\n        // check value is not zero\n        if (!equalScalar(node.value, 0)) {\n          // invoke callback\n          callback(node.key, node.value, this);\n        }\n      }\n      // extract next node, save it\n      node = heap.extractMinimum();\n      if (node)\n        nodes.push(node);\n    }\n    // reinsert all nodes in heap\n    for (var i = 0; i < nodes.length; i++) {\n      // current node\n      var n = nodes[i];\n      // insert node in heap\n      node = heap.insert(n.key, n.value);\n      // update values\n      values[node.key] = node;\n    }\n  };\n  \n  Spa.prototype.swap = function (i, j) {\n    // node @ i and j\n    var nodei = this._values[i];\n    var nodej = this._values[j];\n    // check we need to insert indeces\n    if (!nodei && nodej) {\n      // insert in heap\n      nodei = this._heap.insert(i, nodej.value);\n      // remove from heap\n      this._heap.remove(nodej);\n      // set values\n      this._values[i] = nodei;\n      this._values[j] = undefined;\n    }\n    else if (nodei && !nodej) {\n      // insert in heap\n      nodej = this._heap.insert(j, nodei.value);\n      // remove from heap\n      this._heap.remove(nodei);\n      // set values\n      this._values[j] = nodej;\n      this._values[i] = undefined;\n    }\n    else if (nodei && nodej) {\n      // swap values\n      var v = nodei.value;\n      nodei.value = nodej.value;\n      nodej.value = v;\n    }\n  };\n  \n  return Spa;\n}\n\nexports.name = 'Spa';\nexports.path = 'type';\nexports.factory = factory;\n","'use strict';\n\nvar DimensionError = require('../../../error/DimensionError');\n\nfunction factory (type, config, load, typed) {\n\n  var DenseMatrix = type.DenseMatrix;\n\n  /**\n   * Iterates over SparseMatrix items and invokes the callback function f(Dij, Sij).\n   * Callback function invoked M*N times.\n   *\n   *\n   *            f(Dij, Sij)  ; S(i,j) !== 0\n   * C(i,j) = \n   *            f(Dij, 0)    ; otherwise\n   *\n   *\n   * @param {Matrix}   denseMatrix       The DenseMatrix instance (D)\n   * @param {Matrix}   sparseMatrix      The SparseMatrix instance (C)\n   * @param {Function} callback          The f(Dij,Sij) operation to invoke, where Dij = DenseMatrix(i,j) and Sij = SparseMatrix(i,j)\n   * @param {boolean}  inverse           A true value indicates callback should be invoked f(Sij,Dij)\n   *\n   * @return {Matrix}                    DenseMatrix (C)\n   *\n   * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97477571\n   */\n  var algorithm03 = function (denseMatrix, sparseMatrix, callback, inverse) {\n    // dense matrix arrays\n    var adata = denseMatrix._data;\n    var asize = denseMatrix._size;\n    var adt = denseMatrix._datatype;\n    // sparse matrix arrays\n    var bvalues = sparseMatrix._values;\n    var bindex = sparseMatrix._index;\n    var bptr = sparseMatrix._ptr;\n    var bsize = sparseMatrix._size;\n    var bdt = sparseMatrix._datatype;\n\n    // validate dimensions\n    if (asize.length !== bsize.length)\n      throw new DimensionError(asize.length, bsize.length);\n\n    // check rows & columns\n    if (asize[0] !== bsize[0] || asize[1] !== bsize[1])\n      throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n\n    // sparse matrix cannot be a Pattern matrix\n    if (!bvalues)\n      throw new Error('Cannot perform operation on Dense Matrix and Pattern Sparse Matrix');\n\n    // rows & columns\n    var rows = asize[0];\n    var columns = asize[1];\n\n    // datatype\n    var dt;\n    // zero value\n    var zero = 0;\n    // callback signature to use\n    var cf = callback;\n\n    // process data types\n    if (typeof adt === 'string' && adt === bdt) {\n      // datatype\n      dt = adt;\n      // convert 0 to the same datatype\n      zero = typed.convert(0, dt);\n      // callback\n      cf = typed.find(callback, [dt, dt]);\n    }\n\n    // result (DenseMatrix)\n    var cdata = [];\n\n    // initialize dense matrix\n    for (var z = 0; z < rows; z++) {\n      // initialize row\n      cdata[z] = [];\n    }\n\n    // workspace\n    var x = [];\n    // marks indicating we have a value in x for a given column\n    var w = [];\n\n    // loop columns in b\n    for (var j = 0; j < columns; j++) {\n      // column mark\n      var mark = j + 1;\n      // values in column j\n      for (var k0 = bptr[j], k1 = bptr[j + 1], k = k0; k < k1; k++) {\n        // row\n        var i = bindex[k];\n        // update workspace\n        x[i] = inverse ? cf(bvalues[k], adata[i][j]) : cf(adata[i][j], bvalues[k]);\n        w[i] = mark;\n      }\n      // process workspace\n      for (var y = 0; y < rows; y++) {\n        // check we have a calculated value for current row\n        if (w[y] === mark) {\n          // use calculated value\n          cdata[y][j] = x[y];\n        }\n        else {\n          // calculate value\n          cdata[y][j] = inverse ? cf(zero, adata[y][j]) : cf(adata[y][j], zero);\n        }\n      }\n    }\n\n    // return dense matrix\n    return new DenseMatrix({\n      data: cdata,\n      size: [rows, columns],\n      datatype: dt\n    });\n  };\n  \n  return algorithm03;\n}\n\nexports.name = 'algorithm03';\nexports.factory = factory;\n","'use strict';\n\nvar DimensionError = require('../../../error/DimensionError');\n\nfunction factory (type, config, load, typed) {\n\n  var DenseMatrix = type.DenseMatrix;\n\n  /**\n   * Iterates over SparseMatrix A and SparseMatrix B items (zero and nonzero) and invokes the callback function f(Aij, Bij). \n   * Callback function invoked MxN times.\n   *\n   * C(i,j) = f(Aij, Bij)\n   *\n   * @param {Matrix}   a                 The SparseMatrix instance (A)\n   * @param {Matrix}   b                 The SparseMatrix instance (B)\n   * @param {Function} callback          The f(Aij,Bij) operation to invoke\n   *\n   * @return {Matrix}                    DenseMatrix (C)\n   *\n   * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97620294\n   */\n  var algorithm07 = function (a, b, callback) {\n    // sparse matrix arrays\n    var asize = a._size;\n    var adt = a._datatype;\n    // sparse matrix arrays\n    var bsize = b._size;\n    var bdt = b._datatype;\n\n    // validate dimensions\n    if (asize.length !== bsize.length)\n      throw new DimensionError(asize.length, bsize.length);\n\n    // check rows & columns\n    if (asize[0] !== bsize[0] || asize[1] !== bsize[1])\n      throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n\n    // rows & columns\n    var rows = asize[0];\n    var columns = asize[1];\n\n    // datatype\n    var dt;\n    // zero value\n    var zero = 0;\n    // callback signature to use\n    var cf = callback;\n\n    // process data types\n    if (typeof adt === 'string' && adt === bdt) {\n      // datatype\n      dt = adt;\n      // convert 0 to the same datatype\n      zero = typed.convert(0, dt);\n      // callback\n      cf = typed.find(callback, [dt, dt]);\n    }\n\n    // vars\n    var i, j;\n    \n    // result arrays\n    var cdata = [];\n    // initialize c\n    for (i = 0; i < rows; i++)\n      cdata[i] = [];\n\n    // matrix\n    var c = new DenseMatrix({\n      data: cdata,\n      size: [rows, columns],\n      datatype: dt\n    });\n\n    // workspaces\n    var xa = [];\n    var xb = [];\n    // marks indicating we have a value in x for a given column\n    var wa = [];\n    var wb = [];\n\n    // loop columns\n    for (j = 0; j < columns; j++) {\n      // columns mark\n      var mark = j + 1;\n      // scatter the values of A(:,j) into workspace\n      _scatter(a, j, wa, xa, mark);\n      // scatter the values of B(:,j) into workspace\n      _scatter(b, j, wb, xb, mark);\n      // loop rows\n      for (i = 0; i < rows; i++) {\n        // matrix values @ i,j\n        var va = wa[i] === mark ? xa[i] : zero;\n        var vb = wb[i] === mark ? xb[i] : zero;\n        // invoke callback\n        cdata[i][j] = cf(va, vb);\n      }          \n    }\n\n    // return sparse matrix\n    return c;\n  };\n  \n  var _scatter = function (m, j, w, x, mark) {\n    // a arrays\n    var values = m._values;\n    var index = m._index;\n    var ptr = m._ptr;\n    // loop values in column j\n    for (var k = ptr[j], k1 = ptr[j + 1]; k < k1; k++) {\n      // row\n      var i = index[k];\n      // update workspace\n      w[i] = mark;\n      x[i] = values[k];\n    }\n  };\n  \n  return algorithm07;\n}\n\nexports.name = 'algorithm07';\nexports.factory = factory;\n","'use strict';\n\nfunction factory (type, config, load, typed) {\n\n  var DenseMatrix = type.DenseMatrix;\n\n  /**\n   * Iterates over SparseMatrix S nonzero items and invokes the callback function f(Sij, b). \n   * Callback function invoked MxN times.\n   *\n   *\n   *            f(Sij, b)  ; S(i,j) !== 0\n   * C(i,j) =   \n   *            f(0, b)    ; otherwise\n   *\n   *\n   * @param {Matrix}   s                 The SparseMatrix instance (S)\n   * @param {Scalar}   b                 The Scalar value\n   * @param {Function} callback          The f(Aij,b) operation to invoke\n   * @param {boolean}  inverse           A true value indicates callback should be invoked f(b,Sij)\n   *\n   * @return {Matrix}                    DenseMatrix (C)\n   *\n   * https://github.com/josdejong/mathjs/pull/346#issuecomment-97626813\n   */\n  var algorithm12 = function (s, b, callback, inverse) {\n    // sparse matrix arrays\n    var avalues = s._values;\n    var aindex = s._index;\n    var aptr = s._ptr;\n    var asize = s._size;\n    var adt = s._datatype;\n\n    // sparse matrix cannot be a Pattern matrix\n    if (!avalues)\n      throw new Error('Cannot perform operation on Pattern Sparse Matrix and Scalar value');\n\n    // rows & columns\n    var rows = asize[0];\n    var columns = asize[1];\n\n    // datatype\n    var dt;\n    // callback signature to use\n    var cf = callback;\n\n    // process data types\n    if (typeof adt === 'string') {\n      // datatype\n      dt = adt;\n      // convert b to the same datatype\n      b = typed.convert(b, dt);\n      // callback\n      cf = typed.find(callback, [dt, dt]);\n    }\n    \n    // result arrays\n    var cdata = [];\n    // matrix\n    var c = new DenseMatrix({\n      data: cdata,\n      size: [rows, columns],\n      datatype: dt\n    });\n\n    // workspaces\n    var x = [];\n    // marks indicating we have a value in x for a given column\n    var w = [];\n\n    // loop columns\n    for (var j = 0; j < columns; j++) {\n      // columns mark\n      var mark = j + 1;\n      // values in j\n      for (var k0 = aptr[j], k1 = aptr[j + 1], k = k0; k < k1; k++) {\n        // row\n        var r = aindex[k];\n        // update workspace\n        x[r] = avalues[k];\n        w[r] = mark;\n      }\n      // loop rows\n      for (var i = 0; i < rows; i++) {\n        // initialize C on first column\n        if (j === 0) {\n          // create row array\n          cdata[i] = [];\n        }\n        // check sparse matrix has a value @ i,j\n        if (w[i] === mark) {\n          // invoke callback, update C\n          cdata[i][j] = inverse ? cf(b, x[i]) : cf(x[i], b);\n        }\n        else {\n          // dense matrix value @ i, j\n          cdata[i][j] = inverse ? cf(b, 0) : cf(0, b);\n        }\n      }\n    }\n\n    // return sparse matrix\n    return c;\n  };\n  \n  return algorithm12;\n}\n\nexports.name = 'algorithm12';\nexports.factory = factory;\n","'use strict';\n\nvar nearlyEqual = require('../../utils/number').nearlyEqual;\nvar bigNearlyEqual = require('../../utils/bignumber/nearlyEqual');\n\nfunction factory (type, config, load, typed) {\n\n  var matrix = load(require('../../type/matrix/function/matrix'));\n\n  var algorithm03 = load(require('../../type/matrix/utils/algorithm03'));\n  var algorithm07 = load(require('../../type/matrix/utils/algorithm07'));\n  var algorithm12 = load(require('../../type/matrix/utils/algorithm12'));\n  var algorithm13 = load(require('../../type/matrix/utils/algorithm13'));\n  var algorithm14 = load(require('../../type/matrix/utils/algorithm14'));\n\n  var latex = require('../../utils/latex');\n\n  /**\n   * Test whether value x is smaller than y.\n   *\n   * The function returns true when x is smaller than y and the relative\n   * difference between x and y is smaller than the configured epsilon. The\n   * function cannot be used to compare values smaller than approximately 2.22e-16.\n   *\n   * For matrices, the function is evaluated element wise.\n   *\n   * Syntax:\n   *\n   *    math.smaller(x, y)\n   *\n   * Examples:\n   *\n   *    math.smaller(2, 3);            // returns true\n   *    math.smaller(5, 2 * 2);        // returns false\n   *\n   *    var a = math.unit('5 cm');\n   *    var b = math.unit('2 inch');\n   *    math.smaller(a, b);            // returns true\n   *\n   * See also:\n   *\n   *    equal, unequal, smallerEq, smaller, smallerEq, compare\n   *\n   * @param  {number | BigNumber | Fraction | boolean | Unit | string | Array | Matrix} x First value to compare\n   * @param  {number | BigNumber | Fraction | boolean | Unit | string | Array | Matrix} y Second value to compare\n   * @return {boolean | Array | Matrix} Returns true when the x is smaller than y, else returns false\n   */\n  var smaller = typed('smaller', {\n\n    'boolean, boolean': function (x, y) {\n      return x < y;\n    },\n\n    'number, number': function (x, y) {\n      return x < y && !nearlyEqual(x, y, config.epsilon);\n    },\n\n    'BigNumber, BigNumber': function (x, y) {\n      return x.lt(y) && !bigNearlyEqual(x, y, config.epsilon);\n    },\n\n    'Fraction, Fraction': function (x, y) {\n      return x.compare(y) === -1;\n    },\n\n    'Complex, Complex': function (x, y) {\n      throw new TypeError('No ordering relation is defined for complex numbers');\n    },\n\n    'Unit, Unit': function (x, y) {\n      if (!x.equalBase(y)) {\n        throw new Error('Cannot compare units with different base');\n      }\n      return smaller(x.value, y.value);\n    },\n\n    'string, string': function (x, y) {\n      return x < y;\n    },\n\n    'Matrix, Matrix': function (x, y) {\n      // result\n      var c;\n\n      // process matrix storage\n      switch (x.storage()) {\n        case 'sparse':\n          switch (y.storage()) {\n            case 'sparse':\n              // sparse + sparse\n              c = algorithm07(x, y, smaller);\n              break;\n            default:\n              // sparse + dense\n              c = algorithm03(y, x, smaller, true);\n              break;\n          }\n          break;\n        default:\n          switch (y.storage()) {\n            case 'sparse':\n              // dense + sparse\n              c = algorithm03(x, y, smaller, false);\n              break;\n            default:\n              // dense + dense\n              c = algorithm13(x, y, smaller);\n              break;\n          }\n          break;\n      }\n      return c;\n    },\n\n    'Array, Array': function (x, y) {\n      // use matrix implementation\n      return smaller(matrix(x), matrix(y)).valueOf();\n    },\n\n    'Array, Matrix': function (x, y) {\n      // use matrix implementation\n      return smaller(matrix(x), y);\n    },\n\n    'Matrix, Array': function (x, y) {\n      // use matrix implementation\n      return smaller(x, matrix(y));\n    },\n\n    'Matrix, any': function (x, y) {\n      // result\n      var c;\n      // check storage format\n      switch (x.storage()) {\n        case 'sparse':\n          c = algorithm12(x, y, smaller, false);\n          break;\n        default:\n          c = algorithm14(x, y, smaller, false);\n          break;\n      }\n      return c;\n    },\n\n    'any, Matrix': function (x, y) {\n      // result\n      var c;\n      // check storage format\n      switch (y.storage()) {\n        case 'sparse':\n          c = algorithm12(y, x, smaller, true);\n          break;\n        default:\n          c = algorithm14(y, x, smaller, true);\n          break;\n      }\n      return c;\n    },\n\n    'Array, any': function (x, y) {\n      // use matrix implementation\n      return algorithm14(matrix(x), y, smaller, false).valueOf();\n    },\n\n    'any, Array': function (x, y) {\n      // use matrix implementation\n      return algorithm14(matrix(y), x, smaller, true).valueOf();\n    }\n  });\n\n  smaller.toTex = {\n    2: '\\\\left(${args[0]}' + latex.operators['smaller'] + '${args[1]}\\\\right)'\n  };\n\n  return smaller;\n}\n\nexports.name = 'smaller';\nexports.factory = factory;\n","'use strict';\n\nvar nearlyEqual = require('../../utils/number').nearlyEqual;\nvar bigNearlyEqual = require('../../utils/bignumber/nearlyEqual');\n\nfunction factory (type, config, load, typed) {\n  \n  var matrix = load(require('../../type/matrix/function/matrix'));\n\n  var algorithm03 = load(require('../../type/matrix/utils/algorithm03'));\n  var algorithm07 = load(require('../../type/matrix/utils/algorithm07'));\n  var algorithm12 = load(require('../../type/matrix/utils/algorithm12'));\n  var algorithm13 = load(require('../../type/matrix/utils/algorithm13'));\n  var algorithm14 = load(require('../../type/matrix/utils/algorithm14'));\n\n  var latex = require('../../utils/latex');\n\n  /**\n   * Test whether value x is larger than y.\n   *\n   * The function returns true when x is larger than y and the relative\n   * difference between x and y is larger than the configured epsilon. The\n   * function cannot be used to compare values smaller than approximately 2.22e-16.\n   *\n   * For matrices, the function is evaluated element wise.\n   *\n   * Syntax:\n   *\n   *    math.larger(x, y)\n   *\n   * Examples:\n   *\n   *    math.larger(2, 3);             // returns false\n   *    math.larger(5, 2 + 2);         // returns true\n   *\n   *    var a = math.unit('5 cm');\n   *    var b = math.unit('2 inch');\n   *    math.larger(a, b);             // returns false\n   *\n   * See also:\n   *\n   *    equal, unequal, smaller, smallerEq, largerEq, compare\n   *\n   * @param  {number | BigNumber | Fraction | boolean | Unit | string | Array | Matrix} x First value to compare\n   * @param  {number | BigNumber | Fraction | boolean | Unit | string | Array | Matrix} y Second value to compare\n   * @return {boolean | Array | Matrix} Returns true when the x is larger than y, else returns false\n   */\n  var larger = typed('larger', {\n\n    'boolean, boolean': function (x, y) {\n      return x > y;\n    },\n\n    'number, number': function (x, y) {\n      return x > y && !nearlyEqual(x, y, config.epsilon);\n    },\n\n    'BigNumber, BigNumber': function (x, y) {\n      return x.gt(y) && !bigNearlyEqual(x, y, config.epsilon);\n    },\n\n    'Fraction, Fraction': function (x, y) {\n      return x.compare(y) === 1;\n    },\n\n    'Complex, Complex': function () {\n      throw new TypeError('No ordering relation is defined for complex numbers');\n    },\n\n    'Unit, Unit': function (x, y) {\n      if (!x.equalBase(y)) {\n        throw new Error('Cannot compare units with different base');\n      }\n      return larger(x.value, y.value);\n    },\n\n    'string, string': function (x, y) {\n      return x > y;\n    },\n\n    'Matrix, Matrix': function (x, y) {\n      // result\n      var c;\n\n      // process matrix storage\n      switch (x.storage()) {\n        case 'sparse':\n          switch (y.storage()) {\n            case 'sparse':\n              // sparse + sparse\n              c = algorithm07(x, y, larger);\n              break;\n            default:\n              // sparse + dense\n              c = algorithm03(y, x, larger, true);\n              break;\n          }\n          break;\n        default:\n          switch (y.storage()) {\n            case 'sparse':\n              // dense + sparse\n              c = algorithm03(x, y, larger, false);\n              break;\n            default:\n              // dense + dense\n              c = algorithm13(x, y, larger);\n              break;\n          }\n          break;\n      }\n      return c;\n    },\n\n    'Array, Array': function (x, y) {\n      // use matrix implementation\n      return larger(matrix(x), matrix(y)).valueOf();\n    },\n\n    'Array, Matrix': function (x, y) {\n      // use matrix implementation\n      return larger(matrix(x), y);\n    },\n\n    'Matrix, Array': function (x, y) {\n      // use matrix implementation\n      return larger(x, matrix(y));\n    },\n\n    'Matrix, any': function (x, y) {\n      // result\n      var c;\n      // check storage format\n      switch (x.storage()) {\n        case 'sparse':\n          c = algorithm12(x, y, larger, false);\n          break;\n        default:\n          c = algorithm14(x, y, larger, false);\n          break;\n      }\n      return c;\n    },\n\n    'any, Matrix': function (x, y) {\n      // result\n      var c;\n      // check storage format\n      switch (y.storage()) {\n        case 'sparse':\n          c = algorithm12(y, x, larger, true);\n          break;\n        default:\n          c = algorithm14(y, x, larger, true);\n          break;\n      }\n      return c;\n    },\n\n    'Array, any': function (x, y) {\n      // use matrix implementation\n      return algorithm14(matrix(x), y, larger, false).valueOf();\n    },\n\n    'any, Array': function (x, y) {\n      // use matrix implementation\n      return algorithm14(matrix(y), x, larger, true).valueOf();\n    }\n  });\n\n  larger.toTex = {\n    2: '\\\\left(${args[0]}' + latex.operators['larger'] + '${args[1]}\\\\right)'\n  };\n\n  return larger;\n}\n\nexports.name = 'larger';\nexports.factory = factory;\n","'use strict';\n\nfunction factory (type, config, load, typed) {\n  \n  var smaller = load(require('../../function/relational/smaller'));\n  var larger = load(require('../../function/relational/larger'));\n  \n  var oneOverLogPhi = 1.0 / Math.log((1.0 + Math.sqrt(5.0)) / 2.0);\n  \n  /**\n   * Fibonacci Heap implementation, used interally for Matrix math.\n   * @class FibonacciHeap\n   * @constructor FibonacciHeap\n   */\n  function FibonacciHeap() {\n    if (!(this instanceof FibonacciHeap))\n      throw new SyntaxError('Constructor must be called with the new operator');\n\n    // initialize fields\n    this._minimum = null;\n    this._size = 0;\n  }\n\n  /**\n   * Attach type information\n   */\n  FibonacciHeap.prototype.type = 'FibonacciHeap';\n  FibonacciHeap.prototype.isFibonacciHeap = true;\n\n  /**\n   * Inserts a new data element into the heap. No heap consolidation is\n   * performed at this time, the new node is simply inserted into the root\n   * list of this heap. Running time: O(1) actual.\n   * @memberof FibonacciHeap\n   */\n  FibonacciHeap.prototype.insert = function (key, value) {\n    // create node\n    var node = {\n      key: key,\n      value: value,\n      degree: 0\n    };\n    // check we have a node in the minimum\n    if (this._minimum) {\n      // minimum node\n      var minimum = this._minimum;\n      // update left & right of node\n      node.left = minimum;\n      node.right = minimum.right;\n      minimum.right = node;\n      node.right.left = node;\n      // update minimum node in heap if needed\n      if (smaller(key, minimum.key)) {\n        // node has a smaller key, use it as minimum\n        this._minimum = node;\n      }\n    }\n    else {\n      // set left & right\n      node.left = node;\n      node.right = node;\n      // this is the first node\n      this._minimum = node;\n    }\n    // increment number of nodes in heap\n    this._size++;\n    // return node\n    return node;\n  };\n\n  /**\n   * Returns the number of nodes in heap. Running time: O(1) actual.\n   * @memberof FibonacciHeap\n   */\n  FibonacciHeap.prototype.size = function () {\n    return this._size;\n  };\n\n  /**\n   * Removes all elements from this heap.\n   * @memberof FibonacciHeap\n   */\n  FibonacciHeap.prototype.clear = function () {\n    this._minimum = null;\n    this._size = 0;\n  };\n\n  /**\n   * Returns true if the heap is empty, otherwise false.\n   * @memberof FibonacciHeap\n   */\n  FibonacciHeap.prototype.isEmpty = function () {\n    return !!this._minimum;\n  };\n  \n  /**\n   * Extracts the node with minimum key from heap. Amortized running \n   * time: O(log n).\n   * @memberof FibonacciHeap\n   */\n  FibonacciHeap.prototype.extractMinimum = function () {\n    // node to remove\n    var node = this._minimum;\n    // check we have a minimum\n    if (node === null)\n      return node;\n    // current minimum\n    var minimum = this._minimum;\n    // get number of children\n    var numberOfChildren = node.degree;\n    // pointer to the first child\n    var x = node.child;\n    // for each child of node do...\n    while (numberOfChildren > 0) {\n      // store node in right side\n      var tempRight = x.right;\n      // remove x from child list\n      x.left.right = x.right;\n      x.right.left = x.left;\n      // add x to root list of heap\n      x.left = minimum;\n      x.right = minimum.right;\n      minimum.right = x;\n      x.right.left = x;\n      // set Parent[x] to null\n      x.parent = null;\n      x = tempRight;\n      numberOfChildren--;\n    }\n    // remove node from root list of heap\n    node.left.right = node.right;\n    node.right.left = node.left;\n    // update minimum\n    if (node == node.right) {\n      // empty\n      minimum = null;\n    }\n    else {\n      // update minimum\n      minimum = node.right;\n      // we need to update the pointer to the root with minimum key\n      minimum = _findMinimumNode(minimum, this._size);\n    }\n    // decrement size of heap\n    this._size--;\n    // update minimum\n    this._minimum = minimum;\n    // return node\n    return node;\n  };\n  \n  /**\n   * Removes a node from the heap given the reference to the node. The trees\n   * in the heap will be consolidated, if necessary. This operation may fail\n   * to remove the correct element if there are nodes with key value -Infinity.\n   * Running time: O(log n) amortized.\n   * @memberof FibonacciHeap\n   */\n  FibonacciHeap.prototype.remove = function (node) {\n    // decrease key value\n    this._minimum = _decreaseKey(this._minimum, node, -1);\n    // remove the smallest\n    this.extractMinimum();\n  };\n  \n  /**\n   * Decreases the key value for a heap node, given the new value to take on.\n   * The structure of the heap may be changed and will not be consolidated. \n   * Running time: O(1) amortized.\n   * @memberof FibonacciHeap\n   */\n  var _decreaseKey = function (minimum, node, key) {\n    // set node key\n    node.key = key;\n    // get parent node\n    var parent = node.parent;\n    if (parent && smaller(node.key, parent.key)) {\n      // remove node from parent\n      _cut(minimum, node, parent);\n      // remove all nodes from parent to the root parent\n      _cascadingCut(minimum, parent);\n    }\n    // update minimum node if needed\n    if (smaller(node.key, minimum.key))\n      minimum = node;\n    // return minimum\n    return minimum;\n  };\n  \n  /**\n   * The reverse of the link operation: removes node from the child list of parent.\n   * This method assumes that min is non-null. Running time: O(1).\n   * @memberof FibonacciHeap\n   */\n  var _cut = function (minimum, node, parent) {\n    // remove node from parent children and decrement Degree[parent]\n    node.left.right = node.right;\n    node.right.left = node.left;\n    parent.degree--;\n    // reset y.child if necessary\n    if (parent.child == node)\n      parent.child = node.right;\n    // remove child if degree is 0\n    if (parent.degree === 0)\n      parent.child = null;\n    // add node to root list of heap\n    node.left = minimum;\n    node.right = minimum.right;\n    minimum.right = node;\n    node.right.left = node;\n    // set parent[node] to null\n    node.parent = null;\n    // set mark[node] to false\n    node.mark = false;\n  };\n  \n  /**\n   * Performs a cascading cut operation. This cuts node from its parent and then\n   * does the same for its parent, and so on up the tree.\n   * Running time: O(log n); O(1) excluding the recursion.\n   * @memberof FibonacciHeap\n   */\n  var _cascadingCut= function (minimum, node) {\n    // store parent node\n    var parent = node.parent;\n    // if there's a parent...\n    if (!parent)\n      return;\n    // if node is unmarked, set it marked\n    if (!node.mark) {\n      node.mark = true;\n    }\n    else {\n      // it's marked, cut it from parent\n      _cut(minimum, node, parent);\n      // cut its parent as well\n      _cascadingCut(parent);\n    }\n  };\n  \n  /**\n   * Make the first node a child of the second one. Running time: O(1) actual.\n   * @memberof FibonacciHeap\n   */\n  var _linkNodes = function (node, parent) {\n    // remove node from root list of heap\n    node.left.right = node.right;\n    node.right.left = node.left;\n    // make node a Child of parent\n    node.parent = parent;\n    if (!parent.child) {\n      parent.child = node;\n      node.right = node;\n      node.left = node;\n    }\n    else {\n      node.left = parent.child;\n      node.right = parent.child.right;\n      parent.child.right = node;\n      node.right.left = node;\n    }\n    // increase degree[parent]\n    parent.degree++;\n    // set mark[node] false\n    node.mark = false;\n  };\n  \n  var _findMinimumNode = function (minimum, size) {\n    // to find trees of the same degree efficiently we use an array of length O(log n) in which we keep a pointer to one root of each degree\n    var arraySize = Math.floor(Math.log(size) * oneOverLogPhi) + 1;\n    // create list with initial capacity\n    var array = new Array(arraySize);\n    // find the number of root nodes.\n    var numRoots = 0;\n    var x = minimum;\n    if (x) {\n      numRoots++;\n      x = x.right;\n      while (x !== minimum) {\n        numRoots++;\n        x = x.right;\n      }\n    }\n    // vars\n    var y;\n    // For each node in root list do...\n    while (numRoots > 0) {\n      // access this node's degree..\n      var d = x.degree;\n      // get next node\n      var next = x.right;\n      // check if there is a node already in array with the same degree\n      while (true) {\n        // get node with the same degree is any\n        y = array[d];\n        if (!y)\n          break;\n        // make one node with the same degree a child of the other, do this based on the key value.\n        if (larger(x.key, y.key)) {\n          var temp = y;\n          y = x;\n          x = temp;\n        }\n        // make y a child of x\n        _linkNodes(y, x);\n        // we have handled this degree, go to next one.\n        array[d] = null;\n        d++;\n      }\n      // save this node for later when we might encounter another of the same degree.\n      array[d] = x;\n      // move forward through list.\n      x = next;\n      numRoots--;\n    }\n    // Set min to null (effectively losing the root list) and reconstruct the root list from the array entries in array[].\n    minimum = null;\n    // loop nodes in array\n    for (var i = 0; i < arraySize; i++) {\n      // get current node\n      y = array[i];\n      if (!y)\n        continue;\n      // check if we have a linked list\n      if (minimum) {\n        // First remove node from root list.\n        y.left.right = y.right;\n        y.right.left = y.left;\n        // now add to root list, again.\n        y.left = minimum;\n        y.right = minimum.right;\n        minimum.right = y;\n        y.right.left = y;\n        // check if this is a new min.\n        if (smaller(y.key, minimum.key))\n          minimum = y;\n      }\n      else\n        minimum = y;\n    }\n    return minimum;\n  };\n  \n  return FibonacciHeap;\n}\n\nexports.name = 'FibonacciHeap';\nexports.path = 'type';\nexports.factory = factory;\n","'use strict';\n\nvar util = require('../../utils/index');\n\nvar string = util.string;\nvar object = util.object;\n\nvar isArray = Array.isArray;\nvar isString = string.isString;\n\nfunction factory (type, config, load) {\n\n  var DenseMatrix = load(require('./DenseMatrix'));\n\n  var smaller = load(require('../../function/relational/smaller'));\n\n  function ImmutableDenseMatrix(data, datatype) {\n    if (!(this instanceof ImmutableDenseMatrix))\n      throw new SyntaxError('Constructor must be called with the new operator');\n    if (datatype && !isString(datatype))\n      throw new Error('Invalid datatype: ' + datatype);\n\n    if ((data && data.isMatrix === true) || isArray(data)) {\n      // use DenseMatrix implementation\n      var matrix = new DenseMatrix(data, datatype);\n      // internal structures\n      this._data = matrix._data;\n      this._size = matrix._size;\n      this._datatype = matrix._datatype;\n      this._min = null;\n      this._max = null;\n    }\n    else if (data && isArray(data.data) && isArray(data.size)) {\n      // initialize fields from JSON representation\n      this._data = data.data;\n      this._size = data.size;\n      this._datatype = data.datatype;\n      this._min = typeof data.min !== 'undefined' ? data.min : null;\n      this._max = typeof data.max !== 'undefined' ? data.max : null;\n    }\n    else if (data) {\n      // unsupported type\n      throw new TypeError('Unsupported type of data (' + util.types.type(data) + ')');\n    }\n    else {\n      // nothing provided\n      this._data = [];\n      this._size = [0];\n      this._datatype = datatype;\n      this._min = null;\n      this._max = null;\n    }\n  }\n\n  ImmutableDenseMatrix.prototype = new DenseMatrix();\n\n  /**\n   * Attach type information\n   */\n  ImmutableDenseMatrix.prototype.type = 'ImmutableDenseMatrix';\n  ImmutableDenseMatrix.prototype.isImmutableDenseMatrix = true;\n\n  /**\n   * Get a subset of the matrix, or replace a subset of the matrix.\n   *\n   * Usage:\n   *     var subset = matrix.subset(index)               // retrieve subset\n   *     var value = matrix.subset(index, replacement)   // replace subset\n   *\n   * @param {Index} index\n   * @param {Array | ImmutableDenseMatrix | *} [replacement]\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be filled with zeros.\n   */\n  ImmutableDenseMatrix.prototype.subset = function (index) {\n    switch (arguments.length) {\n      case 1:\n        // use base implementation\n        var m = DenseMatrix.prototype.subset.call(this, index);\n        // check result is a matrix\n        if (m.isMatrix) {\n          // return immutable matrix\n          return new ImmutableDenseMatrix({\n            data: m._data,\n            size: m._size,\n            datatype: m._datatype\n          });\n        }\n        return m;\n        \n        // intentional fall through\n      case 2:\n      case 3:\n        throw new Error('Cannot invoke set subset on an Immutable Matrix instance');\n\n      default:\n        throw new SyntaxError('Wrong number of arguments');\n    }\n  };\n\n  /**\n   * Replace a single element in the matrix.\n   * @param {Number[]} index   Zero-based index\n   * @param {*} value\n   * @param {*} [defaultValue]        Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be left undefined.\n   * @return {ImmutableDenseMatrix} self\n   */\n  ImmutableDenseMatrix.prototype.set = function () {\n    throw new Error('Cannot invoke set on an Immutable Matrix instance');\n  };\n\n  /**\n   * Resize the matrix to the given size. Returns a copy of the matrix when\n   * `copy=true`, otherwise return the matrix itself (resize in place).\n   *\n   * @param {Number[]} size           The new size the matrix should have.\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries.\n   *                                  If not provided, the matrix elements will\n   *                                  be filled with zeros.\n   * @param {boolean} [copy]          Return a resized copy of the matrix\n   *\n   * @return {Matrix}                 The resized matrix\n   */\n  ImmutableDenseMatrix.prototype.resize = function () {\n    throw new Error('Cannot invoke resize on an Immutable Matrix instance');\n  };\n\n  /**\n   * Create a clone of the matrix\n   * @return {ImmutableDenseMatrix} clone\n   */\n  ImmutableDenseMatrix.prototype.clone = function () {\n    var m = new ImmutableDenseMatrix({\n      data: object.clone(this._data),\n      size: object.clone(this._size),\n      datatype: this._datatype\n    });\n    return m;\n  };\n\n  /**\n   * Get a JSON representation of the matrix\n   * @returns {Object}\n   */\n  ImmutableDenseMatrix.prototype.toJSON = function () {\n    return {\n      mathjs: 'ImmutableDenseMatrix',\n      data: this._data,\n      size: this._size,\n      datatype: this._datatype\n    };\n  };\n\n  /**\n   * Generate a matrix from a JSON object\n   * @param {Object} json  An object structured like\n   *                       `{\"mathjs\": \"ImmutableDenseMatrix\", data: [], size: []}`,\n   *                       where mathjs is optional\n   * @returns {ImmutableDenseMatrix}\n   */\n  ImmutableDenseMatrix.fromJSON = function (json) {\n    return new ImmutableDenseMatrix(json);\n  };\n\n  /**\n   * Swap rows i and j in Matrix.\n   *\n   * @param {Number} i       Matrix row index 1\n   * @param {Number} j       Matrix row index 2\n   *\n   * @return {Matrix}        The matrix reference\n   */\n  ImmutableDenseMatrix.prototype.swapRows = function () {\n    throw new Error('Cannot invoke swapRows on an Immutable Matrix instance');\n  };\n\n  /**\n   * Calculate the minimum value in the set\n   * @return {Number | undefined} min\n   */\n  ImmutableDenseMatrix.prototype.min = function () {\n    // check min has been calculated before\n    if (this._min === null) {\n      // minimum\n      var m = null;\n      // compute min\n      this.forEach(function (v) {\n        if (m === null || smaller(v, m))\n          m = v;\n      });\n      this._min = m !== null ? m : undefined;\n    }\n    return this._min;\n  };\n\n  /**\n   * Calculate the maximum value in the set\n   * @return {Number | undefined} max\n   */\n  ImmutableDenseMatrix.prototype.max = function () {\n    // check max has been calculated before\n    if (this._max === null) {\n      // maximum\n      var m = null;\n      // compute max\n      this.forEach(function (v) {\n        if (m === null || smaller(m, v))\n          m = v;\n      });\n      this._max = m !== null ? m : undefined;\n    }\n    return this._max;\n  };\n\n  // exports\n  return ImmutableDenseMatrix;\n}\n\nexports.name = 'ImmutableDenseMatrix';\nexports.path = 'type';\nexports.factory = factory;\n","'use strict';\n\nvar clone = require('../../utils/object').clone;\nvar isInteger = require('../../utils/number').isInteger;\n\nfunction factory (type) {\n  \n  /**\n   * Create an index. An Index can store ranges and sets for multiple dimensions.\n   * Matrix.get, Matrix.set, and math.subset accept an Index as input.\n   *\n   * Usage:\n   *     var index = new Index(range1, range2, matrix1, array1, ...);\n   *\n   * Where each parameter can be any of:\n   *     A number\n   *     A string (containing a name of an object property)\n   *     An instance of Range\n   *     An Array with the Set values\n   *     A Matrix with the Set values\n   *\n   * The parameters start, end, and step must be integer numbers.\n   *\n   * @class Index\n   * @Constructor Index\n   * @param {...*} ranges\n   */\n  function Index(ranges) {\n    if (!(this instanceof Index)) {\n      throw new SyntaxError('Constructor must be called with the new operator');\n    }\n\n    this._dimensions = [];\n    this._isScalar = true;\n\n    for (var i = 0, ii = arguments.length; i < ii; i++) {\n      var arg = arguments[i];\n\n      if (arg && (arg.isRange === true)) {\n        this._dimensions.push(arg);\n        this._isScalar = false;\n      }\n      else if (arg && (Array.isArray(arg) || arg.isMatrix === true)) {\n        // create matrix\n        var m = _createImmutableMatrix(arg.valueOf());\n        this._dimensions.push(m);\n        // size\n        var size = m.size();\n        // scalar\n        if (size.length !== 1 || size[0] !== 1) {\n          this._isScalar = false;\n        }\n      }\n      else if (typeof arg === 'number') {\n        this._dimensions.push(_createImmutableMatrix([arg]));\n      }\n      else if (typeof arg === 'string') {\n        // object property (arguments.count should be 1)\n        this._dimensions.push(arg);\n      }\n      // TODO: implement support for wildcard '*'\n      else {\n        throw new TypeError('Dimension must be an Array, Matrix, number, string, or Range');\n      }\n    }\n  }\n\n  /**\n   * Attach type information\n   */\n  Index.prototype.type = 'Index';\n  Index.prototype.isIndex = true;\n\n  function _createImmutableMatrix(arg) {\n    // loop array elements\n    for (var i = 0, l = arg.length; i < l; i++) {\n      if (typeof arg[i] !== 'number' || !isInteger(arg[i])) {\n        throw new TypeError('Index parameters must be positive integer numbers');\n      }\n    }\n    // create matrix\n    return new type.ImmutableDenseMatrix(arg);\n  }\n\n  /**\n   * Create a clone of the index\n   * @memberof Index\n   * @return {Index} clone\n   */\n  Index.prototype.clone = function () {\n    var index = new Index();\n    index._dimensions = clone(this._dimensions);\n    index._isScalar = this._isScalar;\n    return index;\n  };\n\n  /**\n   * Create an index from an array with ranges/numbers\n   * @memberof Index\n   * @param {Array.<Array | number>} ranges\n   * @return {Index} index\n   * @private\n   */\n  Index.create = function (ranges) {\n    var index = new Index();\n    Index.apply(index, ranges);\n    return index;\n  };\n\n  /**\n   * Retrieve the size of the index, the number of elements for each dimension.\n   * @memberof Index\n   * @returns {number[]} size\n   */\n  Index.prototype.size = function () {\n    var size = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var d = this._dimensions[i];\n      size[i] = (typeof d === 'string') ? 1 : d.size()[0];\n    }\n\n    return size;\n  };\n\n  /**\n   * Get the maximum value for each of the indexes ranges.\n   * @memberof Index\n   * @returns {number[]} max\n   */\n  Index.prototype.max = function () {\n    var values = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var range = this._dimensions[i];\n      values[i] = (typeof range === 'string') ? range : range.max();\n    }\n\n    return values;\n  };\n\n  /**\n   * Get the minimum value for each of the indexes ranges.\n   * @memberof Index\n   * @returns {number[]} min\n   */\n  Index.prototype.min = function () {\n    var values = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var range = this._dimensions[i];\n      values[i] = (typeof range === 'string') ? range : range.min();\n    }\n\n    return values;\n  };\n\n  /**\n   * Loop over each of the ranges of the index\n   * @memberof Index\n   * @param {Function} callback   Called for each range with a Range as first\n   *                              argument, the dimension as second, and the\n   *                              index object as third.\n   */\n  Index.prototype.forEach = function (callback) {\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      callback(this._dimensions[i], i, this);\n    }\n  };\n\n  /**\n   * Retrieve the dimension for the given index\n   * @memberof Index\n   * @param {Number} dim                  Number of the dimension\n   * @returns {Range | null} range\n   */\n  Index.prototype.dimension = function (dim) {\n    return this._dimensions[dim] || null;\n  };\n\n  /**\n   * Test whether this index contains an object property\n   * @returns {boolean} Returns true if the index is an object property\n   */\n  Index.prototype.isObjectProperty = function () {\n    return this._dimensions.length === 1 && typeof this._dimensions[0] === 'string';\n  };\n\n  /**\n   * Returns the object property name when the Index holds a single object property,\n   * else returns null\n   * @returns {string | null}\n   */\n  Index.prototype.getObjectProperty = function () {\n    return this.isObjectProperty() ? this._dimensions[0] : null;\n  };\n\n  /**\n   * Test whether this index contains only a single value.\n   *\n   * This is the case when the index is created with only scalar values as ranges,\n   * not for ranges resolving into a single value.\n   * @memberof Index\n   * @return {boolean} isScalar\n   */\n  Index.prototype.isScalar = function () {\n    return this._isScalar;\n  };\n\n  /**\n   * Expand the Index into an array.\n   * For example new Index([0,3], [2,7]) returns [[0,1,2], [2,3,4,5,6]]\n   * @memberof Index\n   * @returns {Array} array\n   */\n  Index.prototype.toArray = function () {\n    var array = [];\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var dimension = this._dimensions[i];\n      array.push((typeof dimension === 'string') ? dimension : dimension.toArray());\n    }\n    return array;\n  };\n\n  /**\n   * Get the primitive value of the Index, a two dimensional array.\n   * Equivalent to Index.toArray().\n   * @memberof Index\n   * @returns {Array} array\n   */\n  Index.prototype.valueOf = Index.prototype.toArray;\n\n  /**\n   * Get the string representation of the index, for example '[2:6]' or '[0:2:10, 4:7, [1,2,3]]'\n   * @memberof Index\n   * @returns {String} str\n   */\n  Index.prototype.toString = function () {\n    var strings = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var dimension = this._dimensions[i];\n      if (typeof dimension === 'string') {\n        strings.push(JSON.stringify(dimension));\n      }\n      else {\n        strings.push(dimension.toString());\n      }\n    }\n\n    return '[' + strings.join(', ') + ']';\n  };\n\n  /**\n   * Get a JSON representation of the Index\n   * @memberof Index\n   * @returns {Object} Returns a JSON object structured as:\n   *                   `{\"mathjs\": \"Index\", \"ranges\": [{\"mathjs\": \"Range\", start: 0, end: 10, step:1}, ...]}`\n   */\n  Index.prototype.toJSON = function () {\n    return {\n      mathjs: 'Index',\n      dimensions: this._dimensions\n    };\n  };\n\n  /**\n   * Instantiate an Index from a JSON object\n   * @memberof Index\n   * @param {Object} json A JSON object structured as:\n   *                     `{\"mathjs\": \"Index\", \"dimensions\": [{\"mathjs\": \"Range\", start: 0, end: 10, step:1}, ...]}`\n   * @return {Index}\n   */\n  Index.fromJSON = function (json) {\n    return Index.create(json.dimensions);\n  };\n\n  return Index;\n}\n\nexports.name = 'Index';\nexports.path = 'type';\nexports.factory = factory;\n","'use strict';\n\nvar number = require('../../utils/number');\n\nfunction factory (type, config, load, typed) {\n  /**\n   * Create a range. A range has a start, step, and end, and contains functions\n   * to iterate over the range.\n   *\n   * A range can be constructed as:\n   *     var range = new Range(start, end);\n   *     var range = new Range(start, end, step);\n   *\n   * To get the result of the range:\n   *     range.forEach(function (x) {\n   *         console.log(x);\n   *     });\n   *     range.map(function (x) {\n   *         return math.sin(x);\n   *     });\n   *     range.toArray();\n   *\n   * Example usage:\n   *     var c = new Range(2, 6);         // 2:1:5\n   *     c.toArray();                     // [2, 3, 4, 5]\n   *     var d = new Range(2, -3, -1);    // 2:-1:-2\n   *     d.toArray();                     // [2, 1, 0, -1, -2]\n   *\n   * @class Range\n   * @constructor Range\n   * @param {number} start  included lower bound\n   * @param {number} end    excluded upper bound\n   * @param {number} [step] step size, default value is 1\n   */\n  function Range(start, end, step) {\n    if (!(this instanceof Range)) {\n      throw new SyntaxError('Constructor must be called with the new operator');\n    }\n\n    if (start != null) {\n      if (start.isBigNumber === true)\n        start = start.toNumber();\n      else if (typeof start !== 'number')\n        throw new TypeError('Parameter start must be a number');\n    }\n    if (end != null) {\n      if (end.isBigNumber === true)\n        end = end.toNumber();\n      else if (typeof end !== 'number')\n        throw new TypeError('Parameter end must be a number');\n    }\n    if (step != null) {\n      if (step.isBigNumber === true)\n        step = step.toNumber();\n      else if (typeof step !== 'number')\n        throw new TypeError('Parameter step must be a number');\n    }\n\n    this.start = (start != null) ? parseFloat(start) : 0;\n    this.end   = (end != null)   ? parseFloat(end)   : 0;\n    this.step  = (step != null)  ? parseFloat(step)  : 1;\n  }\n\n  /**\n   * Attach type information\n   */\n  Range.prototype.type = 'Range';\n  Range.prototype.isRange = true;\n\n  /**\n   * Parse a string into a range,\n   * The string contains the start, optional step, and end, separated by a colon.\n   * If the string does not contain a valid range, null is returned.\n   * For example str='0:2:11'.\n   * @memberof Range\n   * @param {string} str\n   * @return {Range | null} range\n   */\n  Range.parse = function (str) {\n    if (typeof str !== 'string') {\n      return null;\n    }\n\n    var args = str.split(':');\n    var nums = args.map(function (arg) {\n      return parseFloat(arg);\n    });\n\n    var invalid = nums.some(function (num) {\n      return isNaN(num);\n    });\n    if (invalid) {\n      return null;\n    }\n\n    switch (nums.length) {\n      case 2:\n        return new Range(nums[0], nums[1]);\n      case 3:\n        return new Range(nums[0], nums[2], nums[1]);\n      default:\n        return null;\n    }\n  };\n\n  /**\n   * Create a clone of the range\n   * @return {Range} clone\n   */\n  Range.prototype.clone = function () {\n    return new Range(this.start, this.end, this.step);\n  };\n\n  /**\n   * Retrieve the size of the range.\n   * Returns an array containing one number, the number of elements in the range.\n   * @memberof Range\n   * @returns {number[]} size\n   */\n  Range.prototype.size = function () {\n    var len = 0,\n        start = this.start,\n        step = this.step,\n        end = this.end,\n        diff = end - start;\n\n    if (number.sign(step) == number.sign(diff)) {\n      len = Math.ceil((diff) / step);\n    }\n    else if (diff == 0) {\n      len = 0;\n    }\n\n    if (isNaN(len)) {\n      len = 0;\n    }\n    return [len];\n  };\n\n  /**\n   * Calculate the minimum value in the range\n   * @memberof Range\n   * @return {number | undefined} min\n   */\n  Range.prototype.min = function () {\n    var size = this.size()[0];\n\n    if (size > 0) {\n      if (this.step > 0) {\n        // positive step\n        return this.start;\n      }\n      else {\n        // negative step\n        return this.start + (size - 1) * this.step;\n      }\n    }\n    else {\n      return undefined;\n    }\n  };\n\n  /**\n   * Calculate the maximum value in the range\n   * @memberof Range\n   * @return {number | undefined} max\n   */\n  Range.prototype.max = function () {\n    var size = this.size()[0];\n\n    if (size > 0) {\n      if (this.step > 0) {\n        // positive step\n        return this.start + (size - 1) * this.step;\n      }\n      else {\n        // negative step\n        return this.start;\n      }\n    }\n    else {\n      return undefined;\n    }\n  };\n\n\n  /**\n   * Execute a callback function for each value in the range.\n   * @memberof Range\n   * @param {function} callback   The callback method is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Range being traversed.\n   */\n  Range.prototype.forEach = function (callback) {\n    var x = this.start;\n    var step = this.step;\n    var end = this.end;\n    var i = 0;\n\n    if (step > 0) {\n      while (x < end) {\n        callback(x, [i], this);\n        x += step;\n        i++;\n      }\n    }\n    else if (step < 0) {\n      while (x > end) {\n        callback(x, [i], this);\n        x += step;\n        i++;\n      }\n    }\n  };\n\n  /**\n   * Execute a callback function for each value in the Range, and return the\n   * results as an array\n   * @memberof Range\n   * @param {function} callback   The callback method is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Matrix being traversed.\n   * @returns {Array} array\n   */\n  Range.prototype.map = function (callback) {\n    var array = [];\n    this.forEach(function (value, index, obj) {\n      array[index[0]] = callback(value, index, obj);\n    });\n    return array;\n  };\n\n  /**\n   * Create an Array with a copy of the Ranges data\n   * @memberof Range\n   * @returns {Array} array\n   */\n  Range.prototype.toArray = function () {\n    var array = [];\n    this.forEach(function (value, index) {\n      array[index[0]] = value;\n    });\n    return array;\n  };\n\n  /**\n   * Get the primitive value of the Range, a one dimensional array\n   * @memberof Range\n   * @returns {Array} array\n   */\n  Range.prototype.valueOf = function () {\n    // TODO: implement a caching mechanism for range.valueOf()\n    return this.toArray();\n  };\n\n  /**\n   * Get a string representation of the range, with optional formatting options.\n   * Output is formatted as 'start:step:end', for example '2:6' or '0:0.2:11'\n   * @memberof Range\n   * @param {Object | number | function} [options]  Formatting options. See\n   *                                                lib/utils/number:format for a\n   *                                                description of the available\n   *                                                options.\n   * @returns {string} str\n   */\n  Range.prototype.format = function (options) {\n    var str = number.format(this.start, options);\n\n    if (this.step != 1) {\n      str += ':' + number.format(this.step, options);\n    }\n    str += ':' + number.format(this.end, options);\n    return str;\n  };\n\n  /**\n   * Get a string representation of the range.\n   * @memberof Range\n   * @returns {string}\n   */\n  Range.prototype.toString = function () {\n    return this.format();\n  };\n\n  /**\n   * Get a JSON representation of the range\n   * @memberof Range\n   * @returns {Object} Returns a JSON object structured as:\n   *                   `{\"mathjs\": \"Range\", \"start\": 2, \"end\": 4, \"step\": 1}`\n   */\n  Range.prototype.toJSON = function () {\n    return {\n      mathjs: 'Range',\n      start: this.start,\n      end: this.end,\n      step: this.step\n    };\n  };\n\n  /**\n   * Instantiate a Range from a JSON object\n   * @memberof Range\n   * @param {Object} json A JSON object structured as:\n   *                      `{\"mathjs\": \"Range\", \"start\": 2, \"end\": 4, \"step\": 1}`\n   * @return {Range}\n   */\n  Range.fromJSON = function (json) {\n    return new Range(json.start, json.end, json.step);\n  };\n\n  return Range;\n}\n\nexports.name = 'Range';\nexports.path = 'type';\nexports.factory = factory;\n","import {\n  select,\n  selectAll,\n  namespaces\n} from \"d3-selection\";\nimport { line } from \"d3-shape\"\nimport cmb from \"js-combinatorics\"\nimport { define, h, prop } from 'skatejs';\nimport * as skate from 'skatejs';\nimport {nearbyEdgePoints} from \"./nearbyRectEdges.js\"\nimport {drawEdge, cacheBoundingRect} from './drawGraph.js'\nimport core from 'mathjs/core'\nimport matrices from 'mathjs/lib/type/matrix'\nimport {parentGraphContainer} from './graph-container.js'\n\nvar math = core.create();\nmath.import(matrices)\n\nexport const css=`\ncanvas {\n  // width: 100%;\n  // height: 100%;\n  padding: 0; margin: 0;\n  left:0; top:0;\n  position: fixed;\n  overflow: hidden;\n  z-index: -1;\n}\n\n`\nconst detached = Symbol();\nconst lastRenderTime = Symbol();\nconst animate = function(elem,now){\n  if (!elem[lastRenderTime]) { elem[lastRenderTime] = now }\n  if  (elem[lastRenderTime] + 1000/elem.fps <= now)\n      {\n        elem[lastRenderTime] = now;\n        elem.dispatchEvent(new Event('animate'));\n      }\n  if (elem[detached]) {return}\n  else {window.requestAnimationFrame( (now) => {animate(elem,now)} )};\n}\n\nexport const canvas = Symbol();\nconst canvasContext = Symbol();\nexport const edgeData = Symbol();\nexport const edgeModifier = Symbol();\nexport const getNodes = Symbol();\nexport const animateCallback = Symbol();\nexport const refreshEdges = Symbol();\nexport const rectCache = Symbol();\n\nwindow.edgeData = edgeData;\nwindow.canvas = canvas;\n\nconst graphAllEdges = {\n  props: {\n    fps: { attribute: true, default: 60 },\n    color: { attribute: true, default: \"yellow\" },\n    thickness: { attribute: true, default: 2 }\n  },\n  refreshAnimation(elem){\n    var nodes = elem[getNodes]();\n    nodes.forEach(cacheBoundingRect);\n    var ctx = elem[canvasContext]\n    if(ctx == undefined){return;}\n    ctx.canvas.width  = window.innerWidth;\n    ctx.canvas.height = window.innerHeight;\n    ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height)\n    ctx.strokeStyle = elem.color;\n    ctx.fillStyle = elem.color;\n    ctx.lineWidth = elem.thickness;\n\n    elem[edgeData].forEach((edge) => drawEdge(ctx,edge,elem));\n  },\n\n  edges(elem){\n    var nodes = elem[getNodes]();\n    // console.log(\"number of nodes\", nodes.length)\n    if (nodes.length < 2) { return []; }\n    // var combo = cmb.combination(nodes,2).toArray()\n    // console.log(combo.map((c)=> {return {source: c[0], target: c[1], direction: 0}}))\n    var combos = []\n    nodes.forEach((n)=>{\n      nodes.forEach((m)=>{\n        if(n==m){ return; }\n        combos.push({source: n, target: m, direction: 1})\n      })\n    })\n    // console.log(\"number of 2x combinations\", combos.length)\n\n    return combos\n  },\n\n  attached(elem) {\n    elem[animateCallback] = ()=>{this.refreshAnimation(elem)}\n    elem[edgeModifier] = (edges) => edges;\n    animate(elem);\n    elem[getNodes] = () => selectAll(parentGraphContainer(elem).children)\n         .filter((d,i,nodes)=>{return !nodes[i][edgeData];}).nodes()\n    elem[edgeData] = [];\n    // console.log(this)\n    elem[canvas] = document.createElement(\"canvas\")\n    elem[canvasContext] = elem[canvas].getContext(\"2d\");\n\n    elem[refreshEdges] = (e) => {\n      // console.log(\"REFRESHING EDGES\")\n      elem[edgeData] = elem[edgeModifier](this.edges(elem));\n      // console.log(elem[edgeData])\n    }\n    parentGraphContainer(elem).addEventListener('graph-updated', elem[refreshEdges])\n  },\n\n  detached(elem) {\n    // console.log(\"detached\",elem)\n    elem[detached] = true;\n    elem.removeEventListener('animate',elem[animateCallback])\n  },\n\n  attributeChanged(elem) {\n  },\n\n  render(elem) {\n    return [\n      h('div',{style: \"display: none\"}, h('slot', {\n      })),\n\n      h(\"style\",css )\n    ]\n  },\n\n  rendered(elem){\n    elem.shadowRoot.appendChild(elem[canvas])\n    // console.log(\"rendered\")\n    elem[refreshEdges]();\n    elem.addEventListener('animate',elem[animateCallback])\n  }\n};\n\nexport const EdgesAllPairs = define('edges-all-pairs',graphAllEdges);\n","'use strict';\n\nfunction factory (type, config, load, typed) {\n  /**\n   * Create an index. An Index can store ranges having start, step, and end\n   * for multiple dimensions.\n   * Matrix.get, Matrix.set, and math.subset accept an Index as input.\n   *\n   * Syntax:\n   *\n   *     math.index(range1, range2, ...)\n   *\n   * Where each range can be any of:\n   *\n   * - A number\n   * - A string for getting/setting an object property\n   * - An instance of `Range`\n   * - A one-dimensional Array or a Matrix with numbers\n   *\n   * Indexes must be zero-based, integer numbers.\n   *\n   * Examples:\n   *\n   *    var math = math.js\n   *\n   *    var b = [1, 2, 3, 4, 5];\n   *    math.subset(b, math.index([1, 2, 3]));     // returns [2, 3, 4]\n   *\n   *    var a = math.matrix([[1, 2], [3, 4]]);\n   *    a.subset(math.index(0, 1));             // returns 2\n   *\n   * See also:\n   *\n   *    bignumber, boolean, complex, matrix, number, string, unit\n   *\n   * @param {...*} ranges   Zero or more ranges or numbers.\n   * @return {Index}        Returns the created index\n   */\n  return typed('index', {\n    '...number | string | BigNumber | Range | Array | Matrix': function (args) {\n      var ranges = args.map(function (arg) {\n        if (arg && arg.isBigNumber === true) {\n          return arg.toNumber(); // convert BigNumber to Number\n        }\n        else if (arg && (Array.isArray(arg) || arg.isMatrix === true)) {\n          return arg.map(function (elem) {\n            // convert BigNumber to Number\n            return (elem && elem.isBigNumber === true) ? elem.toNumber() : elem;\n          });\n        }\n        else {\n          return arg;\n        }\n      });\n\n      var res = new type.Index();\n      type.Index.apply(res, ranges);\n      return res;\n    }\n  });\n}\n\nexports.name = 'index';\nexports.factory = factory;\n","'use strict';\n\nfunction factory (type, config, load, typed) {\n\n  var SparseMatrix = type.SparseMatrix;\n\n  /**\n   * Create a Sparse Matrix. The function creates a new `math.type.Matrix` object from\n   * an `Array`. A Matrix has utility functions to manipulate the data in the\n   * matrix, like getting the size and getting or setting values in the matrix.\n   *\n   * Syntax:\n   *\n   *    math.sparse()               // creates an empty sparse matrix.\n   *    math.sparse(data)           // creates a sparse matrix with initial data.\n   *    math.sparse(data, 'number') // creates a sparse matrix with initial data, number datatype.\n   *\n   * Examples:\n   *\n   *    var m = math.sparse([[1, 2], [3, 4]]);\n   *    m.size();                        // Array [2, 2]\n   *    m.resize([3, 2], 5);\n   *    m.valueOf();                     // Array [[1, 2], [3, 4], [5, 5]]\n   *    m.get([1, 0])                    // number 3\n   *\n   * See also:\n   *\n   *    bignumber, boolean, complex, index, number, string, unit, matrix\n   *\n   * @param {Array | Matrix} [data]    A two dimensional array\n   *\n   * @return {Matrix} The created matrix\n   */\n  var sparse = typed('sparse', {\n    '': function () {\n      return new SparseMatrix([]);\n    },\n    \n    'string': function (datatype) {\n      return new SparseMatrix([], datatype);\n    },\n\n    'Array | Matrix': function (data) {\n      return new SparseMatrix(data);\n    },\n    \n    'Array | Matrix, string': function (data, datatype) {\n      return new SparseMatrix(data, datatype);\n    }\n  });\n\n  sparse.toTex = {\n    0: '\\\\begin{bsparse}\\\\end{bsparse}',\n    1: '\\\\left(${args[0]}\\\\right)'\n  };\n\n  return sparse;\n}\n\nexports.name = 'sparse';\nexports.factory = factory;\n","module.exports = [\n  // types\n  require('./Matrix'),\n  require('./DenseMatrix'),\n  require('./SparseMatrix'),\n  require('./Spa'),\n  require('./FibonacciHeap'),\n  require('./ImmutableDenseMatrix'),\n  require('./MatrixIndex'),\n  require('./Range'),\n\n  // construction functions\n  require('./function/index'),\n  require('./function/matrix'),\n  require('./function/sparse')\n];\n","import {EdgesAllPairs, refreshEdges, getNodes, css} from './edges-all-pairs'\nimport {define, h} from 'skatejs'\nimport {select, selectAll} from 'd3-selection'\nimport core from 'mathjs/core'\nimport matrices from 'mathjs/lib/type/matrix'\nimport {parentGraphContainer} from './graph-container.js'\n\nvar math = core.create();\nmath.import(matrices)\n\ndefine('edges-adjacency-matrix', EdgesAllPairs.extend({\n  edges(elem){\n    // console.log(elem)\n    try{ var adj = JSON.parse(elem.innerHTML) }catch(e){ }\n    var nodes = elem[getNodes]()\n    if (nodes.length < 2) { return []; }\n    var edges = [[nodes[0],nodes[1]]]\n    edges = []\n    adj.forEach((row,i)=>{\n      row.forEach((edge,j)=>{\n        if(edge == 1){\n          edges.push({source: nodes[i], target: nodes[j], direction: 1})\n        }\n      })\n    })\n    // combos = combos.map((c)=> {return {source: c[0], target: c[1], direction: 1}})\n    // console.log(edges)\n    return edges\n  },\n  render(elem) {\n    return [\n      h('div',{style: \"display: none\"}, h('slot', {\n        onSlotchange: elem[refreshEdges]\n      })),\n      h(\"style\",css )\n    ]\n  },\n}))\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar Kn = 18,\n    Xn = 0.950470, // D65 standard referent\n    Yn = 1,\n    Zn = 1.088830,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) {\n    var h = o.h * deg2rad;\n    return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n  }\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var b = rgb2xyz(o.r),\n      a = rgb2xyz(o.g),\n      l = rgb2xyz(o.b),\n      x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),\n      y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),\n      z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    y = Yn * lab2xyz(y);\n    x = Xn * lab2xyz(x);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      xyz2rgb( 3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB\n      xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),\n      xyz2rgb( 0.0556434 * x - 0.2040259 * y + 1.0572252 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction xyz2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2xyz(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + Kn * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - Kn * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return labConvert(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x, p) {\n  x = x.toPrecision(p);\n\n  out: for (var n = x.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (x[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      case \"e\": break out;\n      default: if (i0 > 0) i0 = 0; break;\n    }\n  }\n\n  return i0 > 0 ? x.slice(0, i0) + x.slice(i1 + 1) : x;\n}\n","import interval from \"./interval\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import { define, h } from 'skatejs';\nimport {startDragging, stopDragging, draggableHostStyle} from './draggable.js';\n\nvar puppyStyle = `\n  div {\n    display: inline-block;\n    background-image: url(http://i.imgur.com/B2YwP9u.gif);\n    background-position: center;\n    background-size: 100%;\n    margin: 0;\n    padding: 0;\n    width: 100px;\n    height: 150px;\n    border: solid deeppink 5px;\n  }\n  puppy-dog {\n    display: inline-block;\n    // position: relative;\n    background-size: 100%;\n    margin: 0;\n    padding: 0;\n  }\n  :host {\n    display: inline-block;\n    // position: relative;\n    background-size: 100%;\n    margin: 0;\n    padding: 0;\n  }\n`\ndefine(\"puppy-dog\",{\n    attached(elem){\n      startDragging(elem);\n    },\n    detached(elem){\n      // stopDragging(elem);\n    },\n    render(elem){\n      return [h(\"div\",\"\"),h(\"style\",puppyStyle)]\n    },\n    rendered(elem){\n    }\n})\n"]}