{"version":3,"sources":["../../../../../\u0000commonjsHelpers","../node_modules/skatejs-web-components/src/fix/safari.js","../node_modules/skatejs/src/util/get-all-keys.js","../node_modules/skatejs/src/util/empty.js","../node_modules/skatejs/src/util/prop-context.js","../node_modules/skatejs/src/api/vdom.js","../node_modules/skatejs/src/util/create-symbol.js","../node_modules/skatejs/src/util/data.js","../node_modules/skatejs/src/util/dash-case.js","../node_modules/skatejs/src/util/debounce.js","../node_modules/skatejs/src/util/get-own-property-descriptors.js","../node_modules/skatejs/src/util/set-ctor-native-property.js","../node_modules/skatejs/src/util/get-props-map.js","../node_modules/skatejs/src/api/props.js","../node_modules/skatejs/src/util/get-default-value.js","../node_modules/skatejs/src/util/get-initial-value.js","../node_modules/skatejs/src/util/get-prop-data.js","../node_modules/skatejs/src/util/sync-prop-to-attr.js","../node_modules/skatejs/src/lifecycle/props-init.js","../node_modules/skatejs/src/api/component.js","../node_modules/skatejs/src/util/unique-id.js","../node_modules/skatejs/src/api/define.js","../src/draggable.js","../src/detachable.js","../src/graph-container.js","../node_modules/d3-selection/src/namespace.js","../node_modules/d3-selection/src/creator.js","../node_modules/d3-selection/src/selection/on.js","../node_modules/d3-selection/src/selector.js","../node_modules/d3-selection/src/selection/select.js","../node_modules/d3-selection/src/selectorAll.js","../node_modules/d3-selection/src/selection/selectAll.js","../node_modules/d3-selection/src/selection/filter.js","../node_modules/d3-selection/src/selection/sparse.js","../node_modules/d3-selection/src/selection/enter.js","../node_modules/d3-selection/src/constant.js","../node_modules/d3-selection/src/selection/data.js","../node_modules/d3-selection/src/selection/exit.js","../node_modules/d3-selection/src/selection/merge.js","../node_modules/d3-selection/src/selection/order.js","../node_modules/d3-selection/src/selection/sort.js","../node_modules/d3-selection/src/selection/call.js","../node_modules/d3-selection/src/selection/nodes.js","../node_modules/d3-selection/src/selection/node.js","../node_modules/d3-selection/src/selection/size.js","../node_modules/d3-selection/src/selection/empty.js","../node_modules/d3-selection/src/selection/each.js","../node_modules/d3-selection/src/selection/attr.js","../node_modules/d3-selection/src/window.js","../node_modules/d3-selection/src/selection/style.js","../node_modules/d3-selection/src/selection/property.js","../node_modules/d3-selection/src/selection/classed.js","../node_modules/d3-selection/src/selection/text.js","../node_modules/d3-selection/src/selection/html.js","../node_modules/d3-selection/src/selection/raise.js","../node_modules/d3-selection/src/selection/lower.js","../node_modules/d3-selection/src/selection/append.js","../node_modules/d3-selection/src/selection/insert.js","../node_modules/d3-selection/src/selection/remove.js","../node_modules/d3-selection/src/selection/datum.js","../node_modules/d3-selection/src/selection/dispatch.js","../node_modules/d3-selection/src/selection/index.js","../node_modules/d3-selection/src/selectAll.js","../node_modules/d3-shape/src/noop.js","../node_modules/d3-shape/src/curve/basis.js","../node_modules/d3-shape/src/curve/bundle.js","../node_modules/d3-shape/src/curve/cardinal.js","../node_modules/d3-shape/src/curve/cardinalClosed.js","../node_modules/d3-shape/src/curve/cardinalOpen.js","../node_modules/d3-shape/src/curve/catmullRom.js","../node_modules/d3-shape/src/curve/catmullRomClosed.js","../node_modules/d3-shape/src/curve/catmullRomOpen.js","../node_modules/d3-shape/src/curve/monotone.js","../src/nearbyRectEdges.js","../node_modules/d3-color/src/color.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/cubehelix.js","../node_modules/d3-format/src/formatDecimal.js","../node_modules/d3-format/src/formatGroup.js","../node_modules/d3-format/src/exponent.js","../node_modules/d3-format/src/formatPrefixAuto.js","../node_modules/d3-format/src/formatRounded.js","../node_modules/d3-format/src/formatTypes.js","../node_modules/d3-format/src/formatSpecifier.js","../node_modules/d3-format/src/locale.js","../node_modules/d3-format/src/defaultLocale.js","../node_modules/d3-time/src/interval.js","../node_modules/d3-time/src/second.js","../node_modules/d3-time/src/minute.js","../node_modules/d3-time/src/hour.js","../node_modules/d3-time/src/day.js","../node_modules/d3-time/src/week.js","../node_modules/d3-time/src/month.js","../node_modules/d3-time/src/utcMinute.js","../node_modules/d3-time/src/utcHour.js","../node_modules/d3-time/src/utcDay.js","../node_modules/d3-time/src/utcWeek.js","../node_modules/d3-time/src/utcMonth.js","../node_modules/d3-time/src/utcYear.js","../node_modules/d3-time/src/year.js","../node_modules/d3-time-format/src/locale.js","../node_modules/d3-time-format/src/defaultLocale.js","../node_modules/d3-time-format/src/isoFormat.js","../node_modules/d3-time-format/src/isoParse.js","../node_modules/d3-scale/src/colors.js","../node_modules/d3-scale/src/category20b.js","../node_modules/d3-scale/src/category20.js","../node_modules/d3-scale/src/cubehelix.js","../node_modules/d3-scale/src/rainbow.js","../node_modules/d3-scale/src/viridis.js","../node_modules/floyd-warshall/src/index.js","../src/edges-modifier-hops.js","../src/basket-ball.js","../node_modules/skatejs-web-components/src/native-shim.js","../../../../../\u0000babelHelpers","../node_modules/@webcomponents/custom-elements/custom-elements.min.js","../node_modules/@webcomponents/shadydom/shadydom.min.js","../node_modules/@webcomponents/shadycss/shadycss.min.js","../node_modules/skatejs/src/util/assign.js","../node_modules/skatejs/src/util/symbols.js","../node_modules/incremental-dom/dist/incremental-dom-cjs.js","../node_modules/window-or-global/lib/index.js","../node_modules/skatejs/src/util/native.js","../node_modules/skatejs/src/api/emit.js","../node_modules/skatejs/src/index.js","../node_modules/kefir/dist/kefir.js","../src/handle-box.js","../src/detached-box.js","../src/parentSelector.js","../node_modules/d3-selection/src/namespaces.js","../node_modules/d3-selection/src/matcher.js","../node_modules/d3-shape/src/math.js","../node_modules/d3-shape/src/symbol/triangle.js","../node_modules/js-combinatorics/combinatorics.js","../node_modules/victor/index.js","../src/drawGraph.js","../node_modules/mathjs/lib/utils/object.js","../node_modules/typed-function/typed-function.js","../node_modules/mathjs/lib/utils/NumberFormatter.js","../node_modules/mathjs/lib/utils/number.js","../node_modules/mathjs/lib/core/typed.js","../node_modules/tiny-emitter/index.js","../node_modules/mathjs/lib/utils/emitter.js","../node_modules/mathjs/lib/error/ArgumentsError.js","../node_modules/mathjs/lib/core/function/import.js","../node_modules/mathjs/lib/core/function/config.js","../node_modules/mathjs/lib/core/core.js","../node_modules/mathjs/lib/utils/bignumber/formatter.js","../node_modules/mathjs/lib/utils/string.js","../node_modules/mathjs/lib/utils/types.js","../node_modules/mathjs/lib/error/DimensionError.js","../node_modules/mathjs/lib/error/IndexError.js","../node_modules/mathjs/lib/utils/array.js","../node_modules/mathjs/lib/utils/function.js","../node_modules/mathjs/lib/utils/index.js","../node_modules/mathjs/lib/type/matrix/Matrix.js","../node_modules/mathjs/lib/type/matrix/DenseMatrix.js","../node_modules/mathjs/lib/type/matrix/SparseMatrix.js","../node_modules/mathjs/lib/utils/bignumber/nearlyEqual.js","../node_modules/mathjs/lib/function/relational/equalScalar.js","../node_modules/mathjs/lib/function/arithmetic/addScalar.js","../node_modules/mathjs/lib/type/matrix/function/matrix.js","../node_modules/mathjs/lib/utils/latex.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm01.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm04.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm10.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm13.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm14.js","../node_modules/mathjs/lib/function/arithmetic/add.js","../node_modules/mathjs/lib/type/matrix/Spa.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm03.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm07.js","../node_modules/mathjs/lib/type/matrix/utils/algorithm12.js","../node_modules/mathjs/lib/function/relational/smaller.js","../node_modules/mathjs/lib/function/relational/larger.js","../node_modules/mathjs/lib/type/matrix/FibonacciHeap.js","../node_modules/mathjs/lib/type/matrix/ImmutableDenseMatrix.js","../node_modules/mathjs/lib/type/matrix/MatrixIndex.js","../node_modules/mathjs/lib/type/matrix/Range.js","../src/edges-all-pairs.js","../node_modules/mathjs/lib/type/matrix/function/index.js","../node_modules/mathjs/lib/type/matrix/function/sparse.js","../node_modules/mathjs/lib/type/matrix/index.js","../src/edges-adjacency-matrix.js","../node_modules/d3-array/src/bisector.js","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/math.js","../node_modules/d3-color/src/lab.js","../node_modules/d3-color/src/cubehelix.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-format/src/formatDefault.js","../node_modules/d3-time/src/millisecond.js","../node_modules/d3-time/src/duration.js","../src/puppy-dog.js"],"names":["interopDefault","ex","createCommonjsModule","fn","module","exports","fixSafari","newAttachShadow","opts","sr","oldAttachShadow","call","this","mo","observe","moOpts","HTMLElement","prototype","attachShadow","childList","subtree","MutationObserver","muts","forEach","mut","target","tagName","nextSibling","parentNode","removeChild","insertBefore","Object","defineProperty","configurable","enumerable","value","writable","keys","obj","arguments","length","undefined","_ref","_ref$enumOnly","enumOnly","listOfKeys","getOwnPropertySymbols","concat","empty","val","enter","object","props","saved","key","exit","assign","propContext","func","result","applyEvent","elem","ename","newFunc","events","$currentEventHandlers","addEventListener","e","resolveTagName","name","$name","localName","elementOpenStart","tag","statics","overrideArgs","elementOpenEnd","node","newElementOpen","wrapIdomFunc","tnameFuncHandler","noop","wrap","_len","args","Array","_key","stackCurrentHelper","stackChren","push","elementOpen","skips","$skip","elementClose","idomSkip","ref","$ref","newAttr","_len2","_key2","$stackCurrentHelperProps","stackOpen","tname","_len3","attrs","_key3","a","stackClose","chren","pop","elemOrFn","apply","toConsumableArray","element","atype","_typeof","_len5","_key5","unshift","newElementOpenStart","newElementOpenEnd","ch","ctype","newText","isArray","sch","newElementClose","builder","_len6","tags","_key6","_len7","_key7","bind","map","_len8","_key8","createSymbol","description","Symbol","data","namespace","__SKATE_DATA","dashCase","str","split","reduce","one","two","idx","dash","toLowerCase","microtaskDebounce","cbFunc","scheduled","i","cbArgs","document","createElement","observer","textContent","taskDebounce","setTimeout","getOwnPropertyDescriptors","getAllKeys","prev","curr","getOwnPropertyDescriptor","setCtorNativeProperty","Ctor","propName","getPropsMap","hasOwnProperty","$ctorPropsMap","propsMap","propNameOrSymbol","get","constructor","set","newProps","$renderer","getDefaultValue","default","getInitialValue","initial","getPropData","elemData","syncFirstTimeProp","prop","attributeName","propData","syncAttrValue","lastAssignedValue","serialize","syncingAttribute","setAttribute","syncExistingProp","settingAttribute","internalValue","serializedValue","currentAttrValue","getAttribute","serializedIsEmpty","attributeChanged","shouldRemoveAttribute","removeAttribute","syncPropToAttr","isFirstSync","createNativePropertyDefinition","created","attribute","initialValue","hasAttribute","deserialize","coerce","newValue","oldValue","changeData","$rendererDebounced","$connected","initProps","preventDoubleCalling","_prevName","_prevOldValue","_prevNewValue","syncPropsToAttrs","ensurePropertyFunctions","descriptors","descriptorName","ensurePropertyDefinitions","createInitProps","hasPropBeforeUpgrading","valueBeforeUpgrading","uniqueId","prefix","rand","replace","c","r","Math","random","v","toString","define$1","customElements","root","Error","Component","extend","define","eventsPositionDiff","prevEvent","nextEvent","touches","x","clientX","y","clientY","applyMove","currentPosition","move","startDragging","timeout","style","cursor","userSelect","drag","pos","top","left","mouseUps","Kefir","fromEvents","merge","mouseMoves","mouseDowns","onValue","preventDefault","moves","flatMap","downEvent","takeUntilBy","diff","rect","getBoundingClientRect","window","getComputedStyle","parseInt","marginLeft","marginTop","position","scan","stopDragging","offValue","detach","oldStyle","reattacher","reattach","parentGraphContainer","parentSelector","indexOf","slice","namespaces","space","local","creatorInherit","ownerDocument","uri","namespaceURI","xhtml","documentElement","createElementNS","creatorFixed","fullname","creator","filterContextListener","listener","index","group","contextListener","event","related","relatedTarget","compareDocumentPosition","event1","event0","__data__","parseTypenames","typenames","trim","t","type","onRemove","typename","on","__on","o","j","m","removeEventListener","capture","onAdd","filterEvents","d","selection_on","n","each","none","selector","querySelector","selection_select","select","groups","_groups","subgroups","subnode","subgroup","Selection","_parents","selectorAll","querySelectorAll","selection_selectAll","parents","selection_filter","match","matcher","sparse","update","selection_enter","_enter","EnterNode","parent","datum","_next","_parent","constant","bindIndex","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","keyPrefix","selection_data","size","enterGroup","updateGroup","exitGroup","previous","next","i0","i1","_exit","selection_exit","selection_merge","selection","groups0","groups1","m0","m1","min","merges","group0","group1","selection_order","selection_sort","compare","compareNode","b","ascending","sortgroups","sortgroup","sort","order","NaN","selection_call","callback","selection_nodes","nodes","selection_node","selection_size","selection_empty","selection_each","attrRemove","attrRemoveNS","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","selection_attr","getAttributeNS","defaultView","styleRemove","removeProperty","styleConstant","priority","setProperty","styleFunction","selection_style","getPropertyValue","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","string","classList","ClassList","_node","_names","classedAdd","names","list","add","classedRemove","remove","classedTrue","classedFalse","classedFunction","selection_classed","contains","textRemove","textConstant","textFunction","selection_text","htmlRemove","innerHTML","htmlConstant","htmlFunction","selection_html","raise","appendChild","selection_raise","lower","previousSibling","firstChild","selection_lower","selection_append","create","constantNull","selection_insert","before","selection_remove","selection_datum","property","dispatchEvent","params","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","selection_dispatch","selectAll","noop$1","point","that","_context","bezierCurveTo","_x0","_x1","_y0","_y1","Basis","context","Bundle","beta","_basis","_beta","_k","_x2","_y2","Cardinal","tension","CardinalClosed","CardinalOpen","x1","y1","x2","y2","_l01_a","epsilon","_l01_2a","_l12_a","_l12_2a","_l23_a","_l23_2a","CatmullRom","alpha","_alpha","CatmullRomClosed","CatmullRomOpen","sign","slope3","h0","h1","s0","s1","p","abs","slope2","h","t0","t1","x0","y0","dx","MonotoneX","MonotoneY","ReflectContext","center","R","Vec","width","height","rad","nearbyEdgePoints","r1","r2","p1","p2","phase","margin","PI","P","c1","c2","rad1","rad2","phi","clone","subtract","angle","edgePt1","pXY","edgePt2","s","l","max","ascendingComparator","g","lo","hi","mid","right","hsl","opacity","brighter","f","k","ascending$2","rgb","define$2","factory","isNaN","definition","hsl2rgb","displayable","color","format","hue","exec","rgbn","Rgb","round","reRgbaInteger","rgba","gamma","hsla","reHslaPercent","nogamma","named","exponential","rgbGamma","rgbConvert","start","colorRgb","cubehelix","Hsl","cubehelixLong","Color","coefficient","formatDecimal","grouping","hslConvert","m2","exponent","Lab","join","Hcl","cos","sin","rgb2xyz","xyz2lab","Xn","Yn","z","Zn","lab","labConvert","FormatSpecifier","specifier","t2","re","fill","align","pow","zero","atan2","comma","rad2deg","hclConvert","symbol","formatSpecifier","EB","BC_DA","ED","bl","D","precision","E","Cubehelix","suffix","formatType","maybeSuffix","linear$1","valueNegative","valuePrefix","valueSuffix","constant$3","end","formatPrefix","newFormat","prefixes","cubehelix$$","cubehelixGamma","thousands","toExponential","currency","newInterval","floori","offseti","interval","ceil","date","substring","d1","formatDefault","toPrecision","range","stop","step","test","formatPrefixAuto","count","prefixExponent","floor","setTime","formatRounded","isFinite","getUTCSeconds","durationMinute","getMinutes","hour","offset","getTimezoneOffset","durationHour","day","setDate","getDate","weekday","identity$4","setMonth","getMonth","setUTCSeconds","utcHour","setUTCMinutes","setUTCDate","durationDay","getUTCDate","charCodeAt","utcMonday","utcSunday","utcWeekday","utcMonth","setUTCHours","Infinity","setUTCMonth","padding","getUTCFullYear","every","setUTCFullYear","year","setHours","setFullYear","getFullYear","utcDate","month","locale","formatGroup","decimal","periodRe","formatRe","format$3","periodLookup","weekdayRe","weekdayLookup","shortMonthRe","locale_shortMonths","formats","Date","formatShortMonth","formatDayOfMonth","formatHour12","d0","formatDayOfYear","formatMilliseconds","formatMonthNumber","formatSeconds","formatWeekNumberSunday","formatYear","formatFullYear","formatZone","utcFormats","formatUTCShortMonth","formatUTCMonth","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCWeekNumberSunday","t0$1","formatUTCWeekdayNumber","formatUTCWeekNumberMonday","t1$1","formatUTCFullYear","formatUTCZone","formatLiteralPercent","field","parses","parseLocaleDateTime","getDay","Z","durationMinute$1","durationWeek$1","formatWeekday","locale_weekdays","getUTCDay","localDate","H","M","S","L","utcFormat","utcParse","UTC","newYear","numberRe","pad","charAt","getSeconds","formatWeekdayNumber","formatWeekNumberMonday","newDate","timeMonday","getUTCHours","parse","formatUTCMilliseconds","formatUTCMonthNumber","getUTCMonth","formatUTCMinutes","getUTCMinutes","pads","formatUTCSeconds","utcYear","w","shortWeekdayLookup","parseShortMonth","shortMonthLookup","monthLookup","timeFormat","locale_dateTime","parseLocaleTime","time","parseSpecifier","locale_time","shortDays","months","locale_shortWeekdays","defaultLocale","timeParse","formatMonth","formatIsoNative","getHours","formatIso","toISOString","locale_months","colors","locale_periods","percentRe","dateTime","requoteRe","periods","days","shortMonths","shortWeekdayRe","formatLookup","requote","monthRe","formatShortWeekday","B","parseWeekdayNumber","I","parseWeekNumberSunday","formatPeriod","U","parseWeekNumberMonday","W","parseFullYear","Y","%","A","formatUTCWeekday","parseZone","parseMonthNumber","parseDayOfMonth","parseDayOfYear","X","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseLiteralPercent","locale_date","interpolateCubehelixLong","rainbow","ts","FloydWarshall","distMatrix","blankFiller","parseYear","_initializeDistanceMatrix","direct","detour","dist","formatHour24","timeSunday","interpolateRainbow","JSON","adj","edges","edge","hopMatrix","hops","modifier","thickness","hop","segments","repeatAry","direction","updateHops","utcWeek","edgeElem","formatUTCYear","parseHops","edgeModifier","edgeData","console","formatLocale$1","locale$1","attached","render","commonjsGlobal","global","self","navigator","userAgent","safari","safariVersion","safariVersions","patch","eval","iterator","asyncGenerator","AwaitValue","AsyncGenerator","gen","send","arg","Promise","resolve","reject","request","back","front","resume","then","settle","done","err","_invoke","return","asyncIterator","throw","await","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","descriptor","protoProps","staticProps","receiver","Function","desc","getPrototypeOf","getter","inherits","subClass","superClass","setPrototypeOf","__proto__","possibleConstructorReturn","ReferenceError","arr","arr2","from","Map","Set","C","F","enableFlush","u","__$CE_upgraded","forcePolyfill","has","observedAttributes","K","delete","N","takeRecords","childNodes","HTMLImports","whenReady","__$CE_observer","J","disconnect","removedNodes","addedNodes","nodeType","Node","ELEMENT_NODE","createTreeWalker","NodeFilter","SHOW_ELEMENT","G","currentNode","nextNode","__$CE_attached","DOCUMENT_NODE","DOCUMENT_FRAGMENT_NODE","host","shadowRoot","rel","import","href","assert","attributes","attributeOldValue","attributeFilter","attributeNamespace","CustomElementRegistry","whenDefined","flush","polyfilled","_observeRoot","_addImport","nativeHTMLElement","q","Element","importNode","CustomElements","isShadyRoot","Boolean","__localName","matchesSelector","matches","copyOwnProperty","source","pd","n$","getOwnPropertyNames","extendAll","sources","len","mixin","patchPrototype","proto","patchProto","__sourceProto","__patchProto","newSplice","removed","addedCount","getNativeProperty","enqueue","promish","flush$1","flushList","flushCount","shift","isFlushedMaxed","flushMax","escapeReplace","escapeAttr","escapeAttrRegExp","escapeData","escapeDataRegExp","makeSet","getOuterHTML","composed","attr","voidElements","getInnerHTML","TEXT_NODE","plaintextParents","COMMENT_NODE","error","content","child","c$","filterMutations","mutations","targetRootNode","getRootNode","mutation","mutationInScope","filter","patchNode","settings","inUse","isNodePatched","patchImpl","canPatchNode","tree","saveChildNodes","canUnpatchNode","hasPrototypeDescriptors","unpatchNode","unpatch","__patched","pathComposer","startNode","composedPath","current","startRoot","assignedSlot","retarget","refNode","path","ancestor","lastRoot","rootIdx","refNodePath","p$","mixinComposedFlag","Base","klazz","options","__composed","fireHandlers","hs","__handlers","__immediatePropagationStopped","retargetNonBubblingEvent","__propagationStopped","Event","AT_TARGET","lastFiredRoot","i$1","optionsOrCapture","this$1","once","passive","__eventWrappers","wrapperFn","__target","__relatedTarget","EventMixin","eventPhase","BUBBLING_PHASE","stopImmediatePropagation","nonBubblingEventsToRetarget","bubble","origAddEventListener","splice","origRemoveEventListener","activateFocusEventOverrides","ev","ShadyDOM","hasNativeShadowDOM","force","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","common","cb","twiddle","createTextNode","characterData","EDIT_LEAVE","EDIT_UPDATE","EDIT_ADD","EDIT_DELETE","ArraySplice","calcEditDistances","currentStart","currentEnd","old","oldStart","oldEnd","rowCount","columnCount","distances","j$1","equals","north","west","spliceOperationsFromEditDistances","edits","northWest","reverse","calcSplices","prefixCount","suffixCount","minLength","sharedPrefix","sharedSuffix","ops","splices","oldIndex","searchLength","index1","index2","calculateSplices","currentValue","previousValue","nativeInsertBefore","nativeAppendChild","nativeRemoveChild","arrayCopyChildNodes","copy","arrayCopyChildren","firstElementChild","nextElementSibling","arrayCopy","a$","Logical","Composed","hasParentNode","saveComposedData","__dom","hasChildNodes","getChildNodes","_getChildNodes","getFirstChild","getNextSibling","getParentNode","getLastChild","lastChild","getPreviousSibling","getFirstElementChild","_getFirstElementChild","getLastElementChild","_getLastElementChild","getNextElementSibling","_getNextElementSibling","getPreviousElementSibling","_getPreviousElementSibling","recordInsertBefore","container","ref_node","_linkNode","recordRemoveChild","$parentNode","$childNodes","$firstChild","$nextSibling","getComposedChildNodes","$lastChild","$previousSibling","lastElementChild","previousElementSibling","clearChildNodes","saveParentNode","newChild","refChild","_addChild","currentParent","_removeChild","isFrag","oldParent","NormalizedEvent","inType","Distributor","anonymous","insertionPointTag","getInsertionPoints","hasInsertionPoint","_insertionPoints","isInsertionPoint","distribute","distributePool","collectPool","pool","dirtyRoots","distributeInsertionPoint","shadyRoot","p$1","_assignedSlot","parent$1","insertionPoint","prevAssignedNodes","_assignedNodes","clearAssignedSlots","needsSlotChange","anyDistributed","matchesInsertionPoint","__prevAssignedSlot","distributeNodeInto","node$1","children","setDistributedNodesOnInsertionPoint","_fireSlotChange","slot","savePrevious","slotName","_distributedNodes","d$","isFinalDestination","ShadyRoot","frag","createDocumentFragment","ShadyFragmentMixin","_init","ShadyMixin","_clean","_hasRendered","_distributor","distributionRoot","_findDistributionRoot","_elementNeedsDistribution","_skipUpdateInsertionPoints","updateInsertionPoints","compose","forceRender","i$","__insertionPoints","c$1","insertionPoints","_composeTree","_updateChildNodes","_composeNode","distributedNodes","distributedNode","s$1","n$1","getInsertionPointTag","DocumentFragment","mixinImpl","addNode","ownerRoot","ownerShadyRootForNode","__noInsertionPoint","ipAdded","_maybeAddInsertionPoint","handled","_maybeDistribute","removeNode","distributed","logicalParent","maybeDistributeParent","_removeDistributedChildren","_removeOwnerShadyRoot","_scheduleObserver","addedNode","removedNode","schedule","removeNodeFromParent","_hasCachedOwnerRoot","__ownerShadyRoot","fragContent","wrappedContent","hasContent","needsDist","_nodeNeedsDistribution","added","np","na","hostNeedsDist","ip$","_contains","dc$","assignedNodes","flatten","firstComposedNode","clearNode","maybeDistributeAttributeChange","query","halter","_queryElements","elements","_queryElement","activeElementForNode","active","activeElement","isShadyRoot$$1","activeRoot","nativeCloneNode","cloneNode","nativeImportNode","Document","nativeSetAttribute$1","nativeRemoveAttribute","ShadyCSS","setElementClass","NodeMixin","parentElement","FragmentMixin","replaceChild","deep","nc","externalNode","doc","tc","cn","text","ElementMixin","activeElementDescriptor","ActiveElementMixin","UnderActiveElementMixin","_activeElement","Mixins","Fragment","AsyncObserver","_scheduled","callbacks","getComposedInnerHTML","getComposedChildNodes$1","observeChildren","_callback","_observer","unobserveChildren","handle","patchedCount","log","head","warn","mixinForObject","alwaysComposed","blur","focus","focusin","focusout","click","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","wheel","beforeinput","input","keydown","keyup","compositionstart","compositionupdate","compositionend","touchstart","touchend","touchmove","touchcancel","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture","dragstart","dragenter","dragleave","dragover","drop","dragend","DOMActivate","DOMFocusIn","DOMFocusOut","keypress","isTrusted","__composedPath","currentTarget","__relatedTargetComposedPath","stopPropagation","PatchedEvent","PatchedCustomEvent","PatchedMouseEvent","MouseEvent","isPatched","canUnpatch","createRootAndEnsurePatched","nativeSetAttribute","__nativeSetAttribute","classNameDescriptor","clean","parseCss","lex","cssText","RX","comments","port","OPEN_BRACE","rules","CLOSE_BRACE","parsedCssText","ss","_expandUnicodeEscapes","multipleSpaces","lastIndexOf","parsedSelector","atRule","AT_START","MEDIA_START","types","MEDIA_RULE","keyframesRule","KEYFRAMES_RULE","keyframesName","VAR_START","MIXIN_RULE","STYLE_RULE","r$","code","repeat","stringify","preserveProperties","_hasMixinRules","removeCustomProps","removeCustomPropAssignment","removeCustomPropApply","customProp","mixinProp","mixinApply","varApply","parseSettings","nativeCssVariables","shimcssproperties","nativeShadow","shimshadow","toCssText","forEachRule","rulesForStyle","__cssRules","isKeyframesSelector","rule","styleRuleCallback","keyframesRuleCallback","onlyActiveRules","skipRules","matchMedia","rx","MEDIA_MATCH","applyCss","moniker","contextNode","createScopeStyle","applyStyle$1","after","lastHeadApplyNode","applyStylePlaceHolder","placeHolder","createComment","scope","findMatchingParen","level","processVariableAndFallback","inner","fallback","setElementClassRaw","addToBitMask","bits","enqueueDocumentValidation","enqueued","validateDocument","readyState","requestAnimationFrame","ShadyCSS$1","updateStyles","CustomStyle","Reflect","construct","customStyles","CSS","supports","nativeCssApply","WebComponents","flags","VAR_ASSIGN","MIXIN_MATCH","VAR_CONSUMED","ANIMATION_MATCH","IS_VAR","BRACKETED","HOST_PREFIX","HOST_SUFFIX","SCOPE_NAME","StyleTransformer","dom","shouldRemoveScope","__styleScoped","_transformDom","_content","_element","CLASS","_newValue","elementStyles","styleRules","cssBuildType","__cssBuild","css","is","extends","ext","hostScope","_calcHostScope","_calcElementScope","isScoped","CSS_CLASS_PREFIX","_rule","_transformRule","_transformComplexSelector","transformer","transformedSelector","_transformRuleCss","COMPLEX_SELECTOR_SEP","_this","NTH","SLOTTED_START","HOST","SIMPLE_SELECTOR_SEP","info","_transformCompoundSelector","combinator","slottedIndex","SLOTTED","_transformHostSelector","_transformSimpleSelector","slotted","SLOTTED_PAREN","paren","DIR_PAREN","dir","PSEUDO_PREFIX","HOST_PAREN","SIMPLE_SELECTOR_PREFIX","typeSelector","SELECTOR_NO_MATCH","documentRule","normalizeRootSelector","_transformDocumentSelector","ROOT","SCOPE_DOC_SELECTOR","RegExp","StyleInfo","ast","placeholder","ownStylePropertyNames","elementName","typeExtension","cssBuild","overrideStyleProperties","styleProperties","scopeSelector","customStyle","__styleInfo","styleInfo","IS_IE","StyleProperties","decorateStyles","keyframes","ruleIndex","decorateRule","collectPropertiesInCssText","propertyInfo","_keyframes","properties","hasProperties","collectProperties","collectCssText","rx$$1","any","collectConsumingCssText","reify","valueForProperty","valueForProperties","propertyValue","_p","parts","lastIndex","colon","pp","applyProperties","output","applyKeyframeTransforms","keyframeTransforms","hasAnimations","transform","keyframeNamesToTransform","keyframe","propertyDataFromStyles","selectorToMatch","whenHostOrRootRule","isRoot","isHost","hostAndRootPropertiesForScope","hostProps","rootProps","transformStyles","hostSelector","rxHostSelector","hostRx","_elementKeyframeTransforms","_scopeSelector","keyframesRules","_scopeKeyframes","_keyframesRuleTransformer","keyframesNameRx","transformedKeyframesName","scopeId","_p2","applyElementScopeSelector","XSCOPE_NAME","applyElementStyle","_useCount","applyCustomStyle","templateMap","placeholderMap","ce","origDefine","clazz","StyleCache","typeMax","cache","cacheEntry","ownPropertyNames","pn","tagname","styleElement","entry","_validate","APPLY_NAME_CLEAN","INITIAL_INHERIT","MIXIN_VAR_SEP","MixinMap","_map","dependants","ApplyShim","_currentTemplate","_measureElement","_separator","_boundProduceCssProperties","matchText","propertyName","valueProperty","valueMixin","_produceCssProperties","transformRules","_this2","transformRule","__applyShimInvalid","transformCssText","_consumeCssProperties","all","mixinName","applyPos","afterApplyPos","textBeforeApply","textAfterApply","defaults$$1","_cssTextToMap","replacement","_atApplyToCssProperties","fallbacks","vars","mixinEntry","_getInitialValueForProperty","sp","out","_replaceInitialOrInherit","_this3","mixinAsProperties","mixinValues","combinedProps","oldProps","needToInvalidate","_invalidateMixinEntry","applyShim","elementNeedsScoping","SVGElement","handler","mxns","mxn","_i","_n","classes","classIdx","_scope","nativeCustomElements","delayedStart","body","styleCache","scopeCounter","nativeCss","_documentOwner","_documentOwnerStyleInfo","_generateScopeSelector","id","getStyleAst","styleAstToString","_gatherStyles","template","styles","_getCssBuild","prepareTemplate","_prepared","_styleAst","_generateStaticStyle","_style","_ownPropertyNames","shadowroot","_prepareHost","_cssBuild","applyStyle","overrideProps","CS","_documentDirty","findStyles","_revalidateApplyShim","_updateProperties","applyStyles","hasApplied","_updateNativeProperties","_applyStyleProperties","_isRootOwner","_applyToDescendants","_styleOwnerForNode","fetch","cachedScopeSelector","cachedStyle","oldScopeSelector","store","owner","ownerStyleInfo","ownerProperties","hostAndRootProps","propertyData","propertiesMatchingHost","_mixinOverrideStyles","overrides","_transformCustomStyleForDocument","_applyCustomStyleToDocument","getComputedStyleValue","classString","scopeName","classAttr","k$","_styleInfoForNode","hookFn","processHook","_customStyles","_findStyle","_applyStyle","__appliedElement","connected","ctorCreateInitProps","ctorObservedAttributes","ctorProps","ctorPropsMap","renderer","rendering","rendererDebounced","updated","NodeData","nodeName","createMap","attrsArr","newAttrs","keyMap","keyMapValid","Context","notifications","nodesCreated","deleted","nodesDeleted","initData","getData","symbols","getNamespace","applyAttr","el","attrNS","applyProp","elStyle","applyAttributeTyped","updateAttribute","mutator","getNamespaceForTag","createText","createKeyMap","getKeyMap","getChild","registerChild","markCreated","markDeleted","notifyChanges","patchFactory","run","prevContext","prevRoot","prevDoc","prevCurrentNode","prevCurrentParent","patchInner","enterNode","exitNode","patchOuter","alignWithDOM","clearUnvisitedDOM","coreElementOpen","coreElementClose","coreText","currentElement","skip","ATTRIBUTES_OFFSET","argsBuilder","const_args","attrsChanged","_attr","elementVoid","elementPlaceholder","formatted","babelHelpers.typeof","commonjsHelpers","applyDefault","attributesContext","checked","className","disabled","firstChar","eventName","toUpperCase","idomElementOpen","nativeHints","native","hint","debounce","_class","_class2","$created","$ctorCreateInitProps","propConfigsCount","renderCallback","readyCallbacks","attrsOnCtor","$ctorObservedAttributes","attrsFromLinkedProps","item","$ctorProps","detached","propOpts","newPropVal","rendered","$rendering","$updated","rendererCallback","renderedCallback","$props","getSetProps","updatedCallback","_Base","prot","allKeys","mode","possibleFn","TheEvent","vdom","amd","createObj","inherit","Child","Parent","find","findByPred","pred","cloneArray","fillArray","slide","cur","callSubscriber","ANY","VALUE","ERROR","Dispatcher","_items","_spies","_inLoop","_removedItems","Observable","_dispatcher","_active","_alive","_activating","_logHandlers","_spyHandlers","Stream","Property","_currentEvent","never","neverS","timeBased","AnonymousStream","wait","_wait","_intervalId","_$onTick","_onTick","_free","_onActivation","setInterval","_onDeactivation","clearInterval","_clear","later","S$1","sequentially","xs","S$2","fromPoll","S$3","emitter","obs","_emitValue","_emitError","_emitEnd","_emit","emit","emitEvent","withInterval","S$4","S$5","_fn","_unsubscribe","stream","fromCallback","callbackConsumer","called","setName","fromNodeCallback","spread","aLength","fromSubUnsub","sub","unsub","pairs","P$1","constantError","createConstructor","BaseClass","_source","_name","_$handleAny","_handleAny","createClassMethods","_handleValue","_handleError","_handleEnd","END","onAny","offAny","createStream","createProperty","toProperty","P$2","changes","S$6","fromPromise","promise","onError","_promise","getGlodalPromise","toPromise","last","fromESObservable","_observable","observable","$$observable","subscribe","complete","unsubscribe","ESObservable","takeErrors","toESObservable","collect","values","defaultErrorsCombinator","errors","latestError","Combine","_activeCount","_sources","_combinator","_aliveCount","_latestValues","_latestErrors","NOTHING","_emitAfterActivation","_endAfterActivation","_latestErrorIndex","_$handlers","_loop","combineAsArray","combineAsObject","activeObservables","passiveObservables","objectify","combine","map$1","_ofSameType","S$7","P$3","id$1","S$8","P$4","take","S$9","P$5","S$10","P$6","takeWhile","id$2","S$11","P$7","S$12","P$8","S$13","P$9","skipWhile","id$3","S$14","P$10","skipDuplicates","eq","S$15","P$11","defaultFn","seed","S$16","P$12","P$13","id$4","S$17","delay","S$18","P$14","throttle","_ref2","_ref2$leading","leading","_ref2$trailing","trailing","S$19","P$15","_ref2$immediate","immediate","S$20","P$16","mapErrors","id$5","S$21","P$17","filterErrors","id$6","S$22","P$18","ignoreValues","S$23","P$19","ignoreErrors","S$24","P$20","ignoreEnd","S$25","P$21","beforeEnd","S$26","P$22","slidingWindow","S$27","P$23","bufferWhile","_ref2$flushOnEnd","flushOnEnd","S$28","P$24","id$7","bufferWhile$1","S$29","P$25","bufferWithTimeOrCount","S$30","P$26","xformForObs","@@transducer/step","res","@@transducer/result","transduce","transducer","S$31","P$27","withHandler","S$32","P$28","Zip","_buffers","zip","observables","AbstractPool","_ref$queueLim","queueLim","_ref$concurLim","concurLim","_ref$drop","_queueLim","_concurLim","_drop","_queue","_curSources","_$handleSubAny","_handleSubAny","_$endHandlers","_currentlyAdding","Merge","_addAll","_initialised","S$33","generator","_generator","_iteration","concat$1","Pool","FlatMap","_mainEnded","_lastCurrent","_$handleMain","_handleMain","FlatMapErrors","createConstructor$1","primary","secondary","_primary","_secondary","_lastSecondary","_$handleSecondaryAny","_handleSecondaryAny","_$handlePrimaryAny","_handlePrimaryAny","createClassMethods$1","_handlePrimaryValue","_handlePrimaryError","_handlePrimaryEnd","_handleSecondaryValue","_handleSecondaryError","_handleSecondaryEnd","_removeSecondary","createStream$1","createProperty$1","filterBy","S$34","P$29","sampledBy","id2","skipUntilBy","S$35","P$30","S$36","P$31","bufferBy","S$37","P$32","bufferWhileBy","S$38","P$33","awaiting","valuesToErrors","defFn","S$39","P$34","errorsToValues","defFn$1","S$40","P$35","endOnError","S$41","P$36","dissableDeprecationWarnings","DEPRECATION_WARNINGS","msg","msg2","addSpy","removeSpy","dispatch","spies","items","cleanup","_setActive","_on","_off","onEnd","offError","offEnd","observerOrOnValue","closed","getType","sourceObs","selfName","isCurrent","offLog","handlerIndex","spy","offSpy","_x","_xs","_emitter","_callUnsubscribe","_getInitialCurrent","getInitial","ponyfill","symbolObservablePonyfill","_Symbol","require$$0$1","index$1","_interopRequireDefault","__esModule","_ponyfill","_ponyfill2","require$$0","observerOrOnNext","onComplete","subscription","_emitIfFull","hasAllValues","hasErrors","valuesCopy","errorsCopy","Observable$1","of","bimap","fnErr","fnVal","ap","obsFn","obsVal","chain","staticLand","freeze","mixin$1","mixin$2","mixin$3","mixin$4","mixin$5","_lastValue","mixin$6","mixin$7","mixin$8","_prev","mixin$9","_seed","mixin$10","END_MARKER","mixin$11","_buff","_$shiftBuff","now","getTime","mixin$12","_leading","_trailing","_trailingValue","_timeoutId","_endLater","_lastCallTime","_$trailingCall","_trailingCall","curTime","remaining","_cancelTrailing","clearTimeout","mixin$13","_immediate","_lastAttempt","_laterValue","_$later","_later","mixin$14","mixin$15","mixin$16","mixin$17","mixin$18","mixin$19","mixin$20","_max","_min","mixin$21","_flushOnEnd","_flush","mixin$22","_count","mixin$23","mixin$24","_xform","mixin$25","_handler","_isFull","id$8","_add","toObs","_addToCur","_addToQueue","_removeOldest","obss","_remove","_removeCur","_removeQueue","_subToEnd","_subscribe","onEndI","_pullQueue","_onEmpty","_isEmpty","_getSource","plug","unplug","_hadNoEvSinceDeact","sameCurr","mixin$26","_","mixin$27","mixin$28","mixin$29","_ref$flushOnEnd","mixin$30","_ref$flushOnChange","flushOnChange","_flushOnChange","mixin$31","convert","mixin$32","mixin$33","bufferWithCount","other","flatMapLatest","flatMapFirst","flatMapConcat","flatMapConcurLimit","limit","flatMapErrors","draggableHostStyle","HandleBox","DetachedBox","stopSelector","retval","animate","fps","GraphContainer","onSlotchange","svg","xlink","xml","xmlns","vendorMatches","matcher$1","classed","html","append","insert","sqrt3","sqrt","triangle","draw","moveTo","lineTo","closePath","areaStart","_line","areaEnd","lineStart","_point","lineEnd","_y","dy","custom","bundle","cardinal","_x3","_x4","_x5","_y3","_y4","_y5","x23","y23","catmullRom","_t0","Combinatorics","version","factorial","factoradic","addProperties","dst","src","hideProperty","toArray","init","lazyMap","_lazyMap","lazyFilter","power","ary","fun","sizeOf","valueOf","nth","nextIndex","smallest","ripple","new_smallest","ones","combination","nelem","RangeError","first","maxIndex","bigNextIndex","buildFirst","bigCombination","_permutation","digits","permutation","cmb","per","PC","total","permutationCombination","arraySlice","cartesianProduct","dim","baseN","base","VERSION","Victor","radian2degrees","degrees","degrees2radian","deg","fromArray","fromObject","addX","vec","addY","addScalar","scalar","addScalarX","addScalarY","subtractX","subtractY","subtractScalar","subtractScalarX","subtractScalarY","divideX","vector","divideY","divide","divideScalar","divideScalarX","divideScalarY","invertX","invertY","invert","multiplyX","multiplyY","multiply","multiplyScalar","multiplyScalarX","multiplyScalarY","normalize","norm","factor","randomize","topLeft","bottomRight","randomizeX","randomizeY","randomizeAny","unfloat","toFixed","mixX","amount","mixY","mix","copyX","copyY","dot","vec2","cross","projectOnto","coeff","horizontalAngle","horizontalAngleDeg","verticalAngle","verticalAngleDeg","angleDeg","rotate","nx","ny","rotateDeg","rotateTo","rotation","rotateToDeg","rotateBy","rotateByDeg","distanceX","absDistanceX","distanceY","absDistanceY","distance","distanceSq","lengthSq","magnitude","isZero","isEqualTo","toObject","pRad","theta","rW","rH","rectCache","rectInViewport","cacheBoundingRect","bottom","innerHeight","clientHeight","innerWidth","clientWidth","drawEdge","ctx","graph","R1","R2","pts","setLineDash","strokeStyle","fillStyle","lineWidth","markerBuffer","lineBuffer","beginPath","save","translate","stroke","restore","Number","String","isBigNumber","deepExtend","deepEqual","canDefineProperty","lazy","_value","_uninitialized","traverse","isFactory","object$1","typed","getTypeTest","fns","actual","signatures","message","_expected","getTypeOf","argCount","anyType","actualType","categories","cat","category","Param","_types","_varArgs","substr","conversions","varArgs","_params","param","SyntaxError","Signature","toCode","refs","childs","parseSignatures","ignore","signature","signature_i","rawSignatures","existing","expanded","cmp","mapSignatures","parseTree","anys","filtered","nodeSignature","entries","overlapping","matchingAnys","paramsStartWith","fallThrough","_args","_signatures","createError","array","conversion","to","Refs","ac","hasConversions","bc","ai","bi","newParam","recurse","aLast","bLast","getTests","tests","allTypes","exactTypes","conversion_i","comment","_innerCode","exceptions","config","_typed","getName","...Function","addConversion","addType","require$$1$1","typedFunction$1","NumberFormatter","zeros","coefficients","rounded","decimalIdx","decimals","newExp","decimalVal","significandsDiff","expDiff","upper","roundDigits","number$1","notation","toEngineering","nearlyEqual","DBL_EPSILON","EPSILON","createTyped","typedFunction","isInteger","sign$1","isNumber","_createTyped","isSparseMatrix","isComplex","isFraction","isMatrix","isDenseMatrix","isImmutableDenseMatrix","isRange","isIndex","Complex","isResultSet","isHelp","toNumber","BigNumber","Fraction","DenseMatrix","off","matrix","typed$1","create$2","evtArr","require$$3","index$4","evts","Emitter","index$5","ArgumentsError","require$$0$4","emitter$1","require$$0$3","override","num","math","_importFactory","_importTransform","isSupportedType","math_import","silent","_import","_wrap","resolver","wrapper","load","isTypedFunction","MATRIX","require$$1","require$$0$5","_config","validateOption","math$1","instances","NUMBER","typedFactory","config$1","number","predictable","require$$1$2","configFactory","require$$0$6","formatter","gt","formatBigNumber","toExpNeg","formatter$1","toExponential$1","format$2","require$$0$7","string$2","formatArray","search","require$$4","endsWith","expected","isString","relation","IndexError","types$1","require$$2$1","isScalar","DimensionError","DimensionError$1","require$$0$8","dimNext","validate","stack","validateIndex","IndexError$1","require$$0$9","_resize","oldLen","newLen","minLen","defaultValue","unsqueeze","dims","_unsqueeze","hash","hasher","ii","memoize","maxArgumentCount","squeeze","flat","outer","array$2","UNINITIALIZED","isBoolean","Matrix","_storage","_function$1","_function","emitter$2","index$7","string$1","datatype","subset","util","_size","skipZeros","factory$2","path$1","name$2","_set","require$$1$3","Matrix$1","_datatype","_data","index_i","preprocess","_setSubmatrix","dataIndex","subIndex","dimension","iSize","newSize","sSize","submatrix","me","_getSubmatrix","_fit","resize","kSuper","diagonal","toJSON","kSub","_swapRows","rows","columns","times","bigNearlyEqual","vi","equalScalar","DenseMatrix$1","SparseMatrix","lazy$2","path$2","require$$1$4","factory$3","name$3","_createFromMatrix","_createFromArray","_values","_index","_ptr","lte","nearlyEqual$1","nearlyEqual$2","BigNumber, BigNumber","Fraction, Fraction","density","row","mindex","storage","_setsubset","_getsubset","kk","mptr","pv","mvalues","_getValueIndex","ptr","_insert","k0","maxRow","minRow","_toArray","invoke","minColumn","maxColumn","k1","json","_forEachRow","ky","kx","vx","ms","_create","require$$2","SparseMatrix$1","Alpha","Gamma","Delta","Epsilon","Zeta","factory$4","Eta","Theta","Lambda","Xi","xi","","string, string","Array | Matrix, string","Array | Matrix, string, string","defaultTemplate","units","factory$8","adata","denseMatrix","bvalues","sparseMatrix","bdt","Unit, Unit","asize","bsize","cf","addScalar$1","require$$6$2","latex","bptr","bindex","iota","inverse","lambda","Mu","mu","Pi","varpi","cdata","sigma","varsigma","Tau","tau","Chi","chi","Psi","psi","Omega","omega","false","Inf","infinity","oo","lim","bitNot","dotMultiply","mod","isUnit","toSymbol","latex$1","symbols$2","dt","cvalues","avalues","algorithm01","cptr","cindex","adt","mark","aptr","aindex","wb","algorithm04","algorithm01$1","name$8","wa","algorithm10","algorithm04$1","factory$11","require$$3$1","_iterate","cv","algorithm14","name$10","algorithm13","csize","bdata","av","bv","factory$13","name$11","require$$2$3","Spa","factory$14","require$$1$6","name$12","require$$0$11","_heap","require$$4$1","require$$2$2","nodei","Matrix, any","algorithm03","Array, any","any, any","2","add$1","factory$7","require$$0$10","isSpa","algorithm07","nodej","xb","_scatter","Spa$1","path$4","va","name$5","vb","factory$6","algorithm03$1","factory$17","require$$5$1","name$15","lt","xa","factory$18","smaller","name$16","require$$4$2","algorithm12","larger","algorithm12$1","factory$19","require$$3$2","name$17","equalBase","boolean, boolean","number, number","Complex, Complex","Matrix, Matrix","Array, Array","any, Matrix","FibonacciHeap","degree","operators","_minimum","require$$0$12","smaller$1","name$14","require$$6$1","minimum","numberOfChildren","_findMinimumNode","extractMinimum","_decreaseKey","_cascadingCut","name$18","arraySize","numRoots","require$$0$13","isFibonacciHeap","_linkNodes","tempRight","ImmutableDenseMatrix","_cut","mathjs","temp","FibonacciHeap$1","factory$15","path$5","require$$6$3","_isScalar","Index","_createImmutableMatrix","_dimensions","strings","ImmutableDenseMatrix$1","Range","nums","ranges","dimensions","path$7","parseFloat","invalid","some","lastRenderTime","graphAllEdges","canvas","clearRect","EdgesAllPairs","path$8","name$21","require$$3$3","...number | string | BigNumber | Range | Array | Matrix","factory$24","index$9","require$$2$4","darker","reN","reHex6","reHslPercent","darkgrey","darkkhaki","darkmagenta","darkorchid","darkred","darkslateblue","darkslategray","darkviolet","deeppink","gainsboro","dodgerblue","firebrick","floralwhite","goldenrod","gray","grey","sparse$1","honeydew","hotpink","indigo","ivory","sparse$2","khaki","factory$25","lavender","lemonchiffon","lightblue","lightcyan","require$$8","require$$7$2","require$$5$2","require$$4$3","lightgreen","require$$0$14","lightsalmon","index$6","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumseagreen","mediumturquoise","mediumvioletred","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","edgeData$1","palegoldenrod","paleturquoise","palevioletred","papayawhip","peachpuff","peru","plum","powderblue","getNodes","purple","rebeccapurple","canvasContext","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","snow","springgreen","tan","teal","violet","wheat","white","whitesmoke","combos","animate$1","reRgbInteger","reRgbPercent","reRgbaPercent","getContext","refreshEdges","_detached","animateCallback","css$3","core$1","matrices","ascendingBisect","bisector","_darker","_brighter","deg2rad","Kn","reI","reP","t3","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","coral","cornflowerblue","cornsilk","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkolivegreen","darkorange","darksalmon","darkslategrey","lab2xyz","deepskyblue","xyz2rgb","dimgrey","forestgreen","fuchsia","ghostwhite","gold","green","greenyellow","indianred","lavenderblush","lawngreen","hcl","lightgoldenrodyellow","lightgray","lightgrey","lightpink","lightseagreen","maroon","mediumpurple","cubehelixConvert","palegreen","pink","red","rosybrown","royalblue","silver","slategrey","steelblue","thistle","cosh","tomato","sinh","turquoise","yellow","yellowgreen","linear","colorCubehelix","colorHsl","extend$1","cubehelix$1","formatTypes","durationSecond","second","millisecond","parseLocaleDate","durationSecond$1","durationHour$1","newParse","durationDay$1","parseShortWeekday","utcMinute","utcDay","formatUTCShortWeekday","formatUTCPeriod","plasma","ramp","puppyStyle","class","isoSpecifier"],"mappings":"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","file":"tangled-web-components.min.js","sourcesContent":["\nexport var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {}\n\nexport function interopDefault(ex) {\n\treturn ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nexport function createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}","const { HTMLElement, MutationObserver, navigator } = window;\nconst { userAgent } = navigator;\nconst safari = userAgent.indexOf('Safari/60') !== -1;\nconst safariVersion = safari && userAgent.match(/Version\\/([^\\s]+)/)[1];\nconst safariVersions = [0, 1].map(v => `10.0.${v}`).concat(['10.0']);\nconst patch = safari && safariVersions.indexOf(safariVersion) > -1;\n\n// Workaround for https://bugs.webkit.org/show_bug.cgi?id=160331\nfunction fixSafari () {\n  const oldAttachShadow = HTMLElement.prototype.attachShadow;\n\n  // We observe a shadow root, but only need to know if the target that was mutated is a <style>\n  // element as this is the only scenario where styles aren't recalculated.\n  const moOpts = { childList: true, subtree: true };\n  const mo = new MutationObserver((muts) => {\n    muts.forEach((mut) => {\n      const { target } = mut;\n      if (target.tagName === 'STYLE') {\n        const { nextSibling, parentNode } = target;\n\n        // We actually have to remove and subsequently re-insert rather than doing insertBefore()\n        // as it seems that doesn't trigger a recalc.\n        parentNode.removeChild(target);\n        parentNode.insertBefore(target, nextSibling);\n      }\n    });\n  });\n\n  // Our override simply calls the native (or overridden) attachShadow but it ensures that changes\n  // to it are observed so that we can take any <style> elements and re-insert them.\n  function newAttachShadow (opts) {\n    const sr = oldAttachShadow.call(this, opts);\n    mo.observe(sr, moOpts);\n    return sr;\n  }\n\n  // We have to define a property because Safari won't take the override if it is set directly.\n  Object.defineProperty(HTMLElement.prototype, 'attachShadow', {\n    // Ensure polyfills can override it (hoping they call it back).\n    configurable: true,\n    enumerable: true,\n    value: newAttachShadow,\n    writable: true\n  });\n}\n\n// We target a specific version of Safari instead of trying to but detect as it seems to involve\n// contriving a breaking case and detecting computed styles. We can remove this code when Safari\n// fixes the bug.\nif (patch) {\n  fixSafari();\n}\n\nexport default patch;\n","\nexport default function keys (obj = {}, { enumOnly = false } = {}) {\n  const listOfKeys = Object[enumOnly ? 'keys' : 'getOwnPropertyNames'](obj);\n  return typeof Object.getOwnPropertySymbols === 'function'\n    ? listOfKeys.concat(Object.getOwnPropertySymbols(obj))\n    : listOfKeys;\n}\n","export default function (val) {\n  return typeof val === 'undefined' || val === null;\n}\n","import assign from './assign';\n\nfunction enter (object, props) {\n  const saved = {};\n  Object.keys(props).forEach((key) => {\n    saved[key] = object[key];\n    object[key] = props[key];\n  });\n  return saved;\n}\n\nfunction exit (object, saved) {\n  assign(object, saved);\n}\n\n// Decorates a function with a side effect that changes the properties of an\n// object during its execution, and restores them after. There is no error\n// handling here, if the wrapped function throws an error, properties are not\n// restored and all bets are off.\nexport default function (object, props) {\n  return func => (...args) => {\n    const saved = enter(object, props);\n    const result = func(...args);\n    exit(object, saved);\n    return result;\n  };\n}\n","/* eslint no-plusplus: 0 */\n\nimport {\n  applyProp,\n  attributes,\n  elementClose,\n  elementOpen as idomElementOpen,\n  skip as idomSkip,\n  symbols,\n  text\n} from 'incremental-dom';\nimport { name as $name, ref as $ref } from '../util/symbols';\nimport propContext from '../util/prop-context';\nimport root from 'window-or-global';\n\nconst { customElements, HTMLElement } = root;\nconst applyDefault = attributes[symbols.default];\n\n// A stack of children that corresponds to the current function helper being\n// executed.\nconst stackChren = [];\n\nconst $skip = '__skip';\nconst $currentEventHandlers = '__events';\nconst $stackCurrentHelperProps = '__props';\n\n// The current function helper in the stack.\nlet stackCurrentHelper;\n\n// This is used for the Incremental DOM overrides to keep track of what args\n// to pass the main elementOpen() function.\nlet overrideArgs;\n\n// The number of levels deep after skipping a tree.\nlet skips = 0;\n\nconst noop = () => {};\n\n// Adds or removes an event listener for an element.\nfunction applyEvent (elem, ename, newFunc) {\n  let events = elem[$currentEventHandlers];\n\n  if (!events) {\n    events = elem[$currentEventHandlers] = {};\n  }\n\n  // Undefined indicates that there is no listener yet.\n  if (typeof events[ename] === 'undefined') {\n    // We only add a single listener once. Originally this was a workaround for\n    // the Webcomponents ShadyDOM polyfill not removing listeners, but it's\n    // also a simpler model for binding / unbinding events because you only\n    // have a single handler you need to worry about and a single place where\n    // you only store one event handler\n    elem.addEventListener(ename, function (e) {\n      if (events[ename]) {\n        events[ename].call(this, e);\n      }\n    });\n  }\n\n  // Not undefined indicates that we have set a listener, so default to null.\n  events[ename] = typeof newFunc === 'function' ? newFunc : null;\n}\n\nconst attributesContext = propContext(attributes, {\n  // Attributes that shouldn't be applied to the DOM.\n  key: noop,\n  statics: noop,\n\n  // Attributes that *must* be set via a property on all elements.\n  checked: applyProp,\n  className: applyProp,\n  disabled: applyProp,\n  value: applyProp,\n\n  // Ref handler.\n  ref (elem, name, value) {\n    elem[$ref] = value;\n  },\n\n  // Skip handler.\n  skip (elem, name, value) {\n    if (value) {\n      elem[$skip] = true;\n    } else {\n      delete elem[$skip];\n    }\n  },\n\n  // Default attribute applicator.\n  [symbols.default] (elem, name, value) {\n    const { props, prototype } = customElements.get(elem.localName) || {\n      props: {},\n      prototype: {}\n    };\n\n    // TODO when refactoring properties to not have to workaround the old\n    // WebKit bug we can remove the \"name in props\" check below.\n    //\n    // NOTE: That the \"name in elem\" check won't work for polyfilled custom\n    // elements that set a property that isn't explicitly specified in \"props\"\n    // or \"prototype\" unless it is added to the element explicitly as a\n    // property prior to passing the prop to the vdom function. For example, if\n    // it were added in a lifecycle callback because it wouldn't have been\n    // upgraded yet.\n    //\n    // We prefer setting props, so we do this if there's a property matching\n    // name that was passed. However, certain props on SVG elements are\n    // readonly and error when you try to set them.\n    if ((name in props || name in elem || name in prototype) && !('ownerSVGElement' in elem)) {\n      applyProp(elem, name, value);\n      return;\n    }\n\n    // Explicit false removes the attribute.\n    if (value === false) {\n      applyDefault(elem, name);\n      return;\n    }\n\n    // Handle built-in and custom events.\n    if (name.indexOf('on') === 0) {\n      const firstChar = name[2];\n      let eventName;\n\n      if (firstChar === '-') {\n        eventName = name.substring(3);\n      } else if (firstChar === firstChar.toUpperCase()) {\n        eventName = firstChar.toLowerCase() + name.substring(3);\n      }\n\n      if (eventName) {\n        applyEvent(elem, eventName, value);\n        return;\n      }\n    }\n\n    applyDefault(elem, name, value);\n  }\n});\n\nfunction resolveTagName (name) {\n  // We return falsy values as some wrapped IDOM functions allow empty values.\n  if (!name) {\n    return name;\n  }\n\n  // We try and return the cached tag name, if one exists.\n  if (name[$name]) {\n    return name[$name];\n  }\n\n  // If it's a custom element, we get the tag name by constructing it and\n  // caching it.\n  if (name.prototype instanceof HTMLElement) {\n    // eslint-disable-next-line\n    const elem = new name();\n    return (name[$name] = elem.localName);\n  }\n\n  // Pass all other values through so IDOM gets what it's expecting.\n  return name;\n}\n\n// Incremental DOM's elementOpen is where the hooks in `attributes` are applied,\n// so it's the only function we need to execute in the context of our attributes.\nconst elementOpen = attributesContext(idomElementOpen);\n\nfunction elementOpenStart (tag, key = null, statics = null) {\n  overrideArgs = [tag, key, statics];\n}\n\nfunction elementOpenEnd () {\n  const node = newElementOpen(...overrideArgs); // eslint-disable-line no-use-before-define\n  overrideArgs = null;\n  return node;\n}\n\nfunction wrapIdomFunc (func, tnameFuncHandler = noop) {\n  return function wrap (...args) {\n    args[0] = resolveTagName(args[0]);\n    stackCurrentHelper = null;\n    if (typeof args[0] === 'function') {\n      // If we've encountered a function, handle it according to the type of\n      // function that is being wrapped.\n      stackCurrentHelper = args[0];\n      return tnameFuncHandler(...args);\n    } else if (stackChren.length) {\n      // We pass the wrap() function in here so that when it's called as\n      // children, it will queue up for the next stack, if there is one.\n      stackChren[stackChren.length - 1].push([wrap, args]);\n    } else {\n      if (func === elementOpen) {\n        if (skips) {\n          return ++skips;\n        }\n\n        const elem = func(...args);\n\n        if (elem[$skip]) {\n          ++skips;\n        }\n\n        return elem;\n      }\n\n      if (func === elementClose) {\n        if (skips === 1) {\n          idomSkip();\n        }\n\n        // We only want to skip closing if it's not the last closing tag in the\n        // skipped tree because we keep the element that initiated the skpping.\n        if (skips && --skips) {\n          return;\n        }\n\n        const elem = func(...args);\n        const ref = elem[$ref];\n\n        // We delete so that it isn't called again for the same element. If the\n        // ref changes, or the element changes, this will be defined again.\n        delete elem[$ref];\n\n        // Execute the saved ref after esuring we've cleand up after it.\n        if (typeof ref === 'function') {\n          ref(elem);\n        }\n\n        return elem;\n      }\n\n      // We must call elementOpenStart and elementOpenEnd even if we are\n      // skipping because they queue up attributes and then call elementClose.\n      if (!skips || (func === elementOpenStart || func === elementOpenEnd)) {\n        return func(...args);\n      }\n    }\n  };\n}\n\nfunction newAttr (...args) {\n  if (stackCurrentHelper) {\n    stackCurrentHelper[$stackCurrentHelperProps][args[0]] = args[1];\n  } else if (stackChren.length) {\n    stackChren[stackChren.length - 1].push([newAttr, args]);\n  } else {\n    overrideArgs.push(args[0]);\n    overrideArgs.push(args[1]);\n  }\n}\n\nfunction stackOpen (tname, key, statics, ...attrs) {\n  const props = { key, statics };\n  for (let a = 0; a < attrs.length; a += 2) {\n    props[attrs[a]] = attrs[a + 1];\n  }\n  tname[$stackCurrentHelperProps] = props;\n  stackChren.push([]);\n}\n\nfunction stackClose (tname) {\n  const chren = stackChren.pop();\n  const props = tname[$stackCurrentHelperProps];\n  delete tname[$stackCurrentHelperProps];\n  const elemOrFn = tname(props, () => chren.forEach(args => args[0](...args[1])));\n  return typeof elemOrFn === 'function' ? elemOrFn() : elemOrFn;\n}\n\n// Incremental DOM overrides\n// -------------------------\n\n// We must override internal functions that call internal Incremental DOM\n// functions because we can't override the internal references. This means\n// we must roughly re-implement their behaviour. Luckily, they're fairly\n// simple.\nconst newElementOpenStart = wrapIdomFunc(elementOpenStart, stackOpen);\nconst newElementOpenEnd = wrapIdomFunc(elementOpenEnd);\n\n// Standard open / closed overrides don't need to reproduce internal behaviour\n// because they are the ones referenced from *End and *Start.\nconst newElementOpen = wrapIdomFunc(elementOpen, stackOpen);\nconst newElementClose = wrapIdomFunc(elementClose, stackClose);\n\n// Ensure we call our overridden functions instead of the internal ones.\nfunction newElementVoid (tag, ...args) {\n  newElementOpen(tag, ...args);\n  return newElementClose(tag);\n}\n\n// Text override ensures their calls can queue if using function helpers.\nconst newText = wrapIdomFunc(text);\n\n// Convenience function for declaring an Incremental DOM element using\n// hyperscript-style syntax.\nexport function element (tname, attrs, ...chren) {\n  const atype = typeof attrs;\n\n  // If attributes are a function, then they should be treated as children.\n  if (atype === 'function' || atype === 'string' || atype === 'number') {\n    chren.unshift(attrs);\n  }\n\n  // Ensure the attributes are an object. Null is considered an object so we\n  // have to test for this explicitly.\n  if (attrs === null || atype !== 'object') {\n    attrs = {};\n  }\n\n  // We open the element so we can set attrs after.\n  newElementOpenStart(tname, attrs.key, attrs.statics);\n\n  // Delete so special attrs don't actually get set.\n  delete attrs.key;\n  delete attrs.statics;\n\n  // Set attributes.\n  Object.keys(attrs).forEach(name => newAttr(name, attrs[name]));\n\n  // Close before we render the descendant tree.\n  newElementOpenEnd(tname);\n\n  chren.forEach((ch) => {\n    const ctype = typeof ch;\n    if (ctype === 'function') {\n      ch();\n    } else if (ctype === 'string' || ctype === 'number') {\n      newText(ch);\n    } else if (Array.isArray(ch)) {\n      ch.forEach(sch => sch());\n    }\n  });\n\n  return newElementClose(tname);\n}\n\n// Even further convenience for building a DSL out of JavaScript functions or hooking into standard\n// transpiles for JSX (React.createElement() / h).\nexport function builder (...tags) {\n  if (tags.length === 0) {\n    return (...args) => element.bind(null, ...args);\n  }\n  return tags.map(tag =>\n    (...args) =>\n      element.bind(null, tag, ...args)\n  );\n}\n\n// We don't have to do anything special for the text function; it's just a\n// straight export from Incremental DOM.\nexport {\n  newAttr as attr,\n  newElementClose as elementClose,\n  newElementOpen as elementOpen,\n  newElementOpenEnd as elementOpenEnd,\n  newElementOpenStart as elementOpenStart,\n  newElementVoid as elementVoid,\n  newText as text\n};\n","export default function createSymbol (description) {\n  return typeof Symbol === 'function' ? Symbol(description) : description;\n}\n","export default function (element, namespace = '') {\n  const data = element.__SKATE_DATA || (element.__SKATE_DATA = {});\n  return namespace && (data[namespace] || (data[namespace] = {})) || data; // eslint-disable-line no-mixed-operators\n}\n","export default function (str) {\n  return str.split(/([A-Z])/).reduce((one, two, idx) => {\n    const dash = !one || idx % 2 === 0 ? '' : '-';\n    return `${one}${dash}${two.toLowerCase()}`;\n  });\n}\n","import native from './native';\nimport root from 'window-or-global';\n\nconst { MutationObserver } = root;\n\nfunction microtaskDebounce (cbFunc) {\n  let scheduled = false;\n  let i = 0;\n  let cbArgs = [];\n  const elem = document.createElement('span');\n  const observer = new MutationObserver(() => {\n    cbFunc(...cbArgs);\n    scheduled = false;\n    cbArgs = null;\n  });\n\n  observer.observe(elem, { childList: true });\n\n  return (...args) => {\n    cbArgs = args;\n    if (!scheduled) {\n      scheduled = true;\n      elem.textContent = `${i}`;\n      i += 1;\n    }\n  };\n}\n\n// We have to use setTimeout() for IE9 and 10 because the Mutation Observer\n// polyfill requires that the element be in the document to trigger Mutation\n// Events. Mutation Events are also synchronous and thus wouldn't debounce.\n//\n// The soonest we can set the timeout for in IE is 1 as they have issues when\n// setting to 0.\nfunction taskDebounce (cbFunc) {\n  let scheduled = false;\n  let cbArgs = [];\n  return (...args) => {\n    cbArgs = args;\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(() => {\n        scheduled = false;\n        cbFunc(...cbArgs);\n      }, 1);\n    }\n  };\n}\nexport default native(MutationObserver) ? microtaskDebounce : taskDebounce;\n","import getAllKeys from './get-all-keys';\n\nexport default function (obj = {}) {\n  return getAllKeys(obj).reduce((prev, curr) => {\n    prev[curr] = Object.getOwnPropertyDescriptor(obj, curr);\n    return prev;\n  }, {});\n}\n","/**\n * This is needed to avoid IE11 \"stack size errors\" when creating\n * a new property on the constructor of an HTMLElement\n */\nexport default function setCtorNativeProperty (Ctor, propName, value) {\n  Object.defineProperty(Ctor, propName, { configurable: true, value });\n}\n","import {\n  ctorPropsMap as $ctorPropsMap\n} from './symbols';\nimport getAllKeys from './get-all-keys';\nimport setCtorNativeProperty from './set-ctor-native-property';\n\n/**\n * Returns a cached map of property options for the given component class.\n * Keys in the map are the properties name which can a string or a symbol.\n *\n * The map is created by caching the result of: static get props\n */\nexport default function getPropsMap (Ctor) {\n  // Must be defined on constructor and not from a superclass\n  if (!Ctor.hasOwnProperty($ctorPropsMap)) {\n    const props = Ctor.props || {};\n\n    const propsMap = getAllKeys(props).reduce((result, propNameOrSymbol) => {\n      result[propNameOrSymbol] = props[propNameOrSymbol];\n      return result;\n    }, {});\n    setCtorNativeProperty(Ctor, $ctorPropsMap, propsMap);\n  }\n\n  return Ctor[$ctorPropsMap];\n}\n","import { renderer as $renderer } from '../util/symbols';\nimport assign from '../util/assign';\nimport getPropsMap from '../util/get-props-map';\nimport keys from '../util/get-all-keys';\n\nfunction get (elem) {\n  const props = {};\n  keys(getPropsMap(elem.constructor)).forEach((key) => {\n    props[key] = elem[key];\n  });\n\n  return props;\n}\n\nfunction set (elem, newProps) {\n  assign(elem, newProps);\n  if (elem[$renderer]) {\n    elem[$renderer]();\n  }\n}\n\nexport default function (elem, newProps) {\n  return typeof newProps === 'undefined' ? get(elem) : set(elem, newProps);\n}\n","export default function getDefaultValue (elem, name, opts) {\n  return typeof opts.default === 'function' ? opts.default(elem, { name }) : opts.default;\n}\n","export default function getInitialValue (elem, name, opts) {\n  return typeof opts.initial === 'function' ? opts.initial(elem, { name }) : opts.initial;\n}\n","import data from './data';\n\nexport default function getPropData (elem, name) {\n  const elemData = data(elem, 'props');\n  return elemData[name] || (elemData[name] = {});\n}\n","import data from './data';\nimport empty from './empty';\nimport getDefaultValue from '../util/get-default-value';\nimport getInitialValue from './get-initial-value';\nimport getPropData from './get-prop-data';\n\nfunction syncFirstTimeProp (elem, prop, propName, attributeName, propData) {\n  let syncAttrValue = propData.lastAssignedValue;\n  if (empty(syncAttrValue)) {\n    if ('initial' in prop) {\n      syncAttrValue = getInitialValue(elem, propName, prop);\n    } else if ('default' in prop) {\n      syncAttrValue = getDefaultValue(elem, propName, prop);\n    }\n  }\n  if (!empty(syncAttrValue) && prop.serialize) {\n    syncAttrValue = prop.serialize(syncAttrValue);\n  }\n  if (!empty(syncAttrValue)) {\n    propData.syncingAttribute = true;\n    elem.setAttribute(attributeName, syncAttrValue);\n  }\n}\n\nfunction syncExistingProp (elem, prop, propName, attributeName, propData) {\n  if (attributeName && !propData.settingAttribute) {\n    const { internalValue } = propData;\n    const serializedValue = prop.serialize(internalValue);\n    const currentAttrValue = elem.getAttribute(attributeName);\n    const serializedIsEmpty = empty(serializedValue);\n    const attributeChanged = !(\n      (serializedIsEmpty && empty(currentAttrValue)) || serializedValue === currentAttrValue\n    );\n\n    propData.syncingAttribute = true;\n\n    const shouldRemoveAttribute = empty(propData.lastAssignedValue);\n    if (shouldRemoveAttribute || serializedIsEmpty) {\n      elem.removeAttribute(attributeName);\n    } else {\n      elem.setAttribute(attributeName, serializedValue);\n    }\n\n    if (!attributeChanged && propData.syncingAttribute) {\n      propData.syncingAttribute = false;\n    }\n  }\n\n  // Allow the attribute to be linked again.\n  propData.settingAttribute = false;\n}\n\nexport default function syncPropToAttr (elem, prop, propName, isFirstSync) {\n  const attributeName = data(elem, 'propertyLinks')[propName];\n  const propData = getPropData(elem, propName);\n\n  if (attributeName) {\n    if (isFirstSync) {\n      syncFirstTimeProp(elem, prop, propName, attributeName, propData);\n    } else {\n      syncExistingProp(elem, prop, propName, attributeName, propData);\n    }\n  }\n}\n","import {\n  connected as $connected,\n  rendererDebounced as $rendererDebounced\n} from '../util/symbols';\nimport assign from '../util/assign';\nimport data from '../util/data';\nimport empty from '../util/empty';\nimport dashCase from '../util/dash-case';\nimport getDefaultValue from '../util/get-default-value';\nimport getInitialValue from '../util/get-initial-value';\nimport getPropData from '../util/get-prop-data';\nimport syncPropToAttr from '../util/sync-prop-to-attr';\n\nfunction createNativePropertyDefinition (name, opts) {\n  const prop = {\n    configurable: true,\n    enumerable: true\n  };\n\n  prop.created = function created (elem) {\n    const propData = getPropData(elem, name);\n    const attributeName = opts.attribute === true ? dashCase(name) : opts.attribute;\n    let initialValue = elem[name];\n\n    // Store property to attribute link information.\n    data(elem, 'attributeLinks')[attributeName] = name;\n    data(elem, 'propertyLinks')[name] = attributeName;\n\n    // Set up initial value if it wasn't specified.\n    if (empty(initialValue)) {\n      if (attributeName && elem.hasAttribute(attributeName)) {\n        initialValue = opts.deserialize(elem.getAttribute(attributeName));\n      } else if ('initial' in opts) {\n        initialValue = getInitialValue(elem, name, opts);\n      } else if ('default' in opts) {\n        initialValue = getDefaultValue(elem, name, opts);\n      }\n    }\n\n    propData.internalValue = opts.coerce ? opts.coerce(initialValue) : initialValue;\n  };\n\n  prop.get = function get () {\n    const propData = getPropData(this, name);\n    const { internalValue } = propData;\n    return typeof opts.get === 'function' ? opts.get(this, { name, internalValue }) : internalValue;\n  };\n\n  prop.set = function set (newValue) {\n    const propData = getPropData(this, name);\n    propData.lastAssignedValue = newValue;\n    let { oldValue } = propData;\n\n    if (empty(oldValue)) {\n      oldValue = null;\n    }\n\n    if (empty(newValue)) {\n      newValue = getDefaultValue(this, name, opts);\n    }\n\n    if (typeof opts.coerce === 'function') {\n      newValue = opts.coerce(newValue);\n    }\n\n    const changeData = { name, newValue, oldValue };\n\n    if (typeof opts.set === 'function') {\n      opts.set(this, changeData);\n    }\n\n    // Queue a re-render.\n    this[$rendererDebounced](this);\n\n    // Update prop data so we can use it next time.\n    propData.internalValue = propData.oldValue = newValue;\n\n    // Link up the attribute.\n    if (this[$connected]) {\n      syncPropToAttr(this, opts, name, false);\n    }\n  };\n\n  return prop;\n}\n\nexport default function (opts) {\n  opts = opts || {};\n\n  if (typeof opts === 'function') {\n    opts = { coerce: opts };\n  }\n\n  return name => createNativePropertyDefinition(name, assign({\n    default: null,\n    deserialize: value => value,\n    serialize: value => value\n  }, opts));\n}\n","import { patchInner } from 'incremental-dom';\nimport {\n  connected as $connected,\n  created as $created,\n  ctorObservedAttributes as $ctorObservedAttributes,\n  ctorProps as $ctorProps,\n  ctorCreateInitProps as $ctorCreateInitProps,\n  props as $props,\n  renderer as $renderer,\n  rendererDebounced as $rendererDebounced,\n  rendering as $rendering,\n  updated as $updated\n} from '../util/symbols';\nimport assign from '../util/assign';\nimport createSymbol from '../util/create-symbol';\nimport data from '../util/data';\nimport dashCase from '../util/dash-case';\nimport debounce from '../util/debounce';\nimport getAllKeys from '../util/get-all-keys';\nimport getOwnPropertyDescriptors from '../util/get-own-property-descriptors';\nimport getPropsMap from '../util/get-props-map';\nimport getSetProps from './props';\nimport initProps from '../lifecycle/props-init';\nimport setCtorNativeProperty from '../util/set-ctor-native-property';\nimport syncPropToAttr from '../util/sync-prop-to-attr';\nimport root from 'window-or-global';\n\nconst HTMLElement = root.HTMLElement || class {};\nconst _prevName = createSymbol('prevName');\nconst _prevOldValue = createSymbol('prevOldValue');\nconst _prevNewValue = createSymbol('prevNewValue');\n\nfunction preventDoubleCalling (elem, name, oldValue, newValue) {\n  return name === elem[_prevName] &&\n    oldValue === elem[_prevOldValue] &&\n    newValue === elem[_prevNewValue];\n}\n\nfunction syncPropsToAttrs (elem) {\n  const props = getPropsMap(elem.constructor);\n  Object.keys(props).forEach((propName) => {\n    const prop = props[propName];\n    syncPropToAttr(elem, prop, propName, true);\n  });\n}\n\n// TODO remove when not catering to Safari < 10.\n//\n// Ensures that definitions passed as part of the constructor are functions\n// that return property definitions used on the element.\nfunction ensurePropertyFunctions (Ctor) {\n  const props = getPropsMap(Ctor);\n  return getAllKeys(props).reduce((descriptors, descriptorName) => {\n    descriptors[descriptorName] = props[descriptorName];\n    if (typeof descriptors[descriptorName] !== 'function') {\n      descriptors[descriptorName] = initProps(descriptors[descriptorName]);\n    }\n    return descriptors;\n  }, {});\n}\n\n// TODO remove when not catering to Safari < 10.\n//\n// This can probably be simplified into createInitProps().\nfunction ensurePropertyDefinitions (Ctor) {\n  const props = ensurePropertyFunctions(Ctor);\n  return getAllKeys(props).reduce((descriptors, descriptorName) => {\n    descriptors[descriptorName] = props[descriptorName](descriptorName);\n    return descriptors;\n  }, {});\n}\n\n// TODO refactor when not catering to Safari < 10.\n//\n// We should be able to simplify this where all we do is Object.defineProperty().\nfunction createInitProps (Ctor) {\n  const props = ensurePropertyDefinitions(Ctor);\n\n  return (elem) => {\n    if (!props) {\n      return;\n    }\n\n    getAllKeys(props).forEach((name) => {\n      const prop = props[name];\n      prop.created(elem);\n\n      // We check here before defining to see if the prop was specified prior\n      // to upgrading.\n      const hasPropBeforeUpgrading = name in elem;\n\n      // This is saved prior to defining so that we can set it after it it was\n      // defined prior to upgrading. We don't want to invoke the getter if we\n      // don't need to, so we only get the value if we need to re-sync.\n      const valueBeforeUpgrading = hasPropBeforeUpgrading && elem[name];\n\n      // https://bugs.webkit.org/show_bug.cgi?id=49739\n      //\n      // When Webkit fixes that bug so that native property accessors can be\n      // retrieved, we can move defining the property to the prototype and away\n      // from having to do if for every instance as all other browsers support\n      // this.\n      Object.defineProperty(elem, name, prop);\n\n      // DEPRECATED\n      //\n      // We'll be removing get / set callbacks on properties. Use the\n      // updatedCallback() instead.\n      //\n      // We re-set the prop if it was specified prior to upgrading because we\n      // need to ensure set() is triggered both in polyfilled environments and\n      // in native where the definition may be registerd after elements it\n      // represents have already been created.\n      if (hasPropBeforeUpgrading) {\n        elem[name] = valueBeforeUpgrading;\n      }\n    });\n  };\n}\n\nexport default class extends HTMLElement {\n\n  /**\n   * Returns unique attribute names configured with props and\n   * those set on the Component constructor if any\n   */\n  static get observedAttributes () {\n    const attrsOnCtor = this.hasOwnProperty($ctorObservedAttributes) ? this[$ctorObservedAttributes] : [];\n\n    const props = getPropsMap(this);\n    const attrsFromLinkedProps = Object.keys(props).map(key => {\n      const { attribute } = props[key];\n      return attribute === true ? dashCase(key) : attribute;\n    }).filter(Boolean);\n\n    const all = attrsFromLinkedProps.concat(attrsOnCtor).concat(super.observedAttributes);\n\n    return all.filter(function (item, index) {\n      return all.indexOf(item) === index;\n    });\n  }\n  static set observedAttributes (value) {\n    value = Array.isArray(value) ? value : [];\n    setCtorNativeProperty(this, 'observedAttributes', value);\n  }\n\n  // Returns superclass props overwritten with this Component props\n  static get props () {\n    return assign({}, super.props, this[$ctorProps]);\n  }\n  static set props (value) {\n    setCtorNativeProperty(this, $ctorProps, value);\n  }\n\n  constructor () {\n    super();\n\n    const { constructor } = this;\n\n    // Used for the ready() function so it knows when it can call its callback.\n    this[$created] = true;\n\n    // TODO refactor to not cater to Safari < 10. This means we can depend on\n    // built-in property descriptors.\n    // Must be defined on constructor and not from a superclass\n    if (!constructor.hasOwnProperty($ctorCreateInitProps)) {\n      setCtorNativeProperty(constructor, $ctorCreateInitProps, createInitProps(constructor));\n    }\n\n    // Set up a renderer that is debounced for property sets to call directly.\n    this[$rendererDebounced] = debounce(this[$renderer].bind(this));\n\n    // Set up property lifecycle.\n    const propConfigsCount = getAllKeys(getPropsMap(constructor)).length;\n    if (propConfigsCount && constructor[$ctorCreateInitProps]) {\n      constructor[$ctorCreateInitProps](this);\n    }\n\n    // DEPRECATED\n    //\n    // static render()\n    if (!this.renderCallback && constructor.render) {\n      this.renderCallback = constructor.render.bind(constructor, this);\n    }\n\n    // DEPRECATED\n    //\n    // static created()\n    //\n    // Props should be set up before calling this.\n    if (typeof constructor.created === 'function') {\n      constructor.created(this);\n    }\n\n    // DEPRECATED\n    //\n    // Feature has rarely been used.\n    //\n    // Created should be set before invoking the ready listeners.\n    const elemData = data(this);\n    const readyCallbacks = elemData.readyCallbacks;\n    if (readyCallbacks) {\n      readyCallbacks.forEach(cb => cb(this));\n      delete elemData.readyCallbacks;\n    }\n  }\n\n  // Custom Elements v1\n  connectedCallback () {\n    const { constructor } = this;\n\n    // DEPRECATED\n    //\n    // No more reflecting back to attributes in favour of one-way reflection.\n    syncPropsToAttrs(this);\n\n    // Used to check whether or not the component can render.\n    this[$connected] = true;\n\n    // Render!\n    this[$rendererDebounced]();\n\n    // DEPRECATED\n    //\n    // static attached()\n    if (typeof constructor.attached === 'function') {\n      constructor.attached(this);\n    }\n\n    // DEPRECATED\n    //\n    // We can remove this once all browsers support :defined.\n    this.setAttribute('defined', '');\n  }\n\n  // Custom Elements v1\n  disconnectedCallback () {\n    const { constructor } = this;\n\n    // Ensures the component can't be rendered while disconnected.\n    this[$connected] = false;\n\n    // DEPRECATED\n    //\n    // static detached()\n    if (typeof constructor.detached === 'function') {\n      constructor.detached(this);\n    }\n  }\n\n  // Custom Elements v1\n  attributeChangedCallback (name, oldValue, newValue) {\n    // Polyfill calls this twice.\n    if (preventDoubleCalling(this, name, oldValue, newValue)) {\n      return;\n    }\n\n    // Set data so we can prevent double calling if the polyfill.\n    this[_prevName] = name;\n    this[_prevOldValue] = oldValue;\n    this[_prevNewValue] = newValue;\n\n    const { attributeChanged } = this.constructor;\n    const propertyName = data(this, 'attributeLinks')[name];\n\n    if (propertyName) {\n      const propData = data(this, 'props')[propertyName];\n\n      // This ensures a property set doesn't cause the attribute changed\n      // handler to run again once we set this flag. This only ever has a\n      // chance to run when you set an attribute, it then sets a property and\n      // then that causes the attribute to be set again.\n      if (propData.syncingAttribute) {\n        propData.syncingAttribute = false;\n      } else {\n        // Sync up the property.\n        const propOpts = getPropsMap(this.constructor)[propertyName];\n        propData.settingAttribute = true;\n        const newPropVal = newValue !== null && propOpts.deserialize\n          ? propOpts.deserialize(newValue)\n          : newValue;\n        this[propertyName] = newPropVal;\n      }\n    }\n\n    if (attributeChanged) {\n      attributeChanged(this, { name, newValue, oldValue });\n    }\n  }\n\n  // Skate\n  //\n  // Maps to the static updated() callback. That logic should be moved here\n  // when that is finally removed.\n  updatedCallback (prev) {\n    return this.constructor.updated(this, prev);\n  }\n\n  // Skate\n  //\n  // Maps to the static rendered() callback. That logic should be moved here\n  // when that is finally removed.\n  renderedCallback () {\n    return this.constructor.rendered(this);\n  }\n\n  // Skate\n  //\n  // Maps to the static renderer() callback. That logic should be moved here\n  // when that is finally removed.\n  rendererCallback () {\n    return this.constructor.renderer(this);\n  }\n\n  // Skate\n  //\n  // Invokes the complete render lifecycle.\n  [$renderer] () {\n    if (this[$rendering] || !this[$connected]) {\n      return;\n    }\n\n    // Flag as rendering. This prevents anything from trying to render - or\n    // queueing a render - while there is a pending render.\n    this[$rendering] = true;\n\n    if (this[$updated]() && typeof this.renderCallback === 'function') {\n      this.rendererCallback();\n      this.renderedCallback();\n    }\n\n    this[$rendering] = false;\n  }\n\n  // Skate\n  //\n  // Calls the user-defined updated() lifecycle callback.\n  [$updated] () {\n    const prev = this[$props];\n    this[$props] = getSetProps(this);\n    return this.updatedCallback(prev);\n  }\n\n  // Skate\n  static extend (definition = {}, Base = this) {\n    // Create class for the user.\n    class Ctor extends Base {}\n\n    // For inheriting from the object literal.\n    const opts = getOwnPropertyDescriptors(definition);\n    const prot = getOwnPropertyDescriptors(definition.prototype);\n\n    // Prototype is non configurable (but is writable).\n    delete opts.prototype;\n\n    // Pass on static and instance members from the definition.\n    Object.defineProperties(Ctor, opts);\n    Object.defineProperties(Ctor.prototype, prot);\n\n    return Ctor;\n  }\n\n  // Skate\n  //\n  // DEPRECATED\n  //\n  // Move this to rendererCallback() before removing.\n  static updated (elem, prev) {\n    if (!prev) {\n      return true;\n    }\n\n    // use get all keys so that we check Symbols as well as regular props\n    // using a for loop so we can break early\n    const allKeys = getAllKeys(prev);\n    for (let i = 0; i < allKeys.length; i += 1) {\n      if (prev[allKeys[i]] !== elem[allKeys[i]]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  // Skate\n  //\n  // DEPRECATED\n  //\n  // Move this to rendererCallback() before removing.\n  static rendered () {}\n\n  // Skate\n  //\n  // DEPRECATED\n  //\n  // Move this to rendererCallback() before removing.\n  static renderer (elem) {\n    if (!elem.shadowRoot) {\n      elem.attachShadow({ mode: 'open' });\n    }\n    patchInner(elem.shadowRoot, () => {\n      const possibleFn = elem.renderCallback();\n      if (typeof possibleFn === 'function') {\n        possibleFn();\n      } else if (Array.isArray(possibleFn)) {\n        possibleFn.forEach((fn) => {\n          if (typeof fn === 'function') {\n            fn();\n          }\n        });\n      }\n    });\n  }\n}\n","export default function uniqueId (prefix) {\n  // http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript/2117523#2117523\n  const rand = 'xxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = Math.random() * 16 | 0;\n    // eslint-disable-next-line no-mixed-operators\n    const v = c === 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n  return `${prefix || 'x'}-${rand}`;\n}\n","import { name as $name } from '../util/symbols';\nimport Component from './component';\nimport uniqueId from '../util/unique-id';\nimport root from 'window-or-global';\n\nexport default function (...args) {\n  const { customElements } = root;\n  let [ name, Ctor ] = args;\n\n  if (!customElements) {\n    throw new Error('Skate requires native custom element support or a polyfill.');\n  }\n\n  // Support passing an anonymous definition.\n  if (args.length === 1) {\n    // We are checking string for now, but once we remove the ability to pass\n    // an object literal, we can change this to check \"function\" and invert the\n    // blocks of logic.\n    if (typeof name === 'string') {\n      throw new Error('When passing only one argument to define(), it must be a custom element constructor.');\n    } else {\n      Ctor = name;\n      name = uniqueId();\n    }\n  }\n\n  // Ensure there's no conflicts.\n  if (customElements.get(name)) {\n    name = uniqueId(name);\n  }\n\n  // DEPRECATED\n  //\n  // Object literals.\n  if (typeof Ctor === 'object') {\n    Ctor = Component.extend(Ctor);\n  }\n\n  // This allows us to check this before instantiating the custom element to\n  // find its name from the constructor in the vdom module, thus improving\n  // performance but still falling back to a robust method.\n  Ctor[$name] = name;\n\n  // Sipmle define. Not supporting customised built-ins yet.\n  customElements.define(name, Ctor);\n\n  // The spec doesn't return but this allows for a simpler, more concise API.\n  return Ctor;\n}\n","import Kefir from 'kefir';\n\nfunction eventsPositionDiff(prevEvent, nextEvent) {\n  //console.log(prevEvent,nextEvent);\n    if(nextEvent.touches) {\n        nextEvent = nextEvent.touches[0];\n    } \n    if(prevEvent.touches) {\n        prevEvent = prevEvent.touches[0];\n    }\n  return {\n    x: nextEvent.clientX - prevEvent.clientX,\n    y: nextEvent.clientY - prevEvent.clientY\n  };\n}\n\nfunction applyMove(currentPosition, move) {\n  //console.log(move);\n  return {\n    x: currentPosition.x + move.x,\n    y: currentPosition.y + move.y\n  };\n}\nconst preventDefault = (event) => { event.preventDefault(); }\nconst drag = Symbol()\n\nexport function startDragging(elem,timeout){\n  timeout = timeout ? timeout : 200;\n  setTimeout(function(){\n    // console.log(elem.style.left,elem.style.top)\n    elem.style.cursor = 'move'\n    elem.style.userSelect = 'none'\n\n    var drag = function(pos) {\n      elem.style.top = pos.y + 'px';\n      elem.style.left = pos.x + 'px';\n    }\n\n    var mouseUps = Kefir.fromEvents(document, 'mouseup').merge(Kefir.fromEvents(document,'touchend'));\n    var mouseMoves = Kefir.fromEvents(document, 'mousemove').merge(Kefir.fromEvents(document,'touchmove'));\n    var mouseDowns = Kefir.fromEvents(elem, 'mousedown').merge(Kefir.fromEvents(elem,'touchstart'));\n    mouseDowns.onValue( preventDefault );\n\n    var moves = mouseDowns.flatMap(function(downEvent) {\n      return mouseMoves.takeUntilBy(mouseUps)\n        .diff(eventsPositionDiff, downEvent);\n    });\n    var rect = elem.getBoundingClientRect();\n    var style = window.getComputedStyle(elem);\n    // console.log(style);\n    var currentPosition = { x: parseInt(rect.left)-parseInt(style.marginLeft),\n                        y: parseInt(rect.top)-parseInt(style.marginTop) };\n                        // console.log(currentPosition);\n    var position = moves.scan(applyMove, currentPosition);\n\n    setTimeout(function(){\n      elem.style.position = \"absolute\";\n      position.onValue(drag);\n    },timeout)\n\n    elem[stopDragging] = function (){\n      elem.style.cursor = 'default'\n      elem.style.userSelect = 'default'\n      position.offValue(drag);\n      mouseDowns.offValue( preventDefault );\n    }\n  },50);\n}\n\nexport function stopDragging(elem){\n  elem[stopDragging]();\n}\n\nexport const draggableHostStyle = `:host {\n  cursor: move;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  position: relative;\n}`\n","const reattacher = Symbol()\n\nexport function detach(elem,timeout){\n  timeout = timeout ? timeout : 200;\n  setTimeout(function(){\n    var rect = elem.getBoundingClientRect();\n    var style = window.getComputedStyle(elem);\n    var oldStyle = elem.style;\n    // console.log(style);\n    var currentPosition = { x: parseInt(rect.left)-parseInt(style.marginLeft),\n                        y: parseInt(rect.top)-parseInt(style.marginTop) };\n\n    setTimeout(function(){\n      elem.style.position = \"absolute\";\n      elem.style.top = currentPosition.y + 'px';\n      elem.style.left = currentPosition.x + 'px';\n    },timeout)\n\n    elem[reattacher] = function (){\n      elem.style = oldStyle\n    }\n  },50);\n}\n\nexport function reattach(elem){\n  elem[reattacher]();\n}\n","import {define, h} from 'skatejs'\nimport {parentSelector} from './parentSelector.js'\n\nconst animate = function(elem){\n  elem.dispatchEvent(new Event('animate'));\n  setTimeout( () => { window.requestAnimationFrame( () => {animate(elem)} ) }, 1000/elem.fps );\n}\n\nconst css = `graph-container, :host {display: inline-table}`\n\nconst GraphContainer = define('graph-container',\n {\n   props: {\n     fps: { attribute: true, default: 120 }\n   },\n   attached(elem) {\n     animate(elem);\n  },\n  attributeChanged(elem) {\n  },\n  render(elem) {\n    return [\n      h('slot', {\n        onSlotchange: (e) => {elem.dispatchEvent(new Event(\"graph-updated\"))}\n      }),\n      h('style',css)\n    ]\n  },\n  updated(elem){\n    // console.log(\"updated\")\n    return true;\n  }\n});\n\nexport function parentGraphContainer(elem){\n  return parentSelector(elem,'graph-container')\n}\n\nexport default GraphContainer\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like __proto__.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  var node;\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : defaultView(node = this.node())\n          .getComputedStyle(node, null)\n          .getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (event) {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([selector == null ? [] : selector], root);\n}\n","export default function() {}\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // proceed\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n","import {Basis} from \"./basis\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n","export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import noop from \"../noop\";\nimport {point} from \"./cardinal\";\n\nexport function CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {point} from \"./cardinal\";\n\nexport function CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n","import {epsilon} from \"../math\";\nimport {Cardinal} from \"./cardinal\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalClosed} from \"./cardinalClosed\";\nimport noop from \"../noop\";\nimport {point} from \"./catmullRom\";\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","import {CardinalOpen} from \"./cardinalOpen\";\nimport {point} from \"./catmullRom\";\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // proceed\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n","function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bzier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n","import Vec from 'victor'\n\nconst X = Vec(1,0)\nconst P = 100\n// Maybe a more efficient way, but messier to me.\n\n\nfunction center(R){\n  return new Vec(R.left+R.width/2, R.top+R.height/2)\n}\nfunction rad(R){\n  return new Vec(R.width/2,R.height/2)\n}\n\n// This implementation is based on the L-p unit disk being a square as p -> inf\n// pRad is the radius of the p-norm unit circle at angle theta, stretched by\n// the ratio of 'rectangular radii', see here: https://www.desmos.com/calculator/hzrmdr9j6w\nvar pRad = (theta,p,rW,rH) => Math.pow(Math.pow((rH/rW)*Math.cos(theta),p) +\n                                  Math.pow(Math.sin(theta),p), -1/p)\n// pXY is the cartesian coordinates of the point on the p-norm unit \"circle\" at angle theta.\n// the dimensions are unstretched, somehow only using the longer rectangle-radius is necessary (?)\nvar pXY = (theta,p,rW,rH) => new Vec(rH*Math.cos(theta)*pRad(theta,p,rW,rH),rH*Math.sin(theta)*pRad(theta,p,rW,rH))\n\nexport function nearbyEdgePoints(r1,r2,p1,p2,phase,margin){\n  phase = phase ? phase : Math.PI/16;\n  margin = margin ? margin : 0;\n  if (p1 == undefined){p1 = P}\n  if (p1 == true){p1 = 2}\n  if (p2 == undefined){p2 = P}\n  if (p2 == true){p2 = 2}\n\n  var c1 = center(r1), c2 = center(r2);\n  var rad1 = rad(r1), rad2 = rad(r2);\n  var phi = c2.clone().subtract(c1.clone()).angle()\n  var edgePt1 = pXY(phi+phase,p1,rad1.x+margin,rad1.y+margin).add(c1);\n  var edgePt2 = pXY(phi-phase+Math.PI,p2,rad2.x+margin,rad2.y+margin).add(c2) //new Vec(-edgePt1.x, -edgePt1.y);//.multiplyX(rad1).multiplyY(rad1);\n  return([edgePt1, edgePt2])\n}\n\n// export function localFrameEdgeGap(r1,r2,p1,p2,phase,margin){\n//   phase = phase ? phase : Math.PI/16;\n//   margin = margin ? margin : 0;\n//   if (p1 == undefined){p1 = P}\n//   if (p2 == undefined){p2 = P}\n//   var c1 = center(r1), c2 = center(r2);\n//   var dist = c2.subtract(c1);\n//   var rad1 = rad(r1), rad2 = rad(r2);\n//   var phi = c2.clone().subtract(c1.clone()).angle()\n//   var edgePt1 = pRad(phi+phase,p1,rad1.x+margin,rad1.y+margin);\n//   var edgePt2 = pRad(phi-phase+Math.PI,p2,rad2.x+margin,rad2.y+margin) //new Vec(-edgePt1.x, -edgePt1.y);//.multiplyX(rad1).multiplyY(rad1);\n//   return([c1.clone().add(edgePt1),\n//           c2.clone().add(edgePt2)\n//         ])\n// }\n\n// For some reason this implementation isn't working:\n// var abs = Math.abs\n// var mod = (n, m) => ((n.toFixed(3) % m) + m) % m;\n// var saw = (x,m) => (2/m)*(m/2-abs(mod(x,m*2))-m)\n// function clamp(num, low, high) {\n//   return Math.max(Math.min(num,high),low);\n// }\n//\n// var clampedSaw = (x) => -2*clamp(saw(x,Math.PI),-1/2,1/2)\n// var square = (phi) => new Vec(clampedSaw(phi),clampedSaw(phi-Math.PI/2))\n//\n//\n// export function nearbyEdgePoints(r1,r2){\n//   var c1 = center(r1), c2 = center(r2);\n//   var rad1 = rad(r1), rad2 = rad(r2);\n//   var phi = c2.clone().subtract(c1.clone()).angle()\n//   var edgePt1 = square(phi,P);\n//   var edgePt2 = new Vec(-edgePt1.x, -edgePt1.y);//.multiplyX(rad1).multiplyY(rad1);\n//   return([c1.clone().add(edgePt1.multiply(rad1)),\n//           c2.clone().add(edgePt2.multiply(rad2))\n//         ])\n// }\n","import define, {extend} from \"./define\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex3 = /^#([0-9a-f]{3})$/,\n    reHex6 = /^#([0-9a-f]{6})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  toString: function() {\n    return this.rgb() + \"\";\n  }\n});\n\nexport default function color(format) {\n  var m;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format])\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (0 <= this.r && this.r <= 255)\n        && (0 <= this.g && this.g <= 255)\n        && (0 <= this.b && this.b <= 255)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  toString: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"rgb(\" : \"rgba(\")\n        + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","import constant from \"./constant\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis\";\nimport basisClosed from \"./basisClosed\";\nimport {gamma} from \"./color\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDefault from \"./formatDefault\";\nimport formatPrefixAuto from \"./formatPrefixAuto\";\nimport formatRounded from \"./formatRounded\";\n\nexport default {\n  \"\": formatDefault,\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","import formatTypes from \"./formatTypes\";\n\n// [[fill]align][sign][symbol][0][width][,][.precision][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-\\( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?([a-z%])?$/i;\n\nexport default function(specifier) {\n  return new FormatSpecifier(specifier);\n}\n\nfunction FormatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n\n  var match,\n      fill = match[1] || \" \",\n      align = match[2] || \">\",\n      sign = match[3] || \"-\",\n      symbol = match[4] || \"\",\n      zero = !!match[5],\n      width = match[6] && +match[6],\n      comma = !!match[7],\n      precision = match[8] && +match[8].slice(1),\n      type = match[9] || \"\";\n\n  // The \"n\" type is an alias for \",g\".\n  if (type === \"n\") comma = true, type = \"g\";\n\n  // Map invalid types to the default format.\n  else if (!formatTypes[type]) type = \"\";\n\n  // If zero fill is specified, padding goes after sign and before digits.\n  if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n  this.fill = fill;\n  this.align = align;\n  this.sign = sign;\n  this.symbol = symbol;\n  this.zero = zero;\n  this.width = width;\n  this.comma = comma;\n  this.precision = precision;\n  this.type = type;\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width == null ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision == null ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + this.type;\n};\n","import exponent from \"./exponent\";\nimport formatGroup from \"./formatGroup\";\nimport formatSpecifier from \"./formatSpecifier\";\nimport formatTypes from \"./formatTypes\";\nimport {prefixExponent} from \"./formatPrefixAuto\";\n\nvar prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nfunction identity(x) {\n  return x;\n}\n\nexport default function(locale) {\n  var group = locale.grouping && locale.thousands ? formatGroup(locale.grouping, locale.thousands) : identity,\n      currency = locale.currency,\n      decimal = locale.decimal;\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        type = specifier.type;\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currency[0] : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currency[1] : /[%p]/.test(type) ? \"%\" : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = !type || /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision == null ? (type ? 6 : 12)\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Convert negative to positive, and compute the prefix.\n        // Note that -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = (value < 0 || 1 / value < 0) && (value *= -1, true);\n\n        // Perform the initial formatting.\n        value = formatType(value, precision);\n\n        // If the original value was negative, it may be rounded to zero during\n        // formatting; treat this as (positive) zero.\n        if (valueNegative) {\n          i = -1, n = value.length;\n          valueNegative = false;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), (48 < c && c < 58)\n                || (type === \"x\" && 96 < c && c < 103)\n                || (type === \"X\" && 64 < c && c < 71)) {\n              valueNegative = true;\n              break;\n            }\n          }\n        }\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : \"-\") : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = valueSuffix + (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": return valuePrefix + value + valueSuffix + padding;\n        case \"=\": return valuePrefix + padding + value + valueSuffix;\n        case \"^\": return padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length);\n      }\n      return padding + valuePrefix + value + valueSuffix;\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = new Date(+date)), date;\n  }\n\n  interval.floor = interval;\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [];\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(new Date(+start)); while (offseti(start, step), floori(start), start < stop)\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) while (--step >= 0) while (offseti(date, 1), !test(date)) {} // eslint-disable-line no-empty\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval\";\nimport {durationSecond} from \"./duration\";\n\nvar second = interval(function(date) {\n  date.setTime(Math.floor(date / durationSecond) * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar minute = interval(function(date) {\n  date.setTime(Math.floor(date / durationMinute) * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval\";\nimport {durationHour, durationMinute} from \"./duration\";\n\nvar hour = interval(function(date) {\n  var offset = date.getTimezoneOffset() * durationMinute % durationHour;\n  if (offset < 0) offset += durationHour;\n  date.setTime(Math.floor((+date - offset) / durationHour) * durationHour + offset);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval\";\nimport {durationDay, durationMinute} from \"./duration\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval\";\nimport {durationMinute, durationWeek} from \"./duration\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval\";\nimport {durationHour} from \"./duration\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval\";\nimport {durationDay} from \"./duration\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval\";\nimport {durationWeek} from \"./duration\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import interval from \"./interval\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import {timeDay, timeSunday, timeMonday, timeYear, utcDay, utcSunday, utcMonday, utcYear} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newYear(y) {\n  return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"S\": formatSeconds,\n    \"U\": formatWeekNumberSunday,\n    \"w\": formatWeekdayNumber,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"S\": formatUTCSeconds,\n    \"U\": formatUTCWeekNumberSunday,\n    \"w\": formatUTCWeekdayNumber,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"S\": parseSeconds,\n    \"U\": parseWeekNumberSunday,\n    \"w\": parseWeekdayNumber,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, newDate) {\n    return function(string) {\n      var d = newYear(1900),\n          i = parseSpecifier(d, specifier, string += \"\", 0);\n      if (i != string.length) return null;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"W\" in d ? 1 : 0;\n        var day = \"Z\" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return newDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", localDate);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier, utcDate);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?:\\:?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatWeekdayNumber(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCWeekdayNumber(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {utcFormat} from \"./defaultLocale\";\n\nexport var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\nfunction formatIsoNative(date) {\n  return date.toISOString();\n}\n\nvar formatIso = Date.prototype.toISOString\n    ? formatIsoNative\n    : utcFormat(isoSpecifier);\n\nexport default formatIso;\n","import {isoSpecifier} from \"./isoFormat\";\nimport {utcParse} from \"./defaultLocale\";\n\nfunction parseIsoNative(string) {\n  var date = new Date(string);\n  return isNaN(date) ? null : date;\n}\n\nvar parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n    ? parseIsoNative\n    : utcParse(isoSpecifier);\n\nexport default parseIso;\n","export default function(s) {\n  return s.match(/.{6}/g).map(function(x) {\n    return \"#\" + x;\n  });\n}\n","import colors from \"./colors\";\n\nexport default colors(\"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\");\n","import colors from \"./colors\";\n\nexport default colors(\"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\");\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar rainbow = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  rainbow.h = 360 * t - 100;\n  rainbow.s = 1.5 - 1.5 * ts;\n  rainbow.l = 0.8 - 0.9 * ts;\n  return rainbow + \"\";\n}\n","import colors from \"./colors\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","'use strict'\n\n/** Calculator for finding widest and/or shortest paths in a graph using the Floyed-Warshall algorithm. */\nclass FloydWarshall {\n\n  /**\n   * Create a Floyd-Warshall calculator for a specific adjacency matrix.\n   * @param {number[][]} adjacencyMatrix - A square matrix representing a graph with weighted edges.\n   */\n  constructor (adjacencyMatrix) {\n    this.adjacencyMatrix = adjacencyMatrix\n  }\n\n  /**\n   * Calculates the widest distance from one node to the other.\n   * @return {number[][]} - Matrix with distances from a node to the other\n   */\n  get widestPaths () {\n    let distMatrix = this._initializeDistanceMatrix(0)\n    for (let k = 0; k < this.order; ++k) {\n      for (let i = 0; i < this.order; ++i) {\n        if (i === k) { continue }\n        for (let j = 0; j < this.order; ++j) {\n          if (j === i || j === k) { continue }\n          const direct = distMatrix[i][j]\n          const detour = Math.min(distMatrix[i][k], distMatrix[k][j])\n          if (detour > direct) {\n            distMatrix[i][j] = detour\n          }\n        }\n      }\n    }\n    return distMatrix\n  }\n\n  /**\n   * Calculates the shortest paths of the weighted graph.\n   * (The output will not be accurate if the graph has a negative cycle.)\n   * @return {number[][]} - Matrix with distances from a node to the other\n   */\n  get shortestPaths () {\n    let distMatrix = this._initializeDistanceMatrix(Infinity)\n\n    for (let k = 0; k < this.order; ++k) {\n      for (let i = 0; i < this.order; ++i) {\n        for (let j = 0; j < this.order; ++j) {\n          let dist = distMatrix[i][k] + distMatrix[k][j]\n          if (distMatrix[i][j] > dist) {\n            distMatrix[i][j] = dist\n          }\n        }\n      }\n    }\n\n    for (let i = 0; i < this.order; ++i) {\n      for (let j = 0; j < this.order; ++j) {\n        if (distMatrix[i][j] === Infinity) {\n          distMatrix[i][j] = -1\n        }\n      }\n    }\n\n    return distMatrix\n  }\n\n  /**\n   * Get the order of the adjacency matrix (and of the output distance matrices.)\n   * @return {integer} The order of the adjacency matrix.\n   */\n  get order () {\n    return this.adjacencyMatrix.length\n  }\n\n  /**\n   * @private\n   */\n  _initializeDistanceMatrix (blankFiller) {\n    let distMatrix = []\n    for (let i = 0; i < this.order; ++i) {\n      distMatrix[i] = []\n      for (let j = 0; j < this.order; ++j) {\n        if (i === j) {\n          distMatrix[i][j] = 0\n        } else {\n          let val = this.adjacencyMatrix[i][j]\n          if (val) {\n            distMatrix[i][j] = val\n          } else {\n            distMatrix[i][j] = blankFiller\n          }\n        }\n      }\n    }\n    return distMatrix\n  }\n\n}\n\nmodule.exports = FloydWarshall\n","import {edgeModifier, refreshEdges, getNodes} from './edges-all-pairs'\nimport {define, h} from 'skatejs'\nimport {interpolateRainbow} from 'd3-scale'\nimport {selectAll} from 'd3-selection'\nimport FloydWarshall from 'floyd-warshall'\n// import core from 'mathjs/core'\n// import matrices from 'mathjs/lib/type/matrix'\n\n// var math = core.create();\n// math.import(matrices)\nfunction repeatAry(ary, times)\n{\n    var result = Array();\n    for(var i=0;i<times;i++)\n      result = result.concat(ary);\n    return result;\n}\n\nconst rainbow = (max) => (n) => interpolateRainbow(n/max)\nconst parseHops = (val) => JSON.parse(\"[\" + val + \"]\")\nconst hops = (elem,modifier) => (edges) => {\n  var nodes = elem[getNodes]()\n  if (nodes.length < 2) { return []; }\n  var colors = rainbow(nodes.length)\n  var adj = [];\n  for(var i=0; i<nodes.length; i++) {\n      adj[i] = new Array(nodes.length);\n  }\n\n  edges.forEach((edge)=>{\n    adj[nodes.indexOf(edge.source)][nodes.indexOf(edge.target)] = 1;\n  })\n  var hopMatrix = new FloydWarshall(adj).shortestPaths;\n  var hops = []\n  hopMatrix.forEach((row,i)=>{\n    row.forEach((hop,j)=>{\n      if(hop != 1 && modifier.hops.includes(hop)){\n        var thickness = elem.thickness*(1-hop/(nodes.length+1));\n        hops.push({source: nodes[i], target: nodes[j],\n          // segments: [5,10],\n          segments: repeatAry([thickness,thickness],hop-1).concat([thickness,thickness*thickness+5*thickness]),\n          direction: 1, color: colors(hop),\n          thickness: thickness})\n      }\n    })\n  })\n  if(modifier.hops.includes(1)) {\n    hops = hops.concat(edges)\n  }\n return hops;\n}\n\nconst updateHops = (elem) => {\n  var originalEdgeSets = selectAll(elem.children)\n       .filter((d,i,nodes)=>{return nodes[i][edgeModifier];}).nodes()\n  // console.log(originalEdgeSets)\n  originalEdgeSets.forEach((edgeElem)=>{\n    edgeElem[edgeModifier] = hops(edgeElem,elem)\n    edgeElem[refreshEdges]();\n  })\n}\n\ndefine('edges-modifier-hops', {\n  props: {\n    hops: { attribute: true, default: \"2\",\n    coerce(val){ var newVal = parseHops(val); return newVal},\n    // set(elem,data){ updateHops(elem) }\n    }\n  },\n  created(elem){\n    elem[edgeModifier] = (edges) => edges\n    elem[edgeData] = true\n    updateHops(elem);\n  },\n  updated(elem){\n    console.log(\"updating graph hops modifier\",elem.hops)\n    console.log(\"or...\",elem.getAttribute(\"hops\"))\n    updateHops(elem);\n    // return true\n  }\n})\n","import { define, h } from 'skatejs';\nimport {startDragging, stopDragging, draggableHostStyle} from './draggable.js';\n\nvar style = `\n  ._basket-ball_inner {\n    display: inline-block;\n    background-image: url('basketball.png');\n    background-position: center;\n    background-size: 100%;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    height: 100%;\n  }\n  basket-ball {\n    display: inline-block;\n    // position: relative;\n    background-size: 100%;\n    margin: 0;\n    padding: 0;\n    width: 340px;\n    height: 340px;\n  }\n  :host {\n    display: inline-block;\n    // position: relative;\n    background-size: 100%;\n    margin: 0;\n    padding: 0;\n    width: 340px;\n    height: 340px;\n  }\n`\ndefine(\"basket-ball\",{\n    props: {\n      round: { attribute: false, default: true },\n    },\n    attached(elem){\n      startDragging(elem);\n    },\n    detached(elem){\n      // stopDragging(elem);\n    },\n    render(elem){\n      return [h(\"div\",{class: '_basket-ball_inner'}),h(\"style\",style)]\n    },\n    rendered(elem){\n    }\n})\n","window.customElements && eval(`/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This shim allows elements written in, or compiled to, ES5 to work on native\n * implementations of Custom Elements.\n *\n * ES5-style classes don't work with native Custom Elements because the\n * HTMLElement constructor uses the value of \\`new.target\\` to look up the custom\n * element definition for the currently called constructor. \\`new.target\\` is only\n * set when \\`new\\` is called and is only propagated via super() calls. super()\n * is not emulatable in ES5. The pattern of \\`SuperClass.call(this)\\`\\` only works\n * when extending other ES5-style classes, and does not propagate \\`new.target\\`.\n *\n * This shim allows the native HTMLElement constructor to work by generating and\n * registering a stand-in class instead of the users custom element class. This\n * stand-in class's constructor has an actual call to super().\n * \\`customElements.define()\\` and \\`customElements.get()\\` are both overridden to\n * hide this stand-in class from users.\n *\n * In order to create instance of the user-defined class, rather than the stand\n * in, the stand-in's constructor swizzles its instances prototype and invokes\n * the user-defined constructor. When the user-defined constructor is called\n * directly it creates an instance of the stand-in class to get a real extension\n * of HTMLElement and returns that.\n *\n * There are two important constructors: A patched HTMLElement constructor, and\n * the StandInElement constructor. They both will be called to create an element\n * but which is called first depends on whether the browser creates the element\n * or the user-defined constructor is called directly. The variables\n * \\`browserConstruction\\` and \\`userConstruction\\` control the flow between the\n * two constructors.\n *\n * This shim should be better than forcing the polyfill because:\n *   1. It's smaller\n *   2. All reaction timings are the same as native (mostly synchronous)\n *   3. All reaction triggering DOM operations are automatically supported\n *\n * There are some restrictions and requirements on ES5 constructors:\n *   1. All constructors in a inheritance hierarchy must be ES5-style, so that\n *      they can be called with Function.call(). This effectively means that the\n *      whole application must be compiled to ES5.\n *   2. Constructors must return the value of the emulated super() call. Like\n *      \\`return SuperClass.call(this)\\`\n *   3. The \\`this\\` reference should not be used before the emulated super() call\n *      just like \\`this\\` is illegal to use before super() in ES6.\n *   4. Constructors should not create other custom elements before the emulated\n *      super() call. This is the same restriction as with native custom\n *      elements.\n *\n *  Compiling valid class-based custom elements to ES5 will satisfy these\n *  requirements with the latest version of popular transpilers.\n */\n(() => {\n  'use strict';\n\n  const NativeHTMLElement = window.HTMLElement;\n  const nativeDefine = window.customElements.define;\n  const nativeGet = window.customElements.get;\n\n  /**\n   * Map of user-provided constructors to tag names.\n   *\n   * @type {Map<Function, string>}\n   */\n  const tagnameByConstructor = new Map();\n\n  /**\n   * Map of tag names to user-provided constructors.\n   *\n   * @type {Map<string, Function>}\n   */\n  const constructorByTagname = new Map();\n\n\n  /**\n   * Whether the constructors are being called by a browser process, ie parsing\n   * or createElement.\n   */\n  let browserConstruction = false;\n\n  /**\n   * Whether the constructors are being called by a user-space process, ie\n   * calling an element constructor.\n   */\n  let userConstruction = false;\n\n  window.HTMLElement = function() {\n    if (!browserConstruction) {\n      const tagname = tagnameByConstructor.get(this.constructor);\n      const fakeClass = nativeGet.call(window.customElements, tagname);\n\n      // Make sure that the fake constructor doesn't call back to this constructor\n      userConstruction = true;\n      const instance = new (fakeClass)();\n      return instance;\n    }\n    // Else do nothing. This will be reached by ES5-style classes doing\n    // HTMLElement.call() during initialization\n    browserConstruction = false;\n  };\n\n  window.HTMLElement.prototype = Object.create(NativeHTMLElement.prototype);\n  window.HTMLElement.prototype.constructor = window.HTMLElement;\n\n  window.customElements.define = (tagname, elementClass) => {\n    const elementProto = elementClass.prototype;\n    const StandInElement = class extends NativeHTMLElement {\n      constructor() {\n        // Call the native HTMLElement constructor, this gives us the\n        // under-construction instance as \\`this\\`:\n        super();\n\n        // The prototype will be wrong up because the browser used our fake\n        // class, so fix it:\n        Object.setPrototypeOf(this, elementProto);\n\n        if (!userConstruction) {\n          // Make sure that user-defined constructor bottom's out to a do-nothing\n          // HTMLElement() call\n          browserConstruction = true;\n          // Call the user-defined constructor on our instance:\n          elementClass.call(this);\n        }\n        userConstruction = false;\n      }\n    };\n    const standInProto = StandInElement.prototype;\n    StandInElement.observedAttributes = elementClass.observedAttributes;\n    standInProto.connectedCallback = elementProto.connectedCallback;\n    standInProto.disconnectedCallback = elementProto.disconnectedCallback;\n    standInProto.attributeChangedCallback = elementProto.attributeChangedCallback;\n    standInProto.adoptedCallback = elementProto.adoptedCallback;\n\n    tagnameByConstructor.set(elementClass, tagname);\n    constructorByTagname.set(tagname, elementClass);\n    nativeDefine.call(window.customElements, tagname, StandInElement);\n  };\n\n  window.customElements.get = (tagname) => constructorByTagname.get(tagname);\n\n})();`);\n","var babelHelpers = {};\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nexport var jsx = function () {\n  var REACT_ELEMENT_TYPE = typeof Symbol === \"function\" && Symbol.for && Symbol.for(\"react.element\") || 0xeac7;\n  return function createRawReactElement(type, props, key, children) {\n    var defaultProps = type && type.defaultProps;\n    var childrenLength = arguments.length - 3;\n\n    if (!props && childrenLength !== 0) {\n      props = {};\n    }\n\n    if (props && defaultProps) {\n      for (var propName in defaultProps) {\n        if (props[propName] === void 0) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    } else if (!props) {\n      props = defaultProps || {};\n    }\n\n    if (childrenLength === 1) {\n      props.children = children;\n    } else if (childrenLength > 1) {\n      var childArray = Array(childrenLength);\n\n      for (var i = 0; i < childrenLength; i++) {\n        childArray[i] = arguments[i + 3];\n      }\n\n      props.children = childArray;\n    }\n\n    return {\n      $$typeof: REACT_ELEMENT_TYPE,\n      type: type,\n      key: key === undefined ? null : '' + key,\n      ref: null,\n      props: props,\n      _owner: null\n    };\n  };\n}();\n\nexport var asyncIterator = function (iterable) {\n  if (typeof Symbol === \"function\") {\n    if (Symbol.asyncIterator) {\n      var method = iterable[Symbol.asyncIterator];\n      if (method != null) return method.call(iterable);\n    }\n\n    if (Symbol.iterator) {\n      return iterable[Symbol.iterator]();\n    }\n  }\n\n  throw new TypeError(\"Object is not async iterable\");\n};\n\nexport var asyncGenerator = function () {\n  function AwaitValue(value) {\n    this.value = value;\n  }\n\n  function AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function (resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n\n        if (value instanceof AwaitValue) {\n          Promise.resolve(value.value).then(function (arg) {\n            resume(\"next\", arg);\n          }, function (arg) {\n            resume(\"throw\", arg);\n          });\n        } else {\n          settle(result.done ? \"return\" : \"normal\", result.value);\n        }\n      } catch (err) {\n        settle(\"throw\", err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case \"return\":\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case \"throw\":\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== \"function\") {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n    AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n      return this;\n    };\n  }\n\n  AsyncGenerator.prototype.next = function (arg) {\n    return this._invoke(\"next\", arg);\n  };\n\n  AsyncGenerator.prototype.throw = function (arg) {\n    return this._invoke(\"throw\", arg);\n  };\n\n  AsyncGenerator.prototype.return = function (arg) {\n    return this._invoke(\"return\", arg);\n  };\n\n  return {\n    wrap: function (fn) {\n      return function () {\n        return new AsyncGenerator(fn.apply(this, arguments));\n      };\n    },\n    await: function (value) {\n      return new AwaitValue(value);\n    }\n  };\n}();\n\nexport var asyncGeneratorDelegate = function (inner, awaitWrap) {\n  var iter = {},\n      waiting = false;\n\n  function pump(key, value) {\n    waiting = true;\n    value = new Promise(function (resolve) {\n      resolve(inner[key](value));\n    });\n    return {\n      done: false,\n      value: awaitWrap(value)\n    };\n  }\n\n  ;\n\n  if (typeof Symbol === \"function\" && Symbol.iterator) {\n    iter[Symbol.iterator] = function () {\n      return this;\n    };\n  }\n\n  iter.next = function (value) {\n    if (waiting) {\n      waiting = false;\n      return value;\n    }\n\n    return pump(\"next\", value);\n  };\n\n  if (typeof inner.throw === \"function\") {\n    iter.throw = function (value) {\n      if (waiting) {\n        waiting = false;\n        throw value;\n      }\n\n      return pump(\"throw\", value);\n    };\n  }\n\n  if (typeof inner.return === \"function\") {\n    iter.return = function (value) {\n      return pump(\"return\", value);\n    };\n  }\n\n  return iter;\n};\n\nexport var asyncToGenerator = function (fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new Promise(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return Promise.resolve(value).then(function (value) {\n            step(\"next\", value);\n          }, function (err) {\n            step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n};\n\nexport var classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nexport var createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nexport var defineEnumerableProperties = function (obj, descs) {\n  for (var key in descs) {\n    var desc = descs[key];\n    desc.configurable = desc.enumerable = true;\n    if (\"value\" in desc) desc.writable = true;\n    Object.defineProperty(obj, key, desc);\n  }\n\n  return obj;\n};\n\nexport var defaults = function (obj, defaults) {\n  var keys = Object.getOwnPropertyNames(defaults);\n\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n    if (value && value.configurable && obj[key] === undefined) {\n      Object.defineProperty(obj, key, value);\n    }\n  }\n\n  return obj;\n};\n\nexport var defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexport var get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nexport var inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar _instanceof = function (left, right) {\n  if (right != null && typeof Symbol !== \"undefined\" && right[Symbol.hasInstance]) {\n    return right[Symbol.hasInstance](left);\n  } else {\n    return left instanceof right;\n  }\n};\n\nexport var interopRequireDefault = function (obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n};\n\nexport var interopRequireWildcard = function (obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n};\n\nexport var newArrowCheck = function (innerThis, boundThis) {\n  if (innerThis !== boundThis) {\n    throw new TypeError(\"Cannot instantiate an arrow function\");\n  }\n};\n\nexport var objectDestructuringEmpty = function (obj) {\n  if (obj == null) throw new TypeError(\"Cannot destructure undefined\");\n};\n\nexport var objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nexport var possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nexport var selfGlobal = typeof global === \"undefined\" ? self : global;\n\nexport var set = function set(object, property, value, receiver) {\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent !== null) {\n      set(parent, property, value, receiver);\n    }\n  } else if (\"value\" in desc && desc.writable) {\n    desc.value = value;\n  } else {\n    var setter = desc.set;\n\n    if (setter !== undefined) {\n      setter.call(receiver, value);\n    }\n  }\n\n  return value;\n};\n\nexport var slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nexport var slicedToArrayLoose = function (arr, i) {\n  if (Array.isArray(arr)) {\n    return arr;\n  } else if (Symbol.iterator in Object(arr)) {\n    var _arr = [];\n\n    for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) {\n      _arr.push(_step.value);\n\n      if (i && _arr.length === i) break;\n    }\n\n    return _arr;\n  } else {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n  }\n};\n\nexport var taggedTemplateLiteral = function (strings, raw) {\n  return Object.freeze(Object.defineProperties(strings, {\n    raw: {\n      value: Object.freeze(raw)\n    }\n  }));\n};\n\nexport var taggedTemplateLiteralLoose = function (strings, raw) {\n  strings.raw = raw;\n  return strings;\n};\n\nexport var temporalRef = function (val, name, undef) {\n  if (val === undef) {\n    throw new ReferenceError(name + \" is not defined - temporal dead zone\");\n  } else {\n    return val;\n  }\n};\n\nexport var temporalUndefined = {};\n\nexport var toArray = function (arr) {\n  return Array.isArray(arr) ? arr : Array.from(arr);\n};\n\nexport var toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nbabelHelpers;\n\nexport { _typeof as typeof, _extends as extends, _instanceof as instanceof }","/*\n\n Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n Code distributed by Google as part of the polymer project is also\n subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n'use strict';(function(){function c(){this.a=new Map;this.j=new Map;this.h=new Map;this.o=new Set;this.C=new MutationObserver(this.D.bind(this));this.f=null;this.F=new Set;this.enableFlush=!0;this.s=!1;this.m=null}function g(){return h.customElements}function k(a){if(!/^[a-z][.0-9_a-z]*-[\\-.0-9_a-z]*$/.test(a)||-1!==r.indexOf(a))return Error(\"The element name '\"+a+\"' is not valid.\")}function l(a,b,e,d){var c=g();a=e?m.call(a,b,e):m.call(a,b);(b=c.a.get(b.toLowerCase()))&&c.u(a,b,d);c.b(a);return a}\nfunction n(a,b,e,d){b=b.toLowerCase();var c=a.getAttribute(b);d.call(a,b,e);1==a.__$CE_upgraded&&(d=g().a.get(a.localName),e=d.A,(d=d.i)&&0<=e.indexOf(b)&&(e=a.getAttribute(b),e!==c&&d.call(a,b,c,e,null)))}var f=document,h=window;if(g()&&(g().g=function(){},!g().forcePolyfill))return;var r=\"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph\".split(\" \");c.prototype.L=function(a,b){function e(a){var b=f[a];if(void 0!==b&&\"function\"!==typeof b)throw Error(c+\n\" '\"+a+\"' is not a Function\");return b}if(\"function\"!==typeof b)throw new TypeError(\"constructor must be a Constructor\");var d=k(a);if(d)throw d;if(this.a.has(a))throw Error(\"An element with name '\"+a+\"' is already defined\");if(this.j.has(b))throw Error(\"Definition failed for '\"+a+\"': The constructor is already used.\");var c=a,f=b.prototype;if(\"object\"!==typeof f)throw new TypeError(\"Definition failed for '\"+a+\"': constructor.prototype must be an object\");var d=e(\"connectedCallback\"),g=e(\"disconnectedCallback\"),\nh=e(\"attributeChangedCallback\");this.a.set(c,{name:a,localName:c,constructor:b,v:d,w:g,i:h,A:h&&b.observedAttributes||[]});this.j.set(b,c);this.K();if(a=this.h.get(c))a.resolve(void 0),this.h.delete(c)};c.prototype.get=function(a){return(a=this.a.get(a))?a.constructor:void 0};c.prototype.M=function(a){var b=k(a);if(b)return Promise.reject(b);if(this.a.has(a))return Promise.resolve();if(b=this.h.get(a))return b.N;var e,d=new Promise(function(a){e=a}),b={N:d,resolve:e};this.h.set(a,b);return d};c.prototype.g=\nfunction(){this.enableFlush&&(this.l(this.m.takeRecords()),this.D(this.C.takeRecords()),this.o.forEach(function(a){this.l(a.takeRecords())},this))};c.prototype.K=function(){var a=this;if(!this.s){this.s=!0;var b=function(){a.s=!1;a.m||(a.m=a.b(f));a.c(f.childNodes)};window.HTMLImports?window.HTMLImports.whenReady(b):b()}};c.prototype.I=function(a){this.f=a};c.prototype.b=function(a){if(null!=a.__$CE_observer)return a.__$CE_observer;a.__$CE_observer=new MutationObserver(this.l.bind(this));a.__$CE_observer.observe(a,\n{childList:!0,subtree:!0});this.enableFlush&&this.o.add(a.__$CE_observer);return a.__$CE_observer};c.prototype.J=function(a){null!=a.__$CE_observer&&(a.__$CE_observer.disconnect(),this.enableFlush&&this.o.delete(a.__$CE_observer),a.__$CE_observer=null)};c.prototype.l=function(a){for(var b=0;b<a.length;b++){var e=a[b];if(\"childList\"===e.type){var d=e.removedNodes;this.c(e.addedNodes);this.H(d)}}};c.prototype.c=function(a,b){b=b||new Set;for(var e=0;e<a.length;e++){var d=a[e];if(d.nodeType===Node.ELEMENT_NODE){this.J(d);\nd=f.createTreeWalker(d,NodeFilter.SHOW_ELEMENT,null,!1);do this.G(d.currentNode,b);while(d.nextNode())}}};c.prototype.G=function(a,b){if(!b.has(a)){b.add(a);var e=this.a.get(a.localName);if(e){a.__$CE_upgraded||this.u(a,e,!0);var d;if(d=a.__$CE_upgraded&&!a.__$CE_attached)a:{d=a;do{if(d.__$CE_attached||d.nodeType===Node.DOCUMENT_NODE){d=!0;break a}d=d.parentNode||d.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&d.host}while(d);d=!1}d&&(a.__$CE_attached=!0,e.v&&e.v.call(a))}a.shadowRoot&&this.c(a.shadowRoot.childNodes,\nb);\"LINK\"===a.tagName&&a.rel&&-1!==a.rel.toLowerCase().split(\" \").indexOf(\"import\")&&this.B(a,b)}};c.prototype.B=function(a,b){var e=a.import;if(e)b.has(e)||(b.add(e),e.__$CE_observer||this.b(e),this.c(e.childNodes,b));else if(b=a.href,!this.F.has(b)){this.F.add(b);var d=this,c=function(){a.removeEventListener(\"load\",c);a.import.__$CE_observer||d.b(a.import);d.c(a.import.childNodes)};a.addEventListener(\"load\",c)}};c.prototype.H=function(a){for(var b=0;b<a.length;b++){var e=a[b];if(e.nodeType===Node.ELEMENT_NODE){this.b(e);\ne=f.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1);do{var d=e.currentNode;if(d.__$CE_upgraded&&d.__$CE_attached){d.__$CE_attached=!1;var c=this.a.get(d.localName);c&&c.w&&c.w.call(d)}}while(e.nextNode())}}};c.prototype.u=function(a,b,e){a.__proto__=b.constructor.prototype;e&&(this.I(a),new b.constructor,a.__$CE_upgraded=!0,console.assert(!this.f));e=b.A;if((b=b.i)&&0<e.length){this.C.observe(a,{attributes:!0,attributeOldValue:!0,attributeFilter:e});for(var d=0;d<e.length;d++){var c=e[d];if(a.hasAttribute(c)){var f=\na.getAttribute(c);b.call(a,c,null,f,null)}}}};c.prototype.D=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(\"attributes\"===c.type){var d=c.target,f=this.a.get(d.localName),g=c.attributeName,h=c.oldValue,k=d.getAttribute(g);k!==h&&f.i.call(d,g,h,k,c.attributeNamespace)}}};window.CustomElementRegistry=c;c.prototype.define=c.prototype.L;c.prototype.get=c.prototype.get;c.prototype.whenDefined=c.prototype.M;c.prototype.flush=c.prototype.g;c.prototype.polyfilled=!0;c.prototype._observeRoot=c.prototype.b;\nc.prototype._addImport=c.prototype.B;var p=h.HTMLElement;c.prototype.nativeHTMLElement=p;h.HTMLElement=function(){var a=g();if(a.f){var b=a.f;a.f=null;return b}if(this.constructor)return a=a.j.get(this.constructor),l(f,a,void 0,!1);throw Error(\"Unknown constructor. Did you call customElements.define()?\");};h.HTMLElement.prototype=Object.create(p.prototype,{constructor:{value:h.HTMLElement,configurable:!0,writable:!0}});var m=f.createElement;f.createElement=function(a,b){return l(f,a,b,!0)};var t=\nf.createElementNS;f.createElementNS=function(a,b){return\"http://www.w3.org/1999/xhtml\"===a?f.createElement(b):t.call(f,a,b)};var q=Element.prototype.attachShadow;q&&Object.defineProperty(Element.prototype,\"attachShadow\",{value:function(a){a=q.call(this,a);g().b(a);return a}});var u=f.importNode;f.importNode=function(a,b){a=u.call(f,a,b);g().c(a.nodeType===Node.ELEMENT_NODE?[a]:a.childNodes);return a};var v=Element.prototype.setAttribute;Element.prototype.setAttribute=function(a,b){n(this,a,b,v)};\nvar w=Element.prototype.removeAttribute;Element.prototype.removeAttribute=function(a){n(this,a,null,w)};Object.defineProperty(window,\"customElements\",{value:new c,configurable:!0,enumerable:!0});window.CustomElements={takeRecords:function(){g().g&&g().g()}}})();\n\n//# sourceMappingURL=custom-elements.min.js.map\n","(function () {\n'use strict';\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar settings = window.ShadyDOM || {};\n\nsettings.hasNativeShadowDOM = Boolean(Element.prototype.attachShadow && Node.prototype.getRootNode);\n\nsettings.inUse = settings.force || !settings.hasNativeShadowDOM;\n\nfunction isShadyRoot(obj) {\n  return Boolean(obj.__localName === 'ShadyRoot');\n}\n\nvar p = Element.prototype;\nvar matches = p.matches || p.matchesSelector ||\n  p.mozMatchesSelector || p.msMatchesSelector ||\n  p.oMatchesSelector || p.webkitMatchesSelector;\n\nfunction matchesSelector(element, selector) {\n  return matches.call(element, selector);\n}\n\nfunction copyOwnProperty(name, source, target) {\n  var pd = Object.getOwnPropertyDescriptor(source, name);\n  if (pd) {\n    Object.defineProperty(target, name, pd);\n  }\n}\n\nfunction extend(target, source) {\n  if (target && source) {\n    var n$ = Object.getOwnPropertyNames(source);\n    for (var i=0, n; (i<n$.length) && (n=n$[i]); i++) {\n      copyOwnProperty(n, source, target);\n    }\n  }\n  return target || source;\n}\n\nfunction extendAll(target) {\n  var sources = [], len = arguments.length - 1;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];\n\n  for (var i=0; i < sources.length; i++) {\n    extend(target, sources[i]);\n  }\n  return target;\n}\n\nfunction mixin(target, source) {\n  for (var i in source) {\n    target[i] = source[i];\n  }\n  return target;\n}\n\nvar setPrototypeOf = Object.setPrototypeOf || function(obj, proto) {\n  obj.__proto__ = proto;\n  return obj;\n}\n\nfunction patchPrototype(obj, mixin) {\n  var proto = Object.getPrototypeOf(obj);\n  if (!proto.hasOwnProperty('__patchProto')) {\n    var patchProto = Object.create(proto);\n    patchProto.__sourceProto = proto;\n    extend(patchProto, mixin);\n    proto.__patchProto = patchProto;\n  }\n  setPrototypeOf(obj, proto.__patchProto);\n}\n\n\n\nvar common = {};\n\n// TODO(sorvell): actually rely on a real Promise polyfill...\nvar promish;\nif (window.Promise) {\n  promish = Promise.resolve();\n} else {\n  promish = {\n    then: function(cb) {\n      var twiddle = document.createTextNode('');\n      var observer = new MutationObserver(function() {\n        observer.disconnect();\n        cb();\n      });\n      observer.observe(twiddle, {characterData: true});\n    }\n  }\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction newSplice(index, removed, addedCount) {\n  return {\n    index: index,\n    removed: removed,\n    addedCount: addedCount\n  };\n}\n\nvar EDIT_LEAVE = 0;\nvar EDIT_UPDATE = 1;\nvar EDIT_ADD = 2;\nvar EDIT_DELETE = 3;\n\nvar ArraySplice = {\n\n  // Note: This function is *based* on the computation of the Levenshtein\n  // \"edit\" distance. The one change is that \"updates\" are treated as two\n  // edits - not one. With Array splices, an update is really a delete\n  // followed by an add. By retaining this, we optimize for \"keeping\" the\n  // maximum array items in the original array. For example:\n  //\n  //   'xxxx123' -> '123yyyy'\n  //\n  // With 1-edit updates, the shortest path would be just to update all seven\n  // characters. With 2-edit updates, we delete 4, leave 3, and add 4. This\n  // leaves the substring '123' intact.\n  calcEditDistances: function calcEditDistances(current, currentStart, currentEnd,\n                              old, oldStart, oldEnd) {\n    var this$1 = this;\n\n    // \"Deletion\" columns\n    var rowCount = oldEnd - oldStart + 1;\n    var columnCount = currentEnd - currentStart + 1;\n    var distances = new Array(rowCount);\n\n    // \"Addition\" rows. Initialize null column.\n    for (var i = 0; i < rowCount; i++) {\n      distances[i] = new Array(columnCount);\n      distances[i][0] = i;\n    }\n\n    // Initialize null row\n    for (var j = 0; j < columnCount; j++)\n      distances[0][j] = j;\n\n    for (var i$1 = 1; i$1 < rowCount; i$1++) {\n      for (var j$1 = 1; j$1 < columnCount; j$1++) {\n        if (this$1.equals(current[currentStart + j$1 - 1], old[oldStart + i$1 - 1]))\n          distances[i$1][j$1] = distances[i$1 - 1][j$1 - 1];\n        else {\n          var north = distances[i$1 - 1][j$1] + 1;\n          var west = distances[i$1][j$1 - 1] + 1;\n          distances[i$1][j$1] = north < west ? north : west;\n        }\n      }\n    }\n\n    return distances;\n  },\n\n  // This starts at the final weight, and walks \"backward\" by finding\n  // the minimum previous weight recursively until the origin of the weight\n  // matrix.\n  spliceOperationsFromEditDistances: function spliceOperationsFromEditDistances(distances) {\n    var i = distances.length - 1;\n    var j = distances[0].length - 1;\n    var current = distances[i][j];\n    var edits = [];\n    while (i > 0 || j > 0) {\n      if (i == 0) {\n        edits.push(EDIT_ADD);\n        j--;\n        continue;\n      }\n      if (j == 0) {\n        edits.push(EDIT_DELETE);\n        i--;\n        continue;\n      }\n      var northWest = distances[i - 1][j - 1];\n      var west = distances[i - 1][j];\n      var north = distances[i][j - 1];\n\n      var min;\n      if (west < north)\n        min = west < northWest ? west : northWest;\n      else\n        min = north < northWest ? north : northWest;\n\n      if (min == northWest) {\n        if (northWest == current) {\n          edits.push(EDIT_LEAVE);\n        } else {\n          edits.push(EDIT_UPDATE);\n          current = northWest;\n        }\n        i--;\n        j--;\n      } else if (min == west) {\n        edits.push(EDIT_DELETE);\n        i--;\n        current = west;\n      } else {\n        edits.push(EDIT_ADD);\n        j--;\n        current = north;\n      }\n    }\n\n    edits.reverse();\n    return edits;\n  },\n\n  /**\n   * Splice Projection functions:\n   *\n   * A splice map is a representation of how a previous array of items\n   * was transformed into a new array of items. Conceptually it is a list of\n   * tuples of\n   *\n   *   <index, removed, addedCount>\n   *\n   * which are kept in ascending index order of. The tuple represents that at\n   * the |index|, |removed| sequence of items were removed, and counting forward\n   * from |index|, |addedCount| items were added.\n   */\n\n  /**\n   * Lacking individual splice mutation information, the minimal set of\n   * splices can be synthesized given the previous state and final state of an\n   * array. The basic approach is to calculate the edit distance matrix and\n   * choose the shortest path through it.\n   *\n   * Complexity: O(l * p)\n   *   l: The length of the current array\n   *   p: The length of the old array\n   */\n  calcSplices: function calcSplices(current, currentStart, currentEnd,\n                        old, oldStart, oldEnd) {\n    var prefixCount = 0;\n    var suffixCount = 0;\n    var splice;\n\n    var minLength = Math.min(currentEnd - currentStart, oldEnd - oldStart);\n    if (currentStart == 0 && oldStart == 0)\n      prefixCount = this.sharedPrefix(current, old, minLength);\n\n    if (currentEnd == current.length && oldEnd == old.length)\n      suffixCount = this.sharedSuffix(current, old, minLength - prefixCount);\n\n    currentStart += prefixCount;\n    oldStart += prefixCount;\n    currentEnd -= suffixCount;\n    oldEnd -= suffixCount;\n\n    if (currentEnd - currentStart == 0 && oldEnd - oldStart == 0)\n      return [];\n\n    if (currentStart == currentEnd) {\n      splice = newSplice(currentStart, [], 0);\n      while (oldStart < oldEnd)\n        splice.removed.push(old[oldStart++]);\n\n      return [ splice ];\n    } else if (oldStart == oldEnd)\n      return [ newSplice(currentStart, [], currentEnd - currentStart) ];\n\n    var ops = this.spliceOperationsFromEditDistances(\n        this.calcEditDistances(current, currentStart, currentEnd,\n                               old, oldStart, oldEnd));\n\n    splice = undefined;\n    var splices = [];\n    var index = currentStart;\n    var oldIndex = oldStart;\n    for (var i = 0; i < ops.length; i++) {\n      switch(ops[i]) {\n        case EDIT_LEAVE:\n          if (splice) {\n            splices.push(splice);\n            splice = undefined;\n          }\n\n          index++;\n          oldIndex++;\n          break;\n        case EDIT_UPDATE:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.addedCount++;\n          index++;\n\n          splice.removed.push(old[oldIndex]);\n          oldIndex++;\n          break;\n        case EDIT_ADD:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.addedCount++;\n          index++;\n          break;\n        case EDIT_DELETE:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.removed.push(old[oldIndex]);\n          oldIndex++;\n          break;\n      }\n    }\n\n    if (splice) {\n      splices.push(splice);\n    }\n    return splices;\n  },\n\n  sharedPrefix: function sharedPrefix(current, old, searchLength) {\n    var this$1 = this;\n\n    for (var i = 0; i < searchLength; i++)\n      if (!this$1.equals(current[i], old[i]))\n        return i;\n    return searchLength;\n  },\n\n  sharedSuffix: function sharedSuffix(current, old, searchLength) {\n    var index1 = current.length;\n    var index2 = old.length;\n    var count = 0;\n    while (count < searchLength && this.equals(current[--index1], old[--index2]))\n      count++;\n\n    return count;\n  },\n\n  calculateSplices: function calculateSplices$1(current, previous) {\n    return this.calcSplices(current, 0, current.length, previous, 0,\n                            previous.length);\n  },\n\n  equals: function equals(currentValue, previousValue) {\n    return currentValue === previousValue;\n  }\n\n};\n\nvar calculateSplices = function (current, previous) { return ArraySplice.calculateSplices(current, previous); };\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// TODO(sorvell): circular (patch loads tree and tree loads patch)\n// for now this is stuck on `utils`\n//import {patchNode} from './patch'\n// native add/remove\nvar nativeInsertBefore = Element.prototype.insertBefore;\nvar nativeAppendChild = Element.prototype.appendChild;\nvar nativeRemoveChild = Element.prototype.removeChild;\n\n/**\n * `tree` is a dom manipulation library used by ShadyDom to\n * manipulate composed and logical trees.\n */\nvar tree = {\n\n  // sad but faster than slice...\n  arrayCopyChildNodes: function arrayCopyChildNodes(parent) {\n    var copy=[], i=0;\n    for (var n=parent.firstChild; n; n=n.nextSibling) {\n      copy[i++] = n;\n    }\n    return copy;\n  },\n\n  arrayCopyChildren: function arrayCopyChildren(parent) {\n    var copy=[], i=0;\n    for (var n=parent.firstElementChild; n; n=n.nextElementSibling) {\n      copy[i++] = n;\n    }\n    return copy;\n  },\n\n  arrayCopy: function arrayCopy(a$) {\n    var l = a$.length;\n    var copy = new Array(l);\n    for (var i=0; i < l; i++) {\n      copy[i] = a$[i];\n    }\n    return copy;\n  },\n\n  saveChildNodes: function saveChildNodes(node) {\n    tree.Logical.saveChildNodes(node);\n    if (!tree.Composed.hasParentNode(node)) {\n      tree.Composed.saveComposedData(node);\n      //tree.Composed.saveParentNode(node);\n    }\n    tree.Composed.saveChildNodes(node);\n  }\n\n};\n\ntree.Logical = {\n\n  hasParentNode: function hasParentNode(node) {\n    return Boolean(node.__dom && node.__dom.parentNode);\n  },\n\n  hasChildNodes: function hasChildNodes(node) {\n    return Boolean(node.__dom && node.__dom.childNodes !== undefined);\n  },\n\n  getChildNodes: function getChildNodes(node) {\n    // note: we're distinguishing here between undefined and false-y:\n    // hasChildNodes uses undefined check to see if this element has logical\n    // children; the false-y check indicates whether or not we should rebuild\n    // the cached childNodes array.\n    return this.hasChildNodes(node) ? this._getChildNodes(node) :\n      tree.Composed.getChildNodes(node);\n  },\n\n  _getChildNodes: function _getChildNodes(node) {\n    if (!node.__dom.childNodes) {\n      node.__dom.childNodes = [];\n      for (var n=this.getFirstChild(node); n; n=this.getNextSibling(n)) {\n        node.__dom.childNodes.push(n);\n      }\n    }\n    return node.__dom.childNodes;\n  },\n\n  // NOTE: __dom can be created under 2 conditions: (1) an element has a\n  // logical tree, or (2) an element is in a logical tree. In case (1), the\n  // element will store firstChild/lastChild, and in case (2), the element\n  // will store parentNode, nextSibling, previousSibling. This means that\n  // the mere existence of __dom is not enough to know if the requested\n  // logical data is available and instead we do an explicit undefined check.\n  getParentNode: function getParentNode(node) {\n    return node.__dom && node.__dom.parentNode !== undefined ?\n      node.__dom.parentNode : tree.Composed.getParentNode(node);\n  },\n\n  getFirstChild: function getFirstChild(node) {\n    return node.__dom && node.__dom.firstChild !== undefined ?\n      node.__dom.firstChild : tree.Composed.getFirstChild(node);\n  },\n\n  getLastChild: function getLastChild(node) {\n    return node.__dom && node.__dom.lastChild  !== undefined ?\n      node.__dom.lastChild : tree.Composed.getLastChild(node);\n  },\n\n  getNextSibling: function getNextSibling(node) {\n    return node.__dom && node.__dom.nextSibling  !== undefined ?\n      node.__dom.nextSibling : tree.Composed.getNextSibling(node);\n  },\n\n  getPreviousSibling: function getPreviousSibling(node) {\n    return node.__dom && node.__dom.previousSibling  !== undefined ?\n      node.__dom.previousSibling : tree.Composed.getPreviousSibling(node);\n  },\n\n  getFirstElementChild: function getFirstElementChild(node) {\n    return node.__dom && node.__dom.firstChild !== undefined ?\n      this._getFirstElementChild(node) :\n      tree.Composed.getFirstElementChild(node);\n  },\n\n  _getFirstElementChild: function _getFirstElementChild(node) {\n    var n = node.__dom.firstChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.nextSibling;\n    }\n    return n;\n  },\n\n  getLastElementChild: function getLastElementChild(node) {\n    return node.__dom && node.__dom.lastChild !== undefined ?\n      this._getLastElementChild(node) :\n      tree.Composed.getLastElementChild(node);\n  },\n\n  _getLastElementChild: function _getLastElementChild(node) {\n    var n = node.__dom.lastChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.previousSibling;\n    }\n    return n;\n  },\n\n  getNextElementSibling: function getNextElementSibling(node) {\n    return node.__dom && node.__dom.nextSibling !== undefined ?\n      this._getNextElementSibling(node) :\n      tree.Composed.getNextElementSibling(node);\n  },\n\n  _getNextElementSibling: function _getNextElementSibling(node) {\n    var this$1 = this;\n\n    var n = node.__dom.nextSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this$1.getNextSibling(n);\n    }\n    return n;\n  },\n\n  getPreviousElementSibling: function getPreviousElementSibling(node) {\n    return node.__dom && node.__dom.previousSibling !== undefined ?\n      this._getPreviousElementSibling(node) :\n      tree.Composed.getPreviousElementSibling(node);\n  },\n\n  _getPreviousElementSibling: function _getPreviousElementSibling(node) {\n    var this$1 = this;\n\n    var n = node.__dom.previousSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this$1.getPreviousSibling(n);\n    }\n    return n;\n  },\n\n  // Capture the list of light children. It's important to do this before we\n  // start transforming the DOM into \"rendered\" state.\n  // Children may be added to this list dynamically. It will be treated as the\n  // source of truth for the light children of the element. This element's\n  // actual children will be treated as the rendered state once this function\n  // has been called.\n  saveChildNodes: function saveChildNodes$1(node) {\n    if (!this.hasChildNodes(node)) {\n      node.__dom = node.__dom || {};\n      node.__dom.firstChild = node.firstChild;\n      node.__dom.lastChild = node.lastChild;\n      var c$ = node.__dom.childNodes = tree.arrayCopyChildNodes(node);\n      for (var i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n        n.__dom = n.__dom || {};\n        n.__dom.parentNode = node;\n        n.__dom.nextSibling = c$[i+1] || null;\n        n.__dom.previousSibling = c$[i-1] || null;\n        common.patchNode(n);\n      }\n    }\n  },\n\n  // TODO(sorvell): may need to patch saveChildNodes iff the tree has\n  // already been distributed.\n  // NOTE: ensure `node` is patched...\n  recordInsertBefore: function recordInsertBefore(node, container, ref_node) {\n    var this$1 = this;\n\n    container.__dom.childNodes = null;\n    // handle document fragments\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      var c$ = tree.arrayCopyChildNodes(node);\n      for (var i=0; i < c$.length; i++) {\n        this$1._linkNode(c$[i], container, ref_node);\n      }\n      // cleanup logical dom in doc fragment.\n      node.__dom = node.__dom || {};\n      node.__dom.firstChild = node.__dom.lastChild = null;\n      node.__dom.childNodes = null;\n    } else {\n      this._linkNode(node, container, ref_node);\n    }\n  },\n\n  _linkNode: function _linkNode(node, container, ref_node) {\n    common.patchNode(node);\n    ref_node = ref_node || null;\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (ref_node) {\n      ref_node.__dom = ref_node.__dom || {};\n    }\n    // update ref_node.previousSibling <-> node\n    node.__dom.previousSibling = ref_node ? ref_node.__dom.previousSibling :\n      container.__dom.lastChild;\n    if (node.__dom.previousSibling) {\n      node.__dom.previousSibling.__dom.nextSibling = node;\n    }\n    // update node <-> ref_node\n    node.__dom.nextSibling = ref_node;\n    if (node.__dom.nextSibling) {\n      node.__dom.nextSibling.__dom.previousSibling = node;\n    }\n    // update node <-> container\n    node.__dom.parentNode = container;\n    if (ref_node) {\n      if (ref_node === container.__dom.firstChild) {\n        container.__dom.firstChild = node;\n      }\n    } else {\n      container.__dom.lastChild = node;\n      if (!container.__dom.firstChild) {\n        container.__dom.firstChild = node;\n      }\n    }\n    // remove caching of childNodes\n    container.__dom.childNodes = null;\n  },\n\n  recordRemoveChild: function recordRemoveChild(node, container) {\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (node === container.__dom.firstChild) {\n      container.__dom.firstChild = node.__dom.nextSibling;\n    }\n    if (node === container.__dom.lastChild) {\n      container.__dom.lastChild = node.__dom.previousSibling;\n    }\n    var p = node.__dom.previousSibling;\n    var n = node.__dom.nextSibling;\n    if (p) {\n      p.__dom = p.__dom || {};\n      p.__dom.nextSibling = n;\n    }\n    if (n) {\n      n.__dom = n.__dom || {};\n      n.__dom.previousSibling = p;\n    }\n    // When an element is removed, logical data is no longer tracked.\n    // Explicitly set `undefined` here to indicate this. This is disginguished\n    // from `null` which is set if info is null.\n    node.__dom.parentNode = node.__dom.previousSibling =\n      node.__dom.nextSibling = null;\n    // remove caching of childNodes\n    container.__dom.childNodes = null;\n  }\n\n}\n\n\n// TODO(sorvell): composed tree manipulation is made available\n// (1) to maninpulate the composed tree, and (2) to track changes\n// to the tree for optional patching pluggability.\ntree.Composed = {\n\n  hasParentNode: function hasParentNode$1(node) {\n    return Boolean(node.__dom && node.__dom.$parentNode !== undefined);\n  },\n\n  hasChildNodes: function hasChildNodes$1(node) {\n    return Boolean(node.__dom && node.__dom.$childNodes !== undefined);\n  },\n\n  getChildNodes: function getChildNodes$1(node) {\n    return this.hasChildNodes(node) ? this._getChildNodes(node) :\n      (!node.__patched && tree.arrayCopy(node.childNodes));\n  },\n\n  _getChildNodes: function _getChildNodes$1(node) {\n    if (!node.__dom.$childNodes) {\n      node.__dom.$childNodes = [];\n      for (var n=node.__dom.$firstChild; n; n=n.__dom.$nextSibling) {\n        node.__dom.$childNodes.push(n);\n      }\n    }\n    return node.__dom.$childNodes;\n  },\n\n  getComposedChildNodes: function getComposedChildNodes(node) {\n    return node.__dom.$childNodes;\n  },\n\n  getParentNode: function getParentNode$1(node) {\n    return this.hasParentNode(node) ? node.__dom.$parentNode :\n      (!node.__patched && node.parentNode);\n  },\n\n  getFirstChild: function getFirstChild$1(node) {\n    return node.__patched ? node.__dom.$firstChild : node.firstChild;\n  },\n\n  getLastChild: function getLastChild$1(node) {\n    return node.__patched ? node.__dom.$lastChild : node.lastChild;\n  },\n\n  getNextSibling: function getNextSibling$1(node) {\n    return node.__patched ? node.__dom.$nextSibling : node.nextSibling;\n  },\n\n  getPreviousSibling: function getPreviousSibling$1(node) {\n    return node.__patched ? node.__dom.$previousSibling : node.previousSibling;\n  },\n\n  getFirstElementChild: function getFirstElementChild$1(node) {\n    return node.__patched ? this._getFirstElementChild(node) :\n      node.firstElementChild;\n  },\n\n  _getFirstElementChild: function _getFirstElementChild$1(node) {\n    var n = node.__dom.$firstChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.$nextSibling;\n    }\n    return n;\n  },\n\n  getLastElementChild: function getLastElementChild$1(node) {\n    return node.__patched ? this._getLastElementChild(node) :\n      node.lastElementChild;\n  },\n\n  _getLastElementChild: function _getLastElementChild$1(node) {\n    var n = node.__dom.$lastChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.$previousSibling;\n    }\n    return n;\n  },\n\n  getNextElementSibling: function getNextElementSibling$1(node) {\n    return node.__patched ? this._getNextElementSibling(node) :\n      node.nextElementSibling;\n  },\n\n  _getNextElementSibling: function _getNextElementSibling$1(node) {\n    var this$1 = this;\n\n    var n = node.__dom.$nextSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this$1.getNextSibling(n);\n    }\n    return n;\n  },\n\n  getPreviousElementSibling: function getPreviousElementSibling$1(node) {\n    return node.__patched ? this._getPreviousElementSibling(node) :\n      node.previousElementSibling;\n  },\n\n  _getPreviousElementSibling: function _getPreviousElementSibling$1(node) {\n    var this$1 = this;\n\n    var n = node.__dom.$previousSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this$1.getPreviousSibling(n);\n    }\n    return n;\n  },\n\n  saveChildNodes: function saveChildNodes$2(node) {\n    var this$1 = this;\n\n    if (!this.hasChildNodes(node)) {\n      node.__dom = node.__dom || {};\n      node.__dom.$firstChild = node.firstChild;\n      node.__dom.$lastChild = node.lastChild;\n      var c$ = node.__dom.$childNodes = tree.arrayCopyChildNodes(node);\n      for (var i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n        this$1.saveComposedData(n);\n      }\n    }\n  },\n\n  saveComposedData: function saveComposedData(node) {\n    node.__dom = node.__dom || {};\n    if (node.__dom.$parentNode === undefined) {\n      node.__dom.$parentNode = node.parentNode;\n    }\n    if (node.__dom.$nextSibling === undefined) {\n      node.__dom.$nextSibling = node.nextSibling;\n    }\n    if (node.__dom.$previousSibling === undefined) {\n      node.__dom.$previousSibling = node.previousSibling;\n    }\n  },\n\n  recordInsertBefore: function recordInsertBefore$1(node, container, ref_node) {\n    var this$1 = this;\n\n    container.__dom.$childNodes = null;\n    // handle document fragments\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      // TODO(sorvell): remember this for patching:\n      // the act of setting this info can affect patched nodes\n      // getters; therefore capture childNodes before patching.\n      for (var n=this.getFirstChild(node); n; n=this.getNextSibling(n)) {\n        this$1._linkNode(n, container, ref_node);\n      }\n    } else {\n      this._linkNode(node, container, ref_node);\n    }\n  },\n\n  _linkNode: function _linkNode$1(node, container, ref_node) {\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (ref_node) {\n      ref_node.__dom = ref_node.__dom || {};\n    }\n    // update ref_node.previousSibling <-> node\n    node.__dom.$previousSibling = ref_node ? ref_node.__dom.$previousSibling :\n      container.__dom.$lastChild;\n    if (node.__dom.$previousSibling) {\n      node.__dom.$previousSibling.__dom.$nextSibling = node;\n    }\n    // update node <-> ref_node\n    node.__dom.$nextSibling = ref_node;\n    if (node.__dom.$nextSibling) {\n      node.__dom.$nextSibling.__dom.$previousSibling = node;\n    }\n    // update node <-> container\n    node.__dom.$parentNode = container;\n    if (ref_node) {\n      if (ref_node === container.__dom.$firstChild) {\n        container.__dom.$firstChild = node;\n      }\n    } else {\n      container.__dom.$lastChild = node;\n      if (!container.__dom.$firstChild) {\n        container.__dom.$firstChild = node;\n      }\n    }\n    // remove caching of childNodes\n    container.__dom.$childNodes = null;\n  },\n\n  recordRemoveChild: function recordRemoveChild$1(node, container) {\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (node === container.__dom.$firstChild) {\n      container.__dom.$firstChild = node.__dom.$nextSibling;\n    }\n    if (node === container.__dom.$lastChild) {\n      container.__dom.$lastChild = node.__dom.$previousSibling;\n    }\n    var p = node.__dom.$previousSibling;\n    var n = node.__dom.$nextSibling;\n    if (p) {\n      p.__dom = p.__dom || {};\n      p.__dom.$nextSibling = n;\n    }\n    if (n) {\n      n.__dom = n.__dom || {};\n      n.__dom.$previousSibling = p;\n    }\n    node.__dom.$parentNode = node.__dom.$previousSibling =\n      node.__dom.$nextSibling = null;\n    // remove caching of childNodes\n    container.__dom.$childNodes = null;\n  },\n\n  clearChildNodes: function clearChildNodes(node) {\n    var this$1 = this;\n\n    var c$ = this.getChildNodes(node);\n    for (var i=0, c; i < c$.length; i++) {\n      c = c$[i];\n      this$1.recordRemoveChild(c, node);\n      nativeRemoveChild.call(node, c)\n    }\n  },\n\n  saveParentNode: function saveParentNode(node) {\n    node.__dom = node.__dom || {};\n    node.__dom.$parentNode = node.parentNode;\n  },\n\n  insertBefore: function insertBefore(parentNode, newChild, refChild) {\n    this.saveChildNodes(parentNode);\n    // remove from current location.\n    this._addChild(parentNode, newChild, refChild);\n    return nativeInsertBefore.call(parentNode, newChild, refChild || null);\n  },\n\n  appendChild: function appendChild(parentNode, newChild) {\n    this.saveChildNodes(parentNode);\n    this._addChild(parentNode, newChild);\n    return nativeAppendChild.call(parentNode, newChild);\n  },\n\n  removeChild: function removeChild(parentNode, node) {\n    var currentParent = this.getParentNode(node);\n    this.saveChildNodes(parentNode);\n    this._removeChild(parentNode, node);\n    if (currentParent === parentNode) {\n      return nativeRemoveChild.call(parentNode, node);\n    }\n  },\n\n  _addChild: function _addChild(parentNode, newChild, refChild) {\n    var this$1 = this;\n\n    var isFrag = (newChild.nodeType === Node.DOCUMENT_FRAGMENT_NODE);\n    var oldParent = this.getParentNode(newChild);\n    if (oldParent) {\n      this._removeChild(oldParent, newChild);\n    }\n    if (isFrag) {\n      var c$ = this.getChildNodes(newChild);\n      for (var i=0; i < c$.length; i++) {\n        var c = c$[i];\n        // unlink document fragment children\n        this$1._removeChild(newChild, c);\n        this$1.recordInsertBefore(c, parentNode, refChild);\n      }\n    } else {\n      this.recordInsertBefore(newChild, parentNode, refChild);\n    }\n  },\n\n  _removeChild: function _removeChild(parentNode, node) {\n    this.recordRemoveChild(node, parentNode);\n  }\n\n};\n\n// for testing...\nvar descriptors = {};\nfunction getNativeProperty(element, property) {\n  if (!descriptors[property]) {\n    descriptors[property] = Object.getOwnPropertyDescriptor(\n      HTMLElement.prototype, property) ||\n    Object.getOwnPropertyDescriptor(\n      Element.prototype, property) ||\n    Object.getOwnPropertyDescriptor(\n      Node.prototype, property);\n  }\n  return descriptors[property].get.call(element);\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// NOTE: normalize event contruction where necessary (IE11)\nvar NormalizedEvent = typeof Event === 'function' ? Event :\n  function(inType, params) {\n    params = params || {};\n    var e = document.createEvent('Event');\n    e.initEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable));\n    return e;\n  };\n\nvar Distributor = (function () {\n  function anonymous(root) {\n    this.root = root;\n    this.insertionPointTag = 'slot';\n  }\n\n  anonymous.prototype.getInsertionPoints = function getInsertionPoints () {\n    return this.root.querySelectorAll(this.insertionPointTag);\n  };\n\n  anonymous.prototype.hasInsertionPoint = function hasInsertionPoint () {\n    return Boolean(this.root._insertionPoints &&\n      this.root._insertionPoints.length);\n  };\n\n  anonymous.prototype.isInsertionPoint = function isInsertionPoint (node) {\n    return node.localName && node.localName == this.insertionPointTag;\n  };\n\n  anonymous.prototype.distribute = function distribute () {\n    if (this.hasInsertionPoint()) {\n      return this.distributePool(this.root, this.collectPool());\n    }\n    return [];\n  };\n\n  // Gather the pool of nodes that should be distributed. We will combine\n  // these with the \"content root\" to arrive at the composed tree.\n  anonymous.prototype.collectPool = function collectPool () {\n    return tree.arrayCopy(\n      tree.Logical.getChildNodes(this.root.host));\n  };\n\n  // perform \"logical\" distribution; note, no actual dom is moved here,\n  // instead elements are distributed into storage\n  // array where applicable.\n  anonymous.prototype.distributePool = function distributePool (node, pool) {\n    var this$1 = this;\n\n    var dirtyRoots = [];\n    var p$ = this.root._insertionPoints;\n    for (var i=0, l=p$.length, p; (i<l) && (p=p$[i]); i++) {\n      this$1.distributeInsertionPoint(p, pool);\n      // provoke redistribution on insertion point parents\n      // must do this on all candidate hosts since distribution in this\n      // scope invalidates their distribution.\n      // only get logical parent.\n      var parent = tree.Logical.getParentNode(p);\n      if (parent && parent.shadyRoot &&\n          this$1.hasInsertionPoint(parent.shadyRoot)) {\n        dirtyRoots.push(parent.shadyRoot);\n      }\n    }\n    for (var i$1=0; i$1 < pool.length; i$1++) {\n      var p$1 = pool[i$1];\n      if (p$1) {\n        p$1._assignedSlot = undefined;\n        // remove undistributed elements from physical dom.\n        var parent$1 = tree.Composed.getParentNode(p$1);\n        if (parent$1) {\n          tree.Composed.removeChild(parent$1, p$1);\n        }\n      }\n    }\n    return dirtyRoots;\n  };\n\n  anonymous.prototype.distributeInsertionPoint = function distributeInsertionPoint (insertionPoint, pool) {\n    var this$1 = this;\n\n    var prevAssignedNodes = insertionPoint._assignedNodes;\n    if (prevAssignedNodes) {\n      this.clearAssignedSlots(insertionPoint, true);\n    }\n    insertionPoint._assignedNodes = [];\n    var needsSlotChange = false;\n    // distribute nodes from the pool that this selector matches\n    var anyDistributed = false;\n    for (var i=0, l=pool.length, node; i < l; i++) {\n      node=pool[i];\n      // skip nodes that were already used\n      if (!node) {\n        continue;\n      }\n      // distribute this node if it matches\n      if (this$1.matchesInsertionPoint(node, insertionPoint)) {\n        if (node.__prevAssignedSlot != insertionPoint) {\n          needsSlotChange = true;\n        }\n        this$1.distributeNodeInto(node, insertionPoint)\n        // remove this node from the pool\n        pool[i] = undefined;\n        // since at least one node matched, we won't need fallback content\n        anyDistributed = true;\n      }\n    }\n    // Fallback content if nothing was distributed here\n    if (!anyDistributed) {\n      var children = tree.Logical.getChildNodes(insertionPoint);\n      for (var j = 0, node$1; j < children.length; j++) {\n        node$1 = children[j];\n        if (node$1.__prevAssignedSlot != insertionPoint) {\n          needsSlotChange = true;\n        }\n        this$1.distributeNodeInto(node$1, insertionPoint);\n      }\n    }\n    // we're already dirty if a node was newly added to the slot\n    // and we're also dirty if the assigned count decreased.\n    if (prevAssignedNodes) {\n      // TODO(sorvell): the tracking of previously assigned slots\n      // could instead by done with a Set and then we could\n      // avoid needing to iterate here to clear the info.\n      for (var i$1=0; i$1 < prevAssignedNodes.length; i$1++) {\n        prevAssignedNodes[i$1].__prevAssignedSlot = null;\n      }\n      if (insertionPoint._assignedNodes.length < prevAssignedNodes.length) {\n        needsSlotChange = true;\n      }\n    }\n    this.setDistributedNodesOnInsertionPoint(insertionPoint);\n    if (needsSlotChange) {\n      this._fireSlotChange(insertionPoint);\n    }\n  };\n\n  anonymous.prototype.clearAssignedSlots = function clearAssignedSlots (slot, savePrevious) {\n    var n$ = slot._assignedNodes;\n    if (n$) {\n      for (var i=0; i < n$.length; i++) {\n        var n = n$[i];\n        if (savePrevious) {\n          n.__prevAssignedSlot = n._assignedSlot;\n        }\n        // only clear if it was previously set to this slot;\n        // this helps ensure that if the node has otherwise been distributed\n        // ignore it.\n        if (n._assignedSlot === slot) {\n          n._assignedSlot = null;\n        }\n      }\n    }\n  };\n\n  anonymous.prototype.matchesInsertionPoint = function matchesInsertionPoint (node, insertionPoint) {\n    var slotName = insertionPoint.getAttribute('name');\n    slotName = slotName ? slotName.trim() : '';\n    var slot = node.getAttribute && node.getAttribute('slot');\n    slot = slot ? slot.trim() : '';\n    return (slot == slotName);\n  };\n\n  anonymous.prototype.distributeNodeInto = function distributeNodeInto (child, insertionPoint) {\n    insertionPoint._assignedNodes.push(child);\n    child._assignedSlot = insertionPoint;\n  };\n\n  anonymous.prototype.setDistributedNodesOnInsertionPoint = function setDistributedNodesOnInsertionPoint (insertionPoint) {\n    var this$1 = this;\n\n    var n$ = insertionPoint._assignedNodes;\n    insertionPoint._distributedNodes = [];\n    for (var i=0, n; (i<n$.length) && (n=n$[i]) ; i++) {\n      if (this$1.isInsertionPoint(n)) {\n        var d$ = n._distributedNodes;\n        if (d$) {\n          for (var j=0; j < d$.length; j++) {\n            insertionPoint._distributedNodes.push(d$[j]);\n          }\n        }\n      } else {\n        insertionPoint._distributedNodes.push(n$[i]);\n      }\n    }\n  };\n\n  anonymous.prototype._fireSlotChange = function _fireSlotChange (insertionPoint) {\n    // NOTE: cannot bubble correctly here so not setting bubbles: true\n    // Safari tech preview does not bubble but chrome does\n    // Spec says it bubbles (https://dom.spec.whatwg.org/#mutation-observers)\n    insertionPoint.dispatchEvent(new NormalizedEvent('slotchange'));\n    if (insertionPoint._assignedSlot) {\n      this._fireSlotChange(insertionPoint._assignedSlot);\n    }\n  };\n\n  anonymous.prototype.isFinalDestination = function isFinalDestination (insertionPoint) {\n    return !(insertionPoint._assignedSlot);\n  };\n\n  return anonymous;\n}())\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n  Implements a pared down version of ShadowDOM's scoping, which is easy to\n  polyfill across browsers.\n*/\nvar ShadyRoot = function ShadyRoot(host) {\n  if (!host) {\n    throw 'Must provide a host';\n  }\n  // NOTE: this strange construction is necessary because\n  // DocumentFragment cannot be subclassed on older browsers.\n  var frag = document.createDocumentFragment();\n  frag.__proto__ = ShadyFragmentMixin;\n  frag._init(host);\n  return frag;\n};\n\nvar ShadyMixin = {\n\n  _init: function _init(host) {\n    // NOTE: set a fake local name so this element can be\n    // distinguished from a DocumentFragment when patching.\n    // FF doesn't allow this to be `localName`\n    this.__localName = 'ShadyRoot';\n    // root <=> host\n    host.shadyRoot = this;\n    this.host = host;\n    // logical dom setup\n    tree.Logical.saveChildNodes(host);\n    tree.Logical.saveChildNodes(this);\n    // state flags\n    this._clean = true;\n    this._hasRendered = false;\n    this._distributor = new Distributor(this);\n    this.update();\n  },\n\n  // async render the \"top\" distributor (this is all that is needed to\n  // distribute this host).\n  update: function update() {\n    // TODO(sorvell): instead the root should always be enqueued to helps record that it is dirty.\n    // Then, in `render`, the top most (in the distribution tree) \"dirty\" root should be rendered.\n    var distributionRoot = this._findDistributionRoot(this.host);\n    //console.log('update from', this.host, 'root', distributionRoot.host, distributionRoot._clean);\n    if (distributionRoot._clean) {\n      distributionRoot._clean = false;\n      enqueue(function() {\n        distributionRoot.render();\n      });\n    }\n  },\n\n  // TODO(sorvell): this may not return a shadowRoot (for example if the element is in a docFragment)\n  // this should only return a shadowRoot.\n  // returns the host that's the top of this host's distribution tree\n  _findDistributionRoot: function _findDistributionRoot(element) {\n    var root = element.shadyRoot;\n    while (element && this._elementNeedsDistribution(element)) {\n      root = element.getRootNode();\n      element = root && root.host;\n    }\n    return root;\n  },\n\n  // Return true if a host's children includes\n  // an insertion point that selects selectively\n  _elementNeedsDistribution: function _elementNeedsDistribution(element) {\n    var this$1 = this;\n\n    var c$ = tree.Logical.getChildNodes(element);\n    for (var i=0, c; i < c$.length; i++) {\n      c = c$[i];\n      if (this$1._distributor.isInsertionPoint(c)) {\n        return element.getRootNode();\n      }\n    }\n  },\n\n  render: function render() {\n    if (!this._clean) {\n      this._clean = true;\n      if (!this._skipUpdateInsertionPoints) {\n        this.updateInsertionPoints();\n      } else if (!this._hasRendered) {\n        this._insertionPoints = [];\n      }\n      this._skipUpdateInsertionPoints = false;\n      // TODO(sorvell): previous ShadyDom had a fast path here\n      // that would avoid distribution for initial render if\n      // no insertion points exist. We cannot currently do this because\n      // it relies on elements being in the physical shadowRoot element\n      // so that native methods will be used. The current append code\n      // simply provokes distribution in this case and does not put the\n      // nodes in the shadowRoot. This could be done but we'll need to\n      // consider if the special processing is worth the perf gain.\n      // if (!this._hasRendered && !this._insertionPoints.length) {\n      //   tree.Composed.clearChildNodes(this.host);\n      //   tree.Composed.appendChild(this.host, this);\n      // } else {\n      // logical\n      this.distribute();\n      // physical\n      this.compose();\n      this._hasRendered = true;\n    }\n  },\n\n  forceRender: function forceRender() {\n    this._clean = false;\n    this.render();\n  },\n\n  distribute: function distribute() {\n    var dirtyRoots = this._distributor.distribute();\n    for (var i=0; i<dirtyRoots.length; i++) {\n      dirtyRoots[i].forceRender();\n    }\n  },\n\n  updateInsertionPoints: function updateInsertionPoints() {\n    var this$1 = this;\n\n    var i$ = this.__insertionPoints;\n    // if any insertion points have been removed, clear their distribution info\n    if (i$) {\n      for (var i=0, c; i < i$.length; i++) {\n        c = i$[i];\n        if (c.getRootNode() !== this$1) {\n          this$1._distributor.clearAssignedSlots(c);\n        }\n      }\n    }\n    i$ = this._insertionPoints = this._distributor.getInsertionPoints();\n    // ensure insertionPoints's and their parents have logical dom info.\n    // save logical tree info\n    // a. for shadyRoot\n    // b. for insertion points (fallback)\n    // c. for parents of insertion points\n    for (var i$1=0, c$1; i$1 < i$.length; i$1++) {\n      c$1 = i$[i$1];\n      tree.Logical.saveChildNodes(c$1);\n      tree.Logical.saveChildNodes(tree.Logical.getParentNode(c$1));\n    }\n  },\n\n  get _insertionPoints() {\n    if (!this.__insertionPoints) {\n      this.updateInsertionPoints();\n    }\n    return this.__insertionPoints || (this.__insertionPoints = []);\n  },\n\n  set _insertionPoints(insertionPoints) {\n    this.__insertionPoints = insertionPoints;\n  },\n\n  hasInsertionPoint: function hasInsertionPoint() {\n    return this._distributor.hasInsertionPoint();\n  },\n\n  compose: function compose() {\n    // compose self\n    // note: it's important to mark this clean before distribution\n    // so that attachment that provokes additional distribution (e.g.\n    // adding something to your parentNode) works\n    this._composeTree();\n    // TODO(sorvell): See fast paths here in Polymer v1\n    // (these seem unnecessary)\n  },\n\n  // Reify dom such that it is at its correct rendering position\n  // based on logical distribution.\n  _composeTree: function _composeTree() {\n    var this$1 = this;\n\n    this._updateChildNodes(this.host, this._composeNode(this.host));\n    var p$ = this._insertionPoints || [];\n    for (var i=0, l=p$.length, p, parent; (i<l) && (p=p$[i]); i++) {\n      parent = tree.Logical.getParentNode(p);\n      if ((parent !== this$1.host) && (parent !== this$1)) {\n        this$1._updateChildNodes(parent, this$1._composeNode(parent));\n      }\n    }\n  },\n\n  // Returns the list of nodes which should be rendered inside `node`.\n  _composeNode: function _composeNode(node) {\n    var this$1 = this;\n\n    var children = [];\n    var c$ = tree.Logical.getChildNodes(node.shadyRoot || node);\n    for (var i = 0; i < c$.length; i++) {\n      var child = c$[i];\n      if (this$1._distributor.isInsertionPoint(child)) {\n        var distributedNodes = child._distributedNodes ||\n          (child._distributedNodes = []);\n        for (var j = 0; j < distributedNodes.length; j++) {\n          var distributedNode = distributedNodes[j];\n          if (this$1.isFinalDestination(child, distributedNode)) {\n            children.push(distributedNode);\n          }\n        }\n      } else {\n        children.push(child);\n      }\n    }\n    return children;\n  },\n\n  isFinalDestination: function isFinalDestination(insertionPoint, node) {\n    return this._distributor.isFinalDestination(\n      insertionPoint, node);\n  },\n\n  // Ensures that the rendered node list inside `container` is `children`.\n  _updateChildNodes: function _updateChildNodes(container, children) {\n    var composed = tree.Composed.getChildNodes(container);\n    var splices = calculateSplices(children, composed);\n    // process removals\n    for (var i=0, d=0, s; (i<splices.length) && (s=splices[i]); i++) {\n      for (var j=0, n; (j < s.removed.length) && (n=s.removed[j]); j++) {\n        // check if the node is still where we expect it is before trying\n        // to remove it; this can happen if we move a node and\n        // then schedule its previous host for distribution resulting in\n        // the node being removed here.\n        if (tree.Composed.getParentNode(n) === container) {\n          tree.Composed.removeChild(container, n);\n        }\n        composed.splice(s.index + d, 1);\n      }\n      d -= s.addedCount;\n    }\n    // process adds\n    for (var i$1=0, s$1, next; (i$1<splices.length) && (s$1=splices[i$1]); i$1++) { //eslint-disable-line no-redeclare\n      next = composed[s$1.index];\n      for (var j$1=s$1.index, n$1; j$1 < s$1.index + s$1.addedCount; j$1++) {\n        n$1 = children[j$1];\n        tree.Composed.insertBefore(container, n$1, next);\n        // TODO(sorvell): is this splice strictly needed?\n        composed.splice(j$1, 0, n$1);\n      }\n    }\n  },\n\n  getInsertionPointTag: function getInsertionPointTag() {\n    return this._distributor.insertionPointTag;\n  }\n\n}\n\nvar ShadyFragmentMixin = Object.create(DocumentFragment.prototype);\nextend(ShadyFragmentMixin, ShadyMixin);\n\n// let needsUpgrade = window.CustomElements && !CustomElements.useNative;\n\n// function upgradeLogicalChildren(children) {\n//   if (needsUpgrade && children) {\n//     for (let i=0; i < children.length; i++) {\n//       CustomElements.upgrade(children[i]);\n//     }\n//   }\n// }\n\n// render enqueuer/flusher\nvar customElements = window.customElements;\nvar flushList = [];\nvar scheduled;\nvar flushCount = 0;\nvar flushMax = 100;\nfunction enqueue(callback) {\n  if (!scheduled) {\n    scheduled = true;\n    promish.then(flush$1);\n  }\n  flushList.push(callback);\n}\n\nfunction flush$1() {\n  scheduled = false;\n  flushCount++;\n  while (flushList.length) {\n    flushList.shift()();\n  }\n  if (customElements && customElements.flush) {\n    customElements.flush();\n  }\n  // continue flushing after elements are upgraded...\n  var isFlushedMaxed = (flushCount > flushMax);\n  if (flushList.length && !isFlushedMaxed) {\n      flush$1();\n  }\n  flushCount = 0;\n  if (isFlushedMaxed) {\n    throw new Error('Loop detected in ShadyDOM distribution, aborting.')\n  }\n}\n\nflush$1.list = flushList;\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// Cribbed from ShadowDOM polyfill\n// https://github.com/webcomponents/webcomponentsjs/blob/master/src/ShadowDOM/wrappers/HTMLElement.js#L28\n/////////////////////////////////////////////////////////////////////////////\n// innerHTML and outerHTML\n\n// http://www.whatwg.org/specs/web-apps/current-work/multipage/the-end.html#escapingString\nvar escapeAttrRegExp = /[&\\u00A0\"]/g;\nvar escapeDataRegExp = /[&\\u00A0<>]/g;\n\nfunction escapeReplace(c) {\n  switch (c) {\n    case '&':\n      return '&amp;';\n    case '<':\n      return '&lt;';\n    case '>':\n      return '&gt;';\n    case '\"':\n      return '&quot;';\n    case '\\u00A0':\n      return '&nbsp;';\n  }\n}\n\nfunction escapeAttr(s) {\n  return s.replace(escapeAttrRegExp, escapeReplace);\n}\n\nfunction escapeData(s) {\n  return s.replace(escapeDataRegExp, escapeReplace);\n}\n\nfunction makeSet(arr) {\n  var set = {};\n  for (var i = 0; i < arr.length; i++) {\n    set[arr[i]] = true;\n  }\n  return set;\n}\n\n// http://www.whatwg.org/specs/web-apps/current-work/#void-elements\nvar voidElements = makeSet([\n  'area',\n  'base',\n  'br',\n  'col',\n  'command',\n  'embed',\n  'hr',\n  'img',\n  'input',\n  'keygen',\n  'link',\n  'meta',\n  'param',\n  'source',\n  'track',\n  'wbr'\n]);\n\nvar plaintextParents = makeSet([\n  'style',\n  'script',\n  'xmp',\n  'iframe',\n  'noembed',\n  'noframes',\n  'plaintext',\n  'noscript'\n]);\n\nfunction getOuterHTML(node, parentNode, composed) {\n  switch (node.nodeType) {\n    case Node.ELEMENT_NODE: {\n      var tagName = node.localName;\n      var s = '<' + tagName;\n      var attrs = node.attributes;\n      for (var i = 0, attr; (attr = attrs[i]); i++) {\n        s += ' ' + attr.name + '=\"' + escapeAttr(attr.value) + '\"';\n      }\n      s += '>';\n      if (voidElements[tagName]) {\n        return s;\n      }\n      return s + getInnerHTML(node, composed) + '</' + tagName + '>';\n    }\n    case Node.TEXT_NODE: {\n      var data = node.data;\n      if (parentNode && plaintextParents[parentNode.localName]) {\n        return data;\n      }\n      return escapeData(data);\n    }\n    case Node.COMMENT_NODE: {\n      return '<!--' + node.data + '-->';\n    }\n    default: {\n      window.console.error(node);\n      throw new Error('not implemented');\n    }\n  }\n}\n\nfunction getInnerHTML(node, composed) {\n  if (node.localName === 'template') {\n    node = node.content;\n  }\n  var s = '';\n  var c$ = composed ? composed(node) : node.childNodes;\n  for (var i=0, l=c$.length, child; (i<l) && (child=c$[i]); i++) {\n    s += getOuterHTML(child, node, composed);\n  }\n  return s;\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar mixinImpl = {\n\n  // Try to add node. Record logical info, track insertion points, perform\n  // distribution iff needed. Return true if the add is handled.\n  addNode: function addNode(container, node, ref_node) {\n    var ownerRoot = this.ownerShadyRootForNode(container);\n    if (ownerRoot) {\n      // optimization: special insertion point tracking\n      if (node.__noInsertionPoint && ownerRoot._clean) {\n        ownerRoot._skipUpdateInsertionPoints = true;\n      }\n      // note: we always need to see if an insertion point is added\n      // since this saves logical tree info; however, invalidation state\n      // needs\n      var ipAdded = this._maybeAddInsertionPoint(node, container, ownerRoot);\n      // invalidate insertion points IFF not already invalid!\n      if (ipAdded) {\n        ownerRoot._skipUpdateInsertionPoints = false;\n      }\n    }\n    if (tree.Logical.hasChildNodes(container)) {\n      tree.Logical.recordInsertBefore(node, container, ref_node);\n    }\n    // if not distributing and not adding to host, do a fast path addition\n    var handled = this._maybeDistribute(node, container, ownerRoot) ||\n      container.shadyRoot;\n    return handled;\n  },\n\n  // Try to remove node: update logical info and perform distribution iff\n  // needed. Return true if the removal has been handled.\n  // note that it's possible for both the node's host and its parent\n  // to require distribution... both cases are handled here.\n  removeNode: function removeNode(node) {\n    // important that we want to do this only if the node has a logical parent\n    var logicalParent = tree.Logical.hasParentNode(node) &&\n      tree.Logical.getParentNode(node);\n    var distributed;\n    var ownerRoot = this.ownerShadyRootForNode(node);\n    if (logicalParent) {\n      // distribute node's parent iff needed\n      distributed = this.maybeDistributeParent(node);\n      tree.Logical.recordRemoveChild(node, logicalParent);\n      // remove node from root and distribute it iff needed\n      if (ownerRoot && (this._removeDistributedChildren(ownerRoot, node) ||\n        logicalParent.localName === ownerRoot.getInsertionPointTag())) {\n        ownerRoot._skipUpdateInsertionPoints = false;\n        ownerRoot.update();\n      }\n    }\n    this._removeOwnerShadyRoot(node);\n    return distributed;\n  },\n\n\n  _scheduleObserver: function _scheduleObserver(node, addedNode, removedNode) {\n    var observer = node.__dom && node.__dom.observer;\n    if (observer) {\n      if (addedNode) {\n        observer.addedNodes.push(addedNode);\n      }\n      if (removedNode) {\n        observer.removedNodes.push(removedNode);\n      }\n      observer.schedule();\n    }\n  },\n\n  removeNodeFromParent: function removeNodeFromParent(node, parent) {\n    if (parent) {\n      this._scheduleObserver(parent, null, node);\n      this.removeNode(node);\n    } else {\n      this._removeOwnerShadyRoot(node);\n    }\n  },\n\n  _hasCachedOwnerRoot: function _hasCachedOwnerRoot(node) {\n    return Boolean(node.__ownerShadyRoot !== undefined);\n  },\n\n  getRootNode: function getRootNode$1(node) {\n    if (!node || !node.nodeType) {\n      return;\n    }\n    var root = node.__ownerShadyRoot;\n    if (root === undefined) {\n      if (isShadyRoot(node)) {\n        root = node;\n      } else {\n        var parent = tree.Logical.getParentNode(node);\n        root = parent ? this.getRootNode(parent) : node;\n      }\n      // memo-ize result for performance but only memo-ize\n      // result if node is in the document. This avoids a problem where a root\n      // can be cached while an element is inside a fragment.\n      // If this happens and we cache the result, the value can become stale\n      // because for perf we avoid processing the subtree of added fragments.\n      if (document.documentElement.contains(node)) {\n        node.__ownerShadyRoot = root;\n      }\n    }\n    return root;\n  },\n\n  ownerShadyRootForNode: function ownerShadyRootForNode(node) {\n    var root = this.getRootNode(node);\n    if (isShadyRoot(root)) {\n      return root;\n    }\n  },\n\n  _maybeDistribute: function _maybeDistribute(node, container, ownerRoot) {\n    // TODO(sorvell): technically we should check non-fragment nodes for\n    // <content> children but since this case is assumed to be exceedingly\n    // rare, we avoid the cost and will address with some specific api\n    // when the need arises.  For now, the user must call\n    // distributeContent(true), which updates insertion points manually\n    // and forces distribution.\n    var insertionPointTag = ownerRoot && ownerRoot.getInsertionPointTag() || '';\n    var fragContent = (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) &&\n      !node.__noInsertionPoint &&\n      insertionPointTag && node.querySelector(insertionPointTag);\n    var wrappedContent = fragContent &&\n      (tree.Logical.getParentNode(fragContent).nodeType !==\n      Node.DOCUMENT_FRAGMENT_NODE);\n    var hasContent = fragContent || (node.localName === insertionPointTag);\n    // There are 3 possible cases where a distribution may need to occur:\n    // 1. <content> being inserted (the host of the shady root where\n    //    content is inserted needs distribution)\n    // 2. children being inserted into parent with a shady root (parent\n    //    needs distribution)\n    // 3. container is an insertionPoint\n    if (hasContent || (container.localName === insertionPointTag)) {\n      if (ownerRoot) {\n        // note, insertion point list update is handled after node\n        // mutations are complete\n        ownerRoot.update();\n      }\n    }\n    var needsDist = this._nodeNeedsDistribution(container);\n    if (needsDist) {\n      container.shadyRoot.update();\n    }\n    // Return true when distribution will fully handle the composition\n    // Note that if a content was being inserted that was wrapped by a node,\n    // and the parent does not need distribution, return false to allow\n    // the nodes to be added directly, after which children may be\n    // distributed and composed into the wrapping node(s)\n    return needsDist || (hasContent && !wrappedContent);\n  },\n\n  /* note: parent argument is required since node may have an out\n  of date parent at this point; returns true if a <content> is being added */\n  _maybeAddInsertionPoint: function _maybeAddInsertionPoint(node, parent, root) {\n    var this$1 = this;\n\n    var added;\n    var insertionPointTag = root.getInsertionPointTag();\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE &&\n      !node.__noInsertionPoint) {\n      var c$ = node.querySelectorAll(insertionPointTag);\n      for (var i=0, n, np, na; (i<c$.length) && (n=c$[i]); i++) {\n        np = tree.Logical.getParentNode(n);\n        // don't allow node's parent to be fragment itself\n        if (np === node) {\n          np = parent;\n        }\n        na = this$1._maybeAddInsertionPoint(n, np, root);\n        added = added || na;\n      }\n    } else if (node.localName === insertionPointTag) {\n      tree.Logical.saveChildNodes(parent);\n      tree.Logical.saveChildNodes(node);\n      added = true;\n    }\n    return added;\n  },\n\n  _nodeNeedsDistribution: function _nodeNeedsDistribution(node) {\n    return node && node.shadyRoot &&\n      node.shadyRoot.hasInsertionPoint();\n  },\n\n  _removeDistributedChildren: function _removeDistributedChildren(root, container) {\n    var this$1 = this;\n\n    var hostNeedsDist;\n    var ip$ = root._insertionPoints;\n    for (var i=0; i<ip$.length; i++) {\n      var insertionPoint = ip$[i];\n      if (this$1._contains(container, insertionPoint)) {\n        var dc$ = insertionPoint.assignedNodes({flatten: true});\n        for (var j=0; j<dc$.length; j++) {\n          hostNeedsDist = true;\n          var node = dc$[j];\n          var parent = tree.Composed.getParentNode(node);\n          if (parent) {\n            tree.Composed.removeChild(parent, node);\n          }\n        }\n      }\n    }\n    return hostNeedsDist;\n  },\n\n  _contains: function _contains(container, node) {\n    while (node) {\n      if (node == container) {\n        return true;\n      }\n      node = tree.Logical.getParentNode(node);\n    }\n  },\n\n  _removeOwnerShadyRoot: function _removeOwnerShadyRoot(node) {\n    var this$1 = this;\n\n    // optimization: only reset the tree if node is actually in a root\n    if (this._hasCachedOwnerRoot(node)) {\n      var c$ = tree.Logical.getChildNodes(node);\n      for (var i=0, l=c$.length, n; (i<l) && (n=c$[i]); i++) {\n        this$1._removeOwnerShadyRoot(n);\n      }\n    }\n    node.__ownerShadyRoot = undefined;\n  },\n\n  // TODO(sorvell): This will fail if distribution that affects this\n  // question is pending; this is expected to be exceedingly rare, but if\n  // the issue comes up, we can force a flush in this case.\n  firstComposedNode: function firstComposedNode(insertionPoint) {\n    var n$ = insertionPoint.assignedNodes({flatten: true});\n    var root = this.getRootNode(insertionPoint);\n    for (var i=0, l=n$.length, n; (i<l) && (n=n$[i]); i++) {\n      // means that we're composed to this spot.\n      if (root.isFinalDestination(insertionPoint, n)) {\n        return n;\n      }\n    }\n  },\n\n  clearNode: function clearNode(node) {\n    while (node.firstChild) {\n      node.removeChild(node.firstChild);\n    }\n  },\n\n  maybeDistributeParent: function maybeDistributeParent(node) {\n    var parent = tree.Logical.getParentNode(node);\n    if (this._nodeNeedsDistribution(parent)) {\n      parent.shadyRoot.update();\n      return true;\n    }\n  },\n\n  maybeDistributeAttributeChange: function maybeDistributeAttributeChange(node, name) {\n    if (name === 'slot') {\n      this.maybeDistributeParent(node);\n    } else if (node.localName === 'slot' && name === 'name') {\n      var root = this.ownerShadyRootForNode(node);\n      if (root) {\n        root.update();\n      }\n    }\n  },\n\n  // NOTE: `query` is used primarily for ShadyDOM's querySelector impl,\n  // but it's also generally useful to recurse through the element tree\n  // and is used by Polymer's styling system.\n  query: function query(node, matcher, halter) {\n    var list = [];\n    this._queryElements(tree.Logical.getChildNodes(node), matcher,\n      halter, list);\n    return list;\n  },\n\n  _queryElements: function _queryElements(elements, matcher, halter, list) {\n    var this$1 = this;\n\n    for (var i=0, l=elements.length, c; (i<l) && (c=elements[i]); i++) {\n      if (c.nodeType === Node.ELEMENT_NODE &&\n          this$1._queryElement(c, matcher, halter, list)) {\n        return true;\n      }\n    }\n  },\n\n  _queryElement: function _queryElement(node, matcher, halter, list) {\n    var result = matcher(node);\n    if (result) {\n      list.push(node);\n    }\n    if (halter && halter(result)) {\n      return result;\n    }\n    this._queryElements(tree.Logical.getChildNodes(node), matcher,\n      halter, list);\n  },\n\n  activeElementForNode: function activeElementForNode(node) {\n    var this$1 = this;\n\n    var active = document.activeElement;\n    if (!active) {\n      return null;\n    }\n    var isShadyRoot$$1 = !!(isShadyRoot(node));\n    if (node !== document) {\n      // If this node isn't a document or shady root, then it doesn't have\n      // an active element.\n      if (!isShadyRoot$$1) {\n        return null;\n      }\n      // If this shady root's host is the active element or the active\n      // element is not a descendant of the host (in the composed tree),\n      // then it doesn't have an active element.\n      if (node.host === active ||\n          !node.host.contains(active)) {\n        return null;\n      }\n    }\n    // This node is either the document or a shady root of which the active\n    // element is a (composed) descendant of its host; iterate upwards to\n    // find the active element's most shallow host within it.\n    var activeRoot = this.ownerShadyRootForNode(active);\n    while (activeRoot && activeRoot !== node) {\n      active = activeRoot.host;\n      activeRoot = this$1.ownerShadyRootForNode(active);\n    }\n    if (node === document) {\n      // This node is the document, so activeRoot should be null.\n      return activeRoot ? null : active;\n    } else {\n      // This node is a non-document shady root, and it should be\n      // activeRoot.\n      return activeRoot === node ? active : null;\n    }\n  }\n\n};\n\nvar nativeCloneNode = Element.prototype.cloneNode;\nvar nativeImportNode = Document.prototype.importNode;\nvar nativeSetAttribute$1 = Element.prototype.setAttribute;\nvar nativeRemoveAttribute = Element.prototype.removeAttribute;\n\nvar setAttribute = function(attr, value) {\n  // avoid scoping elements in non-main document to avoid template documents\n  if (window.ShadyCSS && attr === 'class' && this.ownerDocument === document) {\n    window.ShadyCSS.setElementClass(this, value);\n  } else {\n    nativeSetAttribute$1.call(this, attr, value);\n  }\n}\n\nvar NodeMixin = {};\n\nObject.defineProperties(NodeMixin, {\n\n  parentElement: {\n    get: function get() {\n      return tree.Logical.getParentNode(this);\n    },\n    configurable: true\n  },\n\n  parentNode: {\n    get: function get$1() {\n      return tree.Logical.getParentNode(this);\n    },\n    configurable: true\n  },\n\n  nextSibling: {\n    get: function get$2() {\n      return tree.Logical.getNextSibling(this);\n    },\n    configurable: true\n  },\n\n  previousSibling: {\n    get: function get$3() {\n      return tree.Logical.getPreviousSibling(this);\n    },\n    configurable: true\n  },\n\n  nextElementSibling: {\n    get: function get$4() {\n      return tree.Logical.getNextElementSibling(this);\n    },\n    configurable: true\n  },\n\n  previousElementSibling: {\n    get: function get$5() {\n      return tree.Logical.getPreviousElementSibling(this);\n    },\n    configurable: true\n  },\n\n  assignedSlot: {\n    get: function get$6() {\n      return this._assignedSlot;\n    },\n    configurable: true\n  }\n});\n\nvar FragmentMixin = {\n\n  appendChild: function appendChild(node) {\n    return this.insertBefore(node);\n  },\n\n  // cases in which we may not be able to just do standard native call\n  // 1. container has a shadyRoot (needsDistribution IFF the shadyRoot\n  // has an insertion point)\n  // 2. container is a shadyRoot (don't distribute, instead set\n  // container to container.host.\n  // 3. node is <content> (host of container needs distribution)\n  insertBefore: function insertBefore(node, ref_node) {\n    if (ref_node && tree.Logical.getParentNode(ref_node) !== this) {\n      throw Error('The ref_node to be inserted before is not a child ' +\n        'of this node');\n    }\n    // remove node from its current position iff it's in a tree.\n    if (node.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n      var parent = tree.Logical.getParentNode(node);\n      mixinImpl.removeNodeFromParent(node, parent);\n    }\n    if (!mixinImpl.addNode(this, node, ref_node)) {\n      if (ref_node) {\n        // if ref_node is an insertion point replace with first distributed node\n        var root = mixinImpl.ownerShadyRootForNode(ref_node);\n        if (root) {\n          ref_node = ref_node.localName === root.getInsertionPointTag() ?\n            mixinImpl.firstComposedNode(ref_node) : ref_node;\n        }\n      }\n      // if adding to a shadyRoot, add to host instead\n      var container = isShadyRoot(this) ?\n        this.host : this;\n      if (ref_node) {\n        tree.Composed.insertBefore(container, node, ref_node);\n      } else {\n        tree.Composed.appendChild(container, node);\n      }\n    }\n    mixinImpl._scheduleObserver(this, node);\n    return node;\n  },\n\n  /**\n    Removes the given `node` from the element's `lightChildren`.\n    This method also performs dom composition.\n  */\n  removeChild: function removeChild(node) {\n    if (tree.Logical.getParentNode(node) !== this) {\n      throw Error('The node to be removed is not a child of this node: ' +\n        node);\n    }\n    if (!mixinImpl.removeNode(node)) {\n      // if removing from a shadyRoot, remove form host instead\n      var container = isShadyRoot(this) ?\n        this.host :\n        this;\n      // not guaranteed to physically be in container; e.g.\n      // undistributed nodes.\n      var parent = tree.Composed.getParentNode(node);\n      if (container === parent) {\n        tree.Composed.removeChild(container, node);\n      }\n    }\n    mixinImpl._scheduleObserver(this, null, node);\n    return node;\n  },\n\n  replaceChild: function replaceChild(node, ref_node) {\n    this.insertBefore(node, ref_node);\n    this.removeChild(ref_node);\n    return node;\n  },\n\n  // TODO(sorvell): consider doing native QSA and filtering results.\n  querySelector: function querySelector(selector) {\n    // match selector and halt on first result.\n    var result = mixinImpl.query(this, function(n) {\n      return matchesSelector(n, selector);\n    }, function(n) {\n      return Boolean(n);\n    })[0];\n    return result || null;\n  },\n\n  querySelectorAll: function querySelectorAll(selector) {\n    return mixinImpl.query(this, function(n) {\n      return matchesSelector(n, selector);\n    });\n  },\n\n  cloneNode: function cloneNode(deep) {\n    if (this.localName == 'template') {\n      return nativeCloneNode.call(this, deep);\n    } else {\n      var n = nativeCloneNode.call(this, false);\n      if (deep) {\n        var c$ = this.childNodes;\n        for (var i=0, nc; i < c$.length; i++) {\n          nc = c$[i].cloneNode(true);\n          n.appendChild(nc);\n        }\n      }\n      return n;\n    }\n  },\n\n  importNode: function importNode(externalNode, deep) {\n    // for convenience use this node's ownerDoc if the node isn't a document\n    var doc = this instanceof Document ? this :\n      this.ownerDocument;\n    var n = nativeImportNode.call(doc, externalNode, false);\n    if (deep) {\n      var c$ = tree.Logical.getChildNodes(externalNode);\n      common.patchNode(n);\n      for (var i=0, nc; i < c$.length; i++) {\n        nc = doc.importNode(c$[i], true);\n        n.appendChild(nc);\n      }\n    }\n    return n;\n  }\n};\n\nObject.defineProperties(FragmentMixin, {\n\n  childNodes: {\n    get: function get$7() {\n      var c$ = tree.Logical.getChildNodes(this);\n      return Array.isArray(c$) ? c$ : tree.arrayCopyChildNodes(this);\n    },\n    configurable: true\n  },\n\n  children: {\n    get: function get$8() {\n      if (tree.Logical.hasChildNodes(this)) {\n        return Array.prototype.filter.call(this.childNodes, function(n) {\n          return (n.nodeType === Node.ELEMENT_NODE);\n        });\n      } else {\n        return tree.arrayCopyChildren(this);\n      }\n    },\n    configurable: true\n  },\n\n  firstChild: {\n    get: function get$9() {\n      return tree.Logical.getFirstChild(this);\n    },\n    configurable: true\n  },\n\n  lastChild: {\n    get: function get$10() {\n      return tree.Logical.getLastChild(this);\n    },\n    configurable: true\n  },\n\n  firstElementChild: {\n    get: function get$11() {\n      return tree.Logical.getFirstElementChild(this);\n    },\n    configurable: true\n  },\n\n  lastElementChild: {\n    get: function get$12() {\n      return tree.Logical.getLastElementChild(this);\n    },\n    configurable: true\n  },\n\n  // TODO(srovell): strictly speaking fragments do not have textContent\n  // or innerHTML but ShadowRoots do and are not easily distinguishable.\n  // textContent / innerHTML\n  textContent: {\n    get: function get$13() {\n      if (this.childNodes) {\n        var tc = [];\n        for (var i = 0, cn = this.childNodes, c; (c = cn[i]); i++) {\n          if (c.nodeType !== Node.COMMENT_NODE) {\n            tc.push(c.textContent);\n          }\n        }\n        return tc.join('');\n      }\n      return '';\n    },\n    set: function set(text) {\n      mixinImpl.clearNode(this);\n      if (text) {\n        this.appendChild(document.createTextNode(text));\n      }\n    },\n    configurable: true\n  },\n\n  innerHTML: {\n    get: function get$14() {\n      return getInnerHTML(this);\n    },\n    set: function set$1(text) {\n      var this$1 = this;\n\n      mixinImpl.clearNode(this);\n      var d = document.createElement('div');\n      d.innerHTML = text;\n      // here, appendChild may move nodes async so we cannot rely\n      // on node position when copying\n      var c$ = tree.arrayCopyChildNodes(d);\n      for (var i=0; i < c$.length; i++) {\n        this$1.appendChild(c$[i]);\n      }\n    },\n    configurable: true\n  }\n\n});\n\nvar ElementMixin = {\n\n  // TODO(sorvell): should only exist on <slot>\n  assignedNodes: function assignedNodes(options) {\n    return (options && options.flatten ? this._distributedNodes :\n      this._assignedNodes) || [];\n  },\n\n\n  setAttribute: function setAttribute$1(name, value) {\n    setAttribute.call(this, name, value);\n    mixinImpl.maybeDistributeAttributeChange(this, name);\n  },\n\n  removeAttribute: function removeAttribute(name) {\n    nativeRemoveAttribute.call(this, name);\n    mixinImpl.maybeDistributeAttributeChange(this, name);\n  }\n\n};\n\nObject.defineProperties(ElementMixin, {\n\n  shadowRoot: {\n    get: function get$15() {\n      return this.shadyRoot;\n    }\n  },\n\n  slot: {\n    get: function get$16() {\n      return this.getAttribute('slot');\n    },\n    set: function set$2(value) {\n      this.setAttribute('slot', value);\n    }\n  }\n\n});\n\nvar activeElementDescriptor = {\n  get: function get$17() {\n    return mixinImpl.activeElementForNode(this);\n  }\n}\n\nvar ActiveElementMixin = {};\nObject.defineProperties(ActiveElementMixin, {\n  activeElement: activeElementDescriptor\n});\n\nvar UnderActiveElementMixin = {};\nObject.defineProperties(UnderActiveElementMixin, {\n  _activeElement: activeElementDescriptor\n});\n\nvar Mixins = {\n\n  Node: extendAll({__patched: 'Node'}, NodeMixin),\n\n  Fragment: extendAll({__patched: 'Fragment'},\n    NodeMixin, FragmentMixin, ActiveElementMixin),\n\n  Element: extendAll({__patched: 'Element'},\n    NodeMixin, FragmentMixin, ElementMixin, ActiveElementMixin),\n\n  // Note: activeElement cannot be patched on document!\n  Document: extendAll({__patched: 'Document'},\n    NodeMixin, FragmentMixin, ElementMixin, UnderActiveElementMixin)\n\n};\n\nvar getRootNode = function(node) {\n  return mixinImpl.getRootNode(node);\n}\n\nfunction filterMutations(mutations, target) {\n  var targetRootNode = getRootNode(target);\n  return mutations.map(function(mutation) {\n    var mutationInScope = (targetRootNode === getRootNode(mutation.target));\n    if (mutationInScope && mutation.addedNodes) {\n      var nodes = Array.from(mutation.addedNodes).filter(function(n) {\n        return (targetRootNode === getRootNode(n));\n      });\n      if (nodes.length) {\n        mutation = Object.create(mutation);\n        Object.defineProperty(mutation, 'addedNodes', {\n          value: nodes,\n          configurable: true\n        });\n        return mutation;\n      }\n    } else if (mutationInScope) {\n      return mutation;\n    }\n  }).filter(function(m) { return m});\n}\n\n// const promise = Promise.resolve();\n\nvar AsyncObserver = function AsyncObserver() {\n  this._scheduled = false;\n  this.addedNodes = [];\n  this.removedNodes = [];\n  this.callbacks = new Set();\n};\n\nAsyncObserver.prototype.schedule = function schedule () {\n    var this$1 = this;\n\n  if (!this._scheduled) {\n    this._scheduled = true;\n    promish.then(function () {\n      this$1.flush();\n    });\n  }\n};\n\nAsyncObserver.prototype.flush = function flush () {\n  if (this._scheduled) {\n    this._scheduled = false;\n    var mutations = this.takeRecords();\n    if (mutations.length) {\n      this.callbacks.forEach(function(cb) {\n        cb(mutations);\n      });\n    }\n  }\n};\n\nAsyncObserver.prototype.takeRecords = function takeRecords () {\n  if (this.addedNodes.length || this.removedNodes.length) {\n    var mutations = [{\n      addedNodes: this.addedNodes,\n      removedNodes: this.removedNodes\n    }];\n    this.addedNodes = [];\n    this.removedNodes = [];\n    return mutations;\n  }\n  return [];\n};\n\nvar getComposedInnerHTML = function(node) {\n  if (common.isNodePatched(node)) {\n    return getInnerHTML(node, function(n) {\n      return tree.Composed.getChildNodes(n);\n    })\n  } else {\n    return node.innerHTML;\n  }\n}\n\nvar getComposedChildNodes$1 = function(node) {\n  return common.isNodePatched(node) ?\n    tree.Composed.getChildNodes(node) :\n    node.childNodes;\n}\n\n// TODO(sorvell): consider instead polyfilling MutationObserver\n// directly so that users do not have to fork their code.\n// Supporting the entire api may be challenging: e.g. filtering out\n// removed nodes in the wrong scope and seeing non-distributing\n// subtree child mutations.\nvar observeChildren = function(node, callback) {\n  common.patchNode(node);\n  if (!node.__dom.observer) {\n    node.__dom.observer = new AsyncObserver();\n  }\n  node.__dom.observer.callbacks.add(callback);\n  var observer = node.__dom.observer;\n  return {\n    _callback: callback,\n    _observer: observer,\n    _node: node,\n    takeRecords: function takeRecords() {\n      return observer.takeRecords()\n    }\n  };\n}\n\nvar unobserveChildren = function(handle) {\n  var observer = handle && handle._observer;\n  if (observer) {\n    observer.callbacks.delete(handle._callback);\n    if (!observer.callbacks.size) {\n      handle._node.__dom.observer = null;\n    }\n  }\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Patches elements that interacts with ShadyDOM\n * such that tree traversal and mutation apis act like they would under\n * ShadowDOM.\n *\n * This import enables seemless interaction with ShadyDOM powered\n * custom elements, enabling better interoperation with 3rd party code,\n * libraries, and frameworks that use DOM tree manipulation apis.\n */\n\nvar patchedCount = 0;\n\nvar log = false;\n\nvar patchImpl = {\n\n  canPatchNode: function(node) {\n    switch (node) {\n      case document.head:\n      case document.documentElement:\n        return false;\n      default:\n        return true;\n    }\n  },\n\n  hasPrototypeDescriptors: Boolean(Object.getOwnPropertyDescriptor(\n    window.Node.prototype, 'textContent')),\n\n  patch: function(node) {\n    patchedCount++;\n    log && window.console.warn('patch node', node);\n    if (this.hasPrototypeDescriptors) {\n      patchPrototype(node, this.mixinForObject(node));\n    } else {\n      window.console.warn('Patching instance rather than prototype', node);\n      extend(node, this.mixinForObject(node));\n    }\n  },\n\n  mixinForObject: function(obj) {\n    switch (obj.nodeType) {\n      case Node.ELEMENT_NODE:\n        return Mixins.Element;\n      case Node.DOCUMENT_FRAGMENT_NODE:\n        return Mixins.Fragment;\n      case Node.DOCUMENT_NODE:\n        return Mixins.Document;\n      case Node.TEXT_NODE:\n      case Node.COMMENT_NODE:\n        return Mixins.Node;\n    }\n  },\n\n  unpatch: function(obj) {\n    if (obj.__sourceProto) {\n      obj.__proto__ = obj.__sourceProto;\n\n    }\n    // TODO(sorvell): implement unpatching for non-proto patchable browsers\n  }\n\n};\n\nfunction patchNode(node) {\n  if (!settings.inUse) {\n    return;\n  }\n  if (!isNodePatched(node) && patchImpl.canPatchNode(node)) {\n    tree.saveChildNodes(node);\n    patchImpl.patch(node);\n  }\n}\n\nfunction canUnpatchNode() {\n  return Boolean(patchImpl.hasPrototypeDescriptors);\n}\n\nfunction unpatchNode(node) {\n  patchImpl.unpatch(node);\n}\n\nfunction isNodePatched(node) {\n  return Boolean(node.__patched);\n}\n\n// TODO(sorvell): fake export\ncommon.patchNode = patchNode;\ncommon.canUnpatchNode = canUnpatchNode;\ncommon.isNodePatched = isNodePatched;\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar origAddEventListener = Element.prototype.addEventListener;\nvar origRemoveEventListener = Element.prototype.removeEventListener;\n\n// https://github.com/w3c/webcomponents/issues/513#issuecomment-224183937\nvar alwaysComposed = {\n  blur: true,\n  focus: true,\n  focusin: true,\n  focusout: true,\n  click: true,\n  dblclick: true,\n  mousedown: true,\n  mouseenter: true,\n  mouseleave: true,\n  mousemove: true,\n  mouseout: true,\n  mouseover: true,\n  mouseup: true,\n  wheel: true,\n  beforeinput: true,\n  input: true,\n  keydown: true,\n  keyup: true,\n  compositionstart: true,\n  compositionupdate: true,\n  compositionend: true,\n  touchstart: true,\n  touchend: true,\n  touchmove: true,\n  touchcancel: true,\n  pointerover: true,\n  pointerenter: true,\n  pointerdown: true,\n  pointermove: true,\n  pointerup: true,\n  pointercancel: true,\n  pointerout: true,\n  pointerleave: true,\n  gotpointercapture: true,\n  lostpointercapture: true,\n  dragstart: true,\n  drag: true,\n  dragenter: true,\n  dragleave: true,\n  dragover: true,\n  drop: true,\n  dragend: true,\n  DOMActivate: true,\n  DOMFocusIn: true,\n  DOMFocusOut: true,\n  keypress: true\n};\n\nfunction pathComposer(startNode, composed) {\n  var composedPath = [];\n  var current = startNode;\n  var startRoot = startNode === window ? window : startNode.getRootNode();\n  while (current) {\n    composedPath.push(current);\n    if (current.assignedSlot) {\n      current = current.assignedSlot;\n    } else if (current.nodeType === Node.DOCUMENT_FRAGMENT_NODE && current.host && (composed || current !== startRoot)) {\n      current = current.host;\n    } else {\n      current = current.parentNode;\n    }\n  }\n  // event composedPath includes window when startNode's ownerRoot is document\n  if (composedPath[composedPath.length - 1] === document) {\n    composedPath.push(window);\n  }\n  return composedPath;\n}\n\nfunction retarget(refNode, path) {\n  if (!isShadyRoot) {\n    return refNode;\n  }\n  // If ANCESTOR's root is not a shadow root or ANCESTOR's root is BASE's\n  // shadow-including inclusive ancestor, return ANCESTOR.\n  var refNodePath = pathComposer(refNode, true);\n  var p$ = path;\n  for (var i=0, ancestor, lastRoot, root, rootIdx; i < p$.length; i++) {\n    ancestor = p$[i];\n    root = ancestor === window ? window : ancestor.getRootNode();\n    if (root !== lastRoot) {\n      rootIdx = refNodePath.indexOf(root);\n      lastRoot = root;\n    }\n    if (!isShadyRoot(root) || rootIdx > -1) {\n      return ancestor;\n    }\n  }\n}\n\nvar EventMixin = {\n\n  __patched: 'Event',\n\n  get composed() {\n    if (this.isTrusted && this.__composed === undefined) {\n      this.__composed = alwaysComposed[this.type];\n    }\n    return this.__composed || false;\n  },\n\n  composedPath: function composedPath() {\n    if (!this.__composedPath) {\n      this.__composedPath = pathComposer(this.__target, this.composed);\n    }\n    return this.__composedPath;\n  },\n\n  get target() {\n    return retarget(this.currentTarget, this.composedPath());\n  },\n\n  // http://w3c.github.io/webcomponents/spec/shadow/#event-relatedtarget-retargeting\n  get relatedTarget() {\n    if (!this.__relatedTarget) {\n      return null;\n    }\n    if (!this.__relatedTargetComposedPath) {\n      this.__relatedTargetComposedPath = pathComposer(this.__relatedTarget, true);\n    }\n    // find the deepest node in relatedTarget composed path that is in the same root with the currentTarget\n    return retarget(this.currentTarget, this.__relatedTargetComposedPath);\n  },\n  stopPropagation: function stopPropagation() {\n    Event.prototype.stopPropagation.call(this);\n    this.__propagationStopped = true;\n  },\n  stopImmediatePropagation: function stopImmediatePropagation() {\n    Event.prototype.stopImmediatePropagation.call(this);\n    this.__immediatePropagationStopped = true;\n    this.__propagationStopped = true;\n  }\n\n};\n\nfunction mixinComposedFlag(Base) {\n  // NOTE: avoiding use of `class` here so that transpiled output does not\n  // try to do `Base.call` with a dom construtor.\n  var klazz = function(type, options) {\n    var event = new Base(type, options);\n    event.__composed = options && Boolean(options.composed);\n    return event;\n  }\n  // put constructor properties on subclass\n  mixin(klazz, Base);\n  klazz.prototype = Base.prototype;\n  return klazz;\n}\n\nvar nonBubblingEventsToRetarget = {\n  focus: true,\n  blur: true\n};\n\nfunction fireHandlers(event, node, phase) {\n  var hs = node.__handlers && node.__handlers[event.type] &&\n    node.__handlers[event.type][phase];\n  if (hs) {\n    for (var i = 0, fn; (fn = hs[i]); i++) {\n      fn.call(node, event);\n      if (event.__immediatePropagationStopped) {\n        return;\n      }\n    }\n  }\n}\n\nfunction retargetNonBubblingEvent(e) {\n  var path = e.composedPath();\n  var node;\n  // override `currentTarget` to let patched `target` calculate correctly\n  Object.defineProperty(e, 'currentTarget', {\n    get: function() {\n      return node;\n    },\n    configurable: true\n  });\n  for (var i = path.length - 1; i >= 0; i--) {\n    node = path[i];\n    // capture phase fires all capture handlers\n    fireHandlers(e, node, 'capture');\n    if (e.__propagationStopped) {\n      return;\n    }\n  }\n\n  // set the event phase to `AT_TARGET` as in spec\n  Object.defineProperty(e, 'eventPhase', {value: Event.AT_TARGET});\n\n  // the event only needs to be fired when owner roots change when iterating the event path\n  // keep track of the last seen owner root\n  var lastFiredRoot;\n  for (var i$1 = 0; i$1 < path.length; i$1++) {\n    node = path[i$1];\n    if (i$1 === 0 || (node.shadowRoot && node.shadowRoot === lastFiredRoot)) {\n      fireHandlers(e, node, 'bubble');\n      // don't bother with window, it doesn't have `getRootNode` and will be last in the path anyway\n      if (node !== window) {\n        lastFiredRoot = node.getRootNode();\n      }\n      if (e.__propagationStopped) {\n        return;\n      }\n    }\n  }\n}\n\nfunction addEventListener(type, fn, optionsOrCapture) {\n  var this$1 = this;\n\n  if (!fn) {\n    return;\n  }\n\n  // The callback `fn` might be used for multiple nodes/events. Since we generate\n  // a wrapper function, we need to keep track of it when we remove the listener.\n  // It's more efficient to store the node/type/options information as Array in\n  // `fn` itself rather than the node (we assume that the same callback is used\n  // for few nodes at most, whereas a node will likely have many event listeners).\n  // NOTE(valdrin) invoking external functions is costly, inline has better perf.\n  var capture, once, passive;\n  if (typeof optionsOrCapture === 'object') {\n    capture = Boolean(optionsOrCapture.capture);\n    once = Boolean(optionsOrCapture.once);\n    passive = Boolean(optionsOrCapture.passive);\n  } else {\n    capture = Boolean(optionsOrCapture);\n    once = false;\n    passive = false;\n  }\n  if (fn.__eventWrappers) {\n    // Stop if the wrapper function has already been created.\n    for (var i = 0; i < fn.__eventWrappers.length; i++) {\n      if (fn.__eventWrappers[i].node === this$1 &&\n          fn.__eventWrappers[i].type === type &&\n          fn.__eventWrappers[i].capture === capture &&\n          fn.__eventWrappers[i].once === once &&\n          fn.__eventWrappers[i].passive === passive) {\n        return;\n      }\n    }\n  } else {\n    fn.__eventWrappers = [];\n  }\n\n  var wrapperFn = function(e) {\n    // Support `once` option.\n    if (once) {\n      this.removeEventListener(type, fn, optionsOrCapture);\n    }\n    if (!e.__target) {\n      e.__target = e.target;\n      e.__relatedTarget = e.relatedTarget;\n      patchPrototype(e, EventMixin);\n    }\n    // There are two critera that should stop events from firing on this node\n    // 1. the event is not composed and the current node is not in the same root as the target\n    // 2. when bubbling, if after retargeting, relatedTarget and target point to the same node\n    if (e.composed || e.composedPath().indexOf(this) > -1) {\n      if (e.eventPhase === Event.BUBBLING_PHASE) {\n        if (e.target === e.relatedTarget) {\n          e.stopImmediatePropagation();\n          return;\n        }\n      }\n      return fn(e);\n    }\n  };\n  // Store the wrapper information.\n  fn.__eventWrappers.push({\n    node: this,\n    type: type,\n    capture: capture,\n    once: once,\n    passive: passive,\n    wrapperFn: wrapperFn\n  });\n\n  if (nonBubblingEventsToRetarget[type]) {\n    this.__handlers = this.__handlers || {};\n    this.__handlers[type] = this.__handlers[type] || {capture: [], bubble: []};\n    this.__handlers[type][capture ? 'capture' : 'bubble'].push(wrapperFn);\n  } else {\n    origAddEventListener.call(this, type, wrapperFn, optionsOrCapture);\n  }\n}\n\nfunction removeEventListener(type, fn, optionsOrCapture) {\n  var this$1 = this;\n\n  if (!fn) {\n    return;\n  }\n\n  // NOTE(valdrin) invoking external functions is costly, inline has better perf.\n  var capture, once, passive;\n  if (typeof optionsOrCapture === 'object') {\n    capture = Boolean(optionsOrCapture.capture);\n    once = Boolean(optionsOrCapture.once);\n    passive = Boolean(optionsOrCapture.passive);\n  } else {\n    capture = Boolean(optionsOrCapture);\n    once = false;\n    passive = false;\n  }\n  // Search the wrapped function.\n  var wrapperFn = undefined;\n  if (fn.__eventWrappers) {\n    for (var i = 0; i < fn.__eventWrappers.length; i++) {\n      if (fn.__eventWrappers[i].node === this$1 &&\n          fn.__eventWrappers[i].type === type &&\n          fn.__eventWrappers[i].capture === capture &&\n          fn.__eventWrappers[i].once === once &&\n          fn.__eventWrappers[i].passive === passive) {\n        wrapperFn = fn.__eventWrappers.splice(i, 1)[0].wrapperFn;\n        // Cleanup.\n        if (!fn.__eventWrappers.length) {\n          fn.__eventWrappers = undefined;\n        }\n        break;\n      }\n    }\n  }\n\n  origRemoveEventListener.call(this, type, wrapperFn || fn, optionsOrCapture);\n  if (wrapperFn && nonBubblingEventsToRetarget[type] &&\n      this.__handlers && this.__handlers[type]) {\n    var arr = this.__handlers[type][capture ? 'capture' : 'bubble'];\n    var idx = arr.indexOf(wrapperFn);\n    if (idx > -1) {\n      arr.splice(idx, 1);\n    }\n  }\n}\n\nfunction activateFocusEventOverrides() {\n  for (var ev in nonBubblingEventsToRetarget) {\n    window.addEventListener(ev, function(e) {\n      if (!e.__target) {\n        e.__target = e.target;\n        e.__relatedTarget = e.relatedTarget;\n        patchPrototype(e, EventMixin);\n        retargetNonBubblingEvent(e);\n        e.stopImmediatePropagation();\n      }\n    }, true);\n  }\n}\n\n\nvar PatchedEvent = mixinComposedFlag(Event);\nvar PatchedCustomEvent = mixinComposedFlag(CustomEvent);\nvar PatchedMouseEvent = mixinComposedFlag(MouseEvent);\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Patches elements that interacts with ShadyDOM\n * such that tree traversal and mutation apis act like they would under\n * ShadowDOM.\n *\n * This import enables seemless interaction with ShadyDOM powered\n * custom elements, enabling better interoperation with 3rd party code,\n * libraries, and frameworks that use DOM tree manipulation apis.\n */\n\nif (settings.inUse) {\n\n  window.ShadyDOM = {\n    tree: tree,\n    getNativeProperty: getNativeProperty,\n    patch: patchNode,\n    isPatched: isNodePatched,\n    getComposedInnerHTML: getComposedInnerHTML,\n    getComposedChildNodes: getComposedChildNodes$1,\n    unpatch: unpatchNode,\n    canUnpatch: canUnpatchNode,\n    isShadyRoot: isShadyRoot,\n    enqueue: enqueue,\n    flush: flush$1,\n    inUse: settings.inUse,\n    filterMutations: filterMutations,\n    observeChildren: observeChildren,\n    unobserveChildren: unobserveChildren\n  };\n\n  var createRootAndEnsurePatched = function(node) {\n    // TODO(sorvell): need to ensure ancestors are patched but this introduces\n    // a timing problem with gathering composed children.\n    // (1) currently the child list is crawled and patched when patching occurs\n    // (this needs to change)\n    // (2) we can only patch when an element has received its parsed children\n    // because we cannot detect them when inserted by parser.\n    // let ancestor = node;\n    // while (ancestor) {\n    //   patchNode(ancestor);\n    //   ancestor = ancestor.parentNode || ancestor.host;\n    // }\n    patchNode(node);\n    var root = new ShadyRoot(node);\n    patchNode(root);\n    return root;\n  }\n\n  Element.prototype.attachShadow = function() {\n    return createRootAndEnsurePatched(this);\n  }\n\n  Node.prototype.addEventListener = addEventListener;\n  Node.prototype.removeEventListener = removeEventListener;\n  Event = PatchedEvent;\n  CustomEvent = PatchedCustomEvent;\n  MouseEvent = PatchedMouseEvent;\n  activateFocusEventOverrides();\n\n  Object.defineProperty(Node.prototype, 'isConnected', {\n    get: function get() {\n      return document.documentElement.contains(this);\n    },\n    configurable: true\n  });\n\n  Node.prototype.getRootNode = function(options) {\n    return getRootNode(this, options);\n  }\n\n  Object.defineProperty(Element.prototype, 'slot', {\n    get: function get$1() {\n      return this.getAttribute('slot');\n    },\n    set: function set(value) {\n      this.setAttribute('slot', value);\n    },\n    configurable: true\n  });\n\n  Object.defineProperty(Node.prototype, 'assignedSlot', {\n    get: function get$2() {\n      return this._assignedSlot || null;\n    },\n    configurable: true\n  });\n\n  var nativeSetAttribute = Element.prototype.setAttribute;\n  Element.prototype.setAttribute = setAttribute;\n  // NOTE: expose native setAttribute to allow hooking native method\n  // (e.g. this is done in ShadyCSS)\n  Element.prototype.__nativeSetAttribute = nativeSetAttribute;\n\n  var classNameDescriptor = {\n    get: function get$3() {\n      return this.getAttribute('class');\n    },\n    set: function set$1(value) {\n      this.setAttribute('class', value);\n    },\n    configurable: true\n  };\n\n  // Safari 9 `className` is not configurable\n  var cn = Object.getOwnPropertyDescriptor(Element.prototype, 'className');\n  if (cn && cn.configurable) {\n    Object.defineProperty(Element.prototype, 'className', classNameDescriptor);\n  } else {\n    // on IE `className` is on Element\n    var h = window.customElements && window.customElements.nativeHTMLElement ||\n      HTMLElement;\n    cn = Object.getOwnPropertyDescriptor(h.prototype, 'className');\n    if (cn && cn.configurable) {\n      Object.defineProperty(h.prototype, 'className', classNameDescriptor);\n    }\n  }\n}\n\n}());\n\n//# sourceMappingURL=shadydom.min.js.map\n","(function () {\n'use strict';\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/*\nExtremely simple css parser. Intended to be not more than what we need\nand definitely not necessarily correct =).\n*/\n\n// given a string of css, return a simple rule tree\n\nfunction parse(text) {\n  text = clean(text);\n  return parseCss(lex(text), text);\n}\n\n// remove stuff we don't care about that may hinder parsing\nfunction clean(cssText) {\n  return cssText.replace(RX.comments, '').replace(RX.port, '');\n}\n\n// super simple {...} lexer that returns a node tree\nfunction lex(text) {\n  var root = {\n    start: 0,\n    end: text.length\n  };\n  var n = root;\n  for (var i = 0, l = text.length; i < l; i++) {\n    if (text[i] === OPEN_BRACE) {\n      if (!n.rules) {\n        n.rules = [];\n      }\n      var p = n;\n      var previous = p.rules[p.rules.length - 1];\n      n = {\n        start: i + 1,\n        parent: p,\n        previous: previous\n      };\n      p.rules.push(n);\n    } else if (text[i] === CLOSE_BRACE) {\n      n.end = i + 1;\n      n = n.parent || root;\n    }\n  }\n  return root;\n}\n\n// add selectors/cssText to node tree\nfunction parseCss(node, text) {\n  var t = text.substring(node.start, node.end - 1);\n  node.parsedCssText = node.cssText = t.trim();\n  if (node.parent) {\n    var ss = node.previous ? node.previous.end : node.parent.start;\n    t = text.substring(ss, node.start - 1);\n    t = _expandUnicodeEscapes(t);\n    t = t.replace(RX.multipleSpaces, ' ');\n    // TODO(sorvell): ad hoc; make selector include only after last ;\n    // helps with mixin syntax\n    t = t.substring(t.lastIndexOf(';') + 1);\n    var s = node.parsedSelector = node.selector = t.trim();\n    node.atRule = s.indexOf(AT_START) === 0;\n    // note, support a subset of rule types...\n    if (node.atRule) {\n      if (s.indexOf(MEDIA_START) === 0) {\n        node.type = types.MEDIA_RULE;\n      } else if (s.match(RX.keyframesRule)) {\n        node.type = types.KEYFRAMES_RULE;\n        node.keyframesName = node.selector.split(RX.multipleSpaces).pop();\n      }\n    } else {\n      if (s.indexOf(VAR_START) === 0) {\n        node.type = types.MIXIN_RULE;\n      } else {\n        node.type = types.STYLE_RULE;\n      }\n    }\n  }\n  var r$ = node.rules;\n  if (r$) {\n    for (var i = 0, l = r$.length, r; i < l && (r = r$[i]); i++) {\n      parseCss(r, text);\n    }\n  }\n  return node;\n}\n\n// conversion of sort unicode escapes with spaces like `\\33 ` (and longer) into\n// expanded form that doesn't require trailing space `\\000033`\nfunction _expandUnicodeEscapes(s) {\n  return s.replace(/\\\\([0-9a-f]{1,6})\\s/gi, function () {\n    var code = arguments[1],\n        repeat = 6 - code.length;\n    while (repeat--) {\n      code = '0' + code;\n    }\n    return '\\\\' + code;\n  });\n}\n\n// stringify parsed css.\nfunction stringify(node, preserveProperties, text) {\n  text = text || '';\n  // calc rule cssText\n  var cssText = '';\n  if (node.cssText || node.rules) {\n    var r$ = node.rules;\n    if (r$ && !_hasMixinRules(r$)) {\n      for (var i = 0, l = r$.length, r; i < l && (r = r$[i]); i++) {\n        cssText = stringify(r, preserveProperties, cssText);\n      }\n    } else {\n      cssText = preserveProperties ? node.cssText : removeCustomProps(node.cssText);\n      cssText = cssText.trim();\n      if (cssText) {\n        cssText = '  ' + cssText + '\\n';\n      }\n    }\n  }\n  // emit rule if there is cssText\n  if (cssText) {\n    if (node.selector) {\n      text += node.selector + ' ' + OPEN_BRACE + '\\n';\n    }\n    text += cssText;\n    if (node.selector) {\n      text += CLOSE_BRACE + '\\n\\n';\n    }\n  }\n  return text;\n}\n\nfunction _hasMixinRules(rules) {\n  return rules[0].selector.indexOf(VAR_START) === 0;\n}\n\nfunction removeCustomProps(cssText) {\n  cssText = removeCustomPropAssignment(cssText);\n  return removeCustomPropApply(cssText);\n}\n\nfunction removeCustomPropAssignment(cssText) {\n  return cssText.replace(RX.customProp, '').replace(RX.mixinProp, '');\n}\n\nfunction removeCustomPropApply(cssText) {\n  return cssText.replace(RX.mixinApply, '').replace(RX.varApply, '');\n}\n\nvar types = {\n  STYLE_RULE: 1,\n  KEYFRAMES_RULE: 7,\n  MEDIA_RULE: 4,\n  MIXIN_RULE: 1000\n};\n\nvar OPEN_BRACE = '{';\nvar CLOSE_BRACE = '}';\n\n// helper regexp's\nvar RX = {\n  comments: /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//gim,\n  port: /@import[^;]*;/gim,\n  customProp: /(?:^[^;\\-\\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\\n]|$)/gim,\n  mixinProp: /(?:^[^;\\-\\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\\n]|$)?/gim,\n  mixinApply: /@apply\\s*\\(?[^);]*\\)?\\s*(?:[;\\n]|$)?/gim,\n  varApply: /[^;:]*?:[^;]*?var\\([^;]*\\)(?:[;\\n]|$)?/gim,\n  keyframesRule: /^@[^\\s]*keyframes/,\n  multipleSpaces: /\\s+/g\n};\n\nvar VAR_START = '--';\nvar MEDIA_START = '@media';\nvar AT_START = '@';\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar nativeShadow = !(window.ShadyDOM && window.ShadyDOM.inUse);\n// chrome 49 has semi-working css vars, check if box-shadow works\n// safari 9.1 has a recalc bug: https://bugs.webkit.org/show_bug.cgi?id=155782\nvar nativeCssVariables = !navigator.userAgent.match('AppleWebKit/601') && window.CSS && CSS.supports && CSS.supports('box-shadow', '0 0 0 var(--foo)');\n\n// experimental support for native @apply\nfunction detectNativeApply() {\n  var style = document.createElement('style');\n  style.textContent = '.foo { @apply --foo }';\n  document.head.appendChild(style);\n  var nativeCssApply = style.sheet.cssRules[0].cssText.indexOf('apply') >= 0;\n  document.head.removeChild(style);\n  return nativeCssApply;\n}\n\nvar nativeCssApply = false && detectNativeApply();\n\nfunction parseSettings(settings) {\n  if (settings) {\n    nativeCssVariables = nativeCssVariables && !settings.shimcssproperties;\n    nativeShadow = nativeShadow && !settings.shimshadow;\n  }\n}\n\nif (window.ShadyCSS) {\n  parseSettings(window.ShadyCSS);\n} else if (window.WebComponents) {\n  parseSettings(window.WebComponents.flags);\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction toCssText(rules, callback) {\n  if (typeof rules === 'string') {\n    rules = parse(rules);\n  }\n  if (callback) {\n    forEachRule(rules, callback);\n  }\n  return stringify(rules, nativeCssVariables);\n}\n\nfunction rulesForStyle(style) {\n  if (!style.__cssRules && style.textContent) {\n    style.__cssRules = parse(style.textContent);\n  }\n  return style.__cssRules;\n}\n\n// Tests if a rule is a keyframes selector, which looks almost exactly\n// like a normal selector but is not (it has nothing to do with scoping\n// for example).\nfunction isKeyframesSelector(rule) {\n  return rule.parent && rule.parent.type === types.KEYFRAMES_RULE;\n}\n\nfunction forEachRule(node, styleRuleCallback, keyframesRuleCallback, onlyActiveRules) {\n  if (!node) {\n    return;\n  }\n  var skipRules = false;\n  if (onlyActiveRules) {\n    if (node.type === types.MEDIA_RULE) {\n      var matchMedia = node.selector.match(rx.MEDIA_MATCH);\n      if (matchMedia) {\n        // if rule is a non matching @media rule, skip subrules\n        if (!window.matchMedia(matchMedia[1]).matches) {\n          skipRules = true;\n        }\n      }\n    }\n  }\n  if (node.type === types.STYLE_RULE) {\n    styleRuleCallback(node);\n  } else if (keyframesRuleCallback && node.type === types.KEYFRAMES_RULE) {\n    keyframesRuleCallback(node);\n  } else if (node.type === types.MIXIN_RULE) {\n    skipRules = true;\n  }\n  var r$ = node.rules;\n  if (r$ && !skipRules) {\n    for (var i = 0, l = r$.length, r; i < l && (r = r$[i]); i++) {\n      forEachRule(r, styleRuleCallback, keyframesRuleCallback, onlyActiveRules);\n    }\n  }\n}\n\n// add a string of cssText to the document.\nfunction applyCss(cssText, moniker, target, contextNode) {\n  var style = createScopeStyle(cssText, moniker);\n  return applyStyle$1(style, target, contextNode);\n}\n\nfunction applyStyle$1(style, target, contextNode) {\n  target = target || document.head;\n  var after = contextNode && contextNode.nextSibling || target.firstChild;\n  lastHeadApplyNode = style;\n  return target.insertBefore(style, after);\n}\n\nfunction createScopeStyle(cssText, moniker) {\n  var style = document.createElement('style');\n  if (moniker) {\n    style.setAttribute('scope', moniker);\n  }\n  style.textContent = cssText;\n  return style;\n}\n\nvar lastHeadApplyNode = null;\n\n// insert a comment node as a styling position placeholder.\nfunction applyStylePlaceHolder(moniker) {\n  var placeHolder = document.createComment(' Shady DOM styles for ' + moniker + ' ');\n  var after = lastHeadApplyNode ? lastHeadApplyNode.nextSibling : null;\n  var scope = document.head;\n  scope.insertBefore(placeHolder, after || scope.firstChild);\n  lastHeadApplyNode = placeHolder;\n  return placeHolder;\n}\n\n\n\n// cssBuildTypeForModule: function (module) {\n//   let dm = Polymer.DomModule.import(module);\n//   if (dm) {\n//     return getCssBuildType(dm);\n//   }\n// },\n//\n\n\n// Walk from text[start] matching parens\n// returns position of the outer end paren\nfunction findMatchingParen(text, start) {\n  var level = 0;\n  for (var i = start, l = text.length; i < l; i++) {\n    if (text[i] === '(') {\n      level++;\n    } else if (text[i] === ')') {\n      if (--level === 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction processVariableAndFallback(str, callback) {\n  // find 'var('\n  var start = str.indexOf('var(');\n  if (start === -1) {\n    // no var?, everything is prefix\n    return callback(str, '', '', '');\n  }\n  //${prefix}var(${inner})${suffix}\n  var end = findMatchingParen(str, start + 3);\n  var inner = str.substring(start + 4, end);\n  var prefix = str.substring(0, start);\n  // suffix may have other variables\n  var suffix = processVariableAndFallback(str.substring(end + 1), callback);\n  var comma = inner.indexOf(',');\n  // value and fallback args should be trimmed to match in property lookup\n  if (comma === -1) {\n    // variable, no fallback\n    return callback(prefix, inner.trim(), '', suffix);\n  }\n  // var(${value},${fallback})\n  var value = inner.substring(0, comma).trim();\n  var fallback = inner.substring(comma + 1).trim();\n  return callback(prefix, value, fallback, suffix);\n}\n\nfunction setElementClassRaw(element, value) {\n  // use native setAttribute provided by ShadyDOM when setAttribute is patched\n  if (element.__nativeSetAttribute) {\n    element.__nativeSetAttribute('class', value);\n  } else {\n    element.setAttribute('class', value);\n  }\n}\n\nvar rx = {\n  VAR_ASSIGN: /(?:^|[;\\s{]\\s*)(--[\\w-]*?)\\s*:\\s*(?:([^;{]*)|{([^}]*)})(?:(?=[;\\s}])|$)/gi,\n  MIXIN_MATCH: /(?:^|\\W+)@apply\\s*\\(?([^);\\n]*)\\)?/gi,\n  VAR_CONSUMED: /(--[\\w-]+)\\s*([:,;)]|$)/gi,\n  ANIMATION_MATCH: /(animation\\s*:)|(animation-name\\s*:)/,\n  MEDIA_MATCH: /@media[^(]*(\\([^)]*\\))/,\n  IS_VAR: /^--/,\n  BRACKETED: /\\{[^}]*\\}/g,\n  HOST_PREFIX: '(?:^|[^.#[:])',\n  HOST_SUFFIX: '($|[.:[\\\\s>+~])'\n};\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/* Transforms ShadowDOM styling into ShadyDOM styling\n\n* scoping:\n\n  * elements in scope get scoping selector class=\"x-foo-scope\"\n  * selectors re-written as follows:\n\n    div button -> div.x-foo-scope button.x-foo-scope\n\n* :host -> scopeName\n\n* :host(...) -> scopeName...\n\n* ::slotted(...) -> scopeName > ...\n\n* ...:dir(ltr|rtl) -> [dir=\"ltr|rtl\"] ..., ...[dir=\"ltr|rtl\"]\n\n* :host(:dir[rtl]) -> scopeName:dir(rtl) -> [dir=\"rtl\"] scopeName, scopeName[dir=\"rtl\"]\n\n*/\nvar SCOPE_NAME = 'style-scope';\n\nvar StyleTransformer = {\n\n  // Given a node and scope name, add a scoping class to each node\n  // in the tree. This facilitates transforming css into scoped rules.\n  dom: function dom(node, scope, shouldRemoveScope) {\n    // one time optimization to skip scoping...\n    if (node.__styleScoped) {\n      node.__styleScoped = null;\n    } else {\n      this._transformDom(node, scope || '', shouldRemoveScope);\n    }\n  },\n\n  _transformDom: function _transformDom(node, selector, shouldRemoveScope) {\n    if (node.nodeType === Node.ELEMENT_NODE) {\n      this.element(node, selector, shouldRemoveScope);\n    }\n    var c$ = node.localName === 'template' ? (node.content || node._content).childNodes : node.children || node.childNodes;\n    if (c$) {\n      for (var i = 0; i < c$.length; i++) {\n        this._transformDom(c$[i], selector, shouldRemoveScope);\n      }\n    }\n  },\n\n  element: function element(_element, scope, shouldRemoveScope) {\n    // note: if using classes, we add both the general 'style-scope' class\n    // as well as the specific scope. This enables easy filtering of all\n    // `style-scope` elements\n    if (scope) {\n      // note: svg on IE does not have classList so fallback to class\n      if (_element.classList) {\n        if (shouldRemoveScope) {\n          _element.classList.remove(SCOPE_NAME);\n          _element.classList.remove(scope);\n        } else {\n          _element.classList.add(SCOPE_NAME);\n          _element.classList.add(scope);\n        }\n      } else if (_element.getAttribute) {\n        var c = _element.getAttribute(CLASS);\n        if (shouldRemoveScope) {\n          if (c) {\n            var newValue = c.replace(SCOPE_NAME, '').replace(scope, '');\n            setElementClassRaw(_element, newValue);\n          }\n        } else {\n          var _newValue = (c ? c + ' ' : '') + SCOPE_NAME + ' ' + scope;\n          setElementClassRaw(_element, _newValue);\n        }\n      }\n    }\n  },\n\n  elementStyles: function elementStyles(element, styleRules, callback) {\n    var cssBuildType = element.__cssBuild;\n    // no need to shim selectors if settings.useNativeShadow, also\n    // a shady css build will already have transformed selectors\n    // NOTE: This method may be called as part of static or property shimming.\n    // When there is a targeted build it will not be called for static shimming,\n    // but when the property shim is used it is called and should opt out of\n    // static shimming work when a proper build exists.\n    var cssText = nativeShadow || cssBuildType === 'shady' ? toCssText(styleRules, callback) : this.css(styleRules, element.is, element.extends, callback) + '\\n\\n';\n    return cssText.trim();\n  },\n\n  // Given a string of cssText and a scoping string (scope), returns\n  // a string of scoped css where each selector is transformed to include\n  // a class created from the scope. ShadowDOM selectors are also transformed\n  // (e.g. :host) to use the scoping selector.\n  css: function css(rules, scope, ext, callback) {\n    var hostScope = this._calcHostScope(scope, ext);\n    scope = this._calcElementScope(scope);\n    var self = this;\n    return toCssText(rules, function (rule) {\n      if (!rule.isScoped) {\n        self.rule(rule, scope, hostScope);\n        rule.isScoped = true;\n      }\n      if (callback) {\n        callback(rule, scope, hostScope);\n      }\n    });\n  },\n\n  _calcElementScope: function _calcElementScope(scope) {\n    if (scope) {\n      return CSS_CLASS_PREFIX + scope;\n    } else {\n      return '';\n    }\n  },\n\n  _calcHostScope: function _calcHostScope(scope, ext) {\n    return ext ? '[is=' + scope + ']' : scope;\n  },\n\n  rule: function rule(_rule, scope, hostScope) {\n    this._transformRule(_rule, this._transformComplexSelector, scope, hostScope);\n  },\n\n  // transforms a css rule to a scoped rule.\n  _transformRule: function _transformRule(rule, transformer, scope, hostScope) {\n    // NOTE: save transformedSelector for subsequent matching of elements\n    // against selectors (e.g. when calculating style properties)\n    rule.selector = rule.transformedSelector = this._transformRuleCss(rule, transformer, scope, hostScope);\n  },\n\n  _transformRuleCss: function _transformRuleCss(rule, transformer, scope, hostScope) {\n    var p$ = rule.selector.split(COMPLEX_SELECTOR_SEP);\n    // we want to skip transformation of rules that appear in keyframes,\n    // because they are keyframe selectors, not element selectors.\n    if (!isKeyframesSelector(rule)) {\n      for (var i = 0, l = p$.length, p; i < l && (p = p$[i]); i++) {\n        p$[i] = transformer.call(this, p, scope, hostScope);\n      }\n    }\n    return p$.join(COMPLEX_SELECTOR_SEP);\n  },\n\n  _transformComplexSelector: function _transformComplexSelector(selector, scope, hostScope) {\n    var _this = this;\n\n    var stop = false;\n    selector = selector.trim();\n    // Remove spaces inside of selectors like `:nth-of-type` because it confuses SIMPLE_SELECTOR_SEP\n    selector = selector.replace(NTH, function (m, type, inner) {\n      return ':' + type + '(' + inner.replace(/\\s/g, '') + ')';\n    });\n    selector = selector.replace(SLOTTED_START, HOST + ' $1');\n    selector = selector.replace(SIMPLE_SELECTOR_SEP, function (m, c, s) {\n      if (!stop) {\n        var info = _this._transformCompoundSelector(s, c, scope, hostScope);\n        stop = stop || info.stop;\n        c = info.combinator;\n        s = info.value;\n      }\n      return c + s;\n    });\n    return selector;\n  },\n\n  _transformCompoundSelector: function _transformCompoundSelector(selector, combinator, scope, hostScope) {\n    // replace :host with host scoping class\n    var slottedIndex = selector.indexOf(SLOTTED);\n    if (selector.indexOf(HOST) >= 0) {\n      selector = this._transformHostSelector(selector, hostScope);\n      // replace other selectors with scoping class\n    } else if (slottedIndex !== 0) {\n      selector = scope ? this._transformSimpleSelector(selector, scope) : selector;\n    }\n    // mark ::slotted() scope jump to replace with descendant selector + arg\n    // also ignore left-side combinator\n    var slotted = false;\n    if (slottedIndex >= 0) {\n      combinator = '';\n      slotted = true;\n    }\n    // process scope jumping selectors up to the scope jump and then stop\n    var stop = void 0;\n    if (slotted) {\n      stop = true;\n      if (slotted) {\n        // .zonk ::slotted(.foo) -> .zonk.scope > .foo\n        selector = selector.replace(SLOTTED_PAREN, function (m, paren) {\n          return ' > ' + paren;\n        });\n      }\n    }\n    selector = selector.replace(DIR_PAREN, function (m, before, dir) {\n      return '[dir=\"' + dir + '\"] ' + before + ', ' + before + '[dir=\"' + dir + '\"]';\n    });\n    return { value: selector, combinator: combinator, stop: stop };\n  },\n\n  _transformSimpleSelector: function _transformSimpleSelector(selector, scope) {\n    var p$ = selector.split(PSEUDO_PREFIX);\n    p$[0] += scope;\n    return p$.join(PSEUDO_PREFIX);\n  },\n\n  // :host(...) -> scopeName...\n  _transformHostSelector: function _transformHostSelector(selector, hostScope) {\n    var m = selector.match(HOST_PAREN);\n    var paren = m && m[2].trim() || '';\n    if (paren) {\n      if (!paren[0].match(SIMPLE_SELECTOR_PREFIX)) {\n        // paren starts with a type selector\n        var typeSelector = paren.split(SIMPLE_SELECTOR_PREFIX)[0];\n        // if the type selector is our hostScope then avoid pre-pending it\n        if (typeSelector === hostScope) {\n          return paren;\n          // otherwise, this selector should not match in this scope so\n          // output a bogus selector.\n        } else {\n          return SELECTOR_NO_MATCH;\n        }\n      } else {\n        // make sure to do a replace here to catch selectors like:\n        // `:host(.foo)::before`\n        return selector.replace(HOST_PAREN, function (m, host, paren) {\n          return hostScope + paren;\n        });\n      }\n      // if no paren, do a straight :host replacement.\n      // TODO(sorvell): this should not strictly be necessary but\n      // it's needed to maintain support for `:host[foo]` type selectors\n      // which have been improperly used under Shady DOM. This should be\n      // deprecated.\n    } else {\n      return selector.replace(HOST, hostScope);\n    }\n  },\n\n  documentRule: function documentRule(rule) {\n    // reset selector in case this is redone.\n    rule.selector = rule.parsedSelector;\n    this.normalizeRootSelector(rule);\n    this._transformRule(rule, this._transformDocumentSelector);\n  },\n\n  normalizeRootSelector: function normalizeRootSelector(rule) {\n    if (rule.selector === ROOT) {\n      rule.selector = 'html';\n    }\n  },\n\n  _transformDocumentSelector: function _transformDocumentSelector(selector) {\n    return selector.match(SLOTTED) ? this._transformComplexSelector(selector, SCOPE_DOC_SELECTOR) : this._transformSimpleSelector(selector.trim(), SCOPE_DOC_SELECTOR);\n  },\n  SCOPE_NAME: SCOPE_NAME\n};\n\nvar NTH = /:(nth[-\\w]+)\\(([^)]+)\\)/;\nvar SCOPE_DOC_SELECTOR = ':not(.' + SCOPE_NAME + ')';\nvar COMPLEX_SELECTOR_SEP = ',';\nvar SIMPLE_SELECTOR_SEP = /(^|[\\s>+~]+)((?:\\[.+?\\]|[^\\s>+~=\\[])+)/g;\nvar SIMPLE_SELECTOR_PREFIX = /[[.:#*]/;\nvar HOST = ':host';\nvar ROOT = ':root';\nvar SLOTTED = '::slotted';\nvar SLOTTED_START = new RegExp('^(' + SLOTTED + ')');\n// NOTE: this supports 1 nested () pair for things like\n// :host(:not([selected]), more general support requires\n// parsing which seems like overkill\nvar HOST_PAREN = /(:host)(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))/;\n// similar to HOST_PAREN\nvar SLOTTED_PAREN = /(?:::slotted)(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))/;\nvar DIR_PAREN = /(.*):dir\\((?:(ltr|rtl))\\)/;\nvar CSS_CLASS_PREFIX = '.';\nvar PSEUDO_PREFIX = ':';\nvar CLASS = 'class';\nvar SELECTOR_NO_MATCH = 'should_not_match';\n\nvar asyncGenerator = function () {\n  function AwaitValue(value) {\n    this.value = value;\n  }\n\n  function AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function (resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n\n        if (value instanceof AwaitValue) {\n          Promise.resolve(value.value).then(function (arg) {\n            resume(\"next\", arg);\n          }, function (arg) {\n            resume(\"throw\", arg);\n          });\n        } else {\n          settle(result.done ? \"return\" : \"normal\", result.value);\n        }\n      } catch (err) {\n        settle(\"throw\", err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case \"return\":\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case \"throw\":\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== \"function\") {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n    AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n      return this;\n    };\n  }\n\n  AsyncGenerator.prototype.next = function (arg) {\n    return this._invoke(\"next\", arg);\n  };\n\n  AsyncGenerator.prototype.throw = function (arg) {\n    return this._invoke(\"throw\", arg);\n  };\n\n  AsyncGenerator.prototype.return = function (arg) {\n    return this._invoke(\"return\", arg);\n  };\n\n  return {\n    wrap: function (fn) {\n      return function () {\n        return new AsyncGenerator(fn.apply(this, arguments));\n      };\n    },\n    await: function (value) {\n      return new AwaitValue(value);\n    }\n  };\n}();\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar get$1 = function get$1(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get$1(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar set$1 = function set$1(object, property, value, receiver) {\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent !== null) {\n      set$1(parent, property, value, receiver);\n    }\n  } else if (\"value\" in desc && desc.writable) {\n    desc.value = value;\n  } else {\n    var setter = desc.set;\n\n    if (setter !== undefined) {\n      setter.call(receiver, value);\n    }\n  }\n\n  return value;\n};\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar StyleInfo = function () {\n  createClass(StyleInfo, null, [{\n    key: 'get',\n    value: function get(node) {\n      return node.__styleInfo;\n    }\n  }, {\n    key: 'set',\n    value: function set(node, styleInfo) {\n      node.__styleInfo = styleInfo;\n      return styleInfo;\n    }\n  }]);\n\n  function StyleInfo(ast, placeholder, ownStylePropertyNames, elementName, typeExtension, cssBuild) {\n    classCallCheck(this, StyleInfo);\n\n    this.styleRules = ast || null;\n    this.placeholder = placeholder || null;\n    this.ownStylePropertyNames = ownStylePropertyNames || [];\n    this.overrideStyleProperties = null;\n    this.elementName = elementName || '';\n    this.cssBuild = cssBuild || '';\n    this.typeExtension = typeExtension || '';\n    this.styleProperties = null;\n    this.scopeSelector = null;\n    this.customStyle = null;\n  }\n\n  return StyleInfo;\n}();\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// TODO: dedupe with shady\nvar p = window.Element.prototype;\nvar matchesSelector = p.matches || p.matchesSelector || p.mozMatchesSelector || p.msMatchesSelector || p.oMatchesSelector || p.webkitMatchesSelector;\n\nvar IS_IE = navigator.userAgent.match('Trident');\n\nvar StyleProperties = {\n\n  // decorates styles with rule info and returns an array of used style\n  // property names\n  decorateStyles: function decorateStyles(rules) {\n    var self = this,\n        props = {},\n        keyframes = [],\n        ruleIndex = 0;\n    forEachRule(rules, function (rule) {\n      self.decorateRule(rule);\n      // mark in-order position of ast rule in styles block, used for cache key\n      rule.index = ruleIndex++;\n      self.collectPropertiesInCssText(rule.propertyInfo.cssText, props);\n    }, function onKeyframesRule(rule) {\n      keyframes.push(rule);\n    });\n    // Cache all found keyframes rules for later reference:\n    rules._keyframes = keyframes;\n    // return this list of property names *consumes* in these styles.\n    var names = [];\n    for (var i in props) {\n      names.push(i);\n    }\n    return names;\n  },\n\n  // decorate a single rule with property info\n  decorateRule: function decorateRule(rule) {\n    if (rule.propertyInfo) {\n      return rule.propertyInfo;\n    }\n    var info = {},\n        properties = {};\n    var hasProperties = this.collectProperties(rule, properties);\n    if (hasProperties) {\n      info.properties = properties;\n      // TODO(sorvell): workaround parser seeing mixins as additional rules\n      rule.rules = null;\n    }\n    info.cssText = this.collectCssText(rule);\n    rule.propertyInfo = info;\n    return info;\n  },\n\n  // collects the custom properties from a rule's cssText\n  collectProperties: function collectProperties(rule, properties) {\n    var info = rule.propertyInfo;\n    if (info) {\n      if (info.properties) {\n        Object.assign(properties, info.properties);\n        return true;\n      }\n    } else {\n      var m = void 0,\n          rx$$1 = this.rx.VAR_ASSIGN;\n      var cssText = rule.parsedCssText;\n      var value = void 0;\n      var any = void 0;\n      while (m = rx$$1.exec(cssText)) {\n        // note: group 2 is var, 3 is mixin\n        value = (m[2] || m[3]).trim();\n        // value of 'inherit' or 'unset' is equivalent to not setting the property here\n        if (value !== 'inherit' || value !== 'unset') {\n          properties[m[1].trim()] = value;\n        }\n        any = true;\n      }\n      return any;\n    }\n  },\n\n  // returns cssText of properties that consume variables/mixins\n  collectCssText: function collectCssText(rule) {\n    return this.collectConsumingCssText(rule.parsedCssText);\n  },\n\n  // NOTE: we support consumption inside mixin assignment\n  // but not production, so strip out {...}\n  collectConsumingCssText: function collectConsumingCssText(cssText) {\n    return cssText.replace(this.rx.BRACKETED, '').replace(this.rx.VAR_ASSIGN, '');\n  },\n\n  collectPropertiesInCssText: function collectPropertiesInCssText(cssText, props) {\n    var m = void 0;\n    while (m = this.rx.VAR_CONSUMED.exec(cssText)) {\n      var name = m[1];\n      // This regex catches all variable names, and following non-whitespace char\n      // If next char is not ':', then variable is a consumer\n      if (m[2] !== ':') {\n        props[name] = true;\n      }\n    }\n  },\n\n  // turns custom properties into realized values.\n  reify: function reify(props) {\n    // big perf optimization here: reify only *own* properties\n    // since this object has __proto__ of the element's scope properties\n    var names = Object.getOwnPropertyNames(props);\n    for (var i = 0, n; i < names.length; i++) {\n      n = names[i];\n      props[n] = this.valueForProperty(props[n], props);\n    }\n  },\n\n  // given a property value, returns the reified value\n  // a property value may be:\n  // (1) a literal value like: red or 5px;\n  // (2) a variable value like: var(--a), var(--a, red), or var(--a, --b) or\n  // var(--a, var(--b));\n  // (3) a literal mixin value like { properties }. Each of these properties\n  // can have values that are: (a) literal, (b) variables, (c) @apply mixins.\n  valueForProperty: function valueForProperty(property, props) {\n    var _this = this;\n\n    // case (1) default\n    // case (3) defines a mixin and we have to reify the internals\n    if (property) {\n      if (property.indexOf(';') >= 0) {\n        property = this.valueForProperties(property, props);\n      } else {\n        (function () {\n          // case (2) variable\n          var self = _this;\n          var fn = function fn(prefix, value, fallback, suffix) {\n            if (!value) {\n              return prefix + suffix;\n            }\n            var propertyValue = self.valueForProperty(props[value], props);\n            // if value is \"initial\", then the variable should be treated as unset\n            if (!propertyValue || propertyValue === 'initial') {\n              // fallback may be --a or var(--a) or literal\n              propertyValue = self.valueForProperty(props[fallback] || fallback, props) || fallback;\n            } else if (propertyValue === 'apply-shim-inherit') {\n              // CSS build will replace `inherit` with `apply-shim-inherit`\n              // for use with native css variables.\n              // Since we have full control, we can use `inherit` directly.\n              propertyValue = 'inherit';\n            }\n            return prefix + (propertyValue || '') + suffix;\n          };\n          property = processVariableAndFallback(property, fn);\n        })();\n      }\n    }\n    return property && property.trim() || '';\n  },\n\n  // note: we do not yet support mixin within mixin\n  valueForProperties: function valueForProperties(property, props) {\n    var parts = property.split(';');\n    for (var i = 0, _p, m; i < parts.length; i++) {\n      if (_p = parts[i]) {\n        this.rx.MIXIN_MATCH.lastIndex = 0;\n        m = this.rx.MIXIN_MATCH.exec(_p);\n        if (m) {\n          _p = this.valueForProperty(props[m[1]], props);\n        } else {\n          var colon = _p.indexOf(':');\n          if (colon !== -1) {\n            var pp = _p.substring(colon);\n            pp = pp.trim();\n            pp = this.valueForProperty(pp, props) || pp;\n            _p = _p.substring(0, colon) + pp;\n          }\n        }\n        parts[i] = _p && _p.lastIndexOf(';') === _p.length - 1 ?\n        // strip trailing ;\n        _p.slice(0, -1) : _p || '';\n      }\n    }\n    return parts.join(';');\n  },\n\n  applyProperties: function applyProperties(rule, props) {\n    var output = '';\n    // dynamically added sheets may not be decorated so ensure they are.\n    if (!rule.propertyInfo) {\n      this.decorateRule(rule);\n    }\n    if (rule.propertyInfo.cssText) {\n      output = this.valueForProperties(rule.propertyInfo.cssText, props);\n    }\n    rule.cssText = output;\n  },\n\n  // Apply keyframe transformations to the cssText of a given rule. The\n  // keyframeTransforms object is a map of keyframe names to transformer\n  // functions which take in cssText and spit out transformed cssText.\n  applyKeyframeTransforms: function applyKeyframeTransforms(rule, keyframeTransforms) {\n    var input = rule.cssText;\n    var output = rule.cssText;\n    if (rule.hasAnimations == null) {\n      // Cache whether or not the rule has any animations to begin with:\n      rule.hasAnimations = this.rx.ANIMATION_MATCH.test(input);\n    }\n    // If there are no animations referenced, we can skip transforms:\n    if (rule.hasAnimations) {\n      var transform = void 0;\n      // If we haven't transformed this rule before, we iterate over all\n      // transforms:\n      if (rule.keyframeNamesToTransform == null) {\n        rule.keyframeNamesToTransform = [];\n        for (var keyframe in keyframeTransforms) {\n          transform = keyframeTransforms[keyframe];\n          output = transform(input);\n          // If the transform actually changed the CSS text, we cache the\n          // transform name for future use:\n          if (input !== output) {\n            input = output;\n            rule.keyframeNamesToTransform.push(keyframe);\n          }\n        }\n      } else {\n        // If we already have a list of keyframe names that apply to this\n        // rule, we apply only those keyframe name transforms:\n        for (var i = 0; i < rule.keyframeNamesToTransform.length; ++i) {\n          transform = keyframeTransforms[rule.keyframeNamesToTransform[i]];\n          input = transform(input);\n        }\n        output = input;\n      }\n    }\n    rule.cssText = output;\n  },\n\n  // Test if the rules in these styles matches the given `element` and if so,\n  // collect any custom properties into `props`.\n  propertyDataFromStyles: function propertyDataFromStyles(rules, element) {\n    var props = {},\n        self = this;\n    // generates a unique key for these matches\n    var o = [];\n    // note: active rules excludes non-matching @media rules\n    forEachRule(rules, function (rule) {\n      // TODO(sorvell): we could trim the set of rules at declaration\n      // time to only include ones that have properties\n      if (!rule.propertyInfo) {\n        self.decorateRule(rule);\n      }\n      // match element against transformedSelector: selector may contain\n      // unwanted uniquification and parsedSelector does not directly match\n      // for :host selectors.\n      var selectorToMatch = rule.transformedSelector || rule.parsedSelector;\n      if (element && rule.propertyInfo.properties && selectorToMatch) {\n        if (matchesSelector.call(element, selectorToMatch)) {\n          self.collectProperties(rule, props);\n          // produce numeric key for these matches for lookup\n          addToBitMask(rule.index, o);\n        }\n      }\n    }, null, true);\n    return { properties: props, key: o };\n  },\n\n  whenHostOrRootRule: function whenHostOrRootRule(scope, rule, cssBuild, callback) {\n    if (!rule.propertyInfo) {\n      this.decorateRule(rule);\n    }\n    if (!rule.propertyInfo.properties) {\n      return;\n    }\n    var hostScope = scope.is ? StyleTransformer._calcHostScope(scope.is, scope.extends) : 'html';\n    var parsedSelector = rule.parsedSelector;\n    var isRoot = parsedSelector === ':host > *' || parsedSelector === 'html';\n    var isHost = parsedSelector.indexOf(':host') === 0 && !isRoot;\n    // build info is either in scope (when scope is an element) or in the style\n    // when scope is the default scope; note: this allows default scope to have\n    // mixed mode built and unbuilt styles.\n    if (cssBuild === 'shady') {\n      // :root -> x-foo > *.x-foo for elements and html for custom-style\n      isRoot = parsedSelector === hostScope + ' > *.' + hostScope || parsedSelector.indexOf('html') !== -1;\n      // :host -> x-foo for elements, but sub-rules have .x-foo in them\n      isHost = !isRoot && parsedSelector.indexOf(hostScope) === 0;\n    }\n    if (cssBuild === 'shadow') {\n      isRoot = parsedSelector === ':host > *' || parsedSelector === 'html';\n      isHost = isHost && !isRoot;\n    }\n    if (!isRoot && !isHost) {\n      return;\n    }\n    var selectorToMatch = hostScope;\n    if (isHost) {\n      // need to transform :host under ShadowDOM because `:host` does not work with `matches`\n      if (nativeShadow && !rule.transformedSelector) {\n        // transform :host into a matchable selector\n        rule.transformedSelector = StyleTransformer._transformRuleCss(rule, StyleTransformer._transformComplexSelector, StyleTransformer._calcElementScope(scope.is), hostScope);\n      }\n      selectorToMatch = rule.transformedSelector || hostScope;\n    }\n    callback({\n      selector: selectorToMatch,\n      isHost: isHost,\n      isRoot: isRoot\n    });\n  },\n\n  hostAndRootPropertiesForScope: function hostAndRootPropertiesForScope(scope, rules) {\n    var hostProps = {},\n        rootProps = {},\n        self = this;\n    // note: active rules excludes non-matching @media rules\n    var cssBuild = rules && rules.__cssBuild;\n    forEachRule(rules, function (rule) {\n      // if scope is StyleDefaults, use _element for matchesSelector\n      self.whenHostOrRootRule(scope, rule, cssBuild, function (info) {\n        var element = scope._element || scope;\n        if (matchesSelector.call(element, info.selector)) {\n          if (info.isHost) {\n            self.collectProperties(rule, hostProps);\n          } else {\n            self.collectProperties(rule, rootProps);\n          }\n        }\n      });\n    }, null, true);\n    return { rootProps: rootProps, hostProps: hostProps };\n  },\n\n  transformStyles: function transformStyles(element, properties, scopeSelector) {\n    var self = this;\n    var hostSelector = StyleTransformer._calcHostScope(element.is, element.extends);\n    var rxHostSelector = element.extends ? '\\\\' + hostSelector.slice(0, -1) + '\\\\]' : hostSelector;\n    var hostRx = new RegExp(this.rx.HOST_PREFIX + rxHostSelector + this.rx.HOST_SUFFIX);\n    var rules = StyleInfo.get(element).styleRules;\n    var keyframeTransforms = this._elementKeyframeTransforms(element, rules, scopeSelector);\n    return StyleTransformer.elementStyles(element, rules, function (rule) {\n      self.applyProperties(rule, properties);\n      if (!nativeShadow && !isKeyframesSelector(rule) && rule.cssText) {\n        // NOTE: keyframe transforms only scope munge animation names, so it\n        // is not necessary to apply them in ShadowDOM.\n        self.applyKeyframeTransforms(rule, keyframeTransforms);\n        self._scopeSelector(rule, hostRx, hostSelector, scopeSelector);\n      }\n    });\n  },\n\n  _elementKeyframeTransforms: function _elementKeyframeTransforms(element, rules, scopeSelector) {\n    var keyframesRules = rules._keyframes;\n    var keyframeTransforms = {};\n    if (!nativeShadow && keyframesRules) {\n      // For non-ShadowDOM, we transform all known keyframes rules in\n      // advance for the current scope. This allows us to catch keyframes\n      // rules that appear anywhere in the stylesheet:\n      for (var i = 0, keyframesRule = keyframesRules[i]; i < keyframesRules.length; keyframesRule = keyframesRules[++i]) {\n        this._scopeKeyframes(keyframesRule, scopeSelector);\n        keyframeTransforms[keyframesRule.keyframesName] = this._keyframesRuleTransformer(keyframesRule);\n      }\n    }\n    return keyframeTransforms;\n  },\n\n  // Generate a factory for transforming a chunk of CSS text to handle a\n  // particular scoped keyframes rule.\n  _keyframesRuleTransformer: function _keyframesRuleTransformer(keyframesRule) {\n    return function (cssText) {\n      return cssText.replace(keyframesRule.keyframesNameRx, keyframesRule.transformedKeyframesName);\n    };\n  },\n\n  // Transforms `@keyframes` names to be unique for the current host.\n  // Example: @keyframes foo-anim -> @keyframes foo-anim-x-foo-0\n  _scopeKeyframes: function _scopeKeyframes(rule, scopeId) {\n    rule.keyframesNameRx = new RegExp(rule.keyframesName, 'g');\n    rule.transformedKeyframesName = rule.keyframesName + '-' + scopeId;\n    rule.transformedSelector = rule.transformedSelector || rule.selector;\n    rule.selector = rule.transformedSelector.replace(rule.keyframesName, rule.transformedKeyframesName);\n  },\n\n  // Strategy: x scope shim a selector e.g. to scope `.x-foo-42` (via classes):\n  // non-host selector: .a.x-foo -> .x-foo-42 .a.x-foo\n  // host selector: x-foo.wide -> .x-foo-42.wide\n  // note: we use only the scope class (.x-foo-42) and not the hostSelector\n  // (x-foo) to scope :host rules; this helps make property host rules\n  // have low specificity. They are overrideable by class selectors but,\n  // unfortunately, not by type selectors (e.g. overriding via\n  // `.special` is ok, but not by `x-foo`).\n  _scopeSelector: function _scopeSelector(rule, hostRx, hostSelector, scopeId) {\n    rule.transformedSelector = rule.transformedSelector || rule.selector;\n    var selector = rule.transformedSelector;\n    var scope = '.' + scopeId;\n    var parts = selector.split(',');\n    for (var i = 0, l = parts.length, _p2; i < l && (_p2 = parts[i]); i++) {\n      parts[i] = _p2.match(hostRx) ? _p2.replace(hostSelector, scope) : scope + ' ' + _p2;\n    }\n    rule.selector = parts.join(',');\n  },\n\n  applyElementScopeSelector: function applyElementScopeSelector(element, selector, old) {\n    var c = element.getAttribute('class') || '';\n    var v = c;\n    if (old) {\n      v = c.replace(new RegExp('\\\\s*' + this.XSCOPE_NAME + '\\\\s*' + old + '\\\\s*', 'g'), ' ');\n    }\n    v += (v ? ' ' : '') + this.XSCOPE_NAME + ' ' + selector;\n    if (c !== v) {\n      // hook from ShadyDOM\n      if (element.__nativeSetAttribute) {\n        element.__nativeSetAttribute('class', v);\n      } else {\n        element.setAttribute('class', v);\n      }\n    }\n  },\n\n  applyElementStyle: function applyElementStyle(element, properties, selector, style) {\n    // calculate cssText to apply\n    var cssText = style ? style.textContent || '' : this.transformStyles(element, properties, selector);\n    // if shady and we have a cached style that is not style, decrement\n    var styleInfo = StyleInfo.get(element);\n    var s = styleInfo.customStyle;\n    if (s && !nativeShadow && s !== style) {\n      s._useCount--;\n      if (s._useCount <= 0 && s.parentNode) {\n        s.parentNode.removeChild(s);\n      }\n    }\n    // apply styling always under native or if we generated style\n    // or the cached style is not in document(!)\n    if (nativeShadow) {\n      // update existing style only under native\n      if (styleInfo.customStyle) {\n        styleInfo.customStyle.textContent = cssText;\n        style = styleInfo.customStyle;\n        // otherwise, if we have css to apply, do so\n      } else if (cssText) {\n        // apply css after the scope style of the element to help with\n        // style precedence rules.\n        style = applyCss(cssText, selector, element.shadowRoot, styleInfo.placeholder);\n      }\n    } else {\n      // shady and no cache hit\n      if (!style) {\n        // apply css after the scope style of the element to help with\n        // style precedence rules.\n        if (cssText) {\n          style = applyCss(cssText, selector, null, styleInfo.placeholder);\n        }\n        // shady and cache hit but not in document\n      } else if (!style.parentNode) {\n        applyStyle$1(style, null, styleInfo.placeholder);\n      }\n    }\n    // ensure this style is our custom style and increment its use count.\n    if (style) {\n      style._useCount = style._useCount || 0;\n      // increment use count if we changed styles\n      if (styleInfo.customStyle != style) {\n        style._useCount++;\n      }\n      styleInfo.customStyle = style;\n    }\n    // @media rules may be stale in IE 10 and 11\n    if (IS_IE) {\n      style.textContent = style.textContent;\n    }\n    return style;\n  },\n\n  applyCustomStyle: function applyCustomStyle(style, properties) {\n    var rules = rulesForStyle(style);\n    var self = this;\n    style.textContent = toCssText(rules, function (rule) {\n      var css = rule.cssText = rule.parsedCssText;\n      if (rule.propertyInfo && rule.propertyInfo.cssText) {\n        // remove property assignments\n        // so next function isn't confused\n        // NOTE: we have 3 categories of css:\n        // (1) normal properties,\n        // (2) custom property assignments (--foo: red;),\n        // (3) custom property usage: border: var(--foo); @apply(--foo);\n        // In elements, 1 and 3 are separated for efficiency; here they\n        // are not and this makes this case unique.\n        css = removeCustomPropAssignment(css);\n        // replace with reified properties, scenario is same as mixin\n        rule.cssText = self.valueForProperties(css, properties);\n      }\n    });\n  },\n\n  rx: rx,\n  XSCOPE_NAME: 'x-scope'\n};\n\nfunction addToBitMask(n, bits) {\n  var o = parseInt(n / 32);\n  var v = 1 << n % 32;\n  bits[o] = (bits[o] || 0) | v;\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar templateMap = {};\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar placeholderMap = {};\n\nvar ce = window.customElements;\nif (ce && !nativeShadow) {\n  (function () {\n    var origDefine = ce.define;\n    ce.define = function (name, clazz, options) {\n      placeholderMap[name] = applyStylePlaceHolder(name);\n      return origDefine.call(ce, name, clazz, options);\n    };\n  })();\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nvar StyleCache = function () {\n  function StyleCache() {\n    var typeMax = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 100;\n    classCallCheck(this, StyleCache);\n\n    // map element name -> [{properties, styleElement, scopeSelector}]\n    this.cache = {};\n    this.typeMax = typeMax;\n  }\n\n  createClass(StyleCache, [{\n    key: '_validate',\n    value: function _validate(cacheEntry, properties, ownPropertyNames) {\n      for (var idx = 0; idx < ownPropertyNames.length; idx++) {\n        var pn = ownPropertyNames[idx];\n        if (cacheEntry.properties[pn] !== properties[pn]) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }, {\n    key: 'store',\n    value: function store(tagname, properties, styleElement, scopeSelector) {\n      var list = this.cache[tagname] || [];\n      list.push({ properties: properties, styleElement: styleElement, scopeSelector: scopeSelector });\n      if (list.length > this.typeMax) {\n        list.shift();\n      }\n      this.cache[tagname] = list;\n    }\n  }, {\n    key: 'fetch',\n    value: function fetch(tagname, properties, ownPropertyNames) {\n      var list = this.cache[tagname];\n      if (!list) {\n        return;\n      }\n      // reverse list for most-recent lookups\n      for (var idx = list.length - 1; idx >= 0; idx--) {\n        var entry = list[idx];\n        if (this._validate(entry, properties, ownPropertyNames)) {\n          return entry;\n        }\n      }\n    }\n  }]);\n  return StyleCache;\n}();\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/**\n * The apply shim simulates the behavior of `@apply` proposed at\n * https://tabatkins.github.io/specs/css-apply-rule/.\n * The approach is to convert a property like this:\n *\n *    --foo: {color: red; background: blue;}\n *\n * to this:\n *\n *    --foo_-_color: red;\n *    --foo_-_background: blue;\n *\n * Then where `@apply --foo` is used, that is converted to:\n *\n *    color: var(--foo_-_color);\n *    background: var(--foo_-_background);\n *\n * This approach generally works but there are some issues and limitations.\n * Consider, for example, that somewhere *between* where `--foo` is set and used,\n * another element sets it to:\n *\n *    --foo: { border: 2px solid red; }\n *\n * We must now ensure that the color and background from the previous setting\n * do not apply. This is accomplished by changing the property set to this:\n *\n *    --foo_-_border: 2px solid red;\n *    --foo_-_color: initial;\n *    --foo_-_background: initial;\n *\n * This works but introduces one new issue.\n * Consider this setup at the point where the `@apply` is used:\n *\n *    background: orange;\n *    @apply --foo;\n *\n * In this case the background will be unset (initial) rather than the desired\n * `orange`. We address this by altering the property set to use a fallback\n * value like this:\n *\n *    color: var(--foo_-_color);\n *    background: var(--foo_-_background, orange);\n *    border: var(--foo_-_border);\n *\n * Note that the default is retained in the property set and the `background` is\n * the desired `orange`. This leads us to a limitation.\n *\n * Limitation 1:\n\n * Only properties in the rule where the `@apply`\n * is used are considered as default values.\n * If another rule matches the element and sets `background` with\n * less specificity than the rule in which `@apply` appears,\n * the `background` will not be set.\n *\n * Limitation 2:\n *\n * When using Polymer's `updateStyles` api, new properties may not be set for\n * `@apply` properties.\n\n*/\n\nvar MIXIN_MATCH = rx.MIXIN_MATCH;\nvar VAR_ASSIGN = rx.VAR_ASSIGN;\n\nvar APPLY_NAME_CLEAN = /;\\s*/m;\nvar INITIAL_INHERIT = /^\\s*(initial)|(inherit)\\s*$/;\n\n// separator used between mixin-name and mixin-property-name when producing properties\n// NOTE: plain '-' may cause collisions in user styles\nvar MIXIN_VAR_SEP = '_-_';\n\n// map of mixin to property names\n// --foo: {border: 2px} -> {properties: {(--foo, ['border'])}, dependants: {'element-name': proto}}\n\nvar MixinMap = function () {\n  function MixinMap() {\n    classCallCheck(this, MixinMap);\n\n    this._map = {};\n  }\n\n  createClass(MixinMap, [{\n    key: 'set',\n    value: function set(name, props) {\n      name = name.trim();\n      this._map[name] = {\n        properties: props,\n        dependants: {}\n      };\n    }\n  }, {\n    key: 'get',\n    value: function get(name) {\n      name = name.trim();\n      return this._map[name];\n    }\n  }]);\n  return MixinMap;\n}();\n\nvar ApplyShim = function () {\n  function ApplyShim() {\n    var _this = this;\n\n    classCallCheck(this, ApplyShim);\n\n    this._currentTemplate = null;\n    this._measureElement = null;\n    this._map = new MixinMap();\n    this._separator = MIXIN_VAR_SEP;\n    this._boundProduceCssProperties = function (matchText, propertyName, valueProperty, valueMixin) {\n      return _this._produceCssProperties(matchText, propertyName, valueProperty, valueMixin);\n    };\n  }\n\n  createClass(ApplyShim, [{\n    key: 'transformStyle',\n    value: function transformStyle(style, elementName) {\n      var ast = rulesForStyle(style);\n      this.transformRules(ast, elementName);\n      return ast;\n    }\n  }, {\n    key: 'transformRules',\n    value: function transformRules(rules, elementName) {\n      var _this2 = this;\n\n      this._currentTemplate = templateMap[elementName];\n      forEachRule(rules, function (r) {\n        _this2.transformRule(r);\n      });\n      if (this._currentTemplate) {\n        this._currentTemplate.__applyShimInvalid = false;\n      }\n      this._currentTemplate = null;\n    }\n  }, {\n    key: 'transformRule',\n    value: function transformRule(rule) {\n      rule.cssText = this.transformCssText(rule.parsedCssText);\n      // :root was only used for variable assignment in property shim,\n      // but generates invalid selectors with real properties.\n      // replace with `:host > *`, which serves the same effect\n      if (rule.selector === ':root') {\n        rule.selector = ':host > *';\n      }\n    }\n  }, {\n    key: 'transformCssText',\n    value: function transformCssText(cssText) {\n      // produce variables\n      cssText = cssText.replace(VAR_ASSIGN, this._boundProduceCssProperties);\n      // consume mixins\n      return this._consumeCssProperties(cssText);\n    }\n  }, {\n    key: '_getInitialValueForProperty',\n    value: function _getInitialValueForProperty(property) {\n      if (!this._measureElement) {\n        this._measureElement = document.createElement('meta');\n        this._measureElement.style.all = 'initial';\n        document.head.appendChild(this._measureElement);\n      }\n      return window.getComputedStyle(this._measureElement).getPropertyValue(property);\n    }\n    // replace mixin consumption with variable consumption\n\n  }, {\n    key: '_consumeCssProperties',\n    value: function _consumeCssProperties(text) {\n      var m = void 0;\n      // loop over text until all mixins with defintions have been applied\n      while (m = MIXIN_MATCH.exec(text)) {\n        var matchText = m[0];\n        var mixinName = m[1];\n        var idx = m.index;\n        // collect properties before apply to be \"defaults\" if mixin might override them\n        // match includes a \"prefix\", so find the start and end positions of @apply\n        var applyPos = idx + matchText.indexOf('@apply');\n        var afterApplyPos = idx + matchText.length;\n        // find props defined before this @apply\n        var textBeforeApply = text.slice(0, applyPos);\n        var textAfterApply = text.slice(afterApplyPos);\n        var defaults$$1 = this._cssTextToMap(textBeforeApply);\n        var replacement = this._atApplyToCssProperties(mixinName, defaults$$1);\n        // use regex match position to replace mixin, keep linear processing time\n        text = [textBeforeApply, replacement, textAfterApply].join('');\n        // move regex search to _after_ replacement\n        MIXIN_MATCH.lastIndex = idx + replacement.length;\n      }\n      return text;\n    }\n    // produce variable consumption at the site of mixin consumption\n    // @apply --foo; -> for all props (${propname}: var(--foo_-_${propname}, ${fallback[propname]}}))\n    // Example:\n    // border: var(--foo_-_border); padding: var(--foo_-_padding, 2px)\n\n  }, {\n    key: '_atApplyToCssProperties',\n    value: function _atApplyToCssProperties(mixinName, fallbacks) {\n      mixinName = mixinName.replace(APPLY_NAME_CLEAN, '');\n      var vars = [];\n      var mixinEntry = this._map.get(mixinName);\n      // if we depend on a mixin before it is created\n      // make a sentinel entry in the map to add this element as a dependency for when it is defined.\n      if (!mixinEntry) {\n        this._map.set(mixinName, {});\n        mixinEntry = this._map.get(mixinName);\n      }\n      if (mixinEntry) {\n        if (this._currentTemplate) {\n          mixinEntry.dependants[this._currentTemplate.name] = this._currentTemplate;\n        }\n        var p = void 0,\n            parts = void 0,\n            f = void 0;\n        for (p in mixinEntry.properties) {\n          f = fallbacks && fallbacks[p];\n          parts = [p, ': var(', mixinName, MIXIN_VAR_SEP, p];\n          if (f) {\n            parts.push(',', f);\n          }\n          parts.push(')');\n          vars.push(parts.join(''));\n        }\n      }\n      return vars.join('; ');\n    }\n  }, {\n    key: '_replaceInitialOrInherit',\n    value: function _replaceInitialOrInherit(property, value) {\n      var match = INITIAL_INHERIT.exec(value);\n      if (match) {\n        if (match[1]) {\n          // initial\n          // replace `initial` with the concrete initial value for this property\n          value = ApplyShim._getInitialValueForProperty(property);\n        } else {\n          // inherit\n          // with this purposfully illegal value, the variable will be invalid at\n          // compute time (https://www.w3.org/TR/css-variables/#invalid-at-computed-value-time)\n          // and for inheriting values, will behave similarly\n          // we cannot support the same behavior for non inheriting values like 'border'\n          value = 'apply-shim-inherit';\n        }\n      }\n      return value;\n    }\n\n    // \"parse\" a mixin definition into a map of properties and values\n    // cssTextToMap('border: 2px solid black') -> ('border', '2px solid black')\n\n  }, {\n    key: '_cssTextToMap',\n    value: function _cssTextToMap(text) {\n      var props = text.split(';');\n      var property = void 0,\n          value = void 0;\n      var out = {};\n      for (var i = 0, p, sp; i < props.length; i++) {\n        p = props[i];\n        if (p) {\n          sp = p.split(':');\n          // ignore lines that aren't definitions like @media\n          if (sp.length > 1) {\n            property = sp[0].trim();\n            // some properties may have ':' in the value, like data urls\n            value = this._replaceInitialOrInherit(property, sp.slice(1).join(':'));\n            out[property] = value;\n          }\n        }\n      }\n      return out;\n    }\n  }, {\n    key: '_invalidateMixinEntry',\n    value: function _invalidateMixinEntry(mixinEntry) {\n      for (var elementName in mixinEntry.dependants) {\n        if (elementName !== this._currentTemplate) {\n          mixinEntry.dependants[elementName].__applyShimInvalid = true;\n        }\n      }\n    }\n  }, {\n    key: '_produceCssProperties',\n    value: function _produceCssProperties(matchText, propertyName, valueProperty, valueMixin) {\n      var _this3 = this;\n\n      // handle case where property value is a mixin\n      if (valueProperty) {\n        // form: --mixin2: var(--mixin1), where --mixin1 is in the map\n        processVariableAndFallback(valueProperty, function (prefix, value) {\n          if (value && _this3._map.get(value)) {\n            valueMixin = '@apply ' + value + ';';\n          }\n        });\n      }\n      if (!valueMixin) {\n        return matchText;\n      }\n      var mixinAsProperties = this._consumeCssProperties(valueMixin);\n      var prefix = matchText.slice(0, matchText.indexOf('--'));\n      var mixinValues = this._cssTextToMap(mixinAsProperties);\n      var combinedProps = mixinValues;\n      var mixinEntry = this._map.get(propertyName);\n      var oldProps = mixinEntry && mixinEntry.properties;\n      if (oldProps) {\n        // NOTE: since we use mixin, the map of properties is updated here\n        // and this is what we want.\n        combinedProps = Object.assign(Object.create(oldProps), mixinValues);\n      } else {\n        this._map.set(propertyName, combinedProps);\n      }\n      var out = [];\n      var p = void 0,\n          v = void 0;\n      // set variables defined by current mixin\n      var needToInvalidate = false;\n      for (p in combinedProps) {\n        v = mixinValues[p];\n        // if property not defined by current mixin, set initial\n        if (v === undefined) {\n          v = 'initial';\n        }\n        if (oldProps && !(p in oldProps)) {\n          needToInvalidate = true;\n        }\n        out.push(propertyName + MIXIN_VAR_SEP + p + ': ' + v);\n      }\n      if (needToInvalidate) {\n        this._invalidateMixinEntry(mixinEntry);\n      }\n      if (mixinEntry) {\n        mixinEntry.properties = combinedProps;\n      }\n      // because the mixinMap is global, the mixin might conflict with\n      // a different scope's simple variable definition:\n      // Example:\n      // some style somewhere:\n      // --mixin1:{ ... }\n      // --mixin2: var(--mixin1);\n      // some other element:\n      // --mixin1: 10px solid red;\n      // --foo: var(--mixin1);\n      // In this case, we leave the original variable definition in place.\n      if (valueProperty) {\n        prefix = matchText + ';' + prefix;\n      }\n      return prefix + out.join('; ') + ';';\n    }\n  }]);\n  return ApplyShim;\n}();\n\nvar applyShim = new ApplyShim();\nwindow['ApplyShim'] = applyShim;\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nvar flush = function flush() {};\n\nif (!nativeShadow) {\n  (function () {\n    var elementNeedsScoping = function elementNeedsScoping(element) {\n      return element.classList && !element.classList.contains(StyleTransformer.SCOPE_NAME) ||\n      // note: necessary for IE11\n      element instanceof SVGElement && (!element.hasAttribute('class') || element.getAttribute('class').indexOf(StyleTransformer.SCOPE_NAME) < 0);\n    };\n\n    var handler = function handler(mxns) {\n      for (var x = 0; x < mxns.length; x++) {\n        var mxn = mxns[x];\n        if (mxn.target === document.documentElement || mxn.target === document.head) {\n          continue;\n        }\n        for (var i = 0; i < mxn.addedNodes.length; i++) {\n          var n = mxn.addedNodes[i];\n          if (elementNeedsScoping(n)) {\n            var root = n.getRootNode();\n            if (root.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n              // may no longer be in a shadowroot\n              var host = root.host;\n              if (host) {\n                var scope = host.is || host.localName;\n                StyleTransformer.dom(n, scope);\n              }\n            }\n          }\n        }\n        for (var _i = 0; _i < mxn.removedNodes.length; _i++) {\n          var _n = mxn.removedNodes[_i];\n          if (_n.nodeType === Node.ELEMENT_NODE) {\n            var classes = undefined;\n            if (_n.classList) {\n              classes = Array.from(_n.classList);\n            } else if (_n.hasAttribute('class')) {\n              classes = _n.getAttribute('class').split(/\\s+/);\n            }\n            if (classes !== undefined) {\n              // NOTE: relies on the scoping class always being adjacent to the\n              // SCOPE_NAME class.\n              var classIdx = classes.indexOf(StyleTransformer.SCOPE_NAME);\n              if (classIdx >= 0) {\n                var _scope = classes[classIdx + 1];\n                if (_scope) {\n                  StyleTransformer.dom(_n, _scope, true);\n                }\n              }\n            }\n          }\n        }\n      }\n    };\n\n    var observer = new MutationObserver(handler);\n    var start = function start(node) {\n      observer.observe(node, { childList: true, subtree: true });\n    };\n    var nativeCustomElements = window.customElements && !window.customElements.flush;\n    // need to start immediately with native custom elements\n    // TODO(dfreedm): with polyfilled HTMLImports and native custom elements\n    // excessive mutations may be observed; this can be optimized via cooperation\n    // with the HTMLImports polyfill.\n    if (nativeCustomElements) {\n      start(document);\n    } else {\n      (function () {\n        var delayedStart = function delayedStart() {\n          start(document.body);\n        };\n        // use polyfill timing if it's available\n        if (window.HTMLImports) {\n          window.HTMLImports.whenReady(delayedStart);\n          // otherwise push beyond native imports being ready\n          // which requires RAF + readystate interactive.\n        } else {\n          requestAnimationFrame(function () {\n            if (document.readyState === 'loading') {\n              (function () {\n                var listener = function listener() {\n                  delayedStart();\n                  document.removeEventListener('readystatechange', listener);\n                };\n                document.addEventListener('readystatechange', listener);\n              })();\n            } else {\n              delayedStart();\n            }\n          });\n        }\n      })();\n    }\n\n    flush = function flush() {\n      handler(observer.takeRecords());\n    };\n  })();\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// TODO(dfreedm): consider spliting into separate global\nvar styleCache = new StyleCache();\n\nvar ShadyCSS = {\n  flush: flush,\n  scopeCounter: {},\n  nativeShadow: nativeShadow,\n  nativeCss: nativeCssVariables,\n  nativeCssApply: nativeCssApply,\n  _documentOwner: document.documentElement,\n  _documentOwnerStyleInfo: StyleInfo.set(document.documentElement, new StyleInfo({ rules: [] })),\n  _generateScopeSelector: function _generateScopeSelector(name) {\n    var id = this.scopeCounter[name] = (this.scopeCounter[name] || 0) + 1;\n    return name + '-' + id;\n  },\n  getStyleAst: function getStyleAst(style) {\n    return rulesForStyle(style);\n  },\n  styleAstToString: function styleAstToString(ast) {\n    return toCssText(ast);\n  },\n  _gatherStyles: function _gatherStyles(template) {\n    var styles = template.content.querySelectorAll('style');\n    var cssText = [];\n    for (var i = 0; i < styles.length; i++) {\n      var s = styles[i];\n      cssText.push(s.textContent);\n      s.parentNode.removeChild(s);\n    }\n    return cssText.join('').trim();\n  },\n  _getCssBuild: function _getCssBuild(template) {\n    var style = template.content.querySelector('style');\n    if (!style) {\n      return '';\n    }\n    return style.getAttribute('css-build') || '';\n  },\n  prepareTemplate: function prepareTemplate(template, elementName, typeExtension) {\n    if (template._prepared) {\n      return;\n    }\n    template._prepared = true;\n    template.name = elementName;\n    template.extends = typeExtension;\n    templateMap[elementName] = template;\n    var cssBuild = this._getCssBuild(template);\n    var cssText = this._gatherStyles(template);\n    var info = {\n      is: elementName,\n      extends: typeExtension,\n      __cssBuild: cssBuild\n    };\n    if (!this.nativeShadow) {\n      StyleTransformer.dom(template.content, elementName);\n    }\n    var ast = parse(cssText);\n    if (this.nativeCss && !this.nativeCssApply) {\n      applyShim.transformRules(ast, elementName);\n    }\n    template._styleAst = ast;\n\n    var ownPropertyNames = [];\n    if (!this.nativeCss) {\n      ownPropertyNames = StyleProperties.decorateStyles(template._styleAst, info);\n    }\n    if (!ownPropertyNames.length || this.nativeCss) {\n      var root = this.nativeShadow ? template.content : null;\n      var placeholder = placeholderMap[elementName];\n      var style = this._generateStaticStyle(info, template._styleAst, root, placeholder);\n      template._style = style;\n    }\n    template._ownPropertyNames = ownPropertyNames;\n  },\n  _generateStaticStyle: function _generateStaticStyle(info, rules, shadowroot, placeholder) {\n    var cssText = StyleTransformer.elementStyles(info, rules);\n    if (cssText.length) {\n      return applyCss(cssText, info.is, shadowroot, placeholder);\n    }\n  },\n  _prepareHost: function _prepareHost(host) {\n    var is = host.getAttribute('is') || host.localName;\n    var typeExtension = void 0;\n    if (is !== host.localName) {\n      typeExtension = host.localName;\n    }\n    var placeholder = placeholderMap[is];\n    var template = templateMap[is];\n    var ast = void 0;\n    var ownStylePropertyNames = void 0;\n    var cssBuild = void 0;\n    if (template) {\n      ast = template._styleAst;\n      ownStylePropertyNames = template._ownPropertyNames;\n      cssBuild = template._cssBuild;\n    }\n    return StyleInfo.set(host, new StyleInfo(ast, placeholder, ownStylePropertyNames, is, typeExtension, cssBuild));\n  },\n  applyStyle: function applyStyle(host, overrideProps) {\n    var is = host.getAttribute('is') || host.localName;\n    if (window.CustomStyle) {\n      var CS = window.CustomStyle;\n      if (CS._documentDirty) {\n        CS.findStyles();\n        if (!this.nativeCss) {\n          this._updateProperties(this._documentOwner, this._documentOwnerStyleInfo);\n        } else if (!this.nativeCssApply) {\n          CS._revalidateApplyShim();\n        }\n        CS.applyStyles();\n        CS._documentDirty = false;\n      }\n    }\n    var styleInfo = StyleInfo.get(host);\n    var hasApplied = Boolean(styleInfo);\n    if (!styleInfo) {\n      styleInfo = this._prepareHost(host);\n    }\n    if (overrideProps) {\n      styleInfo.overrideStyleProperties = styleInfo.overrideStyleProperties || {};\n      Object.assign(styleInfo.overrideStyleProperties, overrideProps);\n    }\n    if (this.nativeCss) {\n      var template = templateMap[is];\n      if (template && template.__applyShimInvalid && template._style) {\n        // update template\n        applyShim.transformRules(template._styleAst, is);\n        template._style.textContent = StyleTransformer.elementStyles(host, styleInfo.styleRules);\n        // update instance if native shadowdom\n        if (this.nativeShadow) {\n          var style = host.shadowRoot.querySelector('style');\n          style.textContent = StyleTransformer.elementStyles(host, styleInfo.styleRules);\n        }\n        styleInfo.styleRules = template._styleAst;\n      }\n      this._updateNativeProperties(host, styleInfo.overrideStyleProperties);\n    } else {\n      this._updateProperties(host, styleInfo);\n      if (styleInfo.ownStylePropertyNames && styleInfo.ownStylePropertyNames.length) {\n        // TODO: use caching\n        this._applyStyleProperties(host, styleInfo);\n      }\n    }\n    if (hasApplied) {\n      var root = this._isRootOwner(host) ? host : host.shadowRoot;\n      // note: some elements may not have a root!\n      if (root) {\n        this._applyToDescendants(root);\n      }\n    }\n  },\n  _applyToDescendants: function _applyToDescendants(root) {\n    var c$ = root.children;\n    for (var i = 0, c; i < c$.length; i++) {\n      c = c$[i];\n      if (c.shadowRoot) {\n        this.applyStyle(c);\n      }\n      this._applyToDescendants(c);\n    }\n  },\n  _styleOwnerForNode: function _styleOwnerForNode(node) {\n    var root = node.getRootNode();\n    var host = root.host;\n    if (host) {\n      if (StyleInfo.get(host)) {\n        return host;\n      } else {\n        return this._styleOwnerForNode(host);\n      }\n    }\n    return this._documentOwner;\n  },\n  _isRootOwner: function _isRootOwner(node) {\n    return node === this._documentOwner;\n  },\n  _applyStyleProperties: function _applyStyleProperties(host, styleInfo) {\n    var is = host.getAttribute('is') || host.localName;\n    var cacheEntry = styleCache.fetch(is, styleInfo.styleProperties, styleInfo.ownStylePropertyNames);\n    var cachedScopeSelector = cacheEntry && cacheEntry.scopeSelector;\n    var cachedStyle = cacheEntry ? cacheEntry.styleElement : null;\n    var oldScopeSelector = styleInfo.scopeSelector;\n    // only generate new scope if cached style is not found\n    styleInfo.scopeSelector = cachedScopeSelector || this._generateScopeSelector(is);\n    var style = StyleProperties.applyElementStyle(host, styleInfo.styleProperties, styleInfo.scopeSelector, cachedStyle);\n    if (!this.nativeShadow) {\n      StyleProperties.applyElementScopeSelector(host, styleInfo.scopeSelector, oldScopeSelector);\n    }\n    if (!cacheEntry) {\n      styleCache.store(is, styleInfo.styleProperties, style, styleInfo.scopeSelector);\n    }\n    return style;\n  },\n  _updateProperties: function _updateProperties(host, styleInfo) {\n    var owner = this._styleOwnerForNode(host);\n    var ownerStyleInfo = StyleInfo.get(owner);\n    var ownerProperties = ownerStyleInfo.styleProperties;\n    var props = Object.create(ownerProperties || null);\n    var hostAndRootProps = StyleProperties.hostAndRootPropertiesForScope(host, styleInfo.styleRules);\n    var propertyData = StyleProperties.propertyDataFromStyles(ownerStyleInfo.styleRules, host);\n    var propertiesMatchingHost = propertyData.properties;\n    Object.assign(props, hostAndRootProps.hostProps, propertiesMatchingHost, hostAndRootProps.rootProps);\n    this._mixinOverrideStyles(props, styleInfo.overrideStyleProperties);\n    StyleProperties.reify(props);\n    styleInfo.styleProperties = props;\n  },\n  _mixinOverrideStyles: function _mixinOverrideStyles(props, overrides) {\n    for (var p in overrides) {\n      var v = overrides[p];\n      // skip override props if they are not truthy or 0\n      // in order to fall back to inherited values\n      if (v || v === 0) {\n        props[p] = v;\n      }\n    }\n  },\n  _updateNativeProperties: function _updateNativeProperties(element, properties) {\n    // remove previous properties\n    for (var p in properties) {\n      // NOTE: for bc with shim, don't apply null values.\n      if (p === null) {\n        element.style.removeProperty(p);\n      } else {\n        element.style.setProperty(p, properties[p]);\n      }\n    }\n  },\n  updateStyles: function updateStyles(properties) {\n    if (window.CustomStyle) {\n      window.CustomStyle._documentDirty = true;\n    }\n    this.applyStyle(this._documentOwner, properties);\n  },\n\n  /* Custom Style operations */\n  _transformCustomStyleForDocument: function _transformCustomStyleForDocument(style) {\n    var _this = this;\n\n    var ast = rulesForStyle(style);\n    forEachRule(ast, function (rule) {\n      if (nativeShadow) {\n        StyleTransformer.normalizeRootSelector(rule);\n      } else {\n        StyleTransformer.documentRule(rule);\n      }\n      if (_this.nativeCss && !_this.nativeCssApply) {\n        applyShim.transformRule(rule);\n      }\n    });\n    if (this.nativeCss) {\n      style.textContent = toCssText(ast);\n    } else {\n      this._documentOwnerStyleInfo.styleRules.rules.push(ast);\n    }\n  },\n  _revalidateApplyShim: function _revalidateApplyShim(style) {\n    if (this.nativeCss && !this.nativeCssApply) {\n      var ast = rulesForStyle(style);\n      applyShim.transformRules(ast);\n      style.textContent = toCssText(ast);\n    }\n  },\n  _applyCustomStyleToDocument: function _applyCustomStyleToDocument(style) {\n    if (!this.nativeCss) {\n      StyleProperties.applyCustomStyle(style, this._documentOwnerStyleInfo.styleProperties);\n    }\n  },\n  getComputedStyleValue: function getComputedStyleValue(element, property) {\n    var value = void 0;\n    if (!this.nativeCss) {\n      // element is either a style host, or an ancestor of a style host\n      var styleInfo = StyleInfo.get(element) || StyleInfo.get(this._styleOwnerForNode(element));\n      value = styleInfo.styleProperties[property];\n    }\n    // fall back to the property value from the computed styling\n    value = value || window.getComputedStyle(element).getPropertyValue(property);\n    // trim whitespace that can come after the `:` in css\n    // example: padding: 2px -> \" 2px\"\n    return value.trim();\n  },\n\n  // given an element and a classString, replaces\n  // the element's class with the provided classString and adds\n  // any necessary ShadyCSS static and property based scoping selectors\n  setElementClass: function setElementClass(element, classString) {\n    var root = element.getRootNode();\n    var classes = classString ? classString.split(/\\s/) : [];\n    var scopeName = root.host && root.host.localName;\n    // If no scope, try to discover scope name from existing class.\n    // This can occur if, for example, a template stamped element that\n    // has been scoped is manipulated when not in a root.\n    if (!scopeName) {\n      var classAttr = element.getAttribute('class');\n      if (classAttr) {\n        var k$ = classAttr.split(/\\s/);\n        for (var i = 0; i < k$.length; i++) {\n          if (k$[i] === StyleTransformer.SCOPE_NAME) {\n            scopeName = k$[i + 1];\n            break;\n          }\n        }\n      }\n    }\n    if (scopeName) {\n      classes.push(StyleTransformer.SCOPE_NAME, scopeName);\n    }\n    if (!this.nativeCss) {\n      var styleInfo = StyleInfo.get(element);\n      if (styleInfo && styleInfo.scopeSelector) {\n        classes.push(StyleProperties.XSCOPE_NAME, styleInfo.scopeSelector);\n      }\n    }\n    setElementClassRaw(element, classes.join(' '));\n  },\n  _styleInfoForNode: function _styleInfoForNode(node) {\n    return StyleInfo.get(node);\n  }\n};\n\nwindow['ShadyCSS'] = ShadyCSS;\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/*\nWrapper over <style> elements to co-operate with ShadyCSS\n\nExample:\n<shady-style>\n  <style>\n  ...\n  </style>\n</shady-style>\n*/\n\nvar ShadyCSS$1 = window.ShadyCSS;\n\nvar enqueued = false;\n\nvar customStyles = [];\n\nvar hookFn = null;\n\n/*\nIf a page only has <custom-style> elements, it will flash unstyled content,\nas all the instances will boot asynchronously after page load.\n\nCalling ShadyCSS.updateStyles() will force the work to happen synchronously\n*/\nfunction enqueueDocumentValidation() {\n  if (enqueued) {\n    return;\n  }\n  enqueued = true;\n  if (window.HTMLImports) {\n    window.HTMLImports.whenReady(validateDocument);\n  } else if (document.readyState === 'complete') {\n    validateDocument();\n  } else {\n    document.addEventListener('readystatechange', function () {\n      if (document.readyState === 'complete') {\n        validateDocument();\n      }\n    });\n  }\n}\n\nfunction validateDocument() {\n  requestAnimationFrame(function () {\n    if (enqueued) {\n      ShadyCSS$1.updateStyles();\n      enqueued = false;\n    }\n  });\n}\n\nfunction CustomStyle() {\n  /*\n  Use Reflect to invoke the HTMLElement constructor, or rely on the\n  CustomElement polyfill replacement that can be `.call`ed\n  */\n  var self = window.Reflect && Reflect.construct ? Reflect.construct(HTMLElement, [], this.constructor || CustomStyle) : HTMLElement.call(this);\n  customStyles.push(self);\n  enqueueDocumentValidation();\n  return self;\n}\n\nObject.defineProperties(CustomStyle, {\n  /*\n  CustomStyle.processHook is provided to customize the <style> element child of\n  a <custom-style> element before the <style> is processed by ShadyCSS\n   The function must take a <style> element as input, and return nothing.\n  */\n  processHook: {\n    get: function get() {\n      return hookFn;\n    },\n    set: function set(fn) {\n      hookFn = fn;\n      return fn;\n    }\n  },\n  _customStyles: {\n    get: function get() {\n      return customStyles;\n    }\n  },\n  _documentDirty: {\n    get: function get() {\n      return enqueued;\n    },\n    set: function set(value) {\n      enqueued = value;\n      return value;\n    }\n  }\n});\n\nCustomStyle.findStyles = function () {\n  for (var i = 0; i < customStyles.length; i++) {\n    customStyles[i]._findStyle();\n  }\n};\n\nCustomStyle._revalidateApplyShim = function () {\n  for (var i = 0; i < customStyles.length; i++) {\n    var s = customStyles[i];\n    if (s._style) {\n      ShadyCSS$1._revalidateApplyShim(s._style);\n    }\n  }\n};\n\nCustomStyle.applyStyles = function () {\n  for (var i = 0; i < customStyles.length; i++) {\n    customStyles[i]._applyStyle();\n  }\n};\n\nCustomStyle.prototype = Object.create(HTMLElement.prototype, {\n  'constructor': {\n    value: CustomStyle,\n    configurable: true,\n    writable: true\n  }\n});\n\nCustomStyle.prototype._findStyle = function () {\n  if (!this._style) {\n    var style = this.querySelector('style');\n    if (!style) {\n      return;\n    }\n    // HTMLImports polyfill may have cloned the style into the main document,\n    // which is referenced with __appliedElement.\n    // Also, we must copy over the attributes.\n    if (style.__appliedElement) {\n      for (var i = 0; i < style.attributes.length; i++) {\n        var attr = style.attributes[i];\n        style.__appliedElement.setAttribute(attr.name, attr.value);\n      }\n    }\n    this._style = style.__appliedElement || style;\n    if (hookFn) {\n      hookFn(this._style);\n    }\n    ShadyCSS$1._transformCustomStyleForDocument(this._style);\n  }\n};\n\nCustomStyle.prototype._applyStyle = function () {\n  if (this._style) {\n    ShadyCSS$1._applyCustomStyleToDocument(this._style);\n  }\n};\n\nwindow.customElements.define('custom-style', CustomStyle);\nwindow['CustomStyle'] = CustomStyle;\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/*\nSmall module to load ShadyCSS and CustomStyle together\n*/\n\n}());\n\n//# sourceMappingURL=shadycss.min.js.map\n","import keys from './get-all-keys';\n\n// We are not using Object.assign if it is defined since it will cause problems when Symbol is polyfilled.\n// Apparently Object.assign (or any polyfill for this method) does not copy non-native Symbols.\nexport default (obj, ...args) => {\n  args.forEach(arg => keys(arg).forEach(name => obj[name] = arg[name])); // eslint-disable-line no-return-assign\n  return obj;\n};\n","export const connected = '____skate_connected';\nexport const created = '____skate_created';\n\n// DEPRECATED\n//\n// This is the only \"symbol\" that must stay a string. This is because it is\n// relied upon across several versions. We should remove it, but ensure that\n// it's considered a breaking change that whatever version removes it cannot\n// be passed to vdom functions as tag names.\nexport const name = '____skate_name';\n\n// Used on the Constructor\nexport const ctorCreateInitProps = '____skate_ctor_createInitProps';\nexport const ctorObservedAttributes = '____skate_ctor_observedAttributes';\nexport const ctorProps = '____skate_ctor_props';\nexport const ctorPropsMap = '____skate_ctor_propsMap';\n\n// Used on the Element\nexport const props = '____skate_props';\nexport const ref = '____skate_ref';\nexport const renderer = '____skate_renderer';\nexport const rendering = '____skate_rendering';\nexport const rendererDebounced = '____skate_rendererDebounced';\nexport const updated = '____skate_updated';\n","\n/**\n * @license\n * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'use strict';\n\n/**\n * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * A cached reference to the hasOwnProperty function.\n */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * A cached reference to the create function.\n */\nvar create = Object.create;\n\n/**\n * Used to prevent property collisions between our \"map\" and its prototype.\n * @param {!Object<string, *>} map The map to check.\n * @param {string} property The property to check.\n * @return {boolean} Whether map has property.\n */\nvar has = function (map, property) {\n  return hasOwnProperty.call(map, property);\n};\n\n/**\n * Creates an map object without a prototype.\n * @return {!Object}\n */\nvar createMap = function () {\n  return create(null);\n};\n\n/**\n * Keeps track of information needed to perform diffs for a given DOM node.\n * @param {!string} nodeName\n * @param {?string=} key\n * @constructor\n */\nfunction NodeData(nodeName, key) {\n  /**\n   * The attributes and their values.\n   * @const {!Object<string, *>}\n   */\n  this.attrs = createMap();\n\n  /**\n   * An array of attribute name/value pairs, used for quickly diffing the\n   * incomming attributes to see if the DOM node's attributes need to be\n   * updated.\n   * @const {Array<*>}\n   */\n  this.attrsArr = [];\n\n  /**\n   * The incoming attributes for this Node, before they are updated.\n   * @const {!Object<string, *>}\n   */\n  this.newAttrs = createMap();\n\n  /**\n   * The key used to identify this node, used to preserve DOM nodes when they\n   * move within their parent.\n   * @const\n   */\n  this.key = key;\n\n  /**\n   * Keeps track of children within this node by their key.\n   * {?Object<string, !Element>}\n   */\n  this.keyMap = null;\n\n  /**\n   * Whether or not the keyMap is currently valid.\n   * {boolean}\n   */\n  this.keyMapValid = true;\n\n  /**\n   * The node name for this node.\n   * @const {string}\n   */\n  this.nodeName = nodeName;\n\n  /**\n   * @type {?string}\n   */\n  this.text = null;\n}\n\n/**\n * Initializes a NodeData object for a Node.\n *\n * @param {Node} node The node to initialize data for.\n * @param {string} nodeName The node name of node.\n * @param {?string=} key The key that identifies the node.\n * @return {!NodeData} The newly initialized data object\n */\nvar initData = function (node, nodeName, key) {\n  var data = new NodeData(nodeName, key);\n  node['__incrementalDOMData'] = data;\n  return data;\n};\n\n/**\n * Retrieves the NodeData object for a Node, creating it if necessary.\n *\n * @param {Node} node The node to retrieve the data for.\n * @return {!NodeData} The NodeData for this Node.\n */\nvar getData = function (node) {\n  var data = node['__incrementalDOMData'];\n\n  if (!data) {\n    var nodeName = node.nodeName.toLowerCase();\n    var key = null;\n\n    if (node instanceof Element) {\n      key = node.getAttribute('key');\n    }\n\n    data = initData(node, nodeName, key);\n  }\n\n  return data;\n};\n\n/**\n * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @const */\nvar symbols = {\n  default: '__default',\n\n  placeholder: '__placeholder'\n};\n\n/**\n * @param {string} name\n * @return {string|undefined} The namespace to use for the attribute.\n */\nvar getNamespace = function (name) {\n  if (name.lastIndexOf('xml:', 0) === 0) {\n    return 'http://www.w3.org/XML/1998/namespace';\n  }\n\n  if (name.lastIndexOf('xlink:', 0) === 0) {\n    return 'http://www.w3.org/1999/xlink';\n  }\n};\n\n/**\n * Applies an attribute or property to a given Element. If the value is null\n * or undefined, it is removed from the Element. Otherwise, the value is set\n * as an attribute.\n * @param {!Element} el\n * @param {string} name The attribute's name.\n * @param {?(boolean|number|string)=} value The attribute's value.\n */\nvar applyAttr = function (el, name, value) {\n  if (value == null) {\n    el.removeAttribute(name);\n  } else {\n    var attrNS = getNamespace(name);\n    if (attrNS) {\n      el.setAttributeNS(attrNS, name, value);\n    } else {\n      el.setAttribute(name, value);\n    }\n  }\n};\n\n/**\n * Applies a property to a given Element.\n * @param {!Element} el\n * @param {string} name The property's name.\n * @param {*} value The property's value.\n */\nvar applyProp = function (el, name, value) {\n  el[name] = value;\n};\n\n/**\n * Applies a style to an Element. No vendor prefix expansion is done for\n * property names/values.\n * @param {!Element} el\n * @param {string} name The attribute's name.\n * @param {*} style The style to set. Either a string of css or an object\n *     containing property-value pairs.\n */\nvar applyStyle = function (el, name, style) {\n  if (typeof style === 'string') {\n    el.style.cssText = style;\n  } else {\n    el.style.cssText = '';\n    var elStyle = el.style;\n    var obj = /** @type {!Object<string,string>} */style;\n\n    for (var prop in obj) {\n      if (has(obj, prop)) {\n        elStyle[prop] = obj[prop];\n      }\n    }\n  }\n};\n\n/**\n * Updates a single attribute on an Element.\n * @param {!Element} el\n * @param {string} name The attribute's name.\n * @param {*} value The attribute's value. If the value is an object or\n *     function it is set on the Element, otherwise, it is set as an HTML\n *     attribute.\n */\nvar applyAttributeTyped = function (el, name, value) {\n  var type = typeof value;\n\n  if (type === 'object' || type === 'function') {\n    applyProp(el, name, value);\n  } else {\n    applyAttr(el, name, /** @type {?(boolean|number|string)} */value);\n  }\n};\n\n/**\n * Calls the appropriate attribute mutator for this attribute.\n * @param {!Element} el\n * @param {string} name The attribute's name.\n * @param {*} value The attribute's value.\n */\nvar updateAttribute = function (el, name, value) {\n  var data = getData(el);\n  var attrs = data.attrs;\n\n  if (attrs[name] === value) {\n    return;\n  }\n\n  var mutator = attributes[name] || attributes[symbols.default];\n  mutator(el, name, value);\n\n  attrs[name] = value;\n};\n\n/**\n * A publicly mutable object to provide custom mutators for attributes.\n * @const {!Object<string, function(!Element, string, *)>}\n */\nvar attributes = createMap();\n\n// Special generic mutator that's called for any attribute that does not\n// have a specific mutator.\nattributes[symbols.default] = applyAttributeTyped;\n\nattributes[symbols.placeholder] = function () {};\n\nattributes['style'] = applyStyle;\n\n/**\n * Gets the namespace to create an element (of a given tag) in.\n * @param {string} tag The tag to get the namespace for.\n * @param {?Node} parent\n * @return {?string} The namespace to create the tag in.\n */\nvar getNamespaceForTag = function (tag, parent) {\n  if (tag === 'svg') {\n    return 'http://www.w3.org/2000/svg';\n  }\n\n  if (getData(parent).nodeName === 'foreignObject') {\n    return null;\n  }\n\n  return parent.namespaceURI;\n};\n\n/**\n * Creates an Element.\n * @param {Document} doc The document with which to create the Element.\n * @param {?Node} parent\n * @param {string} tag The tag for the Element.\n * @param {?string=} key A key to identify the Element.\n * @param {?Array<*>=} statics An array of attribute name/value pairs of the\n *     static attributes for the Element.\n * @return {!Element}\n */\nvar createElement = function (doc, parent, tag, key, statics) {\n  var namespace = getNamespaceForTag(tag, parent);\n  var el = undefined;\n\n  if (namespace) {\n    el = doc.createElementNS(namespace, tag);\n  } else {\n    el = doc.createElement(tag);\n  }\n\n  initData(el, tag, key);\n\n  if (statics) {\n    for (var i = 0; i < statics.length; i += 2) {\n      updateAttribute(el, /** @type {!string}*/statics[i], statics[i + 1]);\n    }\n  }\n\n  return el;\n};\n\n/**\n * Creates a Text Node.\n * @param {Document} doc The document with which to create the Element.\n * @return {!Text}\n */\nvar createText = function (doc) {\n  var node = doc.createTextNode('');\n  initData(node, '#text', null);\n  return node;\n};\n\n/**\n * Creates a mapping that can be used to look up children using a key.\n * @param {?Node} el\n * @return {!Object<string, !Element>} A mapping of keys to the children of the\n *     Element.\n */\nvar createKeyMap = function (el) {\n  var map = createMap();\n  var child = el.firstElementChild;\n\n  while (child) {\n    var key = getData(child).key;\n\n    if (key) {\n      map[key] = child;\n    }\n\n    child = child.nextElementSibling;\n  }\n\n  return map;\n};\n\n/**\n * Retrieves the mapping of key to child node for a given Element, creating it\n * if necessary.\n * @param {?Node} el\n * @return {!Object<string, !Node>} A mapping of keys to child Elements\n */\nvar getKeyMap = function (el) {\n  var data = getData(el);\n\n  if (!data.keyMap) {\n    data.keyMap = createKeyMap(el);\n  }\n\n  return data.keyMap;\n};\n\n/**\n * Retrieves a child from the parent with the given key.\n * @param {?Node} parent\n * @param {?string=} key\n * @return {?Node} The child corresponding to the key.\n */\nvar getChild = function (parent, key) {\n  return key ? getKeyMap(parent)[key] : null;\n};\n\n/**\n * Registers an element as being a child. The parent will keep track of the\n * child using the key. The child can be retrieved using the same key using\n * getKeyMap. The provided key should be unique within the parent Element.\n * @param {?Node} parent The parent of child.\n * @param {string} key A key to identify the child with.\n * @param {!Node} child The child to register.\n */\nvar registerChild = function (parent, key, child) {\n  getKeyMap(parent)[key] = child;\n};\n\n/**\n * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @const */\nvar notifications = {\n  /**\n   * Called after patch has compleated with any Nodes that have been created\n   * and added to the DOM.\n   * @type {?function(Array<!Node>)}\n   */\n  nodesCreated: null,\n\n  /**\n   * Called after patch has compleated with any Nodes that have been removed\n   * from the DOM.\n   * Note it's an applications responsibility to handle any childNodes.\n   * @type {?function(Array<!Node>)}\n   */\n  nodesDeleted: null\n};\n\n/**\n * Keeps track of the state of a patch.\n * @constructor\n */\nfunction Context() {\n  /**\n   * @type {(Array<!Node>|undefined)}\n   */\n  this.created = notifications.nodesCreated && [];\n\n  /**\n   * @type {(Array<!Node>|undefined)}\n   */\n  this.deleted = notifications.nodesDeleted && [];\n}\n\n/**\n * @param {!Node} node\n */\nContext.prototype.markCreated = function (node) {\n  if (this.created) {\n    this.created.push(node);\n  }\n};\n\n/**\n * @param {!Node} node\n */\nContext.prototype.markDeleted = function (node) {\n  if (this.deleted) {\n    this.deleted.push(node);\n  }\n};\n\n/**\n * Notifies about nodes that were created during the patch opearation.\n */\nContext.prototype.notifyChanges = function () {\n  if (this.created && this.created.length > 0) {\n    notifications.nodesCreated(this.created);\n  }\n\n  if (this.deleted && this.deleted.length > 0) {\n    notifications.nodesDeleted(this.deleted);\n  }\n};\n\n/**\n* Makes sure that keyed Element matches the tag name provided.\n* @param {!string} nodeName The nodeName of the node that is being matched.\n* @param {string=} tag The tag name of the Element.\n* @param {?string=} key The key of the Element.\n*/\nvar assertKeyedTagMatches = function (nodeName, tag, key) {\n  if (nodeName !== tag) {\n    throw new Error('Was expecting node with key \"' + key + '\" to be a ' + tag + ', not a ' + nodeName + '.');\n  }\n};\n\n/** @type {?Context} */\nvar context = null;\n\n/** @type {?Node} */\nvar currentNode = null;\n\n/** @type {?Node} */\nvar currentParent = null;\n\n/** @type {?Element|?DocumentFragment} */\nvar root = null;\n\n/** @type {?Document} */\nvar doc = null;\n\n/**\n * Returns a patcher function that sets up and restores a patch context,\n * running the run function with the provided data.\n * @param {function((!Element|!DocumentFragment),!function(T),T=)} run\n * @return {function((!Element|!DocumentFragment),!function(T),T=)}\n * @template T\n */\nvar patchFactory = function (run) {\n  /**\n   * TODO(moz): These annotations won't be necessary once we switch to Closure\n   * Compiler's new type inference. Remove these once the switch is done.\n   *\n   * @param {(!Element|!DocumentFragment)} node\n   * @param {!function(T)} fn\n   * @param {T=} data\n   * @template T\n   */\n  var f = function (node, fn, data) {\n    var prevContext = context;\n    var prevRoot = root;\n    var prevDoc = doc;\n    var prevCurrentNode = currentNode;\n    var prevCurrentParent = currentParent;\n    var previousInAttributes = false;\n    var previousInSkip = false;\n\n    context = new Context();\n    root = node;\n    doc = node.ownerDocument;\n    currentParent = node.parentNode;\n\n    if ('production' !== 'production') {}\n\n    run(node, fn, data);\n\n    if ('production' !== 'production') {}\n\n    context.notifyChanges();\n\n    context = prevContext;\n    root = prevRoot;\n    doc = prevDoc;\n    currentNode = prevCurrentNode;\n    currentParent = prevCurrentParent;\n  };\n  return f;\n};\n\n/**\n * Patches the document starting at node with the provided function. This\n * function may be called during an existing patch operation.\n * @param {!Element|!DocumentFragment} node The Element or Document\n *     to patch.\n * @param {!function(T)} fn A function containing elementOpen/elementClose/etc.\n *     calls that describe the DOM.\n * @param {T=} data An argument passed to fn to represent DOM state.\n * @template T\n */\nvar patchInner = patchFactory(function (node, fn, data) {\n  currentNode = node;\n\n  enterNode();\n  fn(data);\n  exitNode();\n\n  if ('production' !== 'production') {}\n});\n\n/**\n * Patches an Element with the the provided function. Exactly one top level\n * element call should be made corresponding to `node`.\n * @param {!Element} node The Element where the patch should start.\n * @param {!function(T)} fn A function containing elementOpen/elementClose/etc.\n *     calls that describe the DOM. This should have at most one top level\n *     element call.\n * @param {T=} data An argument passed to fn to represent DOM state.\n * @template T\n */\nvar patchOuter = patchFactory(function (node, fn, data) {\n  currentNode = /** @type {!Element} */{ nextSibling: node };\n\n  fn(data);\n\n  if ('production' !== 'production') {}\n});\n\n/**\n * Checks whether or not the current node matches the specified nodeName and\n * key.\n *\n * @param {?string} nodeName The nodeName for this node.\n * @param {?string=} key An optional key that identifies a node.\n * @return {boolean} True if the node matches, false otherwise.\n */\nvar matches = function (nodeName, key) {\n  var data = getData(currentNode);\n\n  // Key check is done using double equals as we want to treat a null key the\n  // same as undefined. This should be okay as the only values allowed are\n  // strings, null and undefined so the == semantics are not too weird.\n  return nodeName === data.nodeName && key == data.key;\n};\n\n/**\n * Aligns the virtual Element definition with the actual DOM, moving the\n * corresponding DOM node to the correct location or creating it if necessary.\n * @param {string} nodeName For an Element, this should be a valid tag string.\n *     For a Text, this should be #text.\n * @param {?string=} key The key used to identify this element.\n * @param {?Array<*>=} statics For an Element, this should be an array of\n *     name-value pairs.\n */\nvar alignWithDOM = function (nodeName, key, statics) {\n  if (currentNode && matches(nodeName, key)) {\n    return;\n  }\n\n  var node = undefined;\n\n  // Check to see if the node has moved within the parent.\n  if (key) {\n    node = getChild(currentParent, key);\n    if (node && 'production' !== 'production') {\n      assertKeyedTagMatches(getData(node).nodeName, nodeName, key);\n    }\n  }\n\n  // Create the node if it doesn't exist.\n  if (!node) {\n    if (nodeName === '#text') {\n      node = createText(doc);\n    } else {\n      node = createElement(doc, currentParent, nodeName, key, statics);\n    }\n\n    if (key) {\n      registerChild(currentParent, key, node);\n    }\n\n    context.markCreated(node);\n  }\n\n  // If the node has a key, remove it from the DOM to prevent a large number\n  // of re-orders in the case that it moved far or was completely removed.\n  // Since we hold on to a reference through the keyMap, we can always add it\n  // back.\n  if (currentNode && getData(currentNode).key) {\n    currentParent.replaceChild(node, currentNode);\n    getData(currentParent).keyMapValid = false;\n  } else {\n    currentParent.insertBefore(node, currentNode);\n  }\n\n  currentNode = node;\n};\n\n/**\n * Clears out any unvisited Nodes, as the corresponding virtual element\n * functions were never called for them.\n */\nvar clearUnvisitedDOM = function () {\n  var node = currentParent;\n  var data = getData(node);\n  var keyMap = data.keyMap;\n  var keyMapValid = data.keyMapValid;\n  var child = node.lastChild;\n  var key = undefined;\n\n  if (child === currentNode && keyMapValid) {\n    return;\n  }\n\n  if (data.attrs[symbols.placeholder] && node !== root) {\n    if ('production' !== 'production') {}\n    return;\n  }\n\n  while (child !== currentNode) {\n    node.removeChild(child);\n    context.markDeleted( /** @type {!Node}*/child);\n\n    key = getData(child).key;\n    if (key) {\n      delete keyMap[key];\n    }\n    child = node.lastChild;\n  }\n\n  // Clean the keyMap, removing any unusued keys.\n  if (!keyMapValid) {\n    for (key in keyMap) {\n      child = keyMap[key];\n      if (child.parentNode !== node) {\n        context.markDeleted(child);\n        delete keyMap[key];\n      }\n    }\n\n    data.keyMapValid = true;\n  }\n};\n\n/**\n * Changes to the first child of the current node.\n */\nvar enterNode = function () {\n  currentParent = currentNode;\n  currentNode = null;\n};\n\n/**\n * Changes to the next sibling of the current node.\n */\nvar nextNode = function () {\n  if (currentNode) {\n    currentNode = currentNode.nextSibling;\n  } else {\n    currentNode = currentParent.firstChild;\n  }\n};\n\n/**\n * Changes to the parent of the current node, removing any unvisited children.\n */\nvar exitNode = function () {\n  clearUnvisitedDOM();\n\n  currentNode = currentParent;\n  currentParent = currentParent.parentNode;\n};\n\n/**\n * Makes sure that the current node is an Element with a matching tagName and\n * key.\n *\n * @param {string} tag The element's tag.\n * @param {?string=} key The key used to identify this element. This can be an\n *     empty string, but performance may be better if a unique value is used\n *     when iterating over an array of items.\n * @param {?Array<*>=} statics An array of attribute name/value pairs of the\n *     static attributes for the Element. These will only be set once when the\n *     Element is created.\n * @return {!Element} The corresponding Element.\n */\nvar coreElementOpen = function (tag, key, statics) {\n  nextNode();\n  alignWithDOM(tag, key, statics);\n  enterNode();\n  return (/** @type {!Element} */currentParent\n  );\n};\n\n/**\n * Closes the currently open Element, removing any unvisited children if\n * necessary.\n *\n * @return {!Element} The corresponding Element.\n */\nvar coreElementClose = function () {\n  if ('production' !== 'production') {}\n\n  exitNode();\n  return (/** @type {!Element} */currentNode\n  );\n};\n\n/**\n * Makes sure the current node is a Text node and creates a Text node if it is\n * not.\n *\n * @return {!Text} The corresponding Text Node.\n */\nvar coreText = function () {\n  nextNode();\n  alignWithDOM('#text', null, null);\n  return (/** @type {!Text} */currentNode\n  );\n};\n\n/**\n * Gets the current Element being patched.\n * @return {!Element}\n */\nvar currentElement = function () {\n  if ('production' !== 'production') {}\n  return (/** @type {!Element} */currentParent\n  );\n};\n\n/**\n * Skips the children in a subtree, allowing an Element to be closed without\n * clearing out the children.\n */\nvar skip = function () {\n  if ('production' !== 'production') {}\n  currentNode = currentParent.lastChild;\n};\n\n/**\n * The offset in the virtual element declaration where the attributes are\n * specified.\n * @const\n */\nvar ATTRIBUTES_OFFSET = 3;\n\n/**\n * Builds an array of arguments for use with elementOpenStart, attr and\n * elementOpenEnd.\n * @const {Array<*>}\n */\nvar argsBuilder = [];\n\n/**\n * @param {string} tag The element's tag.\n * @param {?string=} key The key used to identify this element. This can be an\n *     empty string, but performance may be better if a unique value is used\n *     when iterating over an array of items.\n * @param {?Array<*>=} statics An array of attribute name/value pairs of the\n *     static attributes for the Element. These will only be set once when the\n *     Element is created.\n * @param {...*} const_args Attribute name/value pairs of the dynamic attributes\n *     for the Element.\n * @return {!Element} The corresponding Element.\n */\nvar elementOpen = function (tag, key, statics, const_args) {\n  if ('production' !== 'production') {}\n\n  var node = coreElementOpen(tag, key, statics);\n  var data = getData(node);\n\n  /*\n   * Checks to see if one or more attributes have changed for a given Element.\n   * When no attributes have changed, this is much faster than checking each\n   * individual argument. When attributes have changed, the overhead of this is\n   * minimal.\n   */\n  var attrsArr = data.attrsArr;\n  var newAttrs = data.newAttrs;\n  var attrsChanged = false;\n  var i = ATTRIBUTES_OFFSET;\n  var j = 0;\n\n  for (; i < arguments.length; i += 1, j += 1) {\n    if (attrsArr[j] !== arguments[i]) {\n      attrsChanged = true;\n      break;\n    }\n  }\n\n  for (; i < arguments.length; i += 1, j += 1) {\n    attrsArr[j] = arguments[i];\n  }\n\n  if (j < attrsArr.length) {\n    attrsChanged = true;\n    attrsArr.length = j;\n  }\n\n  /*\n   * Actually perform the attribute update.\n   */\n  if (attrsChanged) {\n    for (i = ATTRIBUTES_OFFSET; i < arguments.length; i += 2) {\n      newAttrs[arguments[i]] = arguments[i + 1];\n    }\n\n    for (var _attr in newAttrs) {\n      updateAttribute(node, _attr, newAttrs[_attr]);\n      newAttrs[_attr] = undefined;\n    }\n  }\n\n  return node;\n};\n\n/**\n * Declares a virtual Element at the current location in the document. This\n * corresponds to an opening tag and a elementClose tag is required. This is\n * like elementOpen, but the attributes are defined using the attr function\n * rather than being passed as arguments. Must be folllowed by 0 or more calls\n * to attr, then a call to elementOpenEnd.\n * @param {string} tag The element's tag.\n * @param {?string=} key The key used to identify this element. This can be an\n *     empty string, but performance may be better if a unique value is used\n *     when iterating over an array of items.\n * @param {?Array<*>=} statics An array of attribute name/value pairs of the\n *     static attributes for the Element. These will only be set once when the\n *     Element is created.\n */\nvar elementOpenStart = function (tag, key, statics) {\n  if ('production' !== 'production') {}\n\n  argsBuilder[0] = tag;\n  argsBuilder[1] = key;\n  argsBuilder[2] = statics;\n};\n\n/***\n * Defines a virtual attribute at this point of the DOM. This is only valid\n * when called between elementOpenStart and elementOpenEnd.\n *\n * @param {string} name\n * @param {*} value\n */\nvar attr = function (name, value) {\n  if ('production' !== 'production') {}\n\n  argsBuilder.push(name, value);\n};\n\n/**\n * Closes an open tag started with elementOpenStart.\n * @return {!Element} The corresponding Element.\n */\nvar elementOpenEnd = function () {\n  if ('production' !== 'production') {}\n\n  var node = elementOpen.apply(null, argsBuilder);\n  argsBuilder.length = 0;\n  return node;\n};\n\n/**\n * Closes an open virtual Element.\n *\n * @param {string} tag The element's tag.\n * @return {!Element} The corresponding Element.\n */\nvar elementClose = function (tag) {\n  if ('production' !== 'production') {}\n\n  var node = coreElementClose();\n\n  if ('production' !== 'production') {}\n\n  return node;\n};\n\n/**\n * Declares a virtual Element at the current location in the document that has\n * no children.\n * @param {string} tag The element's tag.\n * @param {?string=} key The key used to identify this element. This can be an\n *     empty string, but performance may be better if a unique value is used\n *     when iterating over an array of items.\n * @param {?Array<*>=} statics An array of attribute name/value pairs of the\n *     static attributes for the Element. These will only be set once when the\n *     Element is created.\n * @param {...*} const_args Attribute name/value pairs of the dynamic attributes\n *     for the Element.\n * @return {!Element} The corresponding Element.\n */\nvar elementVoid = function (tag, key, statics, const_args) {\n  elementOpen.apply(null, arguments);\n  return elementClose(tag);\n};\n\n/**\n * Declares a virtual Element at the current location in the document that is a\n * placeholder element. Children of this Element can be manually managed and\n * will not be cleared by the library.\n *\n * A key must be specified to make sure that this node is correctly preserved\n * across all conditionals.\n *\n * @param {string} tag The element's tag.\n * @param {string} key The key used to identify this element.\n * @param {?Array<*>=} statics An array of attribute name/value pairs of the\n *     static attributes for the Element. These will only be set once when the\n *     Element is created.\n * @param {...*} const_args Attribute name/value pairs of the dynamic attributes\n *     for the Element.\n * @return {!Element} The corresponding Element.\n */\nvar elementPlaceholder = function (tag, key, statics, const_args) {\n  if ('production' !== 'production') {}\n\n  elementOpen.apply(null, arguments);\n  skip();\n  return elementClose(tag);\n};\n\n/**\n * Declares a virtual Text at this point in the document.\n *\n * @param {string|number|boolean} value The value of the Text.\n * @param {...(function((string|number|boolean)):string)} const_args\n *     Functions to format the value which are called only when the value has\n *     changed.\n * @return {!Text} The corresponding text node.\n */\nvar text = function (value, const_args) {\n  if ('production' !== 'production') {}\n\n  var node = coreText();\n  var data = getData(node);\n\n  if (data.text !== value) {\n    data.text = /** @type {string} */value;\n\n    var formatted = value;\n    for (var i = 1; i < arguments.length; i += 1) {\n      /*\n       * Call the formatter function directly to prevent leaking arguments.\n       * https://github.com/google/incremental-dom/pull/204#issuecomment-178223574\n       */\n      var fn = arguments[i];\n      formatted = fn(formatted);\n    }\n\n    node.data = formatted;\n  }\n\n  return node;\n};\n\nexports.patch = patchInner;\nexports.patchInner = patchInner;\nexports.patchOuter = patchOuter;\nexports.currentElement = currentElement;\nexports.skip = skip;\nexports.elementVoid = elementVoid;\nexports.elementOpenStart = elementOpenStart;\nexports.elementOpenEnd = elementOpenEnd;\nexports.elementOpen = elementOpen;\nexports.elementClose = elementClose;\nexports.elementPlaceholder = elementPlaceholder;\nexports.text = text;\nexports.attr = attr;\nexports.symbols = symbols;\nexports.attributes = attributes;\nexports.applyAttr = applyAttr;\nexports.applyProp = applyProp;\nexports.notifications = notifications;\n\n//# sourceMappingURL=incremental-dom-cjs.js.map","'use strict'\nmodule.exports = (typeof self === 'object' && self.self === self && self) ||\n  (typeof global === 'object' && global.global === global && global) ||\n  this\n","const nativeHints = [\n  'native code',\n  '[object MutationObserverConstructor]' // for mobile safari iOS 9.0\n];\nexport default fn => nativeHints.map(\n  (hint) => (fn || '').toString().indexOf([hint]) > -1\n).reduce((a, b) => a || b);\n","import root from 'window-or-global';\n\nconst Event = ((TheEvent) => {\n  if (TheEvent) {\n    try {\n      new TheEvent('emit-init'); // eslint-disable-line no-new\n    } catch (e) {\n      return undefined;\n    }\n  }\n  return TheEvent;\n})(root.Event);\n\nfunction createCustomEvent (name, opts = {}) {\n  const { detail } = opts;\n  delete opts.detail;\n\n  let e;\n  if (Event) {\n    e = new Event(name, opts);\n    Object.defineProperty(e, 'detail', { value: detail });\n  } else {\n    e = document.createEvent('CustomEvent');\n    Object.defineProperty(e, 'composed', { value: opts.composed });\n    e.initCustomEvent(name, opts.bubbles, opts.cancelable, detail);\n  }\n  return e;\n}\n\nexport default function (elem, name, opts = {}) {\n  if (opts.bubbles === undefined) {\n    opts.bubbles = true;\n  }\n  if (opts.cancelable === undefined) {\n    opts.cancelable = true;\n  }\n  if (opts.composed === undefined) {\n    opts.composed = true;\n  }\n  return elem.dispatchEvent(createCustomEvent(name, opts));\n}\n","import * as prop from './api/prop';\nimport * as symbols from './api/symbols';\nimport * as vdom from './api/vdom';\nimport Component from './api/component';\nimport define from './api/define';\nimport emit from './api/emit';\nimport link from './api/link';\nimport props from './api/props';\nimport ready from './api/ready';\n\nconst h = vdom.builder();\n\nexport {\n  Component,\n  define,\n  emit,\n  h,\n  link,\n  prop,\n  props,\n  ready,\n  symbols,\n  vdom\n};\n","/*! Kefir.js v3.7.0\n *  https://github.com/rpominov/kefir\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.Kefir = global.Kefir || {})));\n}(this, function (exports) { 'use strict';\n\n\tfunction createObj(proto) {\n\t  var F = function () {};\n\t  F.prototype = proto;\n\t  return new F();\n\t}\n\n\tfunction extend(target /*, mixin1, mixin2...*/) {\n\t  var length = arguments.length,\n\t      i = void 0,\n\t      prop = void 0;\n\t  for (i = 1; i < length; i++) {\n\t    for (prop in arguments[i]) {\n\t      target[prop] = arguments[i][prop];\n\t    }\n\t  }\n\t  return target;\n\t}\n\n\tfunction inherit(Child, Parent /*, mixin1, mixin2...*/) {\n\t  var length = arguments.length,\n\t      i = void 0;\n\t  Child.prototype = createObj(Parent.prototype);\n\t  Child.prototype.constructor = Child;\n\t  for (i = 2; i < length; i++) {\n\t    extend(Child.prototype, arguments[i]);\n\t  }\n\t  return Child;\n\t}\n\n\tvar NOTHING = ['<nothing>'];\n\tvar END = 'end';\n\tvar VALUE = 'value';\n\tvar ERROR = 'error';\n\tvar ANY = 'any';\n\n\tfunction concat(a, b) {\n\t  var result = void 0,\n\t      length = void 0,\n\t      i = void 0,\n\t      j = void 0;\n\t  if (a.length === 0) {\n\t    return b;\n\t  }\n\t  if (b.length === 0) {\n\t    return a;\n\t  }\n\t  j = 0;\n\t  result = new Array(a.length + b.length);\n\t  length = a.length;\n\t  for (i = 0; i < length; i++, j++) {\n\t    result[j] = a[i];\n\t  }\n\t  length = b.length;\n\t  for (i = 0; i < length; i++, j++) {\n\t    result[j] = b[i];\n\t  }\n\t  return result;\n\t}\n\n\tfunction find(arr, value) {\n\t  var length = arr.length,\n\t      i = void 0;\n\t  for (i = 0; i < length; i++) {\n\t    if (arr[i] === value) {\n\t      return i;\n\t    }\n\t  }\n\t  return -1;\n\t}\n\n\tfunction findByPred(arr, pred) {\n\t  var length = arr.length,\n\t      i = void 0;\n\t  for (i = 0; i < length; i++) {\n\t    if (pred(arr[i])) {\n\t      return i;\n\t    }\n\t  }\n\t  return -1;\n\t}\n\n\tfunction cloneArray(input) {\n\t  var length = input.length,\n\t      result = new Array(length),\n\t      i = void 0;\n\t  for (i = 0; i < length; i++) {\n\t    result[i] = input[i];\n\t  }\n\t  return result;\n\t}\n\n\tfunction remove(input, index) {\n\t  var length = input.length,\n\t      result = void 0,\n\t      i = void 0,\n\t      j = void 0;\n\t  if (index >= 0 && index < length) {\n\t    if (length === 1) {\n\t      return [];\n\t    } else {\n\t      result = new Array(length - 1);\n\t      for (i = 0, j = 0; i < length; i++) {\n\t        if (i !== index) {\n\t          result[j] = input[i];\n\t          j++;\n\t        }\n\t      }\n\t      return result;\n\t    }\n\t  } else {\n\t    return input;\n\t  }\n\t}\n\n\tfunction map(input, fn) {\n\t  var length = input.length,\n\t      result = new Array(length),\n\t      i = void 0;\n\t  for (i = 0; i < length; i++) {\n\t    result[i] = fn(input[i]);\n\t  }\n\t  return result;\n\t}\n\n\tfunction forEach(arr, fn) {\n\t  var length = arr.length,\n\t      i = void 0;\n\t  for (i = 0; i < length; i++) {\n\t    fn(arr[i]);\n\t  }\n\t}\n\n\tfunction fillArray(arr, value) {\n\t  var length = arr.length,\n\t      i = void 0;\n\t  for (i = 0; i < length; i++) {\n\t    arr[i] = value;\n\t  }\n\t}\n\n\tfunction contains(arr, value) {\n\t  return find(arr, value) !== -1;\n\t}\n\n\tfunction slide(cur, next, max) {\n\t  var length = Math.min(max, cur.length + 1),\n\t      offset = cur.length - length + 1,\n\t      result = new Array(length),\n\t      i = void 0;\n\t  for (i = offset; i < length; i++) {\n\t    result[i - offset] = cur[i];\n\t  }\n\t  result[length - 1] = next;\n\t  return result;\n\t}\n\n\tfunction callSubscriber(type, fn, event) {\n\t  if (type === ANY) {\n\t    fn(event);\n\t  } else if (type === event.type) {\n\t    if (type === VALUE || type === ERROR) {\n\t      fn(event.value);\n\t    } else {\n\t      fn();\n\t    }\n\t  }\n\t}\n\n\tfunction Dispatcher() {\n\t  this._items = [];\n\t  this._spies = [];\n\t  this._inLoop = 0;\n\t  this._removedItems = null;\n\t}\n\n\textend(Dispatcher.prototype, {\n\t  add: function (type, fn) {\n\t    this._items = concat(this._items, [{ type: type, fn: fn }]);\n\t    return this._items.length;\n\t  },\n\t  remove: function (type, fn) {\n\t    var index = findByPred(this._items, function (x) {\n\t      return x.type === type && x.fn === fn;\n\t    });\n\n\t    // if we're currently in a notification loop,\n\t    // remember this subscriber was removed\n\t    if (this._inLoop !== 0 && index !== -1) {\n\t      if (this._removedItems === null) {\n\t        this._removedItems = [];\n\t      }\n\t      this._removedItems.push(this._items[index]);\n\t    }\n\n\t    this._items = remove(this._items, index);\n\t    return this._items.length;\n\t  },\n\t  addSpy: function (fn) {\n\t    this._spies = concat(this._spies, [fn]);\n\t    return this._spies.length;\n\t  },\n\n\n\t  // Because spies are only ever a function that perform logging as\n\t  // their only side effect, we don't need the same complicated\n\t  // removal logic like in remove()\n\t  removeSpy: function (fn) {\n\t    this._spies = remove(this._spies, this._spies.indexOf(fn));\n\t    return this._spies.length;\n\t  },\n\t  dispatch: function (event) {\n\t    this._inLoop++;\n\t    for (var i = 0, spies = this._spies; this._spies !== null && i < spies.length; i++) {\n\t      spies[i](event);\n\t    }\n\n\t    for (var _i = 0, items = this._items; _i < items.length; _i++) {\n\n\t      // cleanup was called\n\t      if (this._items === null) {\n\t        break;\n\t      }\n\n\t      // this subscriber was removed\n\t      if (this._removedItems !== null && contains(this._removedItems, items[_i])) {\n\t        continue;\n\t      }\n\n\t      callSubscriber(items[_i].type, items[_i].fn, event);\n\t    }\n\t    this._inLoop--;\n\t    if (this._inLoop === 0) {\n\t      this._removedItems = null;\n\t    }\n\t  },\n\t  cleanup: function () {\n\t    this._items = null;\n\t    this._spies = null;\n\t  }\n\t});\n\n\tfunction Observable() {\n\t  this._dispatcher = new Dispatcher();\n\t  this._active = false;\n\t  this._alive = true;\n\t  this._activating = false;\n\t  this._logHandlers = null;\n\t  this._spyHandlers = null;\n\t}\n\n\textend(Observable.prototype, {\n\n\t  _name: 'observable',\n\n\t  _onActivation: function () {},\n\t  _onDeactivation: function () {},\n\t  _setActive: function (active) {\n\t    if (this._active !== active) {\n\t      this._active = active;\n\t      if (active) {\n\t        this._activating = true;\n\t        this._onActivation();\n\t        this._activating = false;\n\t      } else {\n\t        this._onDeactivation();\n\t      }\n\t    }\n\t  },\n\t  _clear: function () {\n\t    this._setActive(false);\n\t    this._dispatcher.cleanup();\n\t    this._dispatcher = null;\n\t    this._logHandlers = null;\n\t  },\n\t  _emit: function (type, x) {\n\t    switch (type) {\n\t      case VALUE:\n\t        return this._emitValue(x);\n\t      case ERROR:\n\t        return this._emitError(x);\n\t      case END:\n\t        return this._emitEnd();\n\t    }\n\t  },\n\t  _emitValue: function (value) {\n\t    if (this._alive) {\n\t      this._dispatcher.dispatch({ type: VALUE, value: value });\n\t    }\n\t  },\n\t  _emitError: function (value) {\n\t    if (this._alive) {\n\t      this._dispatcher.dispatch({ type: ERROR, value: value });\n\t    }\n\t  },\n\t  _emitEnd: function () {\n\t    if (this._alive) {\n\t      this._alive = false;\n\t      this._dispatcher.dispatch({ type: END });\n\t      this._clear();\n\t    }\n\t  },\n\t  _on: function (type, fn) {\n\t    if (this._alive) {\n\t      this._dispatcher.add(type, fn);\n\t      this._setActive(true);\n\t    } else {\n\t      callSubscriber(type, fn, { type: END });\n\t    }\n\t    return this;\n\t  },\n\t  _off: function (type, fn) {\n\t    if (this._alive) {\n\t      var count = this._dispatcher.remove(type, fn);\n\t      if (count === 0) {\n\t        this._setActive(false);\n\t      }\n\t    }\n\t    return this;\n\t  },\n\t  onValue: function (fn) {\n\t    return this._on(VALUE, fn);\n\t  },\n\t  onError: function (fn) {\n\t    return this._on(ERROR, fn);\n\t  },\n\t  onEnd: function (fn) {\n\t    return this._on(END, fn);\n\t  },\n\t  onAny: function (fn) {\n\t    return this._on(ANY, fn);\n\t  },\n\t  offValue: function (fn) {\n\t    return this._off(VALUE, fn);\n\t  },\n\t  offError: function (fn) {\n\t    return this._off(ERROR, fn);\n\t  },\n\t  offEnd: function (fn) {\n\t    return this._off(END, fn);\n\t  },\n\t  offAny: function (fn) {\n\t    return this._off(ANY, fn);\n\t  },\n\t  observe: function (observerOrOnValue, onError, onEnd) {\n\t    var _this = this;\n\t    var closed = false;\n\n\t    var observer = !observerOrOnValue || typeof observerOrOnValue === 'function' ? { value: observerOrOnValue, error: onError, end: onEnd } : observerOrOnValue;\n\n\t    var handler = function (event) {\n\t      if (event.type === END) {\n\t        closed = true;\n\t      }\n\t      if (event.type === VALUE && observer.value) {\n\t        observer.value(event.value);\n\t      } else if (event.type === ERROR && observer.error) {\n\t        observer.error(event.value);\n\t      } else if (event.type === END && observer.end) {\n\t        observer.end(event.value);\n\t      }\n\t    };\n\n\t    this.onAny(handler);\n\n\t    return {\n\t      unsubscribe: function () {\n\t        if (!closed) {\n\t          _this.offAny(handler);\n\t          closed = true;\n\t        }\n\t      },\n\n\t      get closed() {\n\t        return closed;\n\t      }\n\t    };\n\t  },\n\n\n\t  // A and B must be subclasses of Stream and Property (order doesn't matter)\n\t  _ofSameType: function (A, B) {\n\t    return A.prototype.getType() === this.getType() ? A : B;\n\t  },\n\t  setName: function (sourceObs /* optional */, selfName) {\n\t    this._name = selfName ? sourceObs._name + '.' + selfName : sourceObs;\n\t    return this;\n\t  },\n\t  log: function () {\n\t    var name = arguments.length <= 0 || arguments[0] === undefined ? this.toString() : arguments[0];\n\n\n\t    var isCurrent = void 0;\n\t    var handler = function (event) {\n\t      var type = '<' + event.type + (isCurrent ? ':current' : '') + '>';\n\t      if (event.type === END) {\n\t        console.log(name, type);\n\t      } else {\n\t        console.log(name, type, event.value);\n\t      }\n\t    };\n\n\t    if (this._alive) {\n\t      if (!this._logHandlers) {\n\t        this._logHandlers = [];\n\t      }\n\t      this._logHandlers.push({ name: name, handler: handler });\n\t    }\n\n\t    isCurrent = true;\n\t    this.onAny(handler);\n\t    isCurrent = false;\n\n\t    return this;\n\t  },\n\t  offLog: function () {\n\t    var name = arguments.length <= 0 || arguments[0] === undefined ? this.toString() : arguments[0];\n\n\n\t    if (this._logHandlers) {\n\t      var handlerIndex = findByPred(this._logHandlers, function (obj) {\n\t        return obj.name === name;\n\t      });\n\t      if (handlerIndex !== -1) {\n\t        this.offAny(this._logHandlers[handlerIndex].handler);\n\t        this._logHandlers.splice(handlerIndex, 1);\n\t      }\n\t    }\n\n\t    return this;\n\t  },\n\t  spy: function () {\n\t    var name = arguments.length <= 0 || arguments[0] === undefined ? this.toString() : arguments[0];\n\n\t    var handler = function (event) {\n\t      var type = '<' + event.type + '>';\n\t      if (event.type === END) {\n\t        console.log(name, type);\n\t      } else {\n\t        console.log(name, type, event.value);\n\t      }\n\t    };\n\t    if (this._alive) {\n\t      if (!this._spyHandlers) {\n\t        this._spyHandlers = [];\n\t      }\n\t      this._spyHandlers.push({ name: name, handler: handler });\n\t      this._dispatcher.addSpy(handler);\n\t    }\n\t    return this;\n\t  },\n\t  offSpy: function () {\n\t    var name = arguments.length <= 0 || arguments[0] === undefined ? this.toString() : arguments[0];\n\n\t    if (this._spyHandlers) {\n\t      var handlerIndex = findByPred(this._spyHandlers, function (obj) {\n\t        return obj.name === name;\n\t      });\n\t      if (handlerIndex !== -1) {\n\t        this._dispatcher.removeSpy(this._spyHandlers[handlerIndex].handler);\n\t        this._spyHandlers.splice(handlerIndex, 1);\n\t      }\n\t    }\n\t    return this;\n\t  }\n\t});\n\n\t// extend() can't handle `toString` in IE8\n\tObservable.prototype.toString = function () {\n\t  return '[' + this._name + ']';\n\t};\n\n\tfunction Stream() {\n\t  Observable.call(this);\n\t}\n\n\tinherit(Stream, Observable, {\n\n\t  _name: 'stream',\n\n\t  getType: function () {\n\t    return 'stream';\n\t  }\n\t});\n\n\tfunction Property() {\n\t  Observable.call(this);\n\t  this._currentEvent = null;\n\t}\n\n\tinherit(Property, Observable, {\n\n\t  _name: 'property',\n\n\t  _emitValue: function (value) {\n\t    if (this._alive) {\n\t      this._currentEvent = { type: VALUE, value: value };\n\t      if (!this._activating) {\n\t        this._dispatcher.dispatch({ type: VALUE, value: value });\n\t      }\n\t    }\n\t  },\n\t  _emitError: function (value) {\n\t    if (this._alive) {\n\t      this._currentEvent = { type: ERROR, value: value };\n\t      if (!this._activating) {\n\t        this._dispatcher.dispatch({ type: ERROR, value: value });\n\t      }\n\t    }\n\t  },\n\t  _emitEnd: function () {\n\t    if (this._alive) {\n\t      this._alive = false;\n\t      if (!this._activating) {\n\t        this._dispatcher.dispatch({ type: END });\n\t      }\n\t      this._clear();\n\t    }\n\t  },\n\t  _on: function (type, fn) {\n\t    if (this._alive) {\n\t      this._dispatcher.add(type, fn);\n\t      this._setActive(true);\n\t    }\n\t    if (this._currentEvent !== null) {\n\t      callSubscriber(type, fn, this._currentEvent);\n\t    }\n\t    if (!this._alive) {\n\t      callSubscriber(type, fn, { type: END });\n\t    }\n\t    return this;\n\t  },\n\t  getType: function () {\n\t    return 'property';\n\t  }\n\t});\n\n\tvar neverS = new Stream();\n\tneverS._emitEnd();\n\tneverS._name = 'never';\n\n\tfunction never() {\n\t  return neverS;\n\t}\n\n\tfunction timeBased(mixin) {\n\n\t  function AnonymousStream(wait, options) {\n\t    var _this = this;\n\n\t    Stream.call(this);\n\t    this._wait = wait;\n\t    this._intervalId = null;\n\t    this._$onTick = function () {\n\t      return _this._onTick();\n\t    };\n\t    this._init(options);\n\t  }\n\n\t  inherit(AnonymousStream, Stream, {\n\t    _init: function () {},\n\t    _free: function () {},\n\t    _onTick: function () {},\n\t    _onActivation: function () {\n\t      this._intervalId = setInterval(this._$onTick, this._wait);\n\t    },\n\t    _onDeactivation: function () {\n\t      if (this._intervalId !== null) {\n\t        clearInterval(this._intervalId);\n\t        this._intervalId = null;\n\t      }\n\t    },\n\t    _clear: function () {\n\t      Stream.prototype._clear.call(this);\n\t      this._$onTick = null;\n\t      this._free();\n\t    }\n\t  }, mixin);\n\n\t  return AnonymousStream;\n\t}\n\n\tvar S = timeBased({\n\n\t  _name: 'later',\n\n\t  _init: function (_ref) {\n\t    var x = _ref.x;\n\n\t    this._x = x;\n\t  },\n\t  _free: function () {\n\t    this._x = null;\n\t  },\n\t  _onTick: function () {\n\t    this._emitValue(this._x);\n\t    this._emitEnd();\n\t  }\n\t});\n\n\tfunction later(wait, x) {\n\t  return new S(wait, { x: x });\n\t}\n\n\tvar S$1 = timeBased({\n\n\t  _name: 'interval',\n\n\t  _init: function (_ref) {\n\t    var x = _ref.x;\n\n\t    this._x = x;\n\t  },\n\t  _free: function () {\n\t    this._x = null;\n\t  },\n\t  _onTick: function () {\n\t    this._emitValue(this._x);\n\t  }\n\t});\n\n\tfunction interval(wait, x) {\n\t  return new S$1(wait, { x: x });\n\t}\n\n\tvar S$2 = timeBased({\n\n\t  _name: 'sequentially',\n\n\t  _init: function (_ref) {\n\t    var xs = _ref.xs;\n\n\t    this._xs = cloneArray(xs);\n\t  },\n\t  _free: function () {\n\t    this._xs = null;\n\t  },\n\t  _onTick: function () {\n\t    if (this._xs.length === 1) {\n\t      this._emitValue(this._xs[0]);\n\t      this._emitEnd();\n\t    } else {\n\t      this._emitValue(this._xs.shift());\n\t    }\n\t  }\n\t});\n\n\tfunction sequentially(wait, xs) {\n\t  return xs.length === 0 ? never() : new S$2(wait, { xs: xs });\n\t}\n\n\tvar S$3 = timeBased({\n\n\t  _name: 'fromPoll',\n\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _onTick: function () {\n\t    var fn = this._fn;\n\t    this._emitValue(fn());\n\t  }\n\t});\n\n\tfunction fromPoll(wait, fn) {\n\t  return new S$3(wait, { fn: fn });\n\t}\n\n\tfunction emitter(obs) {\n\n\t  function value(x) {\n\t    obs._emitValue(x);\n\t    return obs._active;\n\t  }\n\n\t  function error(x) {\n\t    obs._emitError(x);\n\t    return obs._active;\n\t  }\n\n\t  function end() {\n\t    obs._emitEnd();\n\t    return obs._active;\n\t  }\n\n\t  function event(e) {\n\t    obs._emit(e.type, e.value);\n\t    return obs._active;\n\t  }\n\n\t  return {\n\t    value: value,\n\t    error: error,\n\t    end: end,\n\t    event: event,\n\n\t    // legacy\n\t    emit: value,\n\t    emitEvent: event\n\t  };\n\t}\n\n\tvar S$4 = timeBased({\n\n\t  _name: 'withInterval',\n\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t    this._emitter = emitter(this);\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t    this._emitter = null;\n\t  },\n\t  _onTick: function () {\n\t    var fn = this._fn;\n\t    fn(this._emitter);\n\t  }\n\t});\n\n\tfunction withInterval(wait, fn) {\n\t  return new S$4(wait, { fn: fn });\n\t}\n\n\tfunction S$5(fn) {\n\t  Stream.call(this);\n\t  this._fn = fn;\n\t  this._unsubscribe = null;\n\t}\n\n\tinherit(S$5, Stream, {\n\n\t  _name: 'stream',\n\n\t  _onActivation: function () {\n\t    var fn = this._fn;\n\t    var unsubscribe = fn(emitter(this));\n\t    this._unsubscribe = typeof unsubscribe === 'function' ? unsubscribe : null;\n\n\t    // fix https://github.com/rpominov/kefir/issues/35\n\t    if (!this._active) {\n\t      this._callUnsubscribe();\n\t    }\n\t  },\n\t  _callUnsubscribe: function () {\n\t    if (this._unsubscribe !== null) {\n\t      this._unsubscribe();\n\t      this._unsubscribe = null;\n\t    }\n\t  },\n\t  _onDeactivation: function () {\n\t    this._callUnsubscribe();\n\t  },\n\t  _clear: function () {\n\t    Stream.prototype._clear.call(this);\n\t    this._fn = null;\n\t  }\n\t});\n\n\tfunction stream(fn) {\n\t  return new S$5(fn);\n\t}\n\n\tfunction fromCallback(callbackConsumer) {\n\n\t  var called = false;\n\n\t  return stream(function (emitter) {\n\n\t    if (!called) {\n\t      callbackConsumer(function (x) {\n\t        emitter.emit(x);\n\t        emitter.end();\n\t      });\n\t      called = true;\n\t    }\n\t  }).setName('fromCallback');\n\t}\n\n\tfunction fromNodeCallback(callbackConsumer) {\n\n\t  var called = false;\n\n\t  return stream(function (emitter) {\n\n\t    if (!called) {\n\t      callbackConsumer(function (error, x) {\n\t        if (error) {\n\t          emitter.error(error);\n\t        } else {\n\t          emitter.emit(x);\n\t        }\n\t        emitter.end();\n\t      });\n\t      called = true;\n\t    }\n\t  }).setName('fromNodeCallback');\n\t}\n\n\tfunction spread(fn, length) {\n\t  switch (length) {\n\t    case 0:\n\t      return function () {\n\t        return fn();\n\t      };\n\t    case 1:\n\t      return function (a) {\n\t        return fn(a[0]);\n\t      };\n\t    case 2:\n\t      return function (a) {\n\t        return fn(a[0], a[1]);\n\t      };\n\t    case 3:\n\t      return function (a) {\n\t        return fn(a[0], a[1], a[2]);\n\t      };\n\t    case 4:\n\t      return function (a) {\n\t        return fn(a[0], a[1], a[2], a[3]);\n\t      };\n\t    default:\n\t      return function (a) {\n\t        return fn.apply(null, a);\n\t      };\n\t  }\n\t}\n\n\tfunction apply(fn, c, a) {\n\t  var aLength = a ? a.length : 0;\n\t  if (c == null) {\n\t    switch (aLength) {\n\t      case 0:\n\t        return fn();\n\t      case 1:\n\t        return fn(a[0]);\n\t      case 2:\n\t        return fn(a[0], a[1]);\n\t      case 3:\n\t        return fn(a[0], a[1], a[2]);\n\t      case 4:\n\t        return fn(a[0], a[1], a[2], a[3]);\n\t      default:\n\t        return fn.apply(null, a);\n\t    }\n\t  } else {\n\t    switch (aLength) {\n\t      case 0:\n\t        return fn.call(c);\n\t      default:\n\t        return fn.apply(c, a);\n\t    }\n\t  }\n\t}\n\n\tfunction fromSubUnsub(sub, unsub, transformer /* Function | falsey */) {\n\t  return stream(function (emitter) {\n\n\t    var handler = transformer ? function () {\n\t      emitter.emit(apply(transformer, this, arguments));\n\t    } : function (x) {\n\t      emitter.emit(x);\n\t    };\n\n\t    sub(handler);\n\t    return function () {\n\t      return unsub(handler);\n\t    };\n\t  }).setName('fromSubUnsub');\n\t}\n\n\tvar pairs = [['addEventListener', 'removeEventListener'], ['addListener', 'removeListener'], ['on', 'off']];\n\n\tfunction fromEvents(target, eventName, transformer) {\n\t  var sub = void 0,\n\t      unsub = void 0;\n\n\t  for (var i = 0; i < pairs.length; i++) {\n\t    if (typeof target[pairs[i][0]] === 'function' && typeof target[pairs[i][1]] === 'function') {\n\t      sub = pairs[i][0];\n\t      unsub = pairs[i][1];\n\t      break;\n\t    }\n\t  }\n\n\t  if (sub === undefined) {\n\t    throw new Error('target don\\'t support any of ' + 'addEventListener/removeEventListener, addListener/removeListener, on/off method pair');\n\t  }\n\n\t  return fromSubUnsub(function (handler) {\n\t    return target[sub](eventName, handler);\n\t  }, function (handler) {\n\t    return target[unsub](eventName, handler);\n\t  }, transformer).setName('fromEvents');\n\t}\n\n\t// HACK:\n\t//   We don't call parent Class constructor, but instead putting all necessary\n\t//   properties into prototype to simulate ended Property\n\t//   (see Propperty and Observable classes).\n\n\tfunction P(value) {\n\t  this._currentEvent = { type: 'value', value: value, current: true };\n\t}\n\n\tinherit(P, Property, {\n\t  _name: 'constant',\n\t  _active: false,\n\t  _activating: false,\n\t  _alive: false,\n\t  _dispatcher: null,\n\t  _logHandlers: null\n\t});\n\n\tfunction constant(x) {\n\t  return new P(x);\n\t}\n\n\t// HACK:\n\t//   We don't call parent Class constructor, but instead putting all necessary\n\t//   properties into prototype to simulate ended Property\n\t//   (see Propperty and Observable classes).\n\n\tfunction P$1(value) {\n\t  this._currentEvent = { type: 'error', value: value, current: true };\n\t}\n\n\tinherit(P$1, Property, {\n\t  _name: 'constantError',\n\t  _active: false,\n\t  _activating: false,\n\t  _alive: false,\n\t  _dispatcher: null,\n\t  _logHandlers: null\n\t});\n\n\tfunction constantError(x) {\n\t  return new P$1(x);\n\t}\n\n\tfunction createConstructor(BaseClass, name) {\n\t  return function AnonymousObservable(source, options) {\n\t    var _this = this;\n\n\t    BaseClass.call(this);\n\t    this._source = source;\n\t    this._name = source._name + '.' + name;\n\t    this._init(options);\n\t    this._$handleAny = function (event) {\n\t      return _this._handleAny(event);\n\t    };\n\t  };\n\t}\n\n\tfunction createClassMethods(BaseClass) {\n\t  return {\n\t    _init: function () {},\n\t    _free: function () {},\n\t    _handleValue: function (x) {\n\t      this._emitValue(x);\n\t    },\n\t    _handleError: function (x) {\n\t      this._emitError(x);\n\t    },\n\t    _handleEnd: function () {\n\t      this._emitEnd();\n\t    },\n\t    _handleAny: function (event) {\n\t      switch (event.type) {\n\t        case VALUE:\n\t          return this._handleValue(event.value);\n\t        case ERROR:\n\t          return this._handleError(event.value);\n\t        case END:\n\t          return this._handleEnd();\n\t      }\n\t    },\n\t    _onActivation: function () {\n\t      this._source.onAny(this._$handleAny);\n\t    },\n\t    _onDeactivation: function () {\n\t      this._source.offAny(this._$handleAny);\n\t    },\n\t    _clear: function () {\n\t      BaseClass.prototype._clear.call(this);\n\t      this._source = null;\n\t      this._$handleAny = null;\n\t      this._free();\n\t    }\n\t  };\n\t}\n\n\tfunction createStream(name, mixin) {\n\t  var S = createConstructor(Stream, name);\n\t  inherit(S, Stream, createClassMethods(Stream), mixin);\n\t  return S;\n\t}\n\n\tfunction createProperty(name, mixin) {\n\t  var P = createConstructor(Property, name);\n\t  inherit(P, Property, createClassMethods(Property), mixin);\n\t  return P;\n\t}\n\n\tvar P$2 = createProperty('toProperty', {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._getInitialCurrent = fn;\n\t  },\n\t  _onActivation: function () {\n\t    if (this._getInitialCurrent !== null) {\n\t      var getInitial = this._getInitialCurrent;\n\t      this._emitValue(getInitial());\n\t    }\n\t    this._source.onAny(this._$handleAny); // copied from patterns/one-source\n\t  }\n\t});\n\n\tfunction toProperty(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n\t  if (fn !== null && typeof fn !== 'function') {\n\t    throw new Error('You should call toProperty() with a function or no arguments.');\n\t  }\n\t  return new P$2(obs, { fn: fn });\n\t}\n\n\tvar S$6 = createStream('changes', {\n\t  _handleValue: function (x) {\n\t    if (!this._activating) {\n\t      this._emitValue(x);\n\t    }\n\t  },\n\t  _handleError: function (x) {\n\t    if (!this._activating) {\n\t      this._emitError(x);\n\t    }\n\t  }\n\t});\n\n\tfunction changes(obs) {\n\t  return new S$6(obs);\n\t}\n\n\tfunction fromPromise(promise) {\n\n\t  var called = false;\n\n\t  var result = stream(function (emitter) {\n\t    if (!called) {\n\t      var onValue = function (x) {\n\t        emitter.emit(x);\n\t        emitter.end();\n\t      };\n\t      var onError = function (x) {\n\t        emitter.error(x);\n\t        emitter.end();\n\t      };\n\t      var _promise = promise.then(onValue, onError);\n\n\t      // prevent libraries like 'Q' or 'when' from swallowing exceptions\n\t      if (_promise && typeof _promise.done === 'function') {\n\t        _promise.done();\n\t      }\n\n\t      called = true;\n\t    }\n\t  });\n\n\t  return toProperty(result, null).setName('fromPromise');\n\t}\n\n\tfunction getGlodalPromise() {\n\t  if (typeof Promise === 'function') {\n\t    return Promise;\n\t  } else {\n\t    throw new Error('There isn\\'t default Promise, use shim or parameter');\n\t  }\n\t}\n\n\tfunction toPromise (obs) {\n\t  var Promise = arguments.length <= 1 || arguments[1] === undefined ? getGlodalPromise() : arguments[1];\n\n\t  var last = null;\n\t  return new Promise(function (resolve, reject) {\n\t    obs.onAny(function (event) {\n\t      if (event.type === END && last !== null) {\n\t        (last.type === VALUE ? resolve : reject)(last.value);\n\t        last = null;\n\t      } else {\n\t        last = event;\n\t      }\n\t    });\n\t  });\n\t}\n\n\tvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {}\n\n\tfunction createCommonjsModule(fn, module) {\n\t\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n\t}\n\n\tvar ponyfill = createCommonjsModule(function (module, exports) {\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports['default'] = symbolObservablePonyfill;\n\tfunction symbolObservablePonyfill(root) {\n\t\tvar result;\n\t\tvar _Symbol = root.Symbol;\n\n\t\tif (typeof _Symbol === 'function') {\n\t\t\tif (_Symbol.observable) {\n\t\t\t\tresult = _Symbol.observable;\n\t\t\t} else {\n\t\t\t\tresult = _Symbol('observable');\n\t\t\t\t_Symbol.observable = result;\n\t\t\t}\n\t\t} else {\n\t\t\tresult = '@@observable';\n\t\t}\n\n\t\treturn result;\n\t};\n\t});\n\n\tvar require$$0$1 = (ponyfill && typeof ponyfill === 'object' && 'default' in ponyfill ? ponyfill['default'] : ponyfill);\n\n\tvar index$1 = createCommonjsModule(function (module, exports) {\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\n\tvar _ponyfill = require$$0$1;\n\n\tvar _ponyfill2 = _interopRequireDefault(_ponyfill);\n\n\tfunction _interopRequireDefault(obj) {\n\t\treturn obj && obj.__esModule ? obj : { 'default': obj };\n\t}\n\n\tvar root = undefined; /* global window */\n\n\tif (typeof commonjsGlobal !== 'undefined') {\n\t\troot = commonjsGlobal;\n\t} else if (typeof window !== 'undefined') {\n\t\troot = window;\n\t}\n\n\tvar result = (0, _ponyfill2['default'])(root);\n\texports['default'] = result;\n\t});\n\n\tvar require$$0 = (index$1 && typeof index$1 === 'object' && 'default' in index$1 ? index$1['default'] : index$1);\n\n\tvar index = createCommonjsModule(function (module) {\n\tmodule.exports = require$$0;\n\t});\n\n\tvar $$observable = (index && typeof index === 'object' && 'default' in index ? index['default'] : index);\n\n\tfunction fromESObservable(_observable) {\n\t  var observable = _observable[$$observable] ? _observable[$$observable]() : _observable;\n\t  return stream(function (emitter) {\n\t    var unsub = observable.subscribe({\n\t      error: function (error) {\n\t        emitter.error(error);\n\t        emitter.end();\n\t      },\n\t      next: function (value) {\n\t        emitter.emit(value);\n\t      },\n\t      complete: function () {\n\t        emitter.end();\n\t      }\n\t    });\n\n\t    if (unsub.unsubscribe) {\n\t      return function () {\n\t        unsub.unsubscribe();\n\t      };\n\t    } else {\n\t      return unsub;\n\t    }\n\t  }).setName('fromESObservable');\n\t}\n\n\tfunction ESObservable(observable) {\n\t  this._observable = observable.takeErrors(1);\n\t}\n\n\textend(ESObservable.prototype, {\n\t  subscribe: function (observerOrOnNext, onError, onComplete) {\n\t    var _this = this;\n\n\t    var observer = typeof observerOrOnNext === 'function' ? { next: observerOrOnNext, error: onError, complete: onComplete } : observerOrOnNext;\n\n\t    var fn = function (event) {\n\t      if (event.type === END) {\n\t        closed = true;\n\t      }\n\n\t      if (event.type === VALUE && observer.next) {\n\t        observer.next(event.value);\n\t      } else if (event.type === ERROR && observer.error) {\n\t        observer.error(event.value);\n\t      } else if (event.type === END && observer.complete) {\n\t        observer.complete(event.value);\n\t      }\n\t    };\n\n\t    this._observable.onAny(fn);\n\t    var closed = false;\n\n\t    var subscription = {\n\t      unsubscribe: function () {\n\t        closed = true;\n\t        _this._observable.offAny(fn);\n\t      },\n\t      get closed() {\n\t        return closed;\n\t      }\n\t    };\n\t    return subscription;\n\t  }\n\t});\n\n\t// Need to assign directly b/c Symbols aren't enumerable.\n\tESObservable.prototype[$$observable] = function () {\n\t  return this;\n\t};\n\n\tfunction toESObservable() {\n\t  return new ESObservable(this);\n\t}\n\n\tfunction collect(source, keys, values) {\n\t  for (var prop in source) {\n\t    if (source.hasOwnProperty(prop)) {\n\t      keys.push(prop);\n\t      values.push(source[prop]);\n\t    }\n\t  }\n\t}\n\n\tfunction defaultErrorsCombinator(errors) {\n\t  var latestError = void 0;\n\t  for (var i = 0; i < errors.length; i++) {\n\t    if (errors[i] !== undefined) {\n\t      if (latestError === undefined || latestError.index < errors[i].index) {\n\t        latestError = errors[i];\n\t      }\n\t    }\n\t  }\n\t  return latestError.error;\n\t}\n\n\tfunction Combine(active, passive, combinator) {\n\t  var _this = this;\n\n\t  Stream.call(this);\n\t  this._activeCount = active.length;\n\t  this._sources = concat(active, passive);\n\t  this._combinator = combinator;\n\t  this._aliveCount = 0;\n\t  this._latestValues = new Array(this._sources.length);\n\t  this._latestErrors = new Array(this._sources.length);\n\t  fillArray(this._latestValues, NOTHING);\n\t  this._emitAfterActivation = false;\n\t  this._endAfterActivation = false;\n\t  this._latestErrorIndex = 0;\n\n\t  this._$handlers = [];\n\n\t  var _loop = function (i) {\n\t    _this._$handlers.push(function (event) {\n\t      return _this._handleAny(i, event);\n\t    });\n\t  };\n\n\t  for (var i = 0; i < this._sources.length; i++) {\n\t    _loop(i);\n\t  }\n\t}\n\n\tinherit(Combine, Stream, {\n\n\t  _name: 'combine',\n\n\t  _onActivation: function () {\n\t    this._aliveCount = this._activeCount;\n\n\t    // we need to suscribe to _passive_ sources before _active_\n\t    // (see https://github.com/rpominov/kefir/issues/98)\n\t    for (var i = this._activeCount; i < this._sources.length; i++) {\n\t      this._sources[i].onAny(this._$handlers[i]);\n\t    }\n\t    for (var _i = 0; _i < this._activeCount; _i++) {\n\t      this._sources[_i].onAny(this._$handlers[_i]);\n\t    }\n\n\t    if (this._emitAfterActivation) {\n\t      this._emitAfterActivation = false;\n\t      this._emitIfFull();\n\t    }\n\t    if (this._endAfterActivation) {\n\t      this._emitEnd();\n\t    }\n\t  },\n\t  _onDeactivation: function () {\n\t    var length = this._sources.length,\n\t        i = void 0;\n\t    for (i = 0; i < length; i++) {\n\t      this._sources[i].offAny(this._$handlers[i]);\n\t    }\n\t  },\n\t  _emitIfFull: function () {\n\t    var hasAllValues = true;\n\t    var hasErrors = false;\n\t    var length = this._latestValues.length;\n\t    var valuesCopy = new Array(length);\n\t    var errorsCopy = new Array(length);\n\n\t    for (var i = 0; i < length; i++) {\n\t      valuesCopy[i] = this._latestValues[i];\n\t      errorsCopy[i] = this._latestErrors[i];\n\n\t      if (valuesCopy[i] === NOTHING) {\n\t        hasAllValues = false;\n\t      }\n\n\t      if (errorsCopy[i] !== undefined) {\n\t        hasErrors = true;\n\t      }\n\t    }\n\n\t    if (hasAllValues) {\n\t      var combinator = this._combinator;\n\t      this._emitValue(combinator(valuesCopy));\n\t    }\n\t    if (hasErrors) {\n\t      this._emitError(defaultErrorsCombinator(errorsCopy));\n\t    }\n\t  },\n\t  _handleAny: function (i, event) {\n\n\t    if (event.type === VALUE || event.type === ERROR) {\n\n\t      if (event.type === VALUE) {\n\t        this._latestValues[i] = event.value;\n\t        this._latestErrors[i] = undefined;\n\t      }\n\t      if (event.type === ERROR) {\n\t        this._latestValues[i] = NOTHING;\n\t        this._latestErrors[i] = {\n\t          index: this._latestErrorIndex++,\n\t          error: event.value\n\t        };\n\t      }\n\n\t      if (i < this._activeCount) {\n\t        if (this._activating) {\n\t          this._emitAfterActivation = true;\n\t        } else {\n\t          this._emitIfFull();\n\t        }\n\t      }\n\t    } else {\n\t      // END\n\n\t      if (i < this._activeCount) {\n\t        this._aliveCount--;\n\t        if (this._aliveCount === 0) {\n\t          if (this._activating) {\n\t            this._endAfterActivation = true;\n\t          } else {\n\t            this._emitEnd();\n\t          }\n\t        }\n\t      }\n\t    }\n\t  },\n\t  _clear: function () {\n\t    Stream.prototype._clear.call(this);\n\t    this._sources = null;\n\t    this._latestValues = null;\n\t    this._latestErrors = null;\n\t    this._combinator = null;\n\t    this._$handlers = null;\n\t  }\n\t});\n\n\tfunction combineAsArray(active) {\n\t  var passive = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];\n\t  var combinator = arguments[2];\n\n\t  if (!Array.isArray(passive)) {\n\t    throw new Error('Combine can only combine active and passive collections of the same type.');\n\t  }\n\n\t  combinator = combinator ? spread(combinator, active.length + passive.length) : function (x) {\n\t    return x;\n\t  };\n\t  return active.length === 0 ? never() : new Combine(active, passive, combinator);\n\t}\n\n\tfunction combineAsObject(active) {\n\t  var passive = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t  var combinator = arguments[2];\n\n\t  if (typeof passive !== 'object' || Array.isArray(passive)) {\n\t    throw new Error('Combine can only combine active and passive collections of the same type.');\n\t  }\n\n\t  var keys = [],\n\t      activeObservables = [],\n\t      passiveObservables = [];\n\n\t  collect(active, keys, activeObservables);\n\t  collect(passive, keys, passiveObservables);\n\n\t  var objectify = function (values) {\n\t    var event = {};\n\t    for (var i = values.length - 1; 0 <= i; i--) {\n\t      event[keys[i]] = values[i];\n\t    }\n\t    return combinator ? combinator(event) : event;\n\t  };\n\n\t  return activeObservables.length === 0 ? never() : new Combine(activeObservables, passiveObservables, objectify);\n\t}\n\n\tfunction combine(active, passive, combinator) {\n\t  if (typeof passive === 'function') {\n\t    combinator = passive;\n\t    passive = undefined;\n\t  }\n\n\t  return Array.isArray(active) ? combineAsArray(active, passive, combinator) : combineAsObject(active, passive, combinator);\n\t}\n\n\tvar Observable$1 = {\n\t  empty: function () {\n\t    return never();\n\t  },\n\n\n\t  // Monoid based on merge() seems more useful than one based on concat().\n\t  concat: function (a, b) {\n\t    return a.merge(b);\n\t  },\n\t  of: function (x) {\n\t    return constant(x);\n\t  },\n\t  map: function (fn, obs) {\n\t    return obs.map(fn);\n\t  },\n\t  bimap: function (fnErr, fnVal, obs) {\n\t    return obs.mapErrors(fnErr).map(fnVal);\n\t  },\n\n\n\t  // This ap strictly speaking incompatible with chain. If we derive ap from chain we get\n\t  // different (not very useful) behavior. But spec requires that if method can be derived\n\t  // it must have the same behavior as hand-written method. We intentionally violate the spec\n\t  // in hope that it won't cause many troubles in practice. And in return we have more useful type.\n\t  ap: function (obsFn, obsVal) {\n\t    return combine([obsFn, obsVal], function (fn, val) {\n\t      return fn(val);\n\t    });\n\t  },\n\t  chain: function (fn, obs) {\n\t    return obs.flatMap(fn);\n\t  }\n\t};\n\n\n\n\tvar staticLand = Object.freeze({\n\t  Observable: Observable$1\n\t});\n\n\tvar mixin = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    this._emitValue(fn(x));\n\t  }\n\t};\n\n\tvar S$7 = createStream('map', mixin);\n\tvar P$3 = createProperty('map', mixin);\n\n\tvar id = function (x) {\n\t  return x;\n\t};\n\n\tfunction map$1(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? id : arguments[1];\n\n\t  return new (obs._ofSameType(S$7, P$3))(obs, { fn: fn });\n\t}\n\n\tvar mixin$1 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    if (fn(x)) {\n\t      this._emitValue(x);\n\t    }\n\t  }\n\t};\n\n\tvar S$8 = createStream('filter', mixin$1);\n\tvar P$4 = createProperty('filter', mixin$1);\n\n\tvar id$1 = function (x) {\n\t  return x;\n\t};\n\n\tfunction filter(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? id$1 : arguments[1];\n\n\t  return new (obs._ofSameType(S$8, P$4))(obs, { fn: fn });\n\t}\n\n\tvar mixin$2 = {\n\t  _init: function (_ref) {\n\t    var n = _ref.n;\n\n\t    this._n = n;\n\t    if (n <= 0) {\n\t      this._emitEnd();\n\t    }\n\t  },\n\t  _handleValue: function (x) {\n\t    this._n--;\n\t    this._emitValue(x);\n\t    if (this._n === 0) {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t};\n\n\tvar S$9 = createStream('take', mixin$2);\n\tvar P$5 = createProperty('take', mixin$2);\n\n\tfunction take(obs, n) {\n\t  return new (obs._ofSameType(S$9, P$5))(obs, { n: n });\n\t}\n\n\tvar mixin$3 = {\n\t  _init: function (_ref) {\n\t    var n = _ref.n;\n\n\t    this._n = n;\n\t    if (n <= 0) {\n\t      this._emitEnd();\n\t    }\n\t  },\n\t  _handleError: function (x) {\n\t    this._n--;\n\t    this._emitError(x);\n\t    if (this._n === 0) {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t};\n\n\tvar S$10 = createStream('takeErrors', mixin$3);\n\tvar P$6 = createProperty('takeErrors', mixin$3);\n\n\tfunction takeErrors(obs, n) {\n\t  return new (obs._ofSameType(S$10, P$6))(obs, { n: n });\n\t}\n\n\tvar mixin$4 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    if (fn(x)) {\n\t      this._emitValue(x);\n\t    } else {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t};\n\n\tvar S$11 = createStream('takeWhile', mixin$4);\n\tvar P$7 = createProperty('takeWhile', mixin$4);\n\n\tvar id$2 = function (x) {\n\t  return x;\n\t};\n\n\tfunction takeWhile(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? id$2 : arguments[1];\n\n\t  return new (obs._ofSameType(S$11, P$7))(obs, { fn: fn });\n\t}\n\n\tvar mixin$5 = {\n\t  _init: function () {\n\t    this._lastValue = NOTHING;\n\t  },\n\t  _free: function () {\n\t    this._lastValue = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    this._lastValue = x;\n\t  },\n\t  _handleEnd: function () {\n\t    if (this._lastValue !== NOTHING) {\n\t      this._emitValue(this._lastValue);\n\t    }\n\t    this._emitEnd();\n\t  }\n\t};\n\n\tvar S$12 = createStream('last', mixin$5);\n\tvar P$8 = createProperty('last', mixin$5);\n\n\tfunction last(obs) {\n\t  return new (obs._ofSameType(S$12, P$8))(obs);\n\t}\n\n\tvar mixin$6 = {\n\t  _init: function (_ref) {\n\t    var n = _ref.n;\n\n\t    this._n = Math.max(0, n);\n\t  },\n\t  _handleValue: function (x) {\n\t    if (this._n === 0) {\n\t      this._emitValue(x);\n\t    } else {\n\t      this._n--;\n\t    }\n\t  }\n\t};\n\n\tvar S$13 = createStream('skip', mixin$6);\n\tvar P$9 = createProperty('skip', mixin$6);\n\n\tfunction skip(obs, n) {\n\t  return new (obs._ofSameType(S$13, P$9))(obs, { n: n });\n\t}\n\n\tvar mixin$7 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    if (this._fn !== null && !fn(x)) {\n\t      this._fn = null;\n\t    }\n\t    if (this._fn === null) {\n\t      this._emitValue(x);\n\t    }\n\t  }\n\t};\n\n\tvar S$14 = createStream('skipWhile', mixin$7);\n\tvar P$10 = createProperty('skipWhile', mixin$7);\n\n\tvar id$3 = function (x) {\n\t  return x;\n\t};\n\n\tfunction skipWhile(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? id$3 : arguments[1];\n\n\t  return new (obs._ofSameType(S$14, P$10))(obs, { fn: fn });\n\t}\n\n\tvar mixin$8 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t    this._prev = NOTHING;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t    this._prev = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    if (this._prev === NOTHING || !fn(this._prev, x)) {\n\t      this._prev = x;\n\t      this._emitValue(x);\n\t    }\n\t  }\n\t};\n\n\tvar S$15 = createStream('skipDuplicates', mixin$8);\n\tvar P$11 = createProperty('skipDuplicates', mixin$8);\n\n\tvar eq = function (a, b) {\n\t  return a === b;\n\t};\n\n\tfunction skipDuplicates(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? eq : arguments[1];\n\n\t  return new (obs._ofSameType(S$15, P$11))(obs, { fn: fn });\n\t}\n\n\tvar mixin$9 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\t    var seed = _ref.seed;\n\n\t    this._fn = fn;\n\t    this._prev = seed;\n\t  },\n\t  _free: function () {\n\t    this._prev = null;\n\t    this._fn = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    if (this._prev !== NOTHING) {\n\t      var fn = this._fn;\n\t      this._emitValue(fn(this._prev, x));\n\t    }\n\t    this._prev = x;\n\t  }\n\t};\n\n\tvar S$16 = createStream('diff', mixin$9);\n\tvar P$12 = createProperty('diff', mixin$9);\n\n\tfunction defaultFn(a, b) {\n\t  return [a, b];\n\t}\n\n\tfunction diff(obs, fn) {\n\t  var seed = arguments.length <= 2 || arguments[2] === undefined ? NOTHING : arguments[2];\n\n\t  return new (obs._ofSameType(S$16, P$12))(obs, { fn: fn || defaultFn, seed: seed });\n\t}\n\n\tvar P$13 = createProperty('scan', {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\t    var seed = _ref.seed;\n\n\t    this._fn = fn;\n\t    this._seed = seed;\n\t    if (seed !== NOTHING) {\n\t      this._emitValue(seed);\n\t    }\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t    this._seed = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    if (this._currentEvent === null || this._currentEvent.type === ERROR) {\n\t      this._emitValue(this._seed === NOTHING ? x : fn(this._seed, x));\n\t    } else {\n\t      this._emitValue(fn(this._currentEvent.value, x));\n\t    }\n\t  }\n\t});\n\n\tfunction scan(obs, fn) {\n\t  var seed = arguments.length <= 2 || arguments[2] === undefined ? NOTHING : arguments[2];\n\n\t  return new P$13(obs, { fn: fn, seed: seed });\n\t}\n\n\tvar mixin$10 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    var xs = fn(x);\n\t    for (var i = 0; i < xs.length; i++) {\n\t      this._emitValue(xs[i]);\n\t    }\n\t  }\n\t};\n\n\tvar S$17 = createStream('flatten', mixin$10);\n\n\tvar id$4 = function (x) {\n\t  return x;\n\t};\n\n\tfunction flatten(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? id$4 : arguments[1];\n\n\t  return new S$17(obs, { fn: fn });\n\t}\n\n\tvar END_MARKER = {};\n\n\tvar mixin$11 = {\n\t  _init: function (_ref) {\n\t    var _this = this;\n\n\t    var wait = _ref.wait;\n\n\t    this._wait = Math.max(0, wait);\n\t    this._buff = [];\n\t    this._$shiftBuff = function () {\n\t      var value = _this._buff.shift();\n\t      if (value === END_MARKER) {\n\t        _this._emitEnd();\n\t      } else {\n\t        _this._emitValue(value);\n\t      }\n\t    };\n\t  },\n\t  _free: function () {\n\t    this._buff = null;\n\t    this._$shiftBuff = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    if (this._activating) {\n\t      this._emitValue(x);\n\t    } else {\n\t      this._buff.push(x);\n\t      setTimeout(this._$shiftBuff, this._wait);\n\t    }\n\t  },\n\t  _handleEnd: function () {\n\t    if (this._activating) {\n\t      this._emitEnd();\n\t    } else {\n\t      this._buff.push(END_MARKER);\n\t      setTimeout(this._$shiftBuff, this._wait);\n\t    }\n\t  }\n\t};\n\n\tvar S$18 = createStream('delay', mixin$11);\n\tvar P$14 = createProperty('delay', mixin$11);\n\n\tfunction delay(obs, wait) {\n\t  return new (obs._ofSameType(S$18, P$14))(obs, { wait: wait });\n\t}\n\n\tvar now = Date.now ? function () {\n\t  return Date.now();\n\t} : function () {\n\t  return new Date().getTime();\n\t};\n\n\tvar mixin$12 = {\n\t  _init: function (_ref) {\n\t    var _this = this;\n\n\t    var wait = _ref.wait;\n\t    var leading = _ref.leading;\n\t    var trailing = _ref.trailing;\n\n\t    this._wait = Math.max(0, wait);\n\t    this._leading = leading;\n\t    this._trailing = trailing;\n\t    this._trailingValue = null;\n\t    this._timeoutId = null;\n\t    this._endLater = false;\n\t    this._lastCallTime = 0;\n\t    this._$trailingCall = function () {\n\t      return _this._trailingCall();\n\t    };\n\t  },\n\t  _free: function () {\n\t    this._trailingValue = null;\n\t    this._$trailingCall = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    if (this._activating) {\n\t      this._emitValue(x);\n\t    } else {\n\t      var curTime = now();\n\t      if (this._lastCallTime === 0 && !this._leading) {\n\t        this._lastCallTime = curTime;\n\t      }\n\t      var remaining = this._wait - (curTime - this._lastCallTime);\n\t      if (remaining <= 0) {\n\t        this._cancelTrailing();\n\t        this._lastCallTime = curTime;\n\t        this._emitValue(x);\n\t      } else if (this._trailing) {\n\t        this._cancelTrailing();\n\t        this._trailingValue = x;\n\t        this._timeoutId = setTimeout(this._$trailingCall, remaining);\n\t      }\n\t    }\n\t  },\n\t  _handleEnd: function () {\n\t    if (this._activating) {\n\t      this._emitEnd();\n\t    } else {\n\t      if (this._timeoutId) {\n\t        this._endLater = true;\n\t      } else {\n\t        this._emitEnd();\n\t      }\n\t    }\n\t  },\n\t  _cancelTrailing: function () {\n\t    if (this._timeoutId !== null) {\n\t      clearTimeout(this._timeoutId);\n\t      this._timeoutId = null;\n\t    }\n\t  },\n\t  _trailingCall: function () {\n\t    this._emitValue(this._trailingValue);\n\t    this._timeoutId = null;\n\t    this._trailingValue = null;\n\t    this._lastCallTime = !this._leading ? 0 : now();\n\t    if (this._endLater) {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t};\n\n\tvar S$19 = createStream('throttle', mixin$12);\n\tvar P$15 = createProperty('throttle', mixin$12);\n\n\tfunction throttle(obs, wait) {\n\t  var _ref2 = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n\t  var _ref2$leading = _ref2.leading;\n\t  var leading = _ref2$leading === undefined ? true : _ref2$leading;\n\t  var _ref2$trailing = _ref2.trailing;\n\t  var trailing = _ref2$trailing === undefined ? true : _ref2$trailing;\n\n\t  return new (obs._ofSameType(S$19, P$15))(obs, { wait: wait, leading: leading, trailing: trailing });\n\t}\n\n\tvar mixin$13 = {\n\t  _init: function (_ref) {\n\t    var _this = this;\n\n\t    var wait = _ref.wait;\n\t    var immediate = _ref.immediate;\n\n\t    this._wait = Math.max(0, wait);\n\t    this._immediate = immediate;\n\t    this._lastAttempt = 0;\n\t    this._timeoutId = null;\n\t    this._laterValue = null;\n\t    this._endLater = false;\n\t    this._$later = function () {\n\t      return _this._later();\n\t    };\n\t  },\n\t  _free: function () {\n\t    this._laterValue = null;\n\t    this._$later = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    if (this._activating) {\n\t      this._emitValue(x);\n\t    } else {\n\t      this._lastAttempt = now();\n\t      if (this._immediate && !this._timeoutId) {\n\t        this._emitValue(x);\n\t      }\n\t      if (!this._timeoutId) {\n\t        this._timeoutId = setTimeout(this._$later, this._wait);\n\t      }\n\t      if (!this._immediate) {\n\t        this._laterValue = x;\n\t      }\n\t    }\n\t  },\n\t  _handleEnd: function () {\n\t    if (this._activating) {\n\t      this._emitEnd();\n\t    } else {\n\t      if (this._timeoutId && !this._immediate) {\n\t        this._endLater = true;\n\t      } else {\n\t        this._emitEnd();\n\t      }\n\t    }\n\t  },\n\t  _later: function () {\n\t    var last = now() - this._lastAttempt;\n\t    if (last < this._wait && last >= 0) {\n\t      this._timeoutId = setTimeout(this._$later, this._wait - last);\n\t    } else {\n\t      this._timeoutId = null;\n\t      if (!this._immediate) {\n\t        this._emitValue(this._laterValue);\n\t        this._laterValue = null;\n\t      }\n\t      if (this._endLater) {\n\t        this._emitEnd();\n\t      }\n\t    }\n\t  }\n\t};\n\n\tvar S$20 = createStream('debounce', mixin$13);\n\tvar P$16 = createProperty('debounce', mixin$13);\n\n\tfunction debounce(obs, wait) {\n\t  var _ref2 = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n\t  var _ref2$immediate = _ref2.immediate;\n\t  var immediate = _ref2$immediate === undefined ? false : _ref2$immediate;\n\n\t  return new (obs._ofSameType(S$20, P$16))(obs, { wait: wait, immediate: immediate });\n\t}\n\n\tvar mixin$14 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleError: function (x) {\n\t    var fn = this._fn;\n\t    this._emitError(fn(x));\n\t  }\n\t};\n\n\tvar S$21 = createStream('mapErrors', mixin$14);\n\tvar P$17 = createProperty('mapErrors', mixin$14);\n\n\tvar id$5 = function (x) {\n\t  return x;\n\t};\n\n\tfunction mapErrors(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? id$5 : arguments[1];\n\n\t  return new (obs._ofSameType(S$21, P$17))(obs, { fn: fn });\n\t}\n\n\tvar mixin$15 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleError: function (x) {\n\t    var fn = this._fn;\n\t    if (fn(x)) {\n\t      this._emitError(x);\n\t    }\n\t  }\n\t};\n\n\tvar S$22 = createStream('filterErrors', mixin$15);\n\tvar P$18 = createProperty('filterErrors', mixin$15);\n\n\tvar id$6 = function (x) {\n\t  return x;\n\t};\n\n\tfunction filterErrors(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? id$6 : arguments[1];\n\n\t  return new (obs._ofSameType(S$22, P$18))(obs, { fn: fn });\n\t}\n\n\tvar mixin$16 = {\n\t  _handleValue: function () {}\n\t};\n\n\tvar S$23 = createStream('ignoreValues', mixin$16);\n\tvar P$19 = createProperty('ignoreValues', mixin$16);\n\n\tfunction ignoreValues(obs) {\n\t  return new (obs._ofSameType(S$23, P$19))(obs);\n\t}\n\n\tvar mixin$17 = {\n\t  _handleError: function () {}\n\t};\n\n\tvar S$24 = createStream('ignoreErrors', mixin$17);\n\tvar P$20 = createProperty('ignoreErrors', mixin$17);\n\n\tfunction ignoreErrors(obs) {\n\t  return new (obs._ofSameType(S$24, P$20))(obs);\n\t}\n\n\tvar mixin$18 = {\n\t  _handleEnd: function () {}\n\t};\n\n\tvar S$25 = createStream('ignoreEnd', mixin$18);\n\tvar P$21 = createProperty('ignoreEnd', mixin$18);\n\n\tfunction ignoreEnd(obs) {\n\t  return new (obs._ofSameType(S$25, P$21))(obs);\n\t}\n\n\tvar mixin$19 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleEnd: function () {\n\t    var fn = this._fn;\n\t    this._emitValue(fn());\n\t    this._emitEnd();\n\t  }\n\t};\n\n\tvar S$26 = createStream('beforeEnd', mixin$19);\n\tvar P$22 = createProperty('beforeEnd', mixin$19);\n\n\tfunction beforeEnd(obs, fn) {\n\t  return new (obs._ofSameType(S$26, P$22))(obs, { fn: fn });\n\t}\n\n\tvar mixin$20 = {\n\t  _init: function (_ref) {\n\t    var min = _ref.min;\n\t    var max = _ref.max;\n\n\t    this._max = max;\n\t    this._min = min;\n\t    this._buff = [];\n\t  },\n\t  _free: function () {\n\t    this._buff = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    this._buff = slide(this._buff, x, this._max);\n\t    if (this._buff.length >= this._min) {\n\t      this._emitValue(this._buff);\n\t    }\n\t  }\n\t};\n\n\tvar S$27 = createStream('slidingWindow', mixin$20);\n\tvar P$23 = createProperty('slidingWindow', mixin$20);\n\n\tfunction slidingWindow(obs, max) {\n\t  var min = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];\n\n\t  return new (obs._ofSameType(S$27, P$23))(obs, { min: min, max: max });\n\t}\n\n\tvar mixin$21 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\t    var flushOnEnd = _ref.flushOnEnd;\n\n\t    this._fn = fn;\n\t    this._flushOnEnd = flushOnEnd;\n\t    this._buff = [];\n\t  },\n\t  _free: function () {\n\t    this._buff = null;\n\t  },\n\t  _flush: function () {\n\t    if (this._buff !== null && this._buff.length !== 0) {\n\t      this._emitValue(this._buff);\n\t      this._buff = [];\n\t    }\n\t  },\n\t  _handleValue: function (x) {\n\t    this._buff.push(x);\n\t    var fn = this._fn;\n\t    if (!fn(x)) {\n\t      this._flush();\n\t    }\n\t  },\n\t  _handleEnd: function () {\n\t    if (this._flushOnEnd) {\n\t      this._flush();\n\t    }\n\t    this._emitEnd();\n\t  }\n\t};\n\n\tvar S$28 = createStream('bufferWhile', mixin$21);\n\tvar P$24 = createProperty('bufferWhile', mixin$21);\n\n\tvar id$7 = function (x) {\n\t  return x;\n\t};\n\n\tfunction bufferWhile(obs, fn) {\n\t  var _ref2 = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n\t  var _ref2$flushOnEnd = _ref2.flushOnEnd;\n\t  var flushOnEnd = _ref2$flushOnEnd === undefined ? true : _ref2$flushOnEnd;\n\n\t  return new (obs._ofSameType(S$28, P$24))(obs, { fn: fn || id$7, flushOnEnd: flushOnEnd });\n\t}\n\n\tvar mixin$22 = {\n\t  _init: function (_ref) {\n\t    var count = _ref.count;\n\t    var flushOnEnd = _ref.flushOnEnd;\n\n\t    this._count = count;\n\t    this._flushOnEnd = flushOnEnd;\n\t    this._buff = [];\n\t  },\n\t  _free: function () {\n\t    this._buff = null;\n\t  },\n\t  _flush: function () {\n\t    if (this._buff !== null && this._buff.length !== 0) {\n\t      this._emitValue(this._buff);\n\t      this._buff = [];\n\t    }\n\t  },\n\t  _handleValue: function (x) {\n\t    this._buff.push(x);\n\t    if (this._buff.length >= this._count) {\n\t      this._flush();\n\t    }\n\t  },\n\t  _handleEnd: function () {\n\t    if (this._flushOnEnd) {\n\t      this._flush();\n\t    }\n\t    this._emitEnd();\n\t  }\n\t};\n\n\tvar S$29 = createStream('bufferWithCount', mixin$22);\n\tvar P$25 = createProperty('bufferWithCount', mixin$22);\n\n\tfunction bufferWhile$1(obs, count) {\n\t  var _ref2 = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n\t  var _ref2$flushOnEnd = _ref2.flushOnEnd;\n\t  var flushOnEnd = _ref2$flushOnEnd === undefined ? true : _ref2$flushOnEnd;\n\n\t  return new (obs._ofSameType(S$29, P$25))(obs, { count: count, flushOnEnd: flushOnEnd });\n\t}\n\n\tvar mixin$23 = {\n\t  _init: function (_ref) {\n\t    var _this = this;\n\n\t    var wait = _ref.wait;\n\t    var count = _ref.count;\n\t    var flushOnEnd = _ref.flushOnEnd;\n\n\t    this._wait = wait;\n\t    this._count = count;\n\t    this._flushOnEnd = flushOnEnd;\n\t    this._intervalId = null;\n\t    this._$onTick = function () {\n\t      return _this._flush();\n\t    };\n\t    this._buff = [];\n\t  },\n\t  _free: function () {\n\t    this._$onTick = null;\n\t    this._buff = null;\n\t  },\n\t  _flush: function () {\n\t    if (this._buff !== null) {\n\t      this._emitValue(this._buff);\n\t      this._buff = [];\n\t    }\n\t  },\n\t  _handleValue: function (x) {\n\t    this._buff.push(x);\n\t    if (this._buff.length >= this._count) {\n\t      clearInterval(this._intervalId);\n\t      this._flush();\n\t      this._intervalId = setInterval(this._$onTick, this._wait);\n\t    }\n\t  },\n\t  _handleEnd: function () {\n\t    if (this._flushOnEnd && this._buff.length !== 0) {\n\t      this._flush();\n\t    }\n\t    this._emitEnd();\n\t  },\n\t  _onActivation: function () {\n\t    this._intervalId = setInterval(this._$onTick, this._wait);\n\t    this._source.onAny(this._$handleAny); // copied from patterns/one-source\n\t  },\n\t  _onDeactivation: function () {\n\t    if (this._intervalId !== null) {\n\t      clearInterval(this._intervalId);\n\t      this._intervalId = null;\n\t    }\n\t    this._source.offAny(this._$handleAny); // copied from patterns/one-source\n\t  }\n\t};\n\n\tvar S$30 = createStream('bufferWithTimeOrCount', mixin$23);\n\tvar P$26 = createProperty('bufferWithTimeOrCount', mixin$23);\n\n\tfunction bufferWithTimeOrCount(obs, wait, count) {\n\t  var _ref2 = arguments.length <= 3 || arguments[3] === undefined ? {} : arguments[3];\n\n\t  var _ref2$flushOnEnd = _ref2.flushOnEnd;\n\t  var flushOnEnd = _ref2$flushOnEnd === undefined ? true : _ref2$flushOnEnd;\n\n\t  return new (obs._ofSameType(S$30, P$26))(obs, { wait: wait, count: count, flushOnEnd: flushOnEnd });\n\t}\n\n\tfunction xformForObs(obs) {\n\t  return {\n\t    '@@transducer/step': function (res, input) {\n\t      obs._emitValue(input);\n\t      return null;\n\t    },\n\t    '@@transducer/result': function () {\n\t      obs._emitEnd();\n\t      return null;\n\t    }\n\t  };\n\t}\n\n\tvar mixin$24 = {\n\t  _init: function (_ref) {\n\t    var transducer = _ref.transducer;\n\n\t    this._xform = transducer(xformForObs(this));\n\t  },\n\t  _free: function () {\n\t    this._xform = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    if (this._xform['@@transducer/step'](null, x) !== null) {\n\t      this._xform['@@transducer/result'](null);\n\t    }\n\t  },\n\t  _handleEnd: function () {\n\t    this._xform['@@transducer/result'](null);\n\t  }\n\t};\n\n\tvar S$31 = createStream('transduce', mixin$24);\n\tvar P$27 = createProperty('transduce', mixin$24);\n\n\tfunction transduce(obs, transducer) {\n\t  return new (obs._ofSameType(S$31, P$27))(obs, { transducer: transducer });\n\t}\n\n\tvar mixin$25 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._handler = fn;\n\t    this._emitter = emitter(this);\n\t  },\n\t  _free: function () {\n\t    this._handler = null;\n\t    this._emitter = null;\n\t  },\n\t  _handleAny: function (event) {\n\t    this._handler(this._emitter, event);\n\t  }\n\t};\n\n\tvar S$32 = createStream('withHandler', mixin$25);\n\tvar P$28 = createProperty('withHandler', mixin$25);\n\n\tfunction withHandler(obs, fn) {\n\t  return new (obs._ofSameType(S$32, P$28))(obs, { fn: fn });\n\t}\n\n\tvar isArray = Array.isArray || function (xs) {\n\t  return Object.prototype.toString.call(xs) === '[object Array]';\n\t};\n\n\tfunction Zip(sources, combinator) {\n\t  var _this = this;\n\n\t  Stream.call(this);\n\n\t  this._buffers = map(sources, function (source) {\n\t    return isArray(source) ? cloneArray(source) : [];\n\t  });\n\t  this._sources = map(sources, function (source) {\n\t    return isArray(source) ? never() : source;\n\t  });\n\n\t  this._combinator = combinator ? spread(combinator, this._sources.length) : function (x) {\n\t    return x;\n\t  };\n\t  this._aliveCount = 0;\n\n\t  this._$handlers = [];\n\n\t  var _loop = function (i) {\n\t    _this._$handlers.push(function (event) {\n\t      return _this._handleAny(i, event);\n\t    });\n\t  };\n\n\t  for (var i = 0; i < this._sources.length; i++) {\n\t    _loop(i);\n\t  }\n\t}\n\n\tinherit(Zip, Stream, {\n\n\t  _name: 'zip',\n\n\t  _onActivation: function () {\n\n\t    // if all sources are arrays\n\t    while (this._isFull()) {\n\t      this._emit();\n\t    }\n\n\t    var length = this._sources.length;\n\t    this._aliveCount = length;\n\t    for (var i = 0; i < length && this._active; i++) {\n\t      this._sources[i].onAny(this._$handlers[i]);\n\t    }\n\t  },\n\t  _onDeactivation: function () {\n\t    for (var i = 0; i < this._sources.length; i++) {\n\t      this._sources[i].offAny(this._$handlers[i]);\n\t    }\n\t  },\n\t  _emit: function () {\n\t    var values = new Array(this._buffers.length);\n\t    for (var i = 0; i < this._buffers.length; i++) {\n\t      values[i] = this._buffers[i].shift();\n\t    }\n\t    var combinator = this._combinator;\n\t    this._emitValue(combinator(values));\n\t  },\n\t  _isFull: function () {\n\t    for (var i = 0; i < this._buffers.length; i++) {\n\t      if (this._buffers[i].length === 0) {\n\t        return false;\n\t      }\n\t    }\n\t    return true;\n\t  },\n\t  _handleAny: function (i, event) {\n\t    if (event.type === VALUE) {\n\t      this._buffers[i].push(event.value);\n\t      if (this._isFull()) {\n\t        this._emit();\n\t      }\n\t    }\n\t    if (event.type === ERROR) {\n\t      this._emitError(event.value);\n\t    }\n\t    if (event.type === END) {\n\t      this._aliveCount--;\n\t      if (this._aliveCount === 0) {\n\t        this._emitEnd();\n\t      }\n\t    }\n\t  },\n\t  _clear: function () {\n\t    Stream.prototype._clear.call(this);\n\t    this._sources = null;\n\t    this._buffers = null;\n\t    this._combinator = null;\n\t    this._$handlers = null;\n\t  }\n\t});\n\n\tfunction zip(observables, combinator /* Function | falsey */) {\n\t  return observables.length === 0 ? never() : new Zip(observables, combinator);\n\t}\n\n\tvar id$8 = function (x) {\n\t  return x;\n\t};\n\n\tfunction AbstractPool() {\n\t  var _this = this;\n\n\t  var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n\t  var _ref$queueLim = _ref.queueLim;\n\t  var queueLim = _ref$queueLim === undefined ? 0 : _ref$queueLim;\n\t  var _ref$concurLim = _ref.concurLim;\n\t  var concurLim = _ref$concurLim === undefined ? -1 : _ref$concurLim;\n\t  var _ref$drop = _ref.drop;\n\t  var drop = _ref$drop === undefined ? 'new' : _ref$drop;\n\n\t  Stream.call(this);\n\n\t  this._queueLim = queueLim < 0 ? -1 : queueLim;\n\t  this._concurLim = concurLim < 0 ? -1 : concurLim;\n\t  this._drop = drop;\n\t  this._queue = [];\n\t  this._curSources = [];\n\t  this._$handleSubAny = function (event) {\n\t    return _this._handleSubAny(event);\n\t  };\n\t  this._$endHandlers = [];\n\t  this._currentlyAdding = null;\n\n\t  if (this._concurLim === 0) {\n\t    this._emitEnd();\n\t  }\n\t}\n\n\tinherit(AbstractPool, Stream, {\n\n\t  _name: 'abstractPool',\n\n\t  _add: function (obj, toObs /* Function | falsey */) {\n\t    toObs = toObs || id$8;\n\t    if (this._concurLim === -1 || this._curSources.length < this._concurLim) {\n\t      this._addToCur(toObs(obj));\n\t    } else {\n\t      if (this._queueLim === -1 || this._queue.length < this._queueLim) {\n\t        this._addToQueue(toObs(obj));\n\t      } else if (this._drop === 'old') {\n\t        this._removeOldest();\n\t        this._add(obj, toObs);\n\t      }\n\t    }\n\t  },\n\t  _addAll: function (obss) {\n\t    var _this2 = this;\n\n\t    forEach(obss, function (obs) {\n\t      return _this2._add(obs);\n\t    });\n\t  },\n\t  _remove: function (obs) {\n\t    if (this._removeCur(obs) === -1) {\n\t      this._removeQueue(obs);\n\t    }\n\t  },\n\t  _addToQueue: function (obs) {\n\t    this._queue = concat(this._queue, [obs]);\n\t  },\n\t  _addToCur: function (obs) {\n\t    if (this._active) {\n\n\t      // HACK:\n\t      //\n\t      // We have two optimizations for cases when `obs` is ended. We don't want\n\t      // to add such observable to the list, but only want to emit events\n\t      // from it (if it has some).\n\t      //\n\t      // Instead of this hacks, we could just did following,\n\t      // but it would be 5-8 times slower:\n\t      //\n\t      //     this._curSources = concat(this._curSources, [obs]);\n\t      //     this._subscribe(obs);\n\t      //\n\n\t      // #1\n\t      // This one for cases when `obs` already ended\n\t      // e.g., Kefir.constant() or Kefir.never()\n\t      if (!obs._alive) {\n\t        if (obs._currentEvent) {\n\t          this._emit(obs._currentEvent.type, obs._currentEvent.value);\n\t        }\n\t        return;\n\t      }\n\n\t      // #2\n\t      // This one is for cases when `obs` going to end synchronously on\n\t      // first subscriber e.g., Kefir.stream(em => {em.emit(1); em.end()})\n\t      this._currentlyAdding = obs;\n\t      obs.onAny(this._$handleSubAny);\n\t      this._currentlyAdding = null;\n\t      if (obs._alive) {\n\t        this._curSources = concat(this._curSources, [obs]);\n\t        if (this._active) {\n\t          this._subToEnd(obs);\n\t        }\n\t      }\n\t    } else {\n\t      this._curSources = concat(this._curSources, [obs]);\n\t    }\n\t  },\n\t  _subToEnd: function (obs) {\n\t    var _this3 = this;\n\n\t    var onEnd = function () {\n\t      return _this3._removeCur(obs);\n\t    };\n\t    this._$endHandlers.push({ obs: obs, handler: onEnd });\n\t    obs.onEnd(onEnd);\n\t  },\n\t  _subscribe: function (obs) {\n\t    obs.onAny(this._$handleSubAny);\n\n\t    // it can become inactive in responce of subscribing to `obs.onAny` above\n\t    if (this._active) {\n\t      this._subToEnd(obs);\n\t    }\n\t  },\n\t  _unsubscribe: function (obs) {\n\t    obs.offAny(this._$handleSubAny);\n\n\t    var onEndI = findByPred(this._$endHandlers, function (obj) {\n\t      return obj.obs === obs;\n\t    });\n\t    if (onEndI !== -1) {\n\t      obs.offEnd(this._$endHandlers[onEndI].handler);\n\t      this._$endHandlers.splice(onEndI, 1);\n\t    }\n\t  },\n\t  _handleSubAny: function (event) {\n\t    if (event.type === VALUE) {\n\t      this._emitValue(event.value);\n\t    } else if (event.type === ERROR) {\n\t      this._emitError(event.value);\n\t    }\n\t  },\n\t  _removeQueue: function (obs) {\n\t    var index = find(this._queue, obs);\n\t    this._queue = remove(this._queue, index);\n\t    return index;\n\t  },\n\t  _removeCur: function (obs) {\n\t    if (this._active) {\n\t      this._unsubscribe(obs);\n\t    }\n\t    var index = find(this._curSources, obs);\n\t    this._curSources = remove(this._curSources, index);\n\t    if (index !== -1) {\n\t      if (this._queue.length !== 0) {\n\t        this._pullQueue();\n\t      } else if (this._curSources.length === 0) {\n\t        this._onEmpty();\n\t      }\n\t    }\n\t    return index;\n\t  },\n\t  _removeOldest: function () {\n\t    this._removeCur(this._curSources[0]);\n\t  },\n\t  _pullQueue: function () {\n\t    if (this._queue.length !== 0) {\n\t      this._queue = cloneArray(this._queue);\n\t      this._addToCur(this._queue.shift());\n\t    }\n\t  },\n\t  _onActivation: function () {\n\t    for (var i = 0, sources = this._curSources; i < sources.length && this._active; i++) {\n\t      this._subscribe(sources[i]);\n\t    }\n\t  },\n\t  _onDeactivation: function () {\n\t    for (var i = 0, sources = this._curSources; i < sources.length; i++) {\n\t      this._unsubscribe(sources[i]);\n\t    }\n\t    if (this._currentlyAdding !== null) {\n\t      this._unsubscribe(this._currentlyAdding);\n\t    }\n\t  },\n\t  _isEmpty: function () {\n\t    return this._curSources.length === 0;\n\t  },\n\t  _onEmpty: function () {},\n\t  _clear: function () {\n\t    Stream.prototype._clear.call(this);\n\t    this._queue = null;\n\t    this._curSources = null;\n\t    this._$handleSubAny = null;\n\t    this._$endHandlers = null;\n\t  }\n\t});\n\n\tfunction Merge(sources) {\n\t  AbstractPool.call(this);\n\t  this._addAll(sources);\n\t  this._initialised = true;\n\t}\n\n\tinherit(Merge, AbstractPool, {\n\n\t  _name: 'merge',\n\n\t  _onEmpty: function () {\n\t    if (this._initialised) {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t});\n\n\tfunction merge(observables) {\n\t  return observables.length === 0 ? never() : new Merge(observables);\n\t}\n\n\tfunction S$33(generator) {\n\t  var _this = this;\n\n\t  Stream.call(this);\n\t  this._generator = generator;\n\t  this._source = null;\n\t  this._inLoop = false;\n\t  this._iteration = 0;\n\t  this._$handleAny = function (event) {\n\t    return _this._handleAny(event);\n\t  };\n\t}\n\n\tinherit(S$33, Stream, {\n\n\t  _name: 'repeat',\n\n\t  _handleAny: function (event) {\n\t    if (event.type === END) {\n\t      this._source = null;\n\t      this._getSource();\n\t    } else {\n\t      this._emit(event.type, event.value);\n\t    }\n\t  },\n\t  _getSource: function () {\n\t    if (!this._inLoop) {\n\t      this._inLoop = true;\n\t      var generator = this._generator;\n\t      while (this._source === null && this._alive && this._active) {\n\t        this._source = generator(this._iteration++);\n\t        if (this._source) {\n\t          this._source.onAny(this._$handleAny);\n\t        } else {\n\t          this._emitEnd();\n\t        }\n\t      }\n\t      this._inLoop = false;\n\t    }\n\t  },\n\t  _onActivation: function () {\n\t    if (this._source) {\n\t      this._source.onAny(this._$handleAny);\n\t    } else {\n\t      this._getSource();\n\t    }\n\t  },\n\t  _onDeactivation: function () {\n\t    if (this._source) {\n\t      this._source.offAny(this._$handleAny);\n\t    }\n\t  },\n\t  _clear: function () {\n\t    Stream.prototype._clear.call(this);\n\t    this._generator = null;\n\t    this._source = null;\n\t    this._$handleAny = null;\n\t  }\n\t});\n\n\tfunction repeat (generator) {\n\t  return new S$33(generator);\n\t}\n\n\tfunction concat$1(observables) {\n\t  return repeat(function (index) {\n\t    return observables.length > index ? observables[index] : false;\n\t  }).setName('concat');\n\t}\n\n\tfunction Pool() {\n\t  AbstractPool.call(this);\n\t}\n\n\tinherit(Pool, AbstractPool, {\n\n\t  _name: 'pool',\n\n\t  plug: function (obs) {\n\t    this._add(obs);\n\t    return this;\n\t  },\n\t  unplug: function (obs) {\n\t    this._remove(obs);\n\t    return this;\n\t  }\n\t});\n\n\tfunction FlatMap(source, fn, options) {\n\t  var _this = this;\n\n\t  AbstractPool.call(this, options);\n\t  this._source = source;\n\t  this._fn = fn;\n\t  this._mainEnded = false;\n\t  this._lastCurrent = null;\n\t  this._$handleMain = function (event) {\n\t    return _this._handleMain(event);\n\t  };\n\t}\n\n\tinherit(FlatMap, AbstractPool, {\n\t  _onActivation: function () {\n\t    AbstractPool.prototype._onActivation.call(this);\n\t    if (this._active) {\n\t      this._source.onAny(this._$handleMain);\n\t    }\n\t  },\n\t  _onDeactivation: function () {\n\t    AbstractPool.prototype._onDeactivation.call(this);\n\t    this._source.offAny(this._$handleMain);\n\t    this._hadNoEvSinceDeact = true;\n\t  },\n\t  _handleMain: function (event) {\n\n\t    if (event.type === VALUE) {\n\t      // Is latest value before deactivation survived, and now is 'current' on this activation?\n\t      // We don't want to handle such values, to prevent to constantly add\n\t      // same observale on each activation/deactivation when our main source\n\t      // is a `Kefir.conatant()` for example.\n\t      var sameCurr = this._activating && this._hadNoEvSinceDeact && this._lastCurrent === event.value;\n\t      if (!sameCurr) {\n\t        this._add(event.value, this._fn);\n\t      }\n\t      this._lastCurrent = event.value;\n\t      this._hadNoEvSinceDeact = false;\n\t    }\n\n\t    if (event.type === ERROR) {\n\t      this._emitError(event.value);\n\t    }\n\n\t    if (event.type === END) {\n\t      if (this._isEmpty()) {\n\t        this._emitEnd();\n\t      } else {\n\t        this._mainEnded = true;\n\t      }\n\t    }\n\t  },\n\t  _onEmpty: function () {\n\t    if (this._mainEnded) {\n\t      this._emitEnd();\n\t    }\n\t  },\n\t  _clear: function () {\n\t    AbstractPool.prototype._clear.call(this);\n\t    this._source = null;\n\t    this._lastCurrent = null;\n\t    this._$handleMain = null;\n\t  }\n\t});\n\n\tfunction FlatMapErrors(source, fn) {\n\t  FlatMap.call(this, source, fn);\n\t}\n\n\tinherit(FlatMapErrors, FlatMap, {\n\n\t  // Same as in FlatMap, only VALUE/ERROR flipped\n\t  _handleMain: function (event) {\n\n\t    if (event.type === ERROR) {\n\t      var sameCurr = this._activating && this._hadNoEvSinceDeact && this._lastCurrent === event.value;\n\t      if (!sameCurr) {\n\t        this._add(event.value, this._fn);\n\t      }\n\t      this._lastCurrent = event.value;\n\t      this._hadNoEvSinceDeact = false;\n\t    }\n\n\t    if (event.type === VALUE) {\n\t      this._emitValue(event.value);\n\t    }\n\n\t    if (event.type === END) {\n\t      if (this._isEmpty()) {\n\t        this._emitEnd();\n\t      } else {\n\t        this._mainEnded = true;\n\t      }\n\t    }\n\t  }\n\t});\n\n\tfunction createConstructor$1(BaseClass, name) {\n\t  return function AnonymousObservable(primary, secondary, options) {\n\t    var _this = this;\n\n\t    BaseClass.call(this);\n\t    this._primary = primary;\n\t    this._secondary = secondary;\n\t    this._name = primary._name + '.' + name;\n\t    this._lastSecondary = NOTHING;\n\t    this._$handleSecondaryAny = function (event) {\n\t      return _this._handleSecondaryAny(event);\n\t    };\n\t    this._$handlePrimaryAny = function (event) {\n\t      return _this._handlePrimaryAny(event);\n\t    };\n\t    this._init(options);\n\t  };\n\t}\n\n\tfunction createClassMethods$1(BaseClass) {\n\t  return {\n\t    _init: function () {},\n\t    _free: function () {},\n\t    _handlePrimaryValue: function (x) {\n\t      this._emitValue(x);\n\t    },\n\t    _handlePrimaryError: function (x) {\n\t      this._emitError(x);\n\t    },\n\t    _handlePrimaryEnd: function () {\n\t      this._emitEnd();\n\t    },\n\t    _handleSecondaryValue: function (x) {\n\t      this._lastSecondary = x;\n\t    },\n\t    _handleSecondaryError: function (x) {\n\t      this._emitError(x);\n\t    },\n\t    _handleSecondaryEnd: function () {},\n\t    _handlePrimaryAny: function (event) {\n\t      switch (event.type) {\n\t        case VALUE:\n\t          return this._handlePrimaryValue(event.value);\n\t        case ERROR:\n\t          return this._handlePrimaryError(event.value);\n\t        case END:\n\t          return this._handlePrimaryEnd(event.value);\n\t      }\n\t    },\n\t    _handleSecondaryAny: function (event) {\n\t      switch (event.type) {\n\t        case VALUE:\n\t          return this._handleSecondaryValue(event.value);\n\t        case ERROR:\n\t          return this._handleSecondaryError(event.value);\n\t        case END:\n\t          this._handleSecondaryEnd(event.value);\n\t          this._removeSecondary();\n\t      }\n\t    },\n\t    _removeSecondary: function () {\n\t      if (this._secondary !== null) {\n\t        this._secondary.offAny(this._$handleSecondaryAny);\n\t        this._$handleSecondaryAny = null;\n\t        this._secondary = null;\n\t      }\n\t    },\n\t    _onActivation: function () {\n\t      if (this._secondary !== null) {\n\t        this._secondary.onAny(this._$handleSecondaryAny);\n\t      }\n\t      if (this._active) {\n\t        this._primary.onAny(this._$handlePrimaryAny);\n\t      }\n\t    },\n\t    _onDeactivation: function () {\n\t      if (this._secondary !== null) {\n\t        this._secondary.offAny(this._$handleSecondaryAny);\n\t      }\n\t      this._primary.offAny(this._$handlePrimaryAny);\n\t    },\n\t    _clear: function () {\n\t      BaseClass.prototype._clear.call(this);\n\t      this._primary = null;\n\t      this._secondary = null;\n\t      this._lastSecondary = null;\n\t      this._$handleSecondaryAny = null;\n\t      this._$handlePrimaryAny = null;\n\t      this._free();\n\t    }\n\t  };\n\t}\n\n\tfunction createStream$1(name, mixin) {\n\t  var S = createConstructor$1(Stream, name);\n\t  inherit(S, Stream, createClassMethods$1(Stream), mixin);\n\t  return S;\n\t}\n\n\tfunction createProperty$1(name, mixin) {\n\t  var P = createConstructor$1(Property, name);\n\t  inherit(P, Property, createClassMethods$1(Property), mixin);\n\t  return P;\n\t}\n\n\tvar mixin$26 = {\n\t  _handlePrimaryValue: function (x) {\n\t    if (this._lastSecondary !== NOTHING && this._lastSecondary) {\n\t      this._emitValue(x);\n\t    }\n\t  },\n\t  _handleSecondaryEnd: function () {\n\t    if (this._lastSecondary === NOTHING || !this._lastSecondary) {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t};\n\n\tvar S$34 = createStream$1('filterBy', mixin$26);\n\tvar P$29 = createProperty$1('filterBy', mixin$26);\n\n\tfunction filterBy(primary, secondary) {\n\t  return new (primary._ofSameType(S$34, P$29))(primary, secondary);\n\t}\n\n\tvar id2 = function (_, x) {\n\t  return x;\n\t};\n\n\tfunction sampledBy(passive, active, combinator) {\n\t  var _combinator = combinator ? function (a, b) {\n\t    return combinator(b, a);\n\t  } : id2;\n\t  return combine([active], [passive], _combinator).setName(passive, 'sampledBy');\n\t}\n\n\tvar mixin$27 = {\n\t  _handlePrimaryValue: function (x) {\n\t    if (this._lastSecondary !== NOTHING) {\n\t      this._emitValue(x);\n\t    }\n\t  },\n\t  _handleSecondaryEnd: function () {\n\t    if (this._lastSecondary === NOTHING) {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t};\n\n\tvar S$35 = createStream$1('skipUntilBy', mixin$27);\n\tvar P$30 = createProperty$1('skipUntilBy', mixin$27);\n\n\tfunction skipUntilBy(primary, secondary) {\n\t  return new (primary._ofSameType(S$35, P$30))(primary, secondary);\n\t}\n\n\tvar mixin$28 = {\n\t  _handleSecondaryValue: function () {\n\t    this._emitEnd();\n\t  }\n\t};\n\n\tvar S$36 = createStream$1('takeUntilBy', mixin$28);\n\tvar P$31 = createProperty$1('takeUntilBy', mixin$28);\n\n\tfunction takeUntilBy(primary, secondary) {\n\t  return new (primary._ofSameType(S$36, P$31))(primary, secondary);\n\t}\n\n\tvar mixin$29 = {\n\t  _init: function () {\n\t    var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n\t    var _ref$flushOnEnd = _ref.flushOnEnd;\n\t    var flushOnEnd = _ref$flushOnEnd === undefined ? true : _ref$flushOnEnd;\n\n\t    this._buff = [];\n\t    this._flushOnEnd = flushOnEnd;\n\t  },\n\t  _free: function () {\n\t    this._buff = null;\n\t  },\n\t  _flush: function () {\n\t    if (this._buff !== null) {\n\t      this._emitValue(this._buff);\n\t      this._buff = [];\n\t    }\n\t  },\n\t  _handlePrimaryEnd: function () {\n\t    if (this._flushOnEnd) {\n\t      this._flush();\n\t    }\n\t    this._emitEnd();\n\t  },\n\t  _onActivation: function () {\n\t    this._primary.onAny(this._$handlePrimaryAny);\n\t    if (this._alive && this._secondary !== null) {\n\t      this._secondary.onAny(this._$handleSecondaryAny);\n\t    }\n\t  },\n\t  _handlePrimaryValue: function (x) {\n\t    this._buff.push(x);\n\t  },\n\t  _handleSecondaryValue: function () {\n\t    this._flush();\n\t  },\n\t  _handleSecondaryEnd: function () {\n\t    if (!this._flushOnEnd) {\n\t      this._emitEnd();\n\t    }\n\t  }\n\t};\n\n\tvar S$37 = createStream$1('bufferBy', mixin$29);\n\tvar P$32 = createProperty$1('bufferBy', mixin$29);\n\n\tfunction bufferBy(primary, secondary, options /* optional */) {\n\t  return new (primary._ofSameType(S$37, P$32))(primary, secondary, options);\n\t}\n\n\tvar mixin$30 = {\n\t  _init: function () {\n\t    var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n\t    var _ref$flushOnEnd = _ref.flushOnEnd;\n\t    var flushOnEnd = _ref$flushOnEnd === undefined ? true : _ref$flushOnEnd;\n\t    var _ref$flushOnChange = _ref.flushOnChange;\n\t    var flushOnChange = _ref$flushOnChange === undefined ? false : _ref$flushOnChange;\n\n\t    this._buff = [];\n\t    this._flushOnEnd = flushOnEnd;\n\t    this._flushOnChange = flushOnChange;\n\t  },\n\t  _free: function () {\n\t    this._buff = null;\n\t  },\n\t  _flush: function () {\n\t    if (this._buff !== null) {\n\t      this._emitValue(this._buff);\n\t      this._buff = [];\n\t    }\n\t  },\n\t  _handlePrimaryEnd: function () {\n\t    if (this._flushOnEnd) {\n\t      this._flush();\n\t    }\n\t    this._emitEnd();\n\t  },\n\t  _handlePrimaryValue: function (x) {\n\t    this._buff.push(x);\n\t    if (this._lastSecondary !== NOTHING && !this._lastSecondary) {\n\t      this._flush();\n\t    }\n\t  },\n\t  _handleSecondaryEnd: function () {\n\t    if (!this._flushOnEnd && (this._lastSecondary === NOTHING || this._lastSecondary)) {\n\t      this._emitEnd();\n\t    }\n\t  },\n\t  _handleSecondaryValue: function (x) {\n\t    if (this._flushOnChange && !x) {\n\t      this._flush();\n\t    }\n\n\t    // from default _handleSecondaryValue\n\t    this._lastSecondary = x;\n\t  }\n\t};\n\n\tvar S$38 = createStream$1('bufferWhileBy', mixin$30);\n\tvar P$33 = createProperty$1('bufferWhileBy', mixin$30);\n\n\tfunction bufferWhileBy(primary, secondary, options /* optional */) {\n\t  return new (primary._ofSameType(S$38, P$33))(primary, secondary, options);\n\t}\n\n\tvar f = function () {\n\t  return false;\n\t};\n\tvar t = function () {\n\t  return true;\n\t};\n\n\tfunction awaiting(a, b) {\n\t  var result = merge([map$1(a, t), map$1(b, f)]);\n\t  result = skipDuplicates(result);\n\t  result = toProperty(result, f);\n\t  return result.setName(a, 'awaiting');\n\t}\n\n\tvar mixin$31 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleValue: function (x) {\n\t    var fn = this._fn;\n\t    var result = fn(x);\n\t    if (result.convert) {\n\t      this._emitError(result.error);\n\t    } else {\n\t      this._emitValue(x);\n\t    }\n\t  }\n\t};\n\n\tvar S$39 = createStream('valuesToErrors', mixin$31);\n\tvar P$34 = createProperty('valuesToErrors', mixin$31);\n\n\tvar defFn = function (x) {\n\t  return { convert: true, error: x };\n\t};\n\n\tfunction valuesToErrors(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? defFn : arguments[1];\n\n\t  return new (obs._ofSameType(S$39, P$34))(obs, { fn: fn });\n\t}\n\n\tvar mixin$32 = {\n\t  _init: function (_ref) {\n\t    var fn = _ref.fn;\n\n\t    this._fn = fn;\n\t  },\n\t  _free: function () {\n\t    this._fn = null;\n\t  },\n\t  _handleError: function (x) {\n\t    var fn = this._fn;\n\t    var result = fn(x);\n\t    if (result.convert) {\n\t      this._emitValue(result.value);\n\t    } else {\n\t      this._emitError(x);\n\t    }\n\t  }\n\t};\n\n\tvar S$40 = createStream('errorsToValues', mixin$32);\n\tvar P$35 = createProperty('errorsToValues', mixin$32);\n\n\tvar defFn$1 = function (x) {\n\t  return { convert: true, value: x };\n\t};\n\n\tfunction errorsToValues(obs) {\n\t  var fn = arguments.length <= 1 || arguments[1] === undefined ? defFn$1 : arguments[1];\n\n\t  return new (obs._ofSameType(S$40, P$35))(obs, { fn: fn });\n\t}\n\n\tvar mixin$33 = {\n\t  _handleError: function (x) {\n\t    this._emitError(x);\n\t    this._emitEnd();\n\t  }\n\t};\n\n\tvar S$41 = createStream('endOnError', mixin$33);\n\tvar P$36 = createProperty('endOnError', mixin$33);\n\n\tfunction endOnError(obs) {\n\t  return new (obs._ofSameType(S$41, P$36))(obs);\n\t}\n\n\tObservable.prototype.toProperty = function (fn) {\n\t  return toProperty(this, fn);\n\t};\n\n\tObservable.prototype.changes = function () {\n\t  return changes(this);\n\t};\n\n\tObservable.prototype.toPromise = function (Promise) {\n\t  return toPromise(this, Promise);\n\t};\n\n\tObservable.prototype.toESObservable = toESObservable;\n\tObservable.prototype[$$observable] = toESObservable;\n\n\tObservable.prototype.map = function (fn) {\n\t  return map$1(this, fn);\n\t};\n\n\tObservable.prototype.filter = function (fn) {\n\t  return filter(this, fn);\n\t};\n\n\tObservable.prototype.take = function (n) {\n\t  return take(this, n);\n\t};\n\n\tObservable.prototype.takeErrors = function (n) {\n\t  return takeErrors(this, n);\n\t};\n\n\tObservable.prototype.takeWhile = function (fn) {\n\t  return takeWhile(this, fn);\n\t};\n\n\tObservable.prototype.last = function () {\n\t  return last(this);\n\t};\n\n\tObservable.prototype.skip = function (n) {\n\t  return skip(this, n);\n\t};\n\n\tObservable.prototype.skipWhile = function (fn) {\n\t  return skipWhile(this, fn);\n\t};\n\n\tObservable.prototype.skipDuplicates = function (fn) {\n\t  return skipDuplicates(this, fn);\n\t};\n\n\tObservable.prototype.diff = function (fn, seed) {\n\t  return diff(this, fn, seed);\n\t};\n\n\tObservable.prototype.scan = function (fn, seed) {\n\t  return scan(this, fn, seed);\n\t};\n\n\tObservable.prototype.flatten = function (fn) {\n\t  return flatten(this, fn);\n\t};\n\n\tObservable.prototype.delay = function (wait) {\n\t  return delay(this, wait);\n\t};\n\n\tObservable.prototype.throttle = function (wait, options) {\n\t  return throttle(this, wait, options);\n\t};\n\n\tObservable.prototype.debounce = function (wait, options) {\n\t  return debounce(this, wait, options);\n\t};\n\n\tObservable.prototype.mapErrors = function (fn) {\n\t  return mapErrors(this, fn);\n\t};\n\n\tObservable.prototype.filterErrors = function (fn) {\n\t  return filterErrors(this, fn);\n\t};\n\n\tObservable.prototype.ignoreValues = function () {\n\t  return ignoreValues(this);\n\t};\n\n\tObservable.prototype.ignoreErrors = function () {\n\t  return ignoreErrors(this);\n\t};\n\n\tObservable.prototype.ignoreEnd = function () {\n\t  return ignoreEnd(this);\n\t};\n\n\tObservable.prototype.beforeEnd = function (fn) {\n\t  return beforeEnd(this, fn);\n\t};\n\n\tObservable.prototype.slidingWindow = function (max, min) {\n\t  return slidingWindow(this, max, min);\n\t};\n\n\tObservable.prototype.bufferWhile = function (fn, options) {\n\t  return bufferWhile(this, fn, options);\n\t};\n\n\tObservable.prototype.bufferWithCount = function (count, options) {\n\t  return bufferWhile$1(this, count, options);\n\t};\n\n\tObservable.prototype.bufferWithTimeOrCount = function (wait, count, options) {\n\t  return bufferWithTimeOrCount(this, wait, count, options);\n\t};\n\n\tObservable.prototype.transduce = function (transducer) {\n\t  return transduce(this, transducer);\n\t};\n\n\tObservable.prototype.withHandler = function (fn) {\n\t  return withHandler(this, fn);\n\t};\n\n\tObservable.prototype.combine = function (other, combinator) {\n\t  return combine([this, other], combinator);\n\t};\n\n\tObservable.prototype.zip = function (other, combinator) {\n\t  return zip([this, other], combinator);\n\t};\n\n\tObservable.prototype.merge = function (other) {\n\t  return merge([this, other]);\n\t};\n\n\tObservable.prototype.concat = function (other) {\n\t  return concat$1([this, other]);\n\t};\n\n\tvar pool = function () {\n\t  return new Pool();\n\t};\n\n\tObservable.prototype.flatMap = function (fn) {\n\t  return new FlatMap(this, fn).setName(this, 'flatMap');\n\t};\n\tObservable.prototype.flatMapLatest = function (fn) {\n\t  return new FlatMap(this, fn, { concurLim: 1, drop: 'old' }).setName(this, 'flatMapLatest');\n\t};\n\tObservable.prototype.flatMapFirst = function (fn) {\n\t  return new FlatMap(this, fn, { concurLim: 1 }).setName(this, 'flatMapFirst');\n\t};\n\tObservable.prototype.flatMapConcat = function (fn) {\n\t  return new FlatMap(this, fn, { queueLim: -1, concurLim: 1 }).setName(this, 'flatMapConcat');\n\t};\n\tObservable.prototype.flatMapConcurLimit = function (fn, limit) {\n\t  return new FlatMap(this, fn, { queueLim: -1, concurLim: limit }).setName(this, 'flatMapConcurLimit');\n\t};\n\n\tObservable.prototype.flatMapErrors = function (fn) {\n\t  return new FlatMapErrors(this, fn).setName(this, 'flatMapErrors');\n\t};\n\n\tObservable.prototype.filterBy = function (other) {\n\t  return filterBy(this, other);\n\t};\n\n\tObservable.prototype.sampledBy = function (other, combinator) {\n\t  return sampledBy(this, other, combinator);\n\t};\n\n\tObservable.prototype.skipUntilBy = function (other) {\n\t  return skipUntilBy(this, other);\n\t};\n\n\tObservable.prototype.takeUntilBy = function (other) {\n\t  return takeUntilBy(this, other);\n\t};\n\n\tObservable.prototype.bufferBy = function (other, options) {\n\t  return bufferBy(this, other, options);\n\t};\n\n\tObservable.prototype.bufferWhileBy = function (other, options) {\n\t  return bufferWhileBy(this, other, options);\n\t};\n\n\t// Deprecated\n\t// -----------------------------------------------------------------------------\n\n\tvar DEPRECATION_WARNINGS = true;\n\tfunction dissableDeprecationWarnings() {\n\t  DEPRECATION_WARNINGS = false;\n\t}\n\n\tfunction warn(msg) {\n\t  if (DEPRECATION_WARNINGS && console && typeof console.warn === 'function') {\n\t    var msg2 = '\\nHere is an Error object for you containing the call stack:';\n\t    console.warn(msg, msg2, new Error());\n\t  }\n\t}\n\n\tObservable.prototype.awaiting = function (other) {\n\t  warn('You are using deprecated .awaiting() method, see https://github.com/rpominov/kefir/issues/145');\n\t  return awaiting(this, other);\n\t};\n\n\tObservable.prototype.valuesToErrors = function (fn) {\n\t  warn('You are using deprecated .valuesToErrors() method, see https://github.com/rpominov/kefir/issues/149');\n\t  return valuesToErrors(this, fn);\n\t};\n\n\tObservable.prototype.errorsToValues = function (fn) {\n\t  warn('You are using deprecated .errorsToValues() method, see https://github.com/rpominov/kefir/issues/149');\n\t  return errorsToValues(this, fn);\n\t};\n\n\tObservable.prototype.endOnError = function () {\n\t  warn('You are using deprecated .endOnError() method, see https://github.com/rpominov/kefir/issues/150');\n\t  return endOnError(this);\n\t};\n\n\t// Exports\n\t// --------------------------------------------------------------------------\n\n\tvar Kefir = { Observable: Observable, Stream: Stream, Property: Property, never: never, later: later, interval: interval, sequentially: sequentially,\n\t  fromPoll: fromPoll, withInterval: withInterval, fromCallback: fromCallback, fromNodeCallback: fromNodeCallback, fromEvents: fromEvents, stream: stream,\n\t  constant: constant, constantError: constantError, fromPromise: fromPromise, fromESObservable: fromESObservable, combine: combine, zip: zip, merge: merge,\n\t  concat: concat$1, Pool: Pool, pool: pool, repeat: repeat, staticLand: staticLand };\n\n\tKefir.Kefir = Kefir;\n\n\texports.dissableDeprecationWarnings = dissableDeprecationWarnings;\n\texports.Kefir = Kefir;\n\texports.Observable = Observable;\n\texports.Stream = Stream;\n\texports.Property = Property;\n\texports.never = never;\n\texports.later = later;\n\texports.interval = interval;\n\texports.sequentially = sequentially;\n\texports.fromPoll = fromPoll;\n\texports.withInterval = withInterval;\n\texports.fromCallback = fromCallback;\n\texports.fromNodeCallback = fromNodeCallback;\n\texports.fromEvents = fromEvents;\n\texports.stream = stream;\n\texports.constant = constant;\n\texports.constantError = constantError;\n\texports.fromPromise = fromPromise;\n\texports.fromESObservable = fromESObservable;\n\texports.combine = combine;\n\texports.zip = zip;\n\texports.merge = merge;\n\texports.concat = concat$1;\n\texports.Pool = Pool;\n\texports.pool = pool;\n\texports.repeat = repeat;\n\texports.staticLand = staticLand;\n\texports['default'] = Kefir;\n\n\tObject.defineProperty(exports, '__esModule', { value: true });\n\n}));","import { define, h } from 'skatejs';\nimport {startDragging, stopDragging, draggableHostStyle} from './draggable.js';\n\nconst css = ` :host {display: inline-table} handle-box {display: inline-table}`\n\nconst HandleBox = define(\"handle-box\",{\n    attached(elem){\n      startDragging(elem);\n    },\n    detached(elem){\n      stopDragging(elem);\n    },\n    render(elem){\n      return [h(\"slot\",\"\"),h(\"style\",draggableHostStyle+css)]\n    },\n    rendered(elem){\n    }\n})\n\nexport default HandleBox\n","import { define, h } from 'skatejs';\nimport {detach, reattach} from './detachable.js';\n\nconst css = ` :host {display: inline-table} loose-box {display: inline-table}`\n\nconst DetachedBox = define(\"detached-box\",{\n    attached(elem){\n      detach(elem);\n    },\n    detached(elem){\n      reattach(elem);\n    },\n    render(elem){\n      return [h(\"slot\",\"\"),h(\"style\",css)]\n    },\n    rendered(elem){\n    }\n})\n\nexport default DetachedBox\n","// from http://stackoverflow.com/a/38149758/1189799\n\nexport const parentSelector = function(el, selector, stopSelector) {\n  var retval = null;\n  while (el) {\n    if (el.matches(selector)) {\n      retval = el;\n      break\n    } else if (stopSelector && el.matches(stopSelector)) {\n      break\n    }\n    el = el.parentElement;\n  }\n  return retval;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","var matcher = function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n};\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!element.matches) {\n    var vendorMatches = element.webkitMatchesSelector\n        || element.msMatchesSelector\n        || element.mozMatchesSelector\n        || element.oMatchesSelector;\n    matcher = function(selector) {\n      return function() {\n        return vendorMatches.call(this, selector);\n      };\n    };\n  }\n}\n\nexport default matcher;\n","export var epsilon = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var tau = 2 * pi;\n","var sqrt3 = Math.sqrt(3);\n\nexport default {\n  draw: function(context, size) {\n    var y = -Math.sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n","/*\n * $Id: combinatorics.js,v 0.25 2013/03/11 15:42:14 dankogai Exp dankogai $\n *\n *  Licensed under the MIT license.\n *  http://www.opensource.org/licenses/mit-license.php\n *\n *  References:\n *    http://www.ruby-doc.org/core-2.0/Array.html#method-i-combination\n *    http://www.ruby-doc.org/core-2.0/Array.html#method-i-permutation\n *    http://en.wikipedia.org/wiki/Factorial_number_system\n */\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define([], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.Combinatorics = factory();\n    }\n}(this, function () {\n    'use strict';\n    var version = \"0.5.2\";\n    /* combinatory arithmetics */\n    var P = function(m, n) {\n        var p = 1;\n        while (n--) p *= m--;\n        return p;\n    };\n    var C = function(m, n) {\n        if (n > m) {\n            return 0;\n        }\n        return P(m, n) / P(n, n);\n    };\n    var factorial = function(n) {\n        return P(n, n);\n    };\n    var factoradic = function(n, d) {\n        var f = 1;\n        if (!d) {\n            for (d = 1; f < n; f *= ++d);\n            if (f > n) f /= d--;\n        } else {\n            f = factorial(d);\n        }\n        var result = [0];\n        for (; d; f /= d--) {\n            result[d] = Math.floor(n / f);\n            n %= f;\n        }\n        return result;\n    };\n    /* common methods */\n    var addProperties = function(dst, src) {\n        Object.keys(src).forEach(function(p) {\n            Object.defineProperty(dst, p, {\n                value: src[p],\n                configurable: p == 'next'\n            });\n        });\n    };\n    var hideProperty = function(o, p) {\n        Object.defineProperty(o, p, {\n            writable: true\n        });\n    };\n    var toArray = function(f) {\n        var e, result = [];\n        this.init();\n        while (e = this.next()) result.push(f ? f(e) : e);\n        this.init();\n        return result;\n    };\n    var common = {\n        toArray: toArray,\n        map: toArray,\n        forEach: function(f) {\n            var e;\n            this.init();\n            while (e = this.next()) f(e);\n            this.init();\n        },\n        filter: function(f) {\n            var e, result = [];\n            this.init();\n            while (e = this.next()) if (f(e)) result.push(e);\n            this.init();\n            return result;\n        },\n        lazyMap: function(f) {\n            this._lazyMap = f;\n            return this;\n        },\n        lazyFilter: function(f) {\n            Object.defineProperty(this, 'next', {\n                writable: true\n            });\n            if (typeof f !== 'function') {\n                this.next = this._next;\n            } else {\n                if (typeof (this._next) !== 'function') {\n                    this._next = this.next;\n                }\n                var _next = this._next.bind(this);\n                this.next = (function() {\n                    var e;\n                    while (e = _next()) {\n                        if (f(e))\n                            return e;\n                    }\n                    return e;\n                }).bind(this);\n            }\n            Object.defineProperty(this, 'next', {\n                writable: false\n            });\n            return this;\n        }\n\n    };\n    /* power set */\n    var power = function(ary, fun) {\n        var size = 1 << ary.length,\n            sizeOf = function() {\n                return size;\n            },\n            that = Object.create(ary.slice(), {\n                length: {\n                    get: sizeOf\n                }\n            });\n        hideProperty(that, 'index');\n        addProperties(that, {\n            valueOf: sizeOf,\n            init: function() {\n                that.index = 0;\n            },\n            nth: function(n) {\n                if (n >= size) return;\n                var i = 0,\n                    result = [];\n                for (; n; n >>>= 1, i++) if (n & 1) result.push(this[i]);\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            },\n            next: function() {\n                return this.nth(this.index++);\n            }\n        });\n        addProperties(that, common);\n        that.init();\n        return (typeof (fun) === 'function') ? that.map(fun) : that;\n    };\n    /* combination */\n    var nextIndex = function(n) {\n        var smallest = n & -n,\n            ripple = n + smallest,\n            new_smallest = ripple & -ripple,\n            ones = ((new_smallest / smallest) >> 1) - 1;\n        return ripple | ones;\n    };\n    var combination = function(ary, nelem, fun) {\n        if (!nelem) nelem = ary.length;\n        if (nelem < 1) throw new RangeError;\n        if (nelem > ary.length) throw new RangeError;\n        var first = (1 << nelem) - 1,\n            size = C(ary.length, nelem),\n            maxIndex = 1 << ary.length,\n            sizeOf = function() {\n                return size;\n            },\n            that = Object.create(ary.slice(), {\n                length: {\n                    get: sizeOf\n                }\n            });\n        hideProperty(that, 'index');\n        addProperties(that, {\n            valueOf: sizeOf,\n            init: function() {\n                this.index = first;\n            },\n            next: function() {\n                if (this.index >= maxIndex) return;\n                var i = 0,\n                    n = this.index,\n                    result = [];\n                for (; n; n >>>= 1, i++) {\n                    if (n & 1) result[result.length] = this[i];\n                }\n\n                this.index = nextIndex(this.index);\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            }\n        });\n        addProperties(that, common);\n        that.init();\n        return (typeof (fun) === 'function') ? that.map(fun) : that;\n    };\n    /* bigcombination */\n    var bigNextIndex = function(n, nelem) {\n\n        var result = n;\n        var j = nelem;\n        var i = 0;\n        for (i = result.length - 1; i >= 0; i--) {\n            if (result[i] == 1) {\n                j--;\n            } else {\n                break;\n            }\n        } \n        if (j == 0) {\n            // Overflow\n            result[result.length] = 1;\n            for (var k = result.length - 2; k >= 0; k--) {\n                result[k] = (k < nelem-1)?1:0;\n            }\n        } else {\n            // Normal\n\n            // first zero after 1\n            var i1 = -1;\n            var i0 = -1;\n            for (var i = 0; i < result.length; i++) {\n                if (result[i] == 0 && i1 != -1) {\n                    i0 = i;\n                }\n                if (result[i] == 1) {\n                    i1 = i;\n                }\n                if (i0 != -1 && i1 != -1) {\n                    result[i0] = 1;\n                    result[i1] = 0;\n                    break;\n                }\n            }\n\n            j = nelem;\n            for (var i = result.length - 1; i >= i1; i--) {\n                if (result[i] == 1)\n                    j--;\n            }\n            for (var i = 0; i < i1; i++) {\n                result[i] = (i < j)?1:0;\n            }\n        }\n\n        return result;\n\n    };\n    var buildFirst = function(nelem) {\n        var result = [];\n        for (var i = 0; i < nelem; i++) {\n            result[i] = 1;\n        }\n        result[0] = 1;\n        return result;\n    };\n    var bigCombination = function(ary, nelem, fun) {\n        if (!nelem) nelem = ary.length;\n        if (nelem < 1) throw new RangeError;\n        if (nelem > ary.length) throw new RangeError;\n        var first = buildFirst(nelem),\n            size = C(ary.length, nelem),\n            maxIndex = ary.length,\n            sizeOf = function() {\n                return size;\n            },\n            that = Object.create(ary.slice(), {\n                length: {\n                    get: sizeOf\n                }\n            });\n        hideProperty(that, 'index');\n        addProperties(that, {\n            valueOf: sizeOf,\n            init: function() {\n                this.index = first.concat();\n            },\n            next: function() {\n                if (this.index.length > maxIndex) return;\n                var i = 0,\n                    n = this.index,\n                    result = [];\n                for (var j = 0; j < n.length; j++, i++) {\n                    if (n[j])\n                        result[result.length] = this[i];\n                }\n                bigNextIndex(this.index, nelem);\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            }\n        });\n        addProperties(that, common);\n        that.init();\n        return (typeof (fun) === 'function') ? that.map(fun) : that;\n    };\n    /* permutation */\n    var _permutation = function(ary) {\n        var that = ary.slice(),\n            size = factorial(that.length);\n        that.index = 0;\n        that.next = function() {\n            if (this.index >= size) return;\n            var copy = this.slice(),\n                digits = factoradic(this.index, this.length),\n                result = [],\n                i = this.length - 1;\n            for (; i >= 0; --i) result.push(copy.splice(digits[i], 1)[0]);\n            this.index++;\n            return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n        };\n        return that;\n    };\n    // which is really a permutation of combination\n    var permutation = function(ary, nelem, fun) {\n        if (!nelem) nelem = ary.length;\n        if (nelem < 1) throw new RangeError;\n        if (nelem > ary.length) throw new RangeError;\n        var size = P(ary.length, nelem),\n            sizeOf = function() {\n                return size;\n            },\n            that = Object.create(ary.slice(), {\n                length: {\n                    get: sizeOf\n                }\n            });\n        hideProperty(that, 'cmb');\n        hideProperty(that, 'per');\n        addProperties(that, {\n            valueOf: function() {\n                return size;\n            },\n            init: function() {\n                this.cmb = combination(ary, nelem);\n                this.per = _permutation(this.cmb.next());\n            },\n            next: function() {\n                var result = this.per.next();\n                if (!result) {\n                    var cmb = this.cmb.next();\n                    if (!cmb) return;\n                    this.per = _permutation(cmb);\n                    return this.next();\n                }\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            }\n        });\n        addProperties(that, common);\n        that.init();\n        return (typeof (fun) === 'function') ? that.map(fun) : that;\n    };\n\n    var PC = function(m) {\n        var total = 0;\n        for (var n = 1; n <= m; n++) {\n            var p = P(m,n);\n            total += p;\n        };\n        return total;\n    };\n    // which is really a permutation of combination\n    var permutationCombination = function(ary, fun) {\n        // if (!nelem) nelem = ary.length;\n        // if (nelem < 1) throw new RangeError;\n        // if (nelem > ary.length) throw new RangeError;\n        var size = PC(ary.length),\n            sizeOf = function() {\n                return size;\n            },\n            that = Object.create(ary.slice(), {\n                length: {\n                    get: sizeOf\n                }\n            });\n        hideProperty(that, 'cmb');\n        hideProperty(that, 'per');\n        hideProperty(that, 'nelem');\n        addProperties(that, {\n            valueOf: function() {\n                return size;\n            },\n            init: function() {\n                this.nelem = 1;\n                // console.log(\"Starting nelem: \" + this.nelem);\n                this.cmb = combination(ary, this.nelem);\n                this.per = _permutation(this.cmb.next());\n            },\n            next: function() {\n                var result = this.per.next();\n                if (!result) {\n                    var cmb = this.cmb.next();\n                    if (!cmb) {\n                        this.nelem++;\n                        // console.log(\"increment nelem: \" + this.nelem + \" vs \" + ary.length);\n                        if (this.nelem > ary.length) return;\n                        this.cmb = combination(ary, this.nelem);\n                        cmb = this.cmb.next();\n                        if (!cmb) return;\n                    }\n                    this.per = _permutation(cmb);\n                    return this.next();\n                }\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            }\n        });\n        addProperties(that, common);\n        that.init();\n        return (typeof (fun) === 'function') ? that.map(fun) : that;\n    };\n    /* Cartesian Product */\n    var arraySlice = Array.prototype.slice;\n    var cartesianProduct = function() {\n        if (!arguments.length) throw new RangeError;\n        var args = arraySlice.call(arguments),\n            size = args.reduce(function(p, a) {\n                return p * a.length;\n            }, 1),\n            sizeOf = function() {\n                return size;\n            },\n            dim = args.length,\n            that = Object.create(args, {\n                length: {\n                    get: sizeOf\n                }\n            });\n        if (!size) throw new RangeError;\n        hideProperty(that, 'index');\n        addProperties(that, {\n            valueOf: sizeOf,\n            dim: dim,\n            init: function() {\n                this.index = 0;\n            },\n            get: function() {\n                if (arguments.length !== this.length) return;\n                var result = [],\n                    d = 0;\n                for (; d < dim; d++) {\n                    var i = arguments[d];\n                    if (i >= this[d].length) return;\n                    result.push(this[d][i]);\n                }\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            },\n            nth: function(n) {\n                var result = [],\n                    d = 0;\n                for (; d < dim; d++) {\n                    var l = this[d].length;\n                    var i = n % l;\n                    result.push(this[d][i]);\n                    n -= i;\n                    n /= l;\n                }\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            },\n            next: function() {\n                if (this.index >= size) return;\n                var result = this.nth(this.index);\n                this.index++;\n                return result;\n            }\n        });\n        addProperties(that, common);\n        that.init();\n        return that;\n    };\n    /* baseN */\n    var baseN = function(ary, nelem, fun) {\n                if (!nelem) nelem = ary.length;\n        if (nelem < 1) throw new RangeError;\n        var base = ary.length,\n                size = Math.pow(base, nelem);\n        var sizeOf = function() {\n                return size;\n            },\n            that = Object.create(ary.slice(), {\n                length: {\n                    get: sizeOf\n                }\n            });\n        hideProperty(that, 'index');\n        addProperties(that, {\n            valueOf: sizeOf,\n            init: function() {\n                that.index = 0;\n            },\n            nth: function(n) {\n                if (n >= size) return;\n                var result = [];\n                for (var i = 0; i < nelem; i++) {\n                    var d = n % base;\n                    result.push(ary[d])\n                    n -= d; n /= base\n                }\n                return (typeof (that._lazyMap) === 'function')?that._lazyMap(result):result;\n            },\n            next: function() {\n                return this.nth(this.index++);\n            }\n        });\n        addProperties(that, common);\n        that.init();\n        return (typeof (fun) === 'function') ? that.map(fun) : that;\n    };\n\n    /* export */\n    var Combinatorics = Object.create(null);\n    addProperties(Combinatorics, {\n        C: C,\n        P: P,\n        factorial: factorial,\n        factoradic: factoradic,\n        cartesianProduct: cartesianProduct,\n        combination: combination,\n        bigCombination: bigCombination,\n        permutation: permutation,\n        permutationCombination: permutationCombination,\n        power: power,\n        baseN: baseN,\n        VERSION: version\n    });\n    return Combinatorics;\n}));\n","exports = module.exports = Victor;\n\n/**\n * # Victor - A JavaScript 2D vector class with methods for common vector operations\n */\n\n/**\n * Constructor. Will also work without the `new` keyword\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = Victor(42, 1337);\n *\n * @param {Number} x Value of the x axis\n * @param {Number} y Value of the y axis\n * @return {Victor}\n * @api public\n */\nfunction Victor (x, y) {\n\tif (!(this instanceof Victor)) {\n\t\treturn new Victor(x, y);\n\t}\n\n\t/**\n\t * The X axis\n\t *\n\t * ### Examples:\n\t *     var vec = new Victor.fromArray(42, 21);\n\t *\n\t *     vec.x;\n\t *     // => 42\n\t *\n\t * @api public\n\t */\n\tthis.x = x || 0;\n\n\t/**\n\t * The Y axis\n\t *\n\t * ### Examples:\n\t *     var vec = new Victor.fromArray(42, 21);\n\t *\n\t *     vec.y;\n\t *     // => 21\n\t *\n\t * @api public\n\t */\n\tthis.y = y || 0;\n};\n\n/**\n * # Static\n */\n\n/**\n * Creates a new instance from an array\n *\n * ### Examples:\n *     var vec = Victor.fromArray([42, 21]);\n *\n *     vec.toString();\n *     // => x:42, y:21\n *\n * @name Victor.fromArray\n * @param {Array} array Array with the x and y values at index 0 and 1 respectively\n * @return {Victor} The new instance\n * @api public\n */\nVictor.fromArray = function (arr) {\n\treturn new Victor(arr[0] || 0, arr[1] || 0);\n};\n\n/**\n * Creates a new instance from an object\n *\n * ### Examples:\n *     var vec = Victor.fromObject({ x: 42, y: 21 });\n *\n *     vec.toString();\n *     // => x:42, y:21\n *\n * @name Victor.fromObject\n * @param {Object} obj Object with the values for x and y\n * @return {Victor} The new instance\n * @api public\n */\nVictor.fromObject = function (obj) {\n\treturn new Victor(obj.x || 0, obj.y || 0);\n};\n\n/**\n * # Manipulation\n *\n * These functions are chainable.\n */\n\n/**\n * Adds another vector's X axis to this one\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.addX(vec2);\n *     vec1.toString();\n *     // => x:30, y:10\n *\n * @param {Victor} vector The other vector you want to add to this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addX = function (vec) {\n\tthis.x += vec.x;\n\treturn this;\n};\n\n/**\n * Adds another vector's Y axis to this one\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.addY(vec2);\n *     vec1.toString();\n *     // => x:10, y:40\n *\n * @param {Victor} vector The other vector you want to add to this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addY = function (vec) {\n\tthis.y += vec.y;\n\treturn this;\n};\n\n/**\n * Adds another vector to this one\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.add(vec2);\n *     vec1.toString();\n *     // => x:30, y:40\n *\n * @param {Victor} vector The other vector you want to add to this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.add = function (vec) {\n\tthis.x += vec.x;\n\tthis.y += vec.y;\n\treturn this;\n};\n\n/**\n * Adds the given scalar to both vector axis\n *\n * ### Examples:\n *     var vec = new Victor(1, 2);\n *\n *     vec.addScalar(2);\n *     vec.toString();\n *     // => x: 3, y: 4\n *\n * @param {Number} scalar The scalar to add\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addScalar = function (scalar) {\n\tthis.x += scalar;\n\tthis.y += scalar;\n\treturn this;\n};\n\n/**\n * Adds the given scalar to the X axis\n *\n * ### Examples:\n *     var vec = new Victor(1, 2);\n *\n *     vec.addScalarX(2);\n *     vec.toString();\n *     // => x: 3, y: 2\n *\n * @param {Number} scalar The scalar to add\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addScalarX = function (scalar) {\n\tthis.x += scalar;\n\treturn this;\n};\n\n/**\n * Adds the given scalar to the Y axis\n *\n * ### Examples:\n *     var vec = new Victor(1, 2);\n *\n *     vec.addScalarY(2);\n *     vec.toString();\n *     // => x: 1, y: 4\n *\n * @param {Number} scalar The scalar to add\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addScalarY = function (scalar) {\n\tthis.y += scalar;\n\treturn this;\n};\n\n/**\n * Subtracts the X axis of another vector from this one\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.subtractX(vec2);\n *     vec1.toString();\n *     // => x:80, y:50\n *\n * @param {Victor} vector The other vector you want subtract from this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractX = function (vec) {\n\tthis.x -= vec.x;\n\treturn this;\n};\n\n/**\n * Subtracts the Y axis of another vector from this one\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.subtractY(vec2);\n *     vec1.toString();\n *     // => x:100, y:20\n *\n * @param {Victor} vector The other vector you want subtract from this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractY = function (vec) {\n\tthis.y -= vec.y;\n\treturn this;\n};\n\n/**\n * Subtracts another vector from this one\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.subtract(vec2);\n *     vec1.toString();\n *     // => x:80, y:20\n *\n * @param {Victor} vector The other vector you want subtract from this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtract = function (vec) {\n\tthis.x -= vec.x;\n\tthis.y -= vec.y;\n\treturn this;\n};\n\n/**\n * Subtracts the given scalar from both axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 200);\n *\n *     vec.subtractScalar(20);\n *     vec.toString();\n *     // => x: 80, y: 180\n *\n * @param {Number} scalar The scalar to subtract\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractScalar = function (scalar) {\n\tthis.x -= scalar;\n\tthis.y -= scalar;\n\treturn this;\n};\n\n/**\n * Subtracts the given scalar from the X axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 200);\n *\n *     vec.subtractScalarX(20);\n *     vec.toString();\n *     // => x: 80, y: 200\n *\n * @param {Number} scalar The scalar to subtract\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractScalarX = function (scalar) {\n\tthis.x -= scalar;\n\treturn this;\n};\n\n/**\n * Subtracts the given scalar from the Y axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 200);\n *\n *     vec.subtractScalarY(20);\n *     vec.toString();\n *     // => x: 100, y: 180\n *\n * @param {Number} scalar The scalar to subtract\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractScalarY = function (scalar) {\n\tthis.y -= scalar;\n\treturn this;\n};\n\n/**\n * Divides the X axis by the x component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 0);\n *\n *     vec.divideX(vec2);\n *     vec.toString();\n *     // => x:50, y:50\n *\n * @param {Victor} vector The other vector you want divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideX = function (vector) {\n\tthis.x /= vector.x;\n\treturn this;\n};\n\n/**\n * Divides the Y axis by the y component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(0, 2);\n *\n *     vec.divideY(vec2);\n *     vec.toString();\n *     // => x:100, y:25\n *\n * @param {Victor} vector The other vector you want divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideY = function (vector) {\n\tthis.y /= vector.y;\n\treturn this;\n};\n\n/**\n * Divides both vector axis by a axis values of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 2);\n *\n *     vec.divide(vec2);\n *     vec.toString();\n *     // => x:50, y:25\n *\n * @param {Victor} vector The vector to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divide = function (vector) {\n\tthis.x /= vector.x;\n\tthis.y /= vector.y;\n\treturn this;\n};\n\n/**\n * Divides both vector axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.divideScalar(2);\n *     vec.toString();\n *     // => x:50, y:25\n *\n * @param {Number} The scalar to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideScalar = function (scalar) {\n\tif (scalar !== 0) {\n\t\tthis.x /= scalar;\n\t\tthis.y /= scalar;\n\t} else {\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\n\treturn this;\n};\n\n/**\n * Divides the X axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.divideScalarX(2);\n *     vec.toString();\n *     // => x:50, y:50\n *\n * @param {Number} The scalar to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideScalarX = function (scalar) {\n\tif (scalar !== 0) {\n\t\tthis.x /= scalar;\n\t} else {\n\t\tthis.x = 0;\n\t}\n\treturn this;\n};\n\n/**\n * Divides the Y axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.divideScalarY(2);\n *     vec.toString();\n *     // => x:100, y:25\n *\n * @param {Number} The scalar to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideScalarY = function (scalar) {\n\tif (scalar !== 0) {\n\t\tthis.y /= scalar;\n\t} else {\n\t\tthis.y = 0;\n\t}\n\treturn this;\n};\n\n/**\n * Inverts the X axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.invertX();\n *     vec.toString();\n *     // => x:-100, y:50\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.invertX = function () {\n\tthis.x *= -1;\n\treturn this;\n};\n\n/**\n * Inverts the Y axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.invertY();\n *     vec.toString();\n *     // => x:100, y:-50\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.invertY = function () {\n\tthis.y *= -1;\n\treturn this;\n};\n\n/**\n * Inverts both axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.invert();\n *     vec.toString();\n *     // => x:-100, y:-50\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.invert = function () {\n\tthis.invertX();\n\tthis.invertY();\n\treturn this;\n};\n\n/**\n * Multiplies the X axis by X component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 0);\n *\n *     vec.multiplyX(vec2);\n *     vec.toString();\n *     // => x:200, y:50\n *\n * @param {Victor} vector The vector to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyX = function (vector) {\n\tthis.x *= vector.x;\n\treturn this;\n};\n\n/**\n * Multiplies the Y axis by Y component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(0, 2);\n *\n *     vec.multiplyX(vec2);\n *     vec.toString();\n *     // => x:100, y:100\n *\n * @param {Victor} vector The vector to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyY = function (vector) {\n\tthis.y *= vector.y;\n\treturn this;\n};\n\n/**\n * Multiplies both vector axis by values from a given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 2);\n *\n *     vec.multiply(vec2);\n *     vec.toString();\n *     // => x:200, y:100\n *\n * @param {Victor} vector The vector to multiply by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiply = function (vector) {\n\tthis.x *= vector.x;\n\tthis.y *= vector.y;\n\treturn this;\n};\n\n/**\n * Multiplies both vector axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.multiplyScalar(2);\n *     vec.toString();\n *     // => x:200, y:100\n *\n * @param {Number} The scalar to multiply by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyScalar = function (scalar) {\n\tthis.x *= scalar;\n\tthis.y *= scalar;\n\treturn this;\n};\n\n/**\n * Multiplies the X axis by the given scalar\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.multiplyScalarX(2);\n *     vec.toString();\n *     // => x:200, y:50\n *\n * @param {Number} The scalar to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyScalarX = function (scalar) {\n\tthis.x *= scalar;\n\treturn this;\n};\n\n/**\n * Multiplies the Y axis by the given scalar\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.multiplyScalarY(2);\n *     vec.toString();\n *     // => x:100, y:100\n *\n * @param {Number} The scalar to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyScalarY = function (scalar) {\n\tthis.y *= scalar;\n\treturn this;\n};\n\n/**\n * Normalize\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.normalize = function () {\n\tvar length = this.length();\n\n\tif (length === 0) {\n\t\tthis.x = 1;\n\t\tthis.y = 0;\n\t} else {\n\t\tthis.divide(Victor(length, length));\n\t}\n\treturn this;\n};\n\nVictor.prototype.norm = Victor.prototype.normalize;\n\n/**\n * If the absolute vector axis is greater than `max`, multiplies the axis by `factor`\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.limit(80, 0.9);\n *     vec.toString();\n *     // => x:90, y:50\n *\n * @param {Number} max The maximum value for both x and y axis\n * @param {Number} factor Factor by which the axis are to be multiplied with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.limit = function (max, factor) {\n\tif (Math.abs(this.x) > max){ this.x *= factor; }\n\tif (Math.abs(this.y) > max){ this.y *= factor; }\n\treturn this;\n};\n\n/**\n * Randomizes both vector axis with a value between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomize(new Victor(50, 60), new Victor(70, 80`));\n *     vec.toString();\n *     // => x:67, y:73\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomize = function (topLeft, bottomRight) {\n\tthis.randomizeX(topLeft, bottomRight);\n\tthis.randomizeY(topLeft, bottomRight);\n\n\treturn this;\n};\n\n/**\n * Randomizes the y axis with a value between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomizeX(new Victor(50, 60), new Victor(70, 80`));\n *     vec.toString();\n *     // => x:55, y:50\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomizeX = function (topLeft, bottomRight) {\n\tvar min = Math.min(topLeft.x, bottomRight.x);\n\tvar max = Math.max(topLeft.x, bottomRight.x);\n\tthis.x = random(min, max);\n\treturn this;\n};\n\n/**\n * Randomizes the y axis with a value between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomizeY(new Victor(50, 60), new Victor(70, 80`));\n *     vec.toString();\n *     // => x:100, y:66\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomizeY = function (topLeft, bottomRight) {\n\tvar min = Math.min(topLeft.y, bottomRight.y);\n\tvar max = Math.max(topLeft.y, bottomRight.y);\n\tthis.y = random(min, max);\n\treturn this;\n};\n\n/**\n * Randomly randomizes either axis between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomizeAny(new Victor(50, 60), new Victor(70, 80));\n *     vec.toString();\n *     // => x:100, y:77\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomizeAny = function (topLeft, bottomRight) {\n\tif (!! Math.round(Math.random())) {\n\t\tthis.randomizeX(topLeft, bottomRight);\n\t} else {\n\t\tthis.randomizeY(topLeft, bottomRight);\n\t}\n\treturn this;\n};\n\n/**\n * Rounds both axis to an integer value\n *\n * ### Examples:\n *     var vec = new Victor(100.2, 50.9);\n *\n *     vec.unfloat();\n *     vec.toString();\n *     // => x:100, y:51\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.unfloat = function () {\n\tthis.x = Math.round(this.x);\n\tthis.y = Math.round(this.y);\n\treturn this;\n};\n\n/**\n * Rounds both axis to a certain precision\n *\n * ### Examples:\n *     var vec = new Victor(100.2, 50.9);\n *\n *     vec.unfloat();\n *     vec.toString();\n *     // => x:100, y:51\n *\n * @param {Number} Precision (default: 8)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.toFixed = function (precision) {\n\tif (typeof precision === 'undefined') { precision = 8; }\n\tthis.x = this.x.toFixed(precision);\n\tthis.y = this.y.toFixed(precision);\n\treturn this;\n};\n\n/**\n * Performs a linear blend / interpolation of the X axis towards another vector\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 100);\n *     var vec2 = new Victor(200, 200);\n *\n *     vec1.mixX(vec2, 0.5);\n *     vec.toString();\n *     // => x:150, y:100\n *\n * @param {Victor} vector The other vector\n * @param {Number} amount The blend amount (optional, default: 0.5)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.mixX = function (vec, amount) {\n\tif (typeof amount === 'undefined') {\n\t\tamount = 0.5;\n\t}\n\n\tthis.x = (1 - amount) * this.x + amount * vec.x;\n\treturn this;\n};\n\n/**\n * Performs a linear blend / interpolation of the Y axis towards another vector\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 100);\n *     var vec2 = new Victor(200, 200);\n *\n *     vec1.mixY(vec2, 0.5);\n *     vec.toString();\n *     // => x:100, y:150\n *\n * @param {Victor} vector The other vector\n * @param {Number} amount The blend amount (optional, default: 0.5)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.mixY = function (vec, amount) {\n\tif (typeof amount === 'undefined') {\n\t\tamount = 0.5;\n\t}\n\n\tthis.y = (1 - amount) * this.y + amount * vec.y;\n\treturn this;\n};\n\n/**\n * Performs a linear blend / interpolation towards another vector\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 100);\n *     var vec2 = new Victor(200, 200);\n *\n *     vec1.mix(vec2, 0.5);\n *     vec.toString();\n *     // => x:150, y:150\n *\n * @param {Victor} vector The other vector\n * @param {Number} amount The blend amount (optional, default: 0.5)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.mix = function (vec, amount) {\n\tthis.mixX(vec, amount);\n\tthis.mixY(vec, amount);\n\treturn this;\n};\n\n/**\n * # Products\n */\n\n/**\n * Creates a clone of this vector\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = vec1.clone();\n *\n *     vec2.toString();\n *     // => x:10, y:10\n *\n * @return {Victor} A clone of the vector\n * @api public\n */\nVictor.prototype.clone = function () {\n\treturn new Victor(this.x, this.y);\n};\n\n/**\n * Copies another vector's X component in to its own\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 20);\n *     var vec2 = vec1.copyX(vec1);\n *\n *     vec2.toString();\n *     // => x:20, y:10\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.copyX = function (vec) {\n\tthis.x = vec.x;\n\treturn this;\n};\n\n/**\n * Copies another vector's Y component in to its own\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 20);\n *     var vec2 = vec1.copyY(vec1);\n *\n *     vec2.toString();\n *     // => x:10, y:20\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.copyY = function (vec) {\n\tthis.y = vec.y;\n\treturn this;\n};\n\n/**\n * Copies another vector's X and Y components in to its own\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 20);\n *     var vec2 = vec1.copy(vec1);\n *\n *     vec2.toString();\n *     // => x:20, y:20\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.copy = function (vec) {\n\tthis.copyX(vec);\n\tthis.copyY(vec);\n\treturn this;\n};\n\n/**\n * Sets the vector to zero (0,0)\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *\t\t var1.zero();\n *     vec1.toString();\n *     // => x:0, y:0\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.zero = function () {\n\tthis.x = this.y = 0;\n\treturn this;\n};\n\n/**\n * Calculates the dot product of this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.dot(vec2);\n *     // => 23000\n *\n * @param {Victor} vector The second vector\n * @return {Number} Dot product\n * @api public\n */\nVictor.prototype.dot = function (vec2) {\n\treturn this.x * vec2.x + this.y * vec2.y;\n};\n\nVictor.prototype.cross = function (vec2) {\n\treturn (this.x * vec2.y ) - (this.y * vec2.x );\n};\n\n/**\n * Projects a vector onto another vector, setting itself to the result.\n *\n * ### Examples:\n *     var vec = new Victor(100, 0);\n *     var vec2 = new Victor(100, 100);\n *\n *     vec.projectOnto(vec2);\n *     vec.toString();\n *     // => x:50, y:50\n *\n * @param {Victor} vector The other vector you want to project this vector onto\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.projectOnto = function (vec2) {\n    var coeff = ( (this.x * vec2.x)+(this.y * vec2.y) ) / ((vec2.x*vec2.x)+(vec2.y*vec2.y));\n    this.x = coeff * vec2.x;\n    this.y = coeff * vec2.y;\n    return this;\n};\n\n\nVictor.prototype.horizontalAngle = function () {\n\treturn Math.atan2(this.y, this.x);\n};\n\nVictor.prototype.horizontalAngleDeg = function () {\n\treturn radian2degrees(this.horizontalAngle());\n};\n\nVictor.prototype.verticalAngle = function () {\n\treturn Math.atan2(this.x, this.y);\n};\n\nVictor.prototype.verticalAngleDeg = function () {\n\treturn radian2degrees(this.verticalAngle());\n};\n\nVictor.prototype.angle = Victor.prototype.horizontalAngle;\nVictor.prototype.angleDeg = Victor.prototype.horizontalAngleDeg;\nVictor.prototype.direction = Victor.prototype.horizontalAngle;\n\nVictor.prototype.rotate = function (angle) {\n\tvar nx = (this.x * Math.cos(angle)) - (this.y * Math.sin(angle));\n\tvar ny = (this.x * Math.sin(angle)) + (this.y * Math.cos(angle));\n\n\tthis.x = nx;\n\tthis.y = ny;\n\n\treturn this;\n};\n\nVictor.prototype.rotateDeg = function (angle) {\n\tangle = degrees2radian(angle);\n\treturn this.rotate(angle);\n};\n\nVictor.prototype.rotateTo = function(rotation) {\n\treturn this.rotate(rotation-this.angle());\n};\n\nVictor.prototype.rotateToDeg = function(rotation) {\n\trotation = degrees2radian(rotation);\n\treturn this.rotateTo(rotation);\n};\n\nVictor.prototype.rotateBy = function (rotation) {\n\tvar angle = this.angle() + rotation;\n\n\treturn this.rotate(angle);\n};\n\nVictor.prototype.rotateByDeg = function (rotation) {\n\trotation = degrees2radian(rotation);\n\treturn this.rotateBy(rotation);\n};\n\n/**\n * Calculates the distance of the X axis between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceX(vec2);\n *     // => -100\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distanceX = function (vec) {\n\treturn this.x - vec.x;\n};\n\n/**\n * Same as `distanceX()` but always returns an absolute number\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.absDistanceX(vec2);\n *     // => 100\n *\n * @param {Victor} vector The second vector\n * @return {Number} Absolute distance\n * @api public\n */\nVictor.prototype.absDistanceX = function (vec) {\n\treturn Math.abs(this.distanceX(vec));\n};\n\n/**\n * Calculates the distance of the Y axis between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceY(vec2);\n *     // => -10\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distanceY = function (vec) {\n\treturn this.y - vec.y;\n};\n\n/**\n * Same as `distanceY()` but always returns an absolute number\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceY(vec2);\n *     // => 10\n *\n * @param {Victor} vector The second vector\n * @return {Number} Absolute distance\n * @api public\n */\nVictor.prototype.absDistanceY = function (vec) {\n\treturn Math.abs(this.distanceY(vec));\n};\n\n/**\n * Calculates the euclidean distance between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distance(vec2);\n *     // => 100.4987562112089\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distance = function (vec) {\n\treturn Math.sqrt(this.distanceSq(vec));\n};\n\n/**\n * Calculates the squared euclidean distance between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceSq(vec2);\n *     // => 10100\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distanceSq = function (vec) {\n\tvar dx = this.distanceX(vec),\n\t\tdy = this.distanceY(vec);\n\n\treturn dx * dx + dy * dy;\n};\n\n/**\n * Calculates the length or magnitude of the vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.length();\n *     // => 111.80339887498948\n *\n * @return {Number} Length / Magnitude\n * @api public\n */\nVictor.prototype.length = function () {\n\treturn Math.sqrt(this.lengthSq());\n};\n\n/**\n * Squared length / magnitude\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.lengthSq();\n *     // => 12500\n *\n * @return {Number} Length / Magnitude\n * @api public\n */\nVictor.prototype.lengthSq = function () {\n\treturn this.x * this.x + this.y * this.y;\n};\n\nVictor.prototype.magnitude = Victor.prototype.length;\n\n/**\n * Returns a true if vector is (0, 0)\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     vec.zero();\n *\n *     // => true\n *\n * @return {Boolean}\n * @api public\n */\nVictor.prototype.isZero = function() {\n\treturn this.x === 0 && this.y === 0;\n};\n\n/**\n * Returns a true if this vector is the same as another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(100, 50);\n *     vec1.isEqualTo(vec2);\n *\n *     // => true\n *\n * @return {Boolean}\n * @api public\n */\nVictor.prototype.isEqualTo = function(vec2) {\n\treturn this.x === vec2.x && this.y === vec2.y;\n};\n\n/**\n * # Utility Methods\n */\n\n/**\n * Returns an string representation of the vector\n *\n * ### Examples:\n *     var vec = new Victor(10, 20);\n *\n *     vec.toString();\n *     // => x:10, y:20\n *\n * @return {String}\n * @api public\n */\nVictor.prototype.toString = function () {\n\treturn 'x:' + this.x + ', y:' + this.y;\n};\n\n/**\n * Returns an array representation of the vector\n *\n * ### Examples:\n *     var vec = new Victor(10, 20);\n *\n *     vec.toArray();\n *     // => [10, 20]\n *\n * @return {Array}\n * @api public\n */\nVictor.prototype.toArray = function () {\n\treturn [ this.x, this.y ];\n};\n\n/**\n * Returns an object representation of the vector\n *\n * ### Examples:\n *     var vec = new Victor(10, 20);\n *\n *     vec.toObject();\n *     // => { x: 10, y: 20 }\n *\n * @return {Object}\n * @api public\n */\nVictor.prototype.toObject = function () {\n\treturn { x: this.x, y: this.y };\n};\n\n\nvar degrees = 180 / Math.PI;\n\nfunction random (min, max) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nfunction radian2degrees (rad) {\n\treturn rad * degrees;\n}\n\nfunction degrees2radian (deg) {\n\treturn deg / degrees;\n}\n","import {line,symbol,symbolTriangle as triangle} from 'd3-shape'\nimport {nearbyEdgePoints} from \"./nearbyRectEdges.js\"\n\nexport const rectCache = Symbol();\nexport const rectInViewport = Symbol();\n// const skipFrames = 10;\n// const skip = Symbol();\n// const rectsEq = (r1,r2) => r1.top == r2.top && r1.bottom == r2.bottom && r1.left == r2.left && r1.right == r2.right\nexport const cacheBoundingRect =  (el) => {\n  // if (el[skip] <= skipFrames) {\n  //   el[skip] += 1\n  //   return\n  // }\n  // var oldRect = el[rectCache]\n  var rect = el[rectCache] = el.getBoundingClientRect()\n  // if (rectsEq(rect, oldRect)) { el[skip] = 0};\n  el[rectInViewport] = (\n        rect.top >= 0 ||\n        rect.left >= 0 ||\n        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) ||\n        rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n    );\n}\n\nexport const drawEdge = (ctx,edge,graph) => {\n  if ( edge.source[rectInViewport] || edge.target[rectInViewport] ) {\n    var R1 = edge.source[rectCache];\n    var R2 = edge.target[rectCache];\n    var pts = nearbyEdgePoints(R1,R2,edge.source.round,edge.target.round,undefined,0)\n\n    var color = edge.color ? edge.color : graph.color;\n    var thickness = edge.thickness ? edge.thickness : graph.thickness\n    var segments = edge.segments ? edge.segments : graph.segments\n    segments = segments ? segments : []\n    ctx.setLineDash(segments)\n    ctx.strokeStyle = color;\n    ctx.fillStyle = color;\n    ctx.lineWidth = thickness;\n\n    var size = thickness*1;\n    const markerBuffer = 1 + 2*size;\n    const lineBuffer = markerBuffer+3;\n    // var fill = 'magenta'\n    // var stroke = '#222'\n    // var strokeWidth = 2\n\n    // ctx.strokeStyle = \"yellow\";\n    // ctx.fillStyle = \"black\";\n    // ctx.lineWidth = 2;\n    var diff = pts[1].clone().subtract(pts[0])\n    var len = diff.length();\n\n    ctx.beginPath()\n      ctx.save()\n        ctx.translate(pts[0].x,pts[0].y)\n        ctx.rotate(Math.atan2(diff.y,diff.x));\n\n        ctx.moveTo(lineBuffer,0)\n        ctx.lineTo(len-lineBuffer,0)\n        ctx.stroke();\n    ctx.closePath();\n    ctx.beginPath();\n        if(edge.direction <= 0){\n          ctx.save()\n            ctx.rotate(-Math.PI/2)\n            ctx.translate(0,7+markerBuffer)\n            triangle.draw(ctx,5*size*size+25);\n          ctx.restore()\n        }\n        // ctx.rect(lineBuffer,-size/2,len-2*lineBuffer,size);\n        if(edge.direction >= 0){\n          ctx.translate(len,0);\n          ctx.rotate(Math.PI/2);\n          ctx.translate(0,7+markerBuffer);\n          triangle.draw(ctx,5*size*size+25);\n        }\n      ctx.restore();\n\n      ctx.setLineDash([])\n      ctx.stroke();\n      ctx.fill();\n    ctx.closePath();\n  }\n}\n","'use strict';\n\n/**\n * Clone an object\n *\n *     clone(x)\n *\n * Can clone any primitive type, array, and object.\n * If x has a function clone, this function will be invoked to clone the object.\n *\n * @param {*} x\n * @return {*} clone\n */\nexports.clone = function clone(x) {\n  var type = typeof x;\n\n  // immutable primitive types\n  if (type === 'number' || type === 'string' || type === 'boolean' ||\n      x === null || x === undefined) {\n    return x;\n  }\n\n  // use clone function of the object when available\n  if (typeof x.clone === 'function') {\n    return x.clone();\n  }\n\n  // array\n  if (Array.isArray(x)) {\n    return x.map(function (value) {\n      return clone(value);\n    });\n  }\n\n  if (x instanceof Number)    return new Number(x.valueOf());\n  if (x instanceof String)    return new String(x.valueOf());\n  if (x instanceof Boolean)   return new Boolean(x.valueOf());\n  if (x instanceof Date)      return new Date(x.valueOf());\n  if (x && x.isBigNumber === true) return x; // bignumbers are immutable\n  if (x instanceof RegExp)  throw new TypeError('Cannot clone ' + x);  // TODO: clone a RegExp\n\n  // object\n  var m = {};\n  for (var key in x) {\n    if (x.hasOwnProperty(key)) {\n      m[key] = clone(x[key]);\n    }\n  }\n  return m;\n};\n\n/**\n * Extend object a with the properties of object b\n * @param {Object} a\n * @param {Object} b\n * @return {Object} a\n */\nexports.extend = function(a, b) {\n  for (var prop in b) {\n    if (b.hasOwnProperty(prop)) {\n      a[prop] = b[prop];\n    }\n  }\n  return a;\n};\n\n/**\n * Deep extend an object a with the properties of object b\n * @param {Object} a\n * @param {Object} b\n * @returns {Object}\n */\nexports.deepExtend = function deepExtend (a, b) {\n  // TODO: add support for Arrays to deepExtend\n  if (Array.isArray(b)) {\n    throw new TypeError('Arrays are not supported by deepExtend');\n  }\n\n  for (var prop in b) {\n    if (b.hasOwnProperty(prop)) {\n      if (b[prop] && b[prop].constructor === Object) {\n        if (a[prop] === undefined) {\n          a[prop] = {};\n        }\n        if (a[prop].constructor === Object) {\n          deepExtend(a[prop], b[prop]);\n        }\n        else {\n          a[prop] = b[prop];\n        }\n      } else if (Array.isArray(b[prop])) {\n        throw new TypeError('Arrays are not supported by deepExtend');\n      } else {\n        a[prop] = b[prop];\n      }\n    }\n  }\n  return a;\n};\n\n/**\n * Deep test equality of all fields in two pairs of arrays or objects.\n * @param {Array | Object} a\n * @param {Array | Object} b\n * @returns {boolean}\n */\nexports.deepEqual = function deepEqual (a, b) {\n  var prop, i, len;\n  if (Array.isArray(a)) {\n    if (!Array.isArray(b)) {\n      return false;\n    }\n\n    if (a.length != b.length) {\n      return false;\n    }\n\n    for (i = 0, len = a.length; i < len; i++) {\n      if (!exports.deepEqual(a[i], b[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  else if (a instanceof Object) {\n    if (Array.isArray(b) || !(b instanceof Object)) {\n      return false;\n    }\n\n    for (prop in a) {\n      //noinspection JSUnfilteredForInLoop\n      if (!exports.deepEqual(a[prop], b[prop])) {\n        return false;\n      }\n    }\n    for (prop in b) {\n      //noinspection JSUnfilteredForInLoop\n      if (!exports.deepEqual(a[prop], b[prop])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  else {\n    return (typeof a === typeof b) && (a == b);\n  }\n};\n\n/**\n * Test whether the current JavaScript engine supports Object.defineProperty\n * @returns {boolean} returns true if supported\n */\nexports.canDefineProperty = function () {\n  // test needed for broken IE8 implementation\n  try {\n    if (Object.defineProperty) {\n      Object.defineProperty({}, 'x', { get: function () {} });\n      return true;\n    }\n  } catch (e) {}\n\n  return false;\n};\n\n/**\n * Attach a lazy loading property to a constant.\n * The given function `fn` is called once when the property is first requested.\n * On older browsers (<IE8), the function will fall back to direct evaluation\n * of the properties value.\n * @param {Object} object   Object where to add the property\n * @param {string} prop     Property name\n * @param {Function} fn     Function returning the property value. Called\n *                          without arguments.\n */\nexports.lazy = function (object, prop, fn) {\n  if (exports.canDefineProperty()) {\n    var _uninitialized = true;\n    var _value;\n    Object.defineProperty(object, prop, {\n      get: function () {\n        if (_uninitialized) {\n          _value = fn();\n          _uninitialized = false;\n        }\n        return _value;\n      },\n\n      set: function (value) {\n        _value = value;\n        _uninitialized = false;\n      },\n\n      configurable: true,\n      enumerable: true\n    });\n  }\n  else {\n    // fall back to immediate evaluation\n    object[prop] = fn();\n  }\n};\n\n/**\n * Traverse a path into an object.\n * When a namespace is missing, it will be created\n * @param {Object} object\n * @param {string} path   A dot separated string like 'name.space'\n * @return {Object} Returns the object at the end of the path\n */\nexports.traverse = function(object, path) {\n  var obj = object;\n\n  if (path) {\n    var names = path.split('.');\n    for (var i = 0; i < names.length; i++) {\n      var name = names[i];\n      if (!(name in obj)) {\n        obj[name] = {};\n      }\n      obj = obj[name];\n    }\n  }\n\n  return obj;\n};\n\n/**\n * Test whether an object is a factory. a factory has fields:\n *\n * - factory: function (type: Object, config: Object, load: function, typed: function [, math: Object])   (required)\n * - name: string (optional)\n * - path: string    A dot separated path (optional)\n * - math: boolean   If true (false by default), the math namespace is passed\n *                   as fifth argument of the factory function\n *\n * @param {*} object\n * @returns {boolean}\n */\nexports.isFactory = function (object) {\n  return object && typeof object.factory === 'function';\n};\n","/**\n * typed-function\n *\n * Type checking for JavaScript functions\n *\n * https://github.com/josdejong/typed-function\n */\n'use strict';\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    // OldNode. Does not work with strict CommonJS, but\n    // only CommonJS-like environments that support module.exports,\n    // like OldNode.\n    module.exports = factory();\n  } else {\n    // Browser globals (root is window)\n    root.typed = factory();\n  }\n}(this, function () {\n  // factory function to create a new instance of typed-function\n  // TODO: allow passing configuration, types, tests via the factory function\n  function create() {\n    /**\n     * Get a type test function for a specific data type\n     * @param {string} name                   Name of a data type like 'number' or 'string'\n     * @returns {Function(obj: *) : boolean}  Returns a type testing function.\n     *                                        Throws an error for an unknown type.\n     */\n    function getTypeTest(name) {\n      var test;\n      for (var i = 0; i < typed.types.length; i++) {\n        var entry = typed.types[i];\n        if (entry.name === name) {\n          test = entry.test;\n          break;\n        }\n      }\n\n      if (!test) {\n        var hint;\n        for (i = 0; i < typed.types.length; i++) {\n          entry = typed.types[i];\n          if (entry.name.toLowerCase() == name.toLowerCase()) {\n            hint = entry.name;\n            break;\n          }\n        }\n\n        throw new Error('Unknown type \"' + name + '\"' +\n            (hint ? ('. Did you mean \"' + hint + '\"?') : ''));\n      }\n      return test;\n    }\n\n    /**\n     * Retrieve the function name from a set of functions, and check\n     * whether the name of all functions match (if given)\n     * @param {Array.<function>} fns\n     */\n    function getName (fns) {\n      var name = '';\n\n      for (var i = 0; i < fns.length; i++) {\n        var fn = fns[i];\n\n        // merge function name when this is a typed function\n        if (fn.signatures && fn.name != '') {\n          if (name == '') {\n            name = fn.name;\n          }\n          else if (name != fn.name) {\n            var err = new Error('Function names do not match (expected: ' + name + ', actual: ' + fn.name + ')');\n            err.data = {\n              actual: fn.name,\n              expected: name\n            };\n            throw err;\n          }\n        }\n      }\n\n      return name;\n    }\n\n    /**\n     * Create an ArgumentsError. Creates messages like:\n     *\n     *   Unexpected type of argument (expected: ..., actual: ..., index: ...)\n     *   Too few arguments (expected: ..., index: ...)\n     *   Too many arguments (expected: ..., actual: ...)\n     *\n     * @param {String} fn         Function name\n     * @param {number} argCount   Number of arguments\n     * @param {Number} index      Current argument index\n     * @param {*} actual          Current argument\n     * @param {string} [expected] An optional, comma separated string with\n     *                            expected types on given index\n     * @extends Error\n     */\n    function createError(fn, argCount, index, actual, expected) {\n      var actualType = getTypeOf(actual);\n      var _expected = expected ? expected.split(',') : null;\n      var _fn = (fn || 'unnamed');\n      var anyType = _expected && contains(_expected, 'any');\n      var message;\n      var data = {\n        fn: fn,\n        index: index,\n        actual: actual,\n        expected: _expected\n      };\n\n      if (_expected) {\n        if (argCount > index && !anyType) {\n          // unexpected type\n          message = 'Unexpected type of argument in function ' + _fn +\n              ' (expected: ' + _expected.join(' or ') + ', actual: ' + actualType + ', index: ' + index + ')';\n        }\n        else {\n          // too few arguments\n          message = 'Too few arguments in function ' + _fn +\n              ' (expected: ' + _expected.join(' or ') + ', index: ' + index + ')';\n        }\n      }\n      else {\n        // too many arguments\n        message = 'Too many arguments in function ' + _fn +\n            ' (expected: ' + index + ', actual: ' + argCount + ')'\n      }\n\n      var err = new TypeError(message);\n      err.data = data;\n      return err;\n    }\n\n    /**\n     * Collection with function references (local shortcuts to functions)\n     * @constructor\n     * @param {string} [name='refs']  Optional name for the refs, used to generate\n     *                                JavaScript code\n     */\n    function Refs(name) {\n      this.name = name || 'refs';\n      this.categories = {};\n    }\n\n    /**\n     * Add a function reference.\n     * @param {Function} fn\n     * @param {string} [category='fn']    A function category, like 'fn' or 'signature'\n     * @returns {string} Returns the function name, for example 'fn0' or 'signature2'\n     */\n    Refs.prototype.add = function (fn, category) {\n      var cat = category || 'fn';\n      if (!this.categories[cat]) this.categories[cat] = [];\n\n      var index = this.categories[cat].indexOf(fn);\n      if (index == -1) {\n        index = this.categories[cat].length;\n        this.categories[cat].push(fn);\n      }\n\n      return cat + index;\n    };\n\n    /**\n     * Create code lines for all function references\n     * @returns {string} Returns the code containing all function references\n     */\n    Refs.prototype.toCode = function () {\n      var code = [];\n      var path = this.name + '.categories';\n      var categories = this.categories;\n\n      for (var cat in categories) {\n        if (categories.hasOwnProperty(cat)) {\n          var category = categories[cat];\n\n          for (var i = 0; i < category.length; i++) {\n            code.push('var ' + cat + i + ' = ' + path + '[\\'' + cat + '\\'][' + i + '];');\n          }\n        }\n      }\n\n      return code.join('\\n');\n    };\n\n    /**\n     * A function parameter\n     * @param {string | string[] | Param} types    A parameter type like 'string',\n     *                                             'number | boolean'\n     * @param {boolean} [varArgs=false]            Variable arguments if true\n     * @constructor\n     */\n    function Param(types, varArgs) {\n      // parse the types, can be a string with types separated by pipe characters |\n      if (typeof types === 'string') {\n        // parse variable arguments operator (ellipses '...number')\n        var _types = types.trim();\n        var _varArgs = _types.substr(0, 3) === '...';\n        if (_varArgs) {\n          _types = _types.substr(3);\n        }\n        if (_types === '') {\n          this.types = ['any'];\n        }\n        else {\n          this.types = _types.split('|');\n          for (var i = 0; i < this.types.length; i++) {\n            this.types[i] = this.types[i].trim();\n          }\n        }\n      }\n      else if (Array.isArray(types)) {\n        this.types = types;\n      }\n      else if (types instanceof Param) {\n        return types.clone();\n      }\n      else {\n        throw new Error('String or Array expected');\n      }\n\n      // can hold a type to which to convert when handling this parameter\n      this.conversions = [];\n      // TODO: implement better API for conversions, be able to add conversions via constructor (support a new type Object?)\n\n      // variable arguments\n      this.varArgs = _varArgs || varArgs || false;\n\n      // check for any type arguments\n      this.anyType = this.types.indexOf('any') !== -1;\n    }\n\n    /**\n     * Order Params\n     * any type ('any') will be ordered last, and object as second last (as other\n     * types may be an object as well, like Array).\n     *\n     * @param {Param} a\n     * @param {Param} b\n     * @returns {number} Returns 1 if a > b, -1 if a < b, and else 0.\n     */\n    Param.compare = function (a, b) {\n      // TODO: simplify parameter comparison, it's a mess\n      if (a.anyType) return 1;\n      if (b.anyType) return -1;\n\n      if (contains(a.types, 'Object')) return 1;\n      if (contains(b.types, 'Object')) return -1;\n\n      if (a.hasConversions()) {\n        if (b.hasConversions()) {\n          var i, ac, bc;\n\n          for (i = 0; i < a.conversions.length; i++) {\n            if (a.conversions[i] !== undefined) {\n              ac = a.conversions[i];\n              break;\n            }\n          }\n\n          for (i = 0; i < b.conversions.length; i++) {\n            if (b.conversions[i] !== undefined) {\n              bc = b.conversions[i];\n              break;\n            }\n          }\n\n          return typed.conversions.indexOf(ac) - typed.conversions.indexOf(bc);\n        }\n        else {\n          return 1;\n        }\n      }\n      else {\n        if (b.hasConversions()) {\n          return -1;\n        }\n        else {\n          // both params have no conversions\n          var ai, bi;\n\n          for (i = 0; i < typed.types.length; i++) {\n            if (typed.types[i].name === a.types[0]) {\n              ai = i;\n              break;\n            }\n          }\n\n          for (i = 0; i < typed.types.length; i++) {\n            if (typed.types[i].name === b.types[0]) {\n              bi = i;\n              break;\n            }\n          }\n\n          return ai - bi;\n        }\n      }\n    };\n\n    /**\n     * Test whether this parameters types overlap an other parameters types.\n     * Will not match ['any'] with ['number']\n     * @param {Param} other\n     * @return {boolean} Returns true when there are overlapping types\n     */\n    Param.prototype.overlapping = function (other) {\n      for (var i = 0; i < this.types.length; i++) {\n        if (contains(other.types, this.types[i])) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    /**\n     * Test whether this parameters types matches an other parameters types.\n     * When any of the two parameters contains `any`, true is returned\n     * @param {Param} other\n     * @return {boolean} Returns true when there are matching types\n     */\n    Param.prototype.matches = function (other) {\n      return this.anyType || other.anyType || this.overlapping(other);\n    };\n\n    /**\n     * Create a clone of this param\n     * @returns {Param} Returns a cloned version of this param\n     */\n    Param.prototype.clone = function () {\n      var param = new Param(this.types.slice(), this.varArgs);\n      param.conversions = this.conversions.slice();\n      return param;\n    };\n\n    /**\n     * Test whether this parameter contains conversions\n     * @returns {boolean} Returns true if the parameter contains one or\n     *                    multiple conversions.\n     */\n    Param.prototype.hasConversions = function () {\n      return this.conversions.length > 0;\n    };\n\n    /**\n     * Tests whether this parameters contains any of the provided types\n     * @param {Object} types  A Map with types, like {'number': true}\n     * @returns {boolean}     Returns true when the parameter contains any\n     *                        of the provided types\n     */\n    Param.prototype.contains = function (types) {\n      for (var i = 0; i < this.types.length; i++) {\n        if (types[this.types[i]]) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    /**\n     * Return a string representation of this params types, like 'string' or\n     * 'number | boolean' or '...number'\n     * @param {boolean} [toConversion]   If true, the returned types string\n     *                                   contains the types where the parameter\n     *                                   will convert to. If false (default)\n     *                                   the \"from\" types are returned\n     * @returns {string}\n     */\n    Param.prototype.toString = function (toConversion) {\n      var types = [];\n      var keys = {};\n\n      for (var i = 0; i < this.types.length; i++) {\n        var conversion = this.conversions[i];\n        var type = toConversion && conversion ? conversion.to : this.types[i];\n        if (!(type in keys)) {\n          keys[type] = true;\n          types.push(type);\n        }\n      }\n\n      return (this.varArgs ? '...' : '') + types.join('|');\n    };\n\n    /**\n     * A function signature\n     * @param {string | string[] | Param[]} params\n     *                         Array with the type(s) of each parameter,\n     *                         or a comma separated string with types\n     * @param {Function} fn    The actual function\n     * @constructor\n     */\n    function Signature(params, fn) {\n      var _params;\n      if (typeof params === 'string') {\n        _params = (params !== '') ? params.split(',') : [];\n      }\n      else if (Array.isArray(params)) {\n        _params = params;\n      }\n      else {\n        throw new Error('string or Array expected');\n      }\n\n      this.params = new Array(_params.length);\n      this.anyType = false;\n      this.varArgs = false;\n      for (var i = 0; i < _params.length; i++) {\n        var param = new Param(_params[i]);\n        this.params[i] = param;\n        if (param.anyType) {\n          this.anyType = true;\n        }\n        if (i === _params.length - 1) {\n          // the last argument\n          this.varArgs = param.varArgs;\n        }\n        else {\n          // non-last argument\n          if (param.varArgs) {\n            throw new SyntaxError('Unexpected variable arguments operator \"...\"');\n          }\n        }\n      }\n\n      this.fn = fn;\n    }\n\n    /**\n     * Create a clone of this signature\n     * @returns {Signature} Returns a cloned version of this signature\n     */\n    Signature.prototype.clone = function () {\n      return new Signature(this.params.slice(), this.fn);\n    };\n\n    /**\n     * Expand a signature: split params with union types in separate signatures\n     * For example split a Signature \"string | number\" into two signatures.\n     * @return {Signature[]} Returns an array with signatures (at least one)\n     */\n    Signature.prototype.expand = function () {\n      var signatures = [];\n\n      function recurse(signature, path) {\n        if (path.length < signature.params.length) {\n          var i, newParam, conversion;\n\n          var param = signature.params[path.length];\n          if (param.varArgs) {\n            // a variable argument. do not split the types in the parameter\n            newParam = param.clone();\n\n            // add conversions to the parameter\n            // recurse for all conversions\n            for (i = 0; i < typed.conversions.length; i++) {\n              conversion = typed.conversions[i];\n              if (!contains(param.types, conversion.from) && contains(param.types, conversion.to)) {\n                var j = newParam.types.length;\n                newParam.types[j] = conversion.from;\n                newParam.conversions[j] = conversion;\n              }\n            }\n\n            recurse(signature, path.concat(newParam));\n          }\n          else {\n            // split each type in the parameter\n            for (i = 0; i < param.types.length; i++) {\n              recurse(signature, path.concat(new Param(param.types[i])));\n            }\n\n            // recurse for all conversions\n            for (i = 0; i < typed.conversions.length; i++) {\n              conversion = typed.conversions[i];\n              if (!contains(param.types, conversion.from) && contains(param.types, conversion.to)) {\n                newParam = new Param(conversion.from);\n                newParam.conversions[0] = conversion;\n                recurse(signature, path.concat(newParam));\n              }\n            }\n          }\n        }\n        else {\n          signatures.push(new Signature(path, signature.fn));\n        }\n      }\n\n      recurse(this, []);\n\n      return signatures;\n    };\n\n    /**\n     * Compare two signatures.\n     *\n     * When two params are equal and contain conversions, they will be sorted\n     * by lowest index of the first conversions.\n     *\n     * @param {Signature} a\n     * @param {Signature} b\n     * @returns {number} Returns 1 if a > b, -1 if a < b, and else 0.\n     */\n    Signature.compare = function (a, b) {\n      if (a.params.length > b.params.length) return 1;\n      if (a.params.length < b.params.length) return -1;\n\n      // count the number of conversions\n      var i;\n      var len = a.params.length; // a and b have equal amount of params\n      var ac = 0;\n      var bc = 0;\n      for (i = 0; i < len; i++) {\n        if (a.params[i].hasConversions()) ac++;\n        if (b.params[i].hasConversions()) bc++;\n      }\n\n      if (ac > bc) return 1;\n      if (ac < bc) return -1;\n\n      // compare the order per parameter\n      for (i = 0; i < a.params.length; i++) {\n        var cmp = Param.compare(a.params[i], b.params[i]);\n        if (cmp !== 0) {\n          return cmp;\n        }\n      }\n\n      return 0;\n    };\n\n    /**\n     * Test whether any of the signatures parameters has conversions\n     * @return {boolean} Returns true when any of the parameters contains\n     *                   conversions.\n     */\n    Signature.prototype.hasConversions = function () {\n      for (var i = 0; i < this.params.length; i++) {\n        if (this.params[i].hasConversions()) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n    /**\n     * Test whether this signature should be ignored.\n     * Checks whether any of the parameters contains a type listed in\n     * typed.ignore\n     * @return {boolean} Returns true when the signature should be ignored\n     */\n    Signature.prototype.ignore = function () {\n      // create a map with ignored types\n      var types = {};\n      for (var i = 0; i < typed.ignore.length; i++) {\n        types[typed.ignore[i]] = true;\n      }\n\n      // test whether any of the parameters contains this type\n      for (i = 0; i < this.params.length; i++) {\n        if (this.params[i].contains(types)) {\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    /**\n     * Test whether the path of this signature matches a given path.\n     * @param {Param[]} params\n     */\n    Signature.prototype.paramsStartWith = function (params) {\n      if (params.length === 0) {\n        return true;\n      }\n\n      var aLast = last(this.params);\n      var bLast = last(params);\n\n      for (var i = 0; i < params.length; i++) {\n        var a = this.params[i] || (aLast.varArgs ? aLast: null);\n        var b = params[i]      || (bLast.varArgs ? bLast: null);\n\n        if (!a ||  !b || !a.matches(b)) {\n          return false;\n        }\n      }\n\n      return true;\n    };\n\n    /**\n     * Generate the code to invoke this signature\n     * @param {Refs} refs\n     * @param {string} prefix\n     * @returns {string} Returns code\n     */\n    Signature.prototype.toCode = function (refs, prefix) {\n      var code = [];\n\n      var args = new Array(this.params.length);\n      for (var i = 0; i < this.params.length; i++) {\n        var param = this.params[i];\n        var conversion = param.conversions[0];\n        if (param.varArgs) {\n          args[i] = 'varArgs';\n        }\n        else if (conversion) {\n          args[i] = refs.add(conversion.convert, 'convert') + '(arg' + i + ')';\n        }\n        else {\n          args[i] = 'arg' + i;\n        }\n      }\n\n      var ref = this.fn ? refs.add(this.fn, 'signature') : undefined;\n      if (ref) {\n        return prefix + 'return ' + ref + '(' + args.join(', ') + '); // signature: ' + this.params.join(', ');\n      }\n\n      return code.join('\\n');\n    };\n\n    /**\n     * Return a string representation of the signature\n     * @returns {string}\n     */\n    Signature.prototype.toString = function () {\n      return this.params.join(', ');\n    };\n\n    /**\n     * A group of signatures with the same parameter on given index\n     * @param {Param[]} path\n     * @param {Signature} [signature]\n     * @param {Node[]} childs\n     * @param {boolean} [fallThrough=false]\n     * @constructor\n     */\n    function Node(path, signature, childs, fallThrough) {\n      this.path = path || [];\n      this.param = path[path.length - 1] || null;\n      this.signature = signature || null;\n      this.childs = childs || [];\n      this.fallThrough = fallThrough || false;\n    }\n\n    /**\n     * Generate code for this group of signatures\n     * @param {Refs} refs\n     * @param {string} prefix\n     * @returns {string} Returns the code as string\n     */\n    Node.prototype.toCode = function (refs, prefix) {\n      // TODO: split this function in multiple functions, it's too large\n      var code = [];\n\n      if (this.param) {\n        var index = this.path.length - 1;\n        var conversion = this.param.conversions[0];\n        var comment = '// type: ' + (conversion ?\n                (conversion.from + ' (convert to ' + conversion.to + ')') :\n                this.param);\n\n        // non-root node (path is non-empty)\n        if (this.param.varArgs) {\n          if (this.param.anyType) {\n            // variable arguments with any type\n            code.push(prefix + 'if (arguments.length > ' + index + ') {');\n            code.push(prefix + '  var varArgs = [];');\n            code.push(prefix + '  for (var i = ' + index + '; i < arguments.length; i++) {');\n            code.push(prefix + '    varArgs.push(arguments[i]);');\n            code.push(prefix + '  }');\n            code.push(this.signature.toCode(refs, prefix + '  '));\n            code.push(prefix + '}');\n          }\n          else {\n            // variable arguments with a fixed type\n            var getTests = function (types, arg) {\n              var tests = [];\n              for (var i = 0; i < types.length; i++) {\n                tests[i] = refs.add(getTypeTest(types[i]), 'test') + '(' + arg + ')';\n              }\n              return tests.join(' || ');\n            }.bind(this);\n\n            var allTypes = this.param.types;\n            var exactTypes = [];\n            for (var i = 0; i < allTypes.length; i++) {\n              if (this.param.conversions[i] === undefined) {\n                exactTypes.push(allTypes[i]);\n              }\n            }\n\n            code.push(prefix + 'if (' + getTests(allTypes, 'arg' + index) + ') { ' + comment);\n            code.push(prefix + '  var varArgs = [arg' + index + '];');\n            code.push(prefix + '  for (var i = ' + (index + 1) + '; i < arguments.length; i++) {');\n            code.push(prefix + '    if (' + getTests(exactTypes, 'arguments[i]') + ') {');\n            code.push(prefix + '      varArgs.push(arguments[i]);');\n\n            for (var i = 0; i < allTypes.length; i++) {\n              var conversion_i = this.param.conversions[i];\n              if (conversion_i) {\n                var test = refs.add(getTypeTest(allTypes[i]), 'test');\n                var convert = refs.add(conversion_i.convert, 'convert');\n                code.push(prefix + '    }');\n                code.push(prefix + '    else if (' + test + '(arguments[i])) {');\n                code.push(prefix + '      varArgs.push(' + convert + '(arguments[i]));');\n              }\n            }\n            code.push(prefix + '    } else {');\n            code.push(prefix + '      throw createError(name, arguments.length, i, arguments[i], \\'' + exactTypes.join(',') + '\\');');\n            code.push(prefix + '    }');\n            code.push(prefix + '  }');\n            code.push(this.signature.toCode(refs, prefix + '  '));\n            code.push(prefix + '}');\n          }\n        }\n        else {\n          if (this.param.anyType) {\n            // any type\n            code.push(prefix + '// type: any');\n            code.push(this._innerCode(refs, prefix));\n          }\n          else {\n            // regular type\n            var type = this.param.types[0];\n            var test = type !== 'any' ? refs.add(getTypeTest(type), 'test') : null;\n\n            code.push(prefix + 'if (' + test + '(arg' + index + ')) { ' + comment);\n            code.push(this._innerCode(refs, prefix + '  '));\n            code.push(prefix + '}');\n          }\n        }\n      }\n      else {\n        // root node (path is empty)\n        code.push(this._innerCode(refs, prefix));\n      }\n\n      return code.join('\\n');\n    };\n\n    /**\n     * Generate inner code for this group of signatures.\n     * This is a helper function of Node.prototype.toCode\n     * @param {Refs} refs\n     * @param {string} prefix\n     * @returns {string} Returns the inner code as string\n     * @private\n     */\n    Node.prototype._innerCode = function (refs, prefix) {\n      var code = [];\n      var i;\n\n      if (this.signature) {\n        code.push(prefix + 'if (arguments.length === ' + this.path.length + ') {');\n        code.push(this.signature.toCode(refs, prefix + '  '));\n        code.push(prefix + '}');\n      }\n\n      for (i = 0; i < this.childs.length; i++) {\n        code.push(this.childs[i].toCode(refs, prefix));\n      }\n\n      // TODO: shouldn't the this.param.anyType check be redundant\n      if (!this.fallThrough || (this.param && this.param.anyType)) {\n        var exceptions = this._exceptions(refs, prefix);\n        if (exceptions) {\n          code.push(exceptions);\n        }\n      }\n\n      return code.join('\\n');\n    };\n\n\n    /**\n     * Generate code to throw exceptions\n     * @param {Refs} refs\n     * @param {string} prefix\n     * @returns {string} Returns the inner code as string\n     * @private\n     */\n    Node.prototype._exceptions = function (refs, prefix) {\n      var index = this.path.length;\n\n      if (this.childs.length === 0) {\n        // TODO: can this condition be simplified? (we have a fall-through here)\n        return [\n          prefix + 'if (arguments.length > ' + index + ') {',\n          prefix + '  throw createError(name, arguments.length, ' + index + ', arguments[' + index + ']);',\n          prefix + '}'\n        ].join('\\n');\n      }\n      else {\n        var keys = {};\n        var types = [];\n\n        for (var i = 0; i < this.childs.length; i++) {\n          var node = this.childs[i];\n          if (node.param) {\n            for (var j = 0; j < node.param.types.length; j++) {\n              var type = node.param.types[j];\n              if (!(type in keys) && !node.param.conversions[j]) {\n                keys[type] = true;\n                types.push(type);\n              }\n            }\n          }\n        }\n\n        return prefix + 'throw createError(name, arguments.length, ' + index + ', arguments[' + index + '], \\'' + types.join(',') + '\\');';\n      }\n    };\n\n    /**\n     * Split all raw signatures into an array with expanded Signatures\n     * @param {Object.<string, Function>} rawSignatures\n     * @return {Signature[]} Returns an array with expanded signatures\n     */\n    function parseSignatures(rawSignatures) {\n      // FIXME: need to have deterministic ordering of signatures, do not create via object\n      var signature;\n      var keys = {};\n      var signatures = [];\n      var i;\n\n      for (var types in rawSignatures) {\n        if (rawSignatures.hasOwnProperty(types)) {\n          var fn = rawSignatures[types];\n          signature = new Signature(types, fn);\n\n          if (signature.ignore()) {\n            continue;\n          }\n\n          var expanded = signature.expand();\n\n          for (i = 0; i < expanded.length; i++) {\n            var signature_i = expanded[i];\n            var key = signature_i.toString();\n            var existing = keys[key];\n            if (!existing) {\n              keys[key] = signature_i;\n            }\n            else {\n              var cmp = Signature.compare(signature_i, existing);\n              if (cmp < 0) {\n                // override if sorted first\n                keys[key] = signature_i;\n              }\n              else if (cmp === 0) {\n                throw new Error('Signature \"' + key + '\" is defined twice');\n              }\n              // else: just ignore\n            }\n          }\n        }\n      }\n\n      // convert from map to array\n      for (key in keys) {\n        if (keys.hasOwnProperty(key)) {\n          signatures.push(keys[key]);\n        }\n      }\n\n      // order the signatures\n      signatures.sort(function (a, b) {\n        return Signature.compare(a, b);\n      });\n\n      // filter redundant conversions from signatures with varArgs\n      // TODO: simplify this loop or move it to a separate function\n      for (i = 0; i < signatures.length; i++) {\n        signature = signatures[i];\n\n        if (signature.varArgs) {\n          var index = signature.params.length - 1;\n          var param = signature.params[index];\n\n          var t = 0;\n          while (t < param.types.length) {\n            if (param.conversions[t]) {\n              var type = param.types[t];\n\n              for (var j = 0; j < signatures.length; j++) {\n                var other = signatures[j];\n                var p = other.params[index];\n\n                if (other !== signature &&\n                    p &&\n                    contains(p.types, type) && !p.conversions[index]) {\n                  // this (conversion) type already exists, remove it\n                  param.types.splice(t, 1);\n                  param.conversions.splice(t, 1);\n                  t--;\n                  break;\n                }\n              }\n            }\n            t++;\n          }\n        }\n      }\n\n      return signatures;\n    }\n\n    /**\n     * Filter all any type signatures\n     * @param {Signature[]} signatures\n     * @return {Signature[]} Returns only any type signatures\n     */\n    function filterAnyTypeSignatures (signatures) {\n      var filtered = [];\n\n      for (var i = 0; i < signatures.length; i++) {\n        if (signatures[i].anyType) {\n          filtered.push(signatures[i]);\n        }\n      }\n\n      return filtered;\n    }\n\n    /**\n     * create a map with normalized signatures as key and the function as value\n     * @param {Signature[]} signatures   An array with split signatures\n     * @return {Object.<string, Function>} Returns a map with normalized\n     *                                     signatures as key, and the function\n     *                                     as value.\n     */\n    function mapSignatures(signatures) {\n      var normalized = {};\n\n      for (var i = 0; i < signatures.length; i++) {\n        var signature = signatures[i];\n        if (signature.fn && !signature.hasConversions()) {\n          var params = signature.params.join(',');\n          normalized[params] = signature.fn;\n        }\n      }\n\n      return normalized;\n    }\n\n    /**\n     * Parse signatures recursively in a node tree.\n     * @param {Signature[]} signatures  Array with expanded signatures\n     * @param {Param[]} path            Traversed path of parameter types\n     * @param {Signature[]} anys\n     * @return {Node}                   Returns a node tree\n     */\n    function parseTree(signatures, path, anys) {\n      var i, signature;\n      var index = path.length;\n      var nodeSignature;\n\n      var filtered = [];\n      for (i = 0; i < signatures.length; i++) {\n        signature = signatures[i];\n\n        // filter the first signature with the correct number of params\n        if (signature.params.length === index && !nodeSignature) {\n          nodeSignature = signature;\n        }\n\n        if (signature.params[index] != undefined) {\n          filtered.push(signature);\n        }\n      }\n\n      // sort the filtered signatures by param\n      filtered.sort(function (a, b) {\n        return Param.compare(a.params[index], b.params[index]);\n      });\n\n      // recurse over the signatures\n      var entries = [];\n      for (i = 0; i < filtered.length; i++) {\n        signature = filtered[i];\n        // group signatures with the same param at current index\n        var param = signature.params[index];\n\n        // TODO: replace the next filter loop\n        var existing = entries.filter(function (entry) {\n          return entry.param.overlapping(param);\n        })[0];\n\n        //var existing;\n        //for (var j = 0; j < entries.length; j++) {\n        //  if (entries[j].param.overlapping(param)) {\n        //    existing = entries[j];\n        //    break;\n        //  }\n        //}\n\n        if (existing) {\n          if (existing.param.varArgs) {\n            throw new Error('Conflicting types \"' + existing.param + '\" and \"' + param + '\"');\n          }\n          existing.signatures.push(signature);\n        }\n        else {\n          entries.push({\n            param: param,\n            signatures: [signature]\n          });\n        }\n      }\n\n      // find all any type signature that can still match our current path\n      var matchingAnys = [];\n      for (i = 0; i < anys.length; i++) {\n        if (anys[i].paramsStartWith(path)) {\n          matchingAnys.push(anys[i]);\n        }\n      }\n\n      // see if there are any type signatures that don't match any of the\n      // signatures that we have in our tree, i.e. we have alternative\n      // matching signature(s) outside of our current tree and we should\n      // fall through to them instead of throwing an exception\n      var fallThrough = false;\n      for (i = 0; i < matchingAnys.length; i++) {\n        if (!contains(signatures, matchingAnys[i])) {\n          fallThrough = true;\n          break;\n        }\n      }\n\n      // parse the childs\n      var childs = new Array(entries.length);\n      for (i = 0; i < entries.length; i++) {\n        var entry = entries[i];\n        childs[i] = parseTree(entry.signatures, path.concat(entry.param), matchingAnys)\n      }\n\n      return new Node(path, nodeSignature, childs, fallThrough);\n    }\n\n    /**\n     * Generate an array like ['arg0', 'arg1', 'arg2']\n     * @param {number} count Number of arguments to generate\n     * @returns {Array} Returns an array with argument names\n     */\n    function getArgs(count) {\n      // create an array with all argument names\n      var args = [];\n      for (var i = 0; i < count; i++) {\n        args[i] = 'arg' + i;\n      }\n\n      return args;\n    }\n\n    /**\n     * Compose a function from sub-functions each handling a single type signature.\n     * Signatures:\n     *   typed(signature: string, fn: function)\n     *   typed(name: string, signature: string, fn: function)\n     *   typed(signatures: Object.<string, function>)\n     *   typed(name: string, signatures: Object.<string, function>)\n     *\n     * @param {string | null} name\n     * @param {Object.<string, Function>} signatures\n     * @return {Function} Returns the typed function\n     * @private\n     */\n    function _typed(name, signatures) {\n      var refs = new Refs();\n\n      // parse signatures, expand them\n      var _signatures = parseSignatures(signatures);\n      if (_signatures.length == 0) {\n        throw new Error('No signatures provided');\n      }\n\n      // filter all any type signatures\n      var anys = filterAnyTypeSignatures(_signatures);\n\n      // parse signatures into a node tree\n      var node = parseTree(_signatures, [], anys);\n\n      //var util = require('util');\n      //console.log('ROOT');\n      //console.log(util.inspect(node, { depth: null }));\n\n      // generate code for the typed function\n      var code = [];\n      var _name = name || '';\n      var _args = getArgs(maxParams(_signatures));\n      code.push('function ' + _name + '(' + _args.join(', ') + ') {');\n      code.push('  \"use strict\";');\n      code.push('  var name = \\'' + _name + '\\';');\n      code.push(node.toCode(refs, '  ', false));\n      code.push('}');\n\n      // generate body for the factory function\n      var body = [\n        refs.toCode(),\n        'return ' + code.join('\\n')\n      ].join('\\n');\n\n      // evaluate the JavaScript code and attach function references\n      var factory = (new Function(refs.name, 'createError', body));\n      var fn = factory(refs, createError);\n\n      //console.log('FN\\n' + fn.toString()); // TODO: cleanup\n\n      // attach the signatures with sub-functions to the constructed function\n      fn.signatures = mapSignatures(_signatures);\n\n      return fn;\n    }\n\n    /**\n     * Calculate the maximum number of parameters in givens signatures\n     * @param {Signature[]} signatures\n     * @returns {number} The maximum number of parameters\n     */\n    function maxParams(signatures) {\n      var max = 0;\n\n      for (var i = 0; i < signatures.length; i++) {\n        var len = signatures[i].params.length;\n        if (len > max) {\n          max = len;\n        }\n      }\n\n      return max;\n    }\n\n    /**\n     * Get the type of a value\n     * @param {*} x\n     * @returns {string} Returns a string with the type of value\n     */\n    function getTypeOf(x) {\n      var obj;\n\n      for (var i = 0; i < typed.types.length; i++) {\n        var entry = typed.types[i];\n\n        if (entry.name === 'Object') {\n          // Array and Date are also Object, so test for Object afterwards\n          obj = entry;\n        }\n        else {\n          if (entry.test(x)) return entry.name;\n        }\n      }\n\n      // at last, test whether an object\n      if (obj && obj.test(x)) return obj.name;\n\n      return 'unknown';\n    }\n\n    /**\n     * Test whether an array contains some item\n     * @param {Array} array\n     * @param {*} item\n     * @return {boolean} Returns true if array contains item, false if not.\n     */\n    function contains(array, item) {\n      return array.indexOf(item) !== -1;\n    }\n\n    /**\n     * Returns the last item in the array\n     * @param {Array} array\n     * @return {*} item\n     */\n    function last (array) {\n      return array[array.length - 1];\n    }\n\n    // data type tests\n    var types = [\n      { name: 'number',    test: function (x) { return typeof x === 'number' } },\n      { name: 'string',    test: function (x) { return typeof x === 'string' } },\n      { name: 'boolean',   test: function (x) { return typeof x === 'boolean' } },\n      { name: 'Function',  test: function (x) { return typeof x === 'function'} },\n      { name: 'Array',     test: Array.isArray },\n      { name: 'Date',      test: function (x) { return x instanceof Date } },\n      { name: 'RegExp',    test: function (x) { return x instanceof RegExp } },\n      { name: 'Object',    test: function (x) { return typeof x === 'object' } },\n      { name: 'null',      test: function (x) { return x === null } },\n      { name: 'undefined', test: function (x) { return x === undefined } }\n    ];\n\n    // configuration\n    var config = {};\n\n    // type conversions. Order is important\n    var conversions = [];\n\n    // types to be ignored\n    var ignore = [];\n\n    // temporary object for holding types and conversions, for constructing\n    // the `typed` function itself\n    // TODO: find a more elegant solution for this\n    var typed = {\n      config: config,\n      types: types,\n      conversions: conversions,\n      ignore: ignore\n    };\n\n    /**\n     * Construct the typed function itself with various signatures\n     *\n     * Signatures:\n     *\n     *   typed(signatures: Object.<string, function>)\n     *   typed(name: string, signatures: Object.<string, function>)\n     */\n    typed = _typed('typed', {\n      'Object': function (signatures) {\n        var fns = [];\n        for (var signature in signatures) {\n          if (signatures.hasOwnProperty(signature)) {\n            fns.push(signatures[signature]);\n          }\n        }\n        var name = getName(fns);\n\n        return _typed(name, signatures);\n      },\n      'string, Object': _typed,\n      // TODO: add a signature 'Array.<function>'\n      '...Function': function (fns) {\n        var err;\n        var name = getName(fns);\n        var signatures = {};\n\n        for (var i = 0; i < fns.length; i++) {\n          var fn = fns[i];\n\n          // test whether this is a typed-function\n          if (!(typeof fn.signatures === 'object')) {\n            err = new TypeError('Function is no typed-function (index: ' + i + ')');\n            err.data = {index: i};\n            throw err;\n          }\n\n          // merge the signatures\n          for (var signature in fn.signatures) {\n            if (fn.signatures.hasOwnProperty(signature)) {\n              if (signatures.hasOwnProperty(signature)) {\n                if (fn.signatures[signature] !== signatures[signature]) {\n                  err = new Error('Signature \"' + signature + '\" is defined twice');\n                  err.data = {signature: signature};\n                  throw err;\n                }\n                // else: both signatures point to the same function, that's fine\n              }\n              else {\n                signatures[signature] = fn.signatures[signature];\n              }\n            }\n          }\n        }\n\n        return _typed(name, signatures);\n      }\n    });\n\n    /**\n     * Find a specific signature from a (composed) typed function, for\n     * example:\n     *\n     *   typed.find(fn, ['number', 'string'])\n     *   typed.find(fn, 'number, string')\n     *\n     * Function find only only works for exact matches.\n     *\n     * @param {Function} fn                   A typed-function\n     * @param {string | string[]} signature   Signature to be found, can be\n     *                                        an array or a comma separated string.\n     * @return {Function}                     Returns the matching signature, or\n     *                                        throws an errror when no signature\n     *                                        is found.\n     */\n    function find (fn, signature) {\n      if (!fn.signatures) {\n        throw new TypeError('Function is no typed-function');\n      }\n\n      // normalize input\n      var arr;\n      if (typeof signature === 'string') {\n        arr = signature.split(',');\n        for (var i = 0; i < arr.length; i++) {\n          arr[i] = arr[i].trim();\n        }\n      }\n      else if (Array.isArray(signature)) {\n        arr = signature;\n      }\n      else {\n        throw new TypeError('String array or a comma separated string expected');\n      }\n\n      var str = arr.join(',');\n\n      // find an exact match\n      var match = fn.signatures[str];\n      if (match) {\n        return match;\n      }\n\n      // TODO: extend find to match non-exact signatures\n\n      throw new TypeError('Signature not found (signature: ' + (fn.name || 'unnamed') + '(' + arr.join(', ') + '))');\n    }\n\n    /**\n     * Convert a given value to another data type.\n     * @param {*} value\n     * @param {string} type\n     */\n    function convert (value, type) {\n      var from = getTypeOf(value);\n\n      // check conversion is needed\n      if (type === from) {\n        return value;\n      }\n\n      for (var i = 0; i < typed.conversions.length; i++) {\n        var conversion = typed.conversions[i];\n        if (conversion.from === from && conversion.to === type) {\n          return conversion.convert(value);\n        }\n      }\n\n      throw new Error('Cannot convert from ' + from + ' to ' + type);\n    }\n\n    // attach types and conversions to the final `typed` function\n    typed.config = config;\n    typed.types = types;\n    typed.conversions = conversions;\n    typed.ignore = ignore;\n    typed.create = create;\n    typed.find = find;\n    typed.convert = convert;\n\n    // add a type\n    typed.addType = function (type) {\n      if (!type || typeof type.name !== 'string' || typeof type.test !== 'function') {\n        throw new TypeError('Object with properties {name: string, test: function} expected');\n      }\n\n      typed.types.push(type);\n    };\n\n    // add a conversion\n    typed.addConversion = function (conversion) {\n      if (!conversion\n          || typeof conversion.from !== 'string'\n          || typeof conversion.to !== 'string'\n          || typeof conversion.convert !== 'function') {\n        throw new TypeError('Object with properties {from: string, to: string, convert: function} expected');\n      }\n\n      typed.conversions.push(conversion);\n    };\n\n    return typed;\n  }\n\n  return create();\n}));\n","'use strict';\n\n/**\n * Format a number using methods toPrecision, toFixed, toExponential.\n * @param {number | string} value\n * @constructor\n */\nfunction NumberFormatter (value) {\n  // parse the input value\n  var match = String(value).toLowerCase().match(/^0*?(-?)(\\d+\\.?\\d*)(e([+-]?\\d+))?$/);\n  if (!match) {\n    throw new SyntaxError('Invalid number');\n  }\n\n  var sign         = match[1];\n  var coefficients = match[2];\n  var exponent     = parseFloat(match[4] || '0');\n\n  var dot = coefficients.indexOf('.');\n  exponent += (dot !== -1) ? (dot - 1) : (coefficients.length - 1);\n\n  this.sign = sign;\n  this.coefficients = coefficients\n      .replace('.', '')  // remove the dot (must be removed before removing leading zeros)\n      .replace(/^0*/, function (zeros) {\n        // remove leading zeros, add their count to the exponent\n        exponent -= zeros.length;\n        return '';\n      })\n      .replace(/0*$/, '') // remove trailing zeros\n      .split('')\n      .map(function (d) {\n        return parseInt(d);\n      });\n\n  if (this.coefficients.length === 0) {\n    this.coefficients.push(0);\n    exponent++;\n  }\n\n  this.exponent = exponent;\n}\n\n\n/**\n * Format a number with engineering notation.\n * @param {number} [precision=0]        Optional number of decimals after the\n *                                      decimal point. Zero by default.\n */\nNumberFormatter.prototype.toEngineering = function(precision) {\n  var rounded = this.roundDigits(precision);\n\n  var e = rounded.exponent;\n  var c = rounded.coefficients;\n\n  // find nearest lower multiple of 3 for exponent\n  var newExp = e % 3 === 0 ? e : (e < 0 ? (e - 3) - (e % 3) : e - (e % 3));\n\n  // concatenate coefficients with necessary zeros\n  var significandsDiff = e >= 0 ? e : Math.abs(newExp);\n\n  // add zeros if necessary (for ex: 1e+8)\n  if (c.length - 1 < significandsDiff) c = c.concat(zeros(significandsDiff - (c.length - 1)));\n\n  // find difference in exponents\n  var expDiff = Math.abs(e - newExp);\n\n  var decimalIdx = 1;\n  var str = '';\n\n  // push decimal index over by expDiff times\n  while (--expDiff >= 0) decimalIdx++;\n\n  // if all coefficient values are zero after the decimal point, don't add a decimal value. \n  // otherwise concat with the rest of the coefficients\n  var decimals = c.slice(decimalIdx).join('');\n  var decimalVal = decimals.match(/[1-9]/) ? ('.' + decimals) : '';\n\n  str = c.slice(0, decimalIdx).join('') + decimalVal;\n\n  str += 'e' + (e >= 0 ? '+' : '') + newExp.toString();\n  return rounded.sign + str;\n}\n\n/**\n * Format a number with fixed notation.\n * @param {number} [precision=0]        Optional number of decimals after the\n *                                      decimal point. Zero by default.\n */\nNumberFormatter.prototype.toFixed = function (precision) {\n  var rounded = this.roundDigits(this.exponent + 1 + (precision || 0));\n  var c = rounded.coefficients;\n  var p = rounded.exponent + 1; // exponent may have changed\n\n  // append zeros if needed\n  var pp = p + (precision || 0);\n  if (c.length < pp) {\n    c = c.concat(zeros(pp - c.length));\n  }\n\n  // prepend zeros if needed\n  if (p < 0) {\n    c = zeros(-p + 1).concat(c);\n    p = 1;\n  }\n\n  // insert a dot if needed\n  if (precision) {\n    c.splice(p, 0, (p === 0) ? '0.' : '.');\n  }\n\n  return this.sign + c.join('');\n};\n\n/**\n * Format a number in exponential notation. Like '1.23e+5', '2.3e+0', '3.500e-3'\n * @param {number} [precision]  Number of digits in formatted output.\n *                              If not provided, the maximum available digits\n *                              is used.\n */\nNumberFormatter.prototype.toExponential = function (precision) {\n  // round if needed, else create a clone\n  var rounded = precision ? this.roundDigits(precision) : this.clone();\n  var c = rounded.coefficients;\n  var e = rounded.exponent;\n\n  // append zeros if needed\n  if (c.length < precision) {\n    c = c.concat(zeros(precision - c.length));\n  }\n\n  // format as `C.CCCe+EEE` or `C.CCCe-EEE`\n  var first = c.shift();\n  return this.sign + first + (c.length > 0 ? ('.' + c.join('')) : '') +\n      'e' + (e >= 0 ? '+' : '') + e;\n};\n\n/**\n * Format a number with a certain precision\n * @param {number} [precision=undefined] Optional number of digits.\n * @param {{lower: number | undefined, upper: number | undefined}} [options]\n *                                       By default:\n *                                         lower = 1e-3 (excl)\n *                                         upper = 1e+5 (incl)\n * @return {string}\n */\nNumberFormatter.prototype.toPrecision = function(precision, options) {\n  // determine lower and upper bound for exponential notation.\n  var lower = (options && options.lower !== undefined) ? options.lower : 1e-3;\n  var upper = (options && options.upper !== undefined) ? options.upper : 1e+5;\n\n  var abs = Math.abs(Math.pow(10, this.exponent));\n  if (abs < lower || abs >= upper) {\n    // exponential notation\n    return this.toExponential(precision);\n  }\n  else {\n    var rounded = precision ? this.roundDigits(precision) : this.clone();\n    var c = rounded.coefficients;\n    var e = rounded.exponent;\n\n    // append trailing zeros\n    if (c.length < precision) {\n      c = c.concat(zeros(precision - c.length));\n    }\n\n    // append trailing zeros\n    // TODO: simplify the next statement\n    c = c.concat(zeros(e - c.length + 1 +\n        (c.length < precision ? precision - c.length : 0)));\n\n    // prepend zeros\n    c = zeros(-e).concat(c);\n\n    var dot = e > 0 ? e : 0;\n    if (dot < c.length - 1) {\n      c.splice(dot + 1, 0, '.');\n    }\n\n    return this.sign + c.join('');\n  }\n};\n\n/**\n * Crete a clone of the NumberFormatter\n * @return {NumberFormatter} Returns a clone of the NumberFormatter\n */\nNumberFormatter.prototype.clone = function () {\n  var clone = new NumberFormatter('0');\n  clone.sign = this.sign;\n  clone.coefficients = this.coefficients.slice(0);\n  clone.exponent = this.exponent;\n  return clone;\n};\n\n/**\n * Round the number of digits of a number *\n * @param {number} precision  A positive integer\n * @return {NumberFormatter}  Returns a new NumberFormatter with the rounded\n *                            digits\n */\nNumberFormatter.prototype.roundDigits = function (precision) {\n  var rounded = this.clone();\n  var c = rounded.coefficients;\n\n  // prepend zeros if needed\n  while (precision <= 0) {\n    c.unshift(0);\n    rounded.exponent++;\n    precision++;\n  }\n\n  if (c.length > precision) {\n    var removed = c.splice(precision, c.length - precision);\n\n    if (removed[0] >= 5) {\n      var i = precision - 1;\n      c[i]++;\n      while (c[i] === 10) {\n        c.pop();\n        if (i === 0) {\n          c.unshift(0);\n          rounded.exponent++;\n          i++;\n        }\n        i--;\n        c[i]++;\n      }\n    }\n  }\n\n  return rounded;\n};\n\n/**\n * Create an array filled with zeros.\n * @param {number} length\n * @return {Array}\n */\nfunction zeros(length) {\n  var arr = [];\n  for (var i = 0; i < length; i++) {\n    arr.push(0);\n  }\n  return arr;\n}\n\nmodule.exports = NumberFormatter;\n","'use strict';\n\nvar NumberFormatter = require('./NumberFormatter');\n\n/**\n * Test whether value is a number\n * @param {*} value\n * @return {boolean} isNumber\n */\nexports.isNumber = function(value) {\n  return typeof value === 'number';\n};\n\n/**\n * Check if a number is integer\n * @param {number | boolean} value\n * @return {boolean} isInteger\n */\nexports.isInteger = function(value) {\n  return isFinite(value)\n      ? (value == Math.round(value))\n      : false;\n  // Note: we use ==, not ===, as we can have Booleans as well\n};\n\n/**\n * Calculate the sign of a number\n * @param {number} x\n * @returns {*}\n */\nexports.sign = Math.sign || function(x) {\n  if (x > 0) {\n    return 1;\n  }\n  else if (x < 0) {\n    return -1;\n  }\n  else {\n    return 0;\n  }\n};\n\n/**\n * Convert a number to a formatted string representation.\n *\n * Syntax:\n *\n *    format(value)\n *    format(value, options)\n *    format(value, precision)\n *    format(value, fn)\n *\n * Where:\n *\n *    {number} value   The value to be formatted\n *    {Object} options An object with formatting options. Available options:\n *                     {string} notation\n *                         Number notation. Choose from:\n *                         'fixed'          Always use regular number notation.\n *                                          For example '123.40' and '14000000'\n *                         'exponential'    Always use exponential notation.\n *                                          For example '1.234e+2' and '1.4e+7'\n *                         'engineering'    Always use engineering notation.\n *                                          For example '123.4e+0' and '14.0e+6'\n *                         'auto' (default) Regular number notation for numbers\n *                                          having an absolute value between\n *                                          `lower` and `upper` bounds, and uses\n *                                          exponential notation elsewhere.\n *                                          Lower bound is included, upper bound\n *                                          is excluded.\n *                                          For example '123.4' and '1.4e7'.\n *                     {number} precision   A number between 0 and 16 to round\n *                                          the digits of the number.\n *                                          In case of notations 'exponential' and\n *                                          'auto', `precision` defines the total\n *                                          number of significant digits returned\n *                                          and is undefined by default.\n *                                          In case of notation 'fixed',\n *                                          `precision` defines the number of\n *                                          significant digits after the decimal\n *                                          point, and is 0 by default.\n *                     {Object} exponential An object containing two parameters,\n *                                          {number} lower and {number} upper,\n *                                          used by notation 'auto' to determine\n *                                          when to return exponential notation.\n *                                          Default values are `lower=1e-3` and\n *                                          `upper=1e5`.\n *                                          Only applicable for notation `auto`.\n *    {Function} fn    A custom formatting function. Can be used to override the\n *                     built-in notations. Function `fn` is called with `value` as\n *                     parameter and must return a string. Is useful for example to\n *                     format all values inside a matrix in a particular way.\n *\n * Examples:\n *\n *    format(6.4);                                        // '6.4'\n *    format(1240000);                                    // '1.24e6'\n *    format(1/3);                                        // '0.3333333333333333'\n *    format(1/3, 3);                                     // '0.333'\n *    format(21385, 2);                                   // '21000'\n *    format(12.071, {notation: 'fixed'});                // '12'\n *    format(2.3,    {notation: 'fixed', precision: 2});  // '2.30'\n *    format(52.8,   {notation: 'exponential'});          // '5.28e+1'\n *    format(12345678, {notation: 'engineering'});        // '12.345678e+6'\n *\n * @param {number} value\n * @param {Object | Function | number} [options]\n * @return {string} str The formatted value\n */\nexports.format = function(value, options) {\n  if (typeof options === 'function') {\n    // handle format(value, fn)\n    return options(value);\n  }\n\n  // handle special cases\n  if (value === Infinity) {\n    return 'Infinity';\n  }\n  else if (value === -Infinity) {\n    return '-Infinity';\n  }\n  else if (isNaN(value)) {\n    return 'NaN';\n  }\n\n  // default values for options\n  var notation = 'auto';\n  var precision = undefined;\n\n  if (options) {\n    // determine notation from options\n    if (options.notation) {\n      notation = options.notation;\n    }\n\n    // determine precision from options\n    if (exports.isNumber(options)) {\n      precision = options;\n    }\n    else if (options.precision) {\n      precision = options.precision;\n    }\n  }\n\n  // handle the various notations\n  switch (notation) {\n    case 'fixed':\n      return exports.toFixed(value, precision);\n\n    case 'exponential':\n      return exports.toExponential(value, precision);\n\n    case 'engineering':\n      return exports.toEngineering(value, precision);\n\n    case 'auto':\n      return exports\n          .toPrecision(value, precision, options && options.exponential)\n\n          // remove trailing zeros after the decimal point\n          .replace(/((\\.\\d*?)(0+))($|e)/, function () {\n            var digits = arguments[2];\n            var e = arguments[4];\n            return (digits !== '.') ? digits + e : e;\n          });\n\n    default:\n      throw new Error('Unknown notation \"' + notation + '\". ' +\n          'Choose \"auto\", \"exponential\", or \"fixed\".');\n  }\n};\n\n/**\n * Format a number in exponential notation. Like '1.23e+5', '2.3e+0', '3.500e-3'\n * @param {number} value\n * @param {number} [precision]  Number of digits in formatted output.\n *                              If not provided, the maximum available digits\n *                              is used.\n * @returns {string} str\n */\nexports.toExponential = function(value, precision) {\n  return new NumberFormatter(value).toExponential(precision);\n};\n\n/**\n * Format a number in engineering notation. Like '1.23e+6', '2.3e+0', '3.500e-3'\n * @param {number} value\n * @param {number} [precision]  Number of digits in formatted output.\n *                              If not provided, the maximum available digits\n *                              is used.\n * @returns {string} str\n */\nexports.toEngineering = function(value, precision) {\n  return new NumberFormatter(value).toEngineering(precision);\n};\n\n/**\n * Format a number with fixed notation.\n * @param {number} value\n * @param {number} [precision=0]        Optional number of decimals after the\n *                                      decimal point. Zero by default.\n */\nexports.toFixed = function(value, precision) {\n  return new NumberFormatter(value).toFixed(precision);\n};\n\n/**\n * Format a number with a certain precision\n * @param {number} value\n * @param {number} [precision=undefined] Optional number of digits.\n * @param {{lower: number, upper: number}} [options]  By default:\n *                                                    lower = 1e-3 (excl)\n *                                                    upper = 1e+5 (incl)\n * @return {string}\n */\nexports.toPrecision = function(value, precision, options) {\n  return new NumberFormatter(value).toPrecision(precision, options);\n};\n\n/**\n * Count the number of significant digits of a number.\n *\n * For example:\n *   2.34 returns 3\n *   0.0034 returns 2\n *   120.5e+30 returns 4\n *\n * @param {number} value\n * @return {number} digits   Number of significant digits\n */\nexports.digits = function(value) {\n  return value\n      .toExponential()\n      .replace(/e.*$/, '')          // remove exponential notation\n      .replace( /^0\\.?0*|\\./, '')   // remove decimal point and leading zeros\n      .length\n};\n\n/**\n * Minimum number added to one that makes the result different than one\n */\nexports.DBL_EPSILON = Number.EPSILON || 2.2204460492503130808472633361816E-16;\n\n/**\n * Compares two floating point numbers.\n * @param {number} x          First value to compare\n * @param {number} y          Second value to compare\n * @param {number} [epsilon]  The maximum relative difference between x and y\n *                            If epsilon is undefined or null, the function will\n *                            test whether x and y are exactly equal.\n * @return {boolean} whether the two numbers are nearly equal\n*/\nexports.nearlyEqual = function(x, y, epsilon) {\n  // if epsilon is null or undefined, test whether x and y are exactly equal\n  if (epsilon == null) {\n    return x == y;\n  }\n\n  // use \"==\" operator, handles infinities\n  if (x == y) {\n    return true;\n  }\n\n  // NaN\n  if (isNaN(x) || isNaN(y)) {\n    return false;\n  }\n\n  // at this point x and y should be finite\n  if(isFinite(x) && isFinite(y)) {\n    // check numbers are very close, needed when comparing numbers near zero\n    var diff = Math.abs(x - y);\n    if (diff < exports.DBL_EPSILON) {\n      return true;\n    }\n    else {\n      // use relative error\n      return diff <= Math.max(Math.abs(x), Math.abs(y)) * epsilon;\n    }\n  }\n\n  // Infinite and Number or negative Infinite and positive Infinite cases\n  return false;\n};\n","var typedFunction = require('typed-function');\nvar digits = require('./../utils/number').digits;\n\n// returns a new instance of typed-function\nvar createTyped = function () {\n  // initially, return the original instance of typed-function\n  // consecutively, return a new instance from typed.create.\n  createTyped = typedFunction.create;\n  return typedFunction;\n};\n\n/**\n * Factory function for creating a new typed instance\n * @param {Object} type   Object with data types like Complex and BigNumber\n * @returns {Function}\n */\nexports.create = function create(type) {\n  // TODO: typed-function must be able to silently ignore signatures with unknown data types\n\n  // get a new instance of typed-function\n  var typed = createTyped();\n\n  // define all types. The order of the types determines in which order function\n  // arguments are type-checked (so for performance it's important to put the\n  // most used types first).\n  typed.types = [\n    { name: 'number',               test: function (x) { return typeof x === 'number'; } },\n    { name: 'Complex',              test: function (x) { return x && x.isComplex; } },\n    { name: 'BigNumber',            test: function (x) { return x && x.isBigNumber; } },\n    { name: 'Fraction',             test: function (x) { return x && x.isFraction; } },\n    { name: 'Unit',                 test: function (x) { return x && x.isUnit; } },\n    { name: 'string',               test: function (x) { return typeof x === 'string'; } },\n    { name: 'Array',                test: Array.isArray },\n    { name: 'Matrix',               test: function (x) { return x && x.isMatrix; } },\n    { name: 'DenseMatrix',          test: function (x) { return x && x.isDenseMatrix; } },\n    { name: 'SparseMatrix',         test: function (x) { return x && x.isSparseMatrix; } },\n    { name: 'ImmutableDenseMatrix', test: function (x) { return x && x.isImmutableDenseMatrix; } },\n    { name: 'Range',                test: function (x) { return x && x.isRange; } },\n    { name: 'Index',                test: function (x) { return x && x.isIndex; } },\n    { name: 'boolean',              test: function (x) { return typeof x === 'boolean'; } },\n    { name: 'ResultSet',            test: function (x) { return x && x.isResultSet; } },\n    { name: 'Help',                 test: function (x) { return x && x.isHelp; } },\n    { name: 'function',             test: function (x) { return typeof x === 'function';} },\n    { name: 'Date',                 test: function (x) { return x instanceof Date; } },\n    { name: 'RegExp',               test: function (x) { return x instanceof RegExp; } },\n    { name: 'Object',               test: function (x) { return typeof x === 'object'; } },\n    { name: 'null',                 test: function (x) { return x === null; } },\n    { name: 'undefined',            test: function (x) { return x === undefined; } }\n  ];\n\n  // TODO: add conversion from BigNumber to number?\n  typed.conversions = [\n    {\n      from: 'number',\n      to: 'BigNumber',\n      convert: function (x) {\n        // note: conversion from number to BigNumber can fail if x has >15 digits\n        if (digits(x) > 15) {\n          throw new TypeError('Cannot implicitly convert a number with >15 significant digits to BigNumber ' +\n          '(value: ' + x + '). ' +\n          'Use function bignumber(x) to convert to BigNumber.');\n        }\n        return new type.BigNumber(x);\n      }\n    }, {\n      from: 'number',\n      to: 'Complex',\n      convert: function (x) {\n        return new type.Complex(x, 0);\n      }\n    }, {\n      from: 'number',\n      to: 'string',\n      convert: function (x) {\n        return x + '';\n      }\n    }, {\n      from: 'BigNumber',\n      to: 'Complex',\n      convert: function (x) {\n        return new type.Complex(x.toNumber(), 0);\n      }\n    }, {\n      from: 'Fraction',\n      to: 'BigNumber',\n      convert: function (x) {\n        throw new TypeError('Cannot implicitly convert a Fraction to BigNumber or vice versa. ' +\n            'Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.');\n      }\n    }, {\n      from: 'Fraction',\n      to: 'Complex',\n      convert: function (x) {\n        return new type.Complex(x.valueOf(), 0);\n      }\n    }, {\n      from: 'number',\n      to: 'Fraction',\n      convert: function (x) {\n        if (digits(x) > 15) {\n          throw new TypeError('Cannot implicitly convert a number with >15 significant digits to Fraction ' +\n              '(value: ' + x + '). ' +\n              'Use function fraction(x) to convert to Fraction.');\n        }\n        return new type.Fraction(x);\n      }\n    }, {\n    // FIXME: add conversion from Fraction to number, for example for `sqrt(fraction(1,3))`\n    //  from: 'Fraction',\n    //  to: 'number',\n    //  convert: function (x) {\n    //    return x.valueOf();\n    //  }\n    //}, {\n      from: 'string',\n      to: 'number',\n      convert: function (x) {\n        var n = Number(x);\n        if (isNaN(n)) {\n          throw new Error('Cannot convert \"' + x + '\" to a number');\n        }\n        return n;\n      }\n    }, {\n      from: 'boolean',\n      to: 'number',\n      convert: function (x) {\n        return +x;\n      }\n    }, {\n      from: 'boolean',\n      to: 'BigNumber',\n      convert: function (x) {\n        return new type.BigNumber(+x);\n      }\n    }, {\n      from: 'boolean',\n      to: 'Fraction',\n      convert: function (x) {\n        return new type.Fraction(+x);\n      }\n    }, {\n      from: 'boolean',\n      to: 'string',\n      convert: function (x) {\n        return +x;\n      }\n    }, {\n      from: 'null',\n      to: 'number',\n      convert: function () {\n        return 0;\n      }\n    }, {\n      from: 'null',\n      to: 'string',\n      convert: function () {\n        return 'null';\n      }\n    }, {\n      from: 'null',\n      to: 'BigNumber',\n      convert: function () {\n        return new type.BigNumber(0);\n      }\n    }, {\n      from: 'null',\n      to: 'Fraction',\n      convert: function () {\n        return new type.Fraction(0);\n      }\n    }, {\n      from: 'Array',\n      to: 'Matrix',\n      convert: function (array) {\n        // TODO: how to decide on the right type of matrix to create?\n        return new type.DenseMatrix(array);\n      }\n    }, {\n      from: 'Matrix',\n      to: 'Array',\n      convert: function (matrix) {\n        return matrix.valueOf();\n      }\n    }\n  ];\n\n  return typed;\n};\n","function E () {\n\t// Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n\ton: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n","var Emitter = require('tiny-emitter');\n\n/**\n * Extend given object with emitter functions `on`, `off`, `once`, `emit`\n * @param {Object} obj\n * @return {Object} obj\n */\nexports.mixin = function (obj) {\n  // create event emitter\n  var emitter = new Emitter();\n\n  // bind methods to obj (we don't want to expose the emitter.e Array...)\n  obj.on   = emitter.on.bind(emitter);\n  obj.off  = emitter.off.bind(emitter);\n  obj.once = emitter.once.bind(emitter);\n  obj.emit = emitter.emit.bind(emitter);\n\n  return obj;\n};\n","'use strict';\n\n/**\n * Create a syntax error with the message:\n *     'Wrong number of arguments in function <fn> (<count> provided, <min>-<max> expected)'\n * @param {string} fn     Function name\n * @param {number} count  Actual argument count\n * @param {number} min    Minimum required argument count\n * @param {number} [max]  Maximum required argument count\n * @extends Error\n */\nfunction ArgumentsError(fn, count, min, max) {\n  if (!(this instanceof ArgumentsError)) {\n    throw new SyntaxError('Constructor must be called with the new operator');\n  }\n\n  this.fn = fn;\n  this.count = count;\n  this.min = min;\n  this.max = max;\n\n  this.message = 'Wrong number of arguments in function ' + fn +\n      ' (' + count + ' provided, ' +\n      min + ((max != undefined) ? ('-' + max) : '') + ' expected)';\n\n  this.stack = (new Error()).stack;\n}\n\nArgumentsError.prototype = new Error();\nArgumentsError.prototype.constructor = Error;\nArgumentsError.prototype.name = 'ArgumentsError';\nArgumentsError.prototype.isArgumentsError = true;\n\nmodule.exports = ArgumentsError;\n","'use strict';\n\nvar lazy = require('../../utils/object').lazy;\nvar isFactory = require('../../utils/object').isFactory;\nvar traverse = require('../../utils/object').traverse;\nvar extend = require('../../utils/object').extend;\nvar ArgumentsError = require('../../error/ArgumentsError');\n\nfunction factory (type, config, load, typed, math) {\n  /**\n   * Import functions from an object or a module\n   *\n   * Syntax:\n   *\n   *    math.import(object)\n   *    math.import(object, options)\n   *\n   * Where:\n   *\n   * - `object: Object`\n   *   An object with functions to be imported.\n   * - `options: Object` An object with import options. Available options:\n   *   - `override: boolean`\n   *     If true, existing functions will be overwritten. False by default.\n   *   - `silent: boolean`\n   *     If true, the function will not throw errors on duplicates or invalid\n   *     types. False by default.\n   *   - `wrap: boolean`\n   *     If true, the functions will be wrapped in a wrapper function\n   *     which converts data types like Matrix to primitive data types like Array.\n   *     The wrapper is needed when extending math.js with libraries which do not\n   *     support these data type. False by default.\n   *\n   * Examples:\n   *\n   *    // define new functions and variables\n   *    math.import({\n   *      myvalue: 42,\n   *      hello: function (name) {\n   *        return 'hello, ' + name + '!';\n   *      }\n   *    });\n   *\n   *    // use the imported function and variable\n   *    math.myvalue * 2;               // 84\n   *    math.hello('user');             // 'hello, user!'\n   *\n   *    // import the npm module 'numbers'\n   *    // (must be installed first with `npm install numbers`)\n   *    math.import(require('numbers'), {wrap: true});\n   *\n   *    math.fibonacci(7); // returns 13\n   *\n   * @param {Object | Array} object   Object with functions to be imported.\n   * @param {Object} [options]        Import options.\n   */\n  function math_import(object, options) {\n    var num = arguments.length;\n    if (num != 1 && num != 2) {\n      throw new ArgumentsError('import', num, 1, 2);\n    }\n\n    if (!options) {\n      options = {};\n    }\n\n    if (isFactory(object)) {\n      _importFactory(object, options);\n    }\n    // TODO: allow a typed-function with name too\n    else if (Array.isArray(object)) {\n      object.forEach(function (entry) {\n        math_import(entry, options);\n      });\n    }\n    else if (typeof object === 'object') {\n      // a map with functions\n      for (var name in object) {\n        if (object.hasOwnProperty(name)) {\n          var value = object[name];\n          if (isSupportedType(value)) {\n            _import(name, value, options);\n          }\n          else if (isFactory(object)) {\n            _importFactory(object, options);\n          }\n          else {\n            math_import(value, options);\n          }\n        }\n      }\n    }\n    else {\n      if (!options.silent) {\n        throw new TypeError('Factory, Object, or Array expected');\n      }\n    }\n  }\n\n  /**\n   * Add a property to the math namespace and create a chain proxy for it.\n   * @param {string} name\n   * @param {*} value\n   * @param {Object} options  See import for a description of the options\n   * @private\n   */\n  function _import(name, value, options) {\n    if (options.wrap && typeof value === 'function') {\n      // create a wrapper around the function\n      value = _wrap(value);\n    }\n\n    if (isTypedFunction(math[name]) && isTypedFunction(value)) {\n      if (options.override) {\n        // give the typed function the right name\n        value = typed(name, value.signatures);\n      }\n      else {\n        // merge the existing and typed function\n        value = typed(math[name], value);\n      }\n\n      math[name] = value;\n      _importTransform(name, value);\n      math.emit('import', name, function resolver() {\n        return value;\n      });\n      return;\n    }\n\n    if (math[name] === undefined || options.override) {\n      math[name] = value;\n      _importTransform(name, value);\n      math.emit('import', name, function resolver() {\n        return value;\n      });\n      return;\n    }\n\n    if (!options.silent) {\n      throw new Error('Cannot import \"' + name + '\": already exists');\n    }\n  }\n\n  function _importTransform (name, value) {\n    if (value && typeof value.transform === 'function') {\n      math.expression.transform[name] = value.transform;\n    }\n  }\n\n  /**\n   * Create a wrapper a round an function which converts the arguments\n   * to their primitive values (like convert a Matrix to Array)\n   * @param {Function} fn\n   * @return {Function} Returns the wrapped function\n   * @private\n   */\n  function _wrap (fn) {\n    var wrapper = function wrapper () {\n      var args = [];\n      for (var i = 0, len = arguments.length; i < len; i++) {\n        var arg = arguments[i];\n        args[i] = arg && arg.valueOf();\n      }\n      return fn.apply(math, args);\n    };\n\n    if (fn.transform) {\n      wrapper.transform = fn.transform;\n    }\n\n    return wrapper;\n  }\n\n  /**\n   * Import an instance of a factory into math.js\n   * @param {{factory: Function, name: string, path: string, math: boolean}} factory\n   * @param {Object} options  See import for a description of the options\n   * @private\n   */\n  function _importFactory(factory, options) {\n    if (typeof factory.name === 'string') {\n      var name = factory.name;\n      var namespace = factory.path ? traverse(math, factory.path) : math;\n      var existing = namespace.hasOwnProperty(name) ? namespace[name] : undefined;\n\n      var resolver = function () {\n        var instance = load(factory);\n\n        if (isTypedFunction(existing) && isTypedFunction(instance)) {\n          if (options.override) {\n            // replace the existing typed function (nothing to do)\n          }\n          else {\n            // merge the existing and new typed function\n            instance = typed(existing, instance);\n          }\n\n          return instance;\n        }\n\n        if (existing === undefined || options.override) {\n          return instance;\n        }\n\n        if (!options.silent) {\n          throw new Error('Cannot import \"' + name + '\": already exists');\n        }\n      };\n\n      if (factory.lazy !== false) {\n        lazy(namespace, name, resolver);\n      }\n      else {\n        namespace[name] = resolver();\n      }\n\n      math.emit('import', name, resolver, factory.path);\n    }\n    else {\n      // unnamed factory.\n      // no lazy loading\n      load(factory);\n    }\n  }\n\n  /**\n   * Check whether given object is a type which can be imported\n   * @param {Function | number | string | boolean | null | Unit | Complex} object\n   * @return {boolean}\n   * @private\n   */\n  function isSupportedType(object) {\n    return typeof object == 'function'\n        || typeof object === 'number'\n        || typeof object === 'string'\n        || typeof object === 'boolean'\n        || object === null\n        || (object && object.isUnit === true)\n        || (object && object.isComplex === true)\n        || (object && object.isBigNumber === true)\n        || (object && object.isFraction === true)\n        || (object && object.isMatrix === true)\n        || (object && Array.isArray(object) === true)\n  }\n\n  /**\n   * Test whether a given thing is a typed-function\n   * @param {*} fn\n   * @return {boolean} Returns true when `fn` is a typed-function\n   */\n  function isTypedFunction (fn) {\n    return typeof fn === 'function' && typeof fn.signatures === 'object';\n  }\n\n  return math_import;\n}\n\nexports.math = true; // request access to the math namespace as 5th argument of the factory function\nexports.name = 'import';\nexports.factory = factory;\nexports.lazy = true;\n","'use strict';\n\nvar object = require('../../utils/object');\n\nfunction factory (type, config, load, typed, math) {\n  var MATRIX = ['Matrix', 'Array'];                   // valid values for option matrix\n  var NUMBER = ['number', 'BigNumber', 'Fraction'];   // valid values for option number\n\n  /**\n   * Set configuration options for math.js, and get current options.\n   * Will emit a 'config' event, with arguments (curr, prev).\n   *\n   * Syntax:\n   *\n   *     math.config(config: Object): Object\n   *\n   * Examples:\n   *\n   *     math.config().number;                // outputs 'number'\n   *     math.eval('0.4');                    // outputs number 0.4\n   *     math.config({number: 'Fraction'});\n   *     math.eval('0.4');                    // outputs Fraction 2/5\n   *\n   * @param {Object} [options] Available options:\n   *                            {number} epsilon\n   *                              Minimum relative difference between two\n   *                              compared values, used by all comparison functions.\n   *                            {string} matrix\n   *                              A string 'Matrix' (default) or 'Array'.\n   *                            {string} number\n   *                              A string 'number' (default), 'BigNumber', or 'Fraction'\n   *                            {number} precision\n   *                              The number of significant digits for BigNumbers.\n   *                              Not applicable for Numbers.\n   *                            {string} parenthesis\n   *                              How to display parentheses in LaTeX and string\n   *                              output.\n   * @return {Object} Returns the current configuration\n   */\n  function _config(options) {\n    if (options) {\n      var prev = object.clone(config);\n\n      // validate some of the options\n      validateOption(options, 'matrix', MATRIX);\n      validateOption(options, 'number', NUMBER);\n\n      // merge options\n      object.deepExtend(config, options);\n\n      var curr = object.clone(config);\n\n      // emit 'config' event\n      math.emit('config', curr, prev);\n\n      return curr;\n    }\n    else {\n      return object.clone(config);\n    }\n  }\n\n  // attach the valid options to the function so they can be extended\n  _config.MATRIX = MATRIX;\n  _config.NUMBER = NUMBER;\n\n  return _config;\n}\n\n/**\n * Test whether an Array contains a specific item.\n * @param {Array.<string>} array\n * @param {string} item\n * @return {boolean}\n */\nfunction contains (array, item) {\n  return array.indexOf(item) !== -1;\n}\n\n/**\n * Find a string in an array. Case insensitive search\n * @param {Array.<string>} array\n * @param {string} item\n * @return {number} Returns the index when found. Returns -1 when not found\n */\nfunction findIndex (array, item) {\n  return array\n      .map(function (i) {\n        return i.toLowerCase();\n      })\n      .indexOf(item.toLowerCase());\n}\n\n/**\n * Validate an option\n * @param {Object} options         Object with options\n * @param {string} name            Name of the option to validate\n * @param {Array.<string>} values  Array with valid values for this option\n */\nfunction validateOption(options, name, values) {\n  if (options[name] !== undefined && !contains(values, options[name])) {\n    var index = findIndex(values, options[name]);\n    if (index !== -1) {\n      // right value, wrong casing\n      // TODO: lower case values are deprecated since v3, remove this warning some day.\n      console.warn('Warning: Wrong casing for configuration option \"' + name + '\", should be \"' + values[index] + '\" instead of \"' + options[name] + '\".');\n\n      options[name] = values[index]; // change the option to the right casing\n    }\n    else {\n      // unknown value\n      console.warn('Warning: Unknown value \"' + options[name] + '\" for configuration option \"' + name + '\". Available options: ' + values.map(JSON.stringify).join(', ') + '.');\n    }\n  }\n}\n\nexports.name = 'config';\nexports.math = true; // request the math namespace as fifth argument\nexports.factory = factory;\n","var isFactory = require('./../utils/object').isFactory;\nvar deepExtend = require('./../utils/object').deepExtend;\nvar typedFactory = require('./typed');\nvar emitter = require('./../utils/emitter');\n\nvar importFactory = require('./function/import');\nvar configFactory = require('./function/config');\n\n/**\n * Math.js core. Creates a new, empty math.js instance\n * @param {Object} [options] Available options:\n *                            {number} epsilon\n *                              Minimum relative difference between two\n *                              compared values, used by all comparison functions.\n *                            {string} matrix\n *                              A string 'Matrix' (default) or 'Array'.\n *                            {string} number\n *                              A string 'number' (default), 'BigNumber', or 'Fraction'\n *                            {number} precision\n *                              The number of significant digits for BigNumbers.\n *                              Not applicable for Numbers.\n *                            {boolean} predictable\n *                              Predictable output type of functions. When true,\n *                              output type depends only on the input types. When\n *                              false (default), output type can vary depending\n *                              on input values. For example `math.sqrt(-2)`\n *                              returns `NaN` when predictable is false, and\n *                              returns `complex('2i')` when true.\n * @returns {Object} Returns a bare-bone math.js instance containing\n *                   functions:\n *                   - `import` to add new functions\n *                   - `config` to change configuration\n *                   - `on`, `off`, `once`, `emit` for events\n */\nexports.create = function create (options) {\n  // simple test for ES5 support\n  if (typeof Object.create !== 'function') {\n    throw new Error('ES5 not supported by this JavaScript engine. ' +\n    'Please load the es5-shim and es5-sham library for compatibility.');\n  }\n\n  // cached factories and instances\n  var factories = [];\n  var instances = [];\n\n  // create a namespace for the mathjs instance, and attach emitter functions\n  var math = emitter.mixin({});\n  math.type = {};\n  math.expression = {\n    transform: Object.create(math)\n  };\n\n  // create a new typed instance\n  math.typed = typedFactory.create(math.type);\n\n  // create configuration options. These are private\n  var _config = {\n    // minimum relative difference between two compared values,\n    // used by all comparison functions\n    epsilon: 1e-12,\n\n    // type of default matrix output. Choose 'matrix' (default) or 'array'\n    matrix: 'Matrix',\n\n    // type of default number output. Choose 'number' (default) 'BigNumber', or 'Fraction\n    number: 'number',\n\n    // number of significant digits in BigNumbers\n    precision: 64,\n\n    // predictable output type of functions. When true, output type depends only\n    // on the input types. When false (default), output type can vary depending\n    // on input values. For example `math.sqrt(-2)` returns `NaN` when\n    // predictable is false, and returns `complex('2i')` when true.\n    predictable: false\n  };\n\n  /**\n   * Load a function or data type from a factory.\n   * If the function or data type already exists, the existing instance is\n   * returned.\n   * @param {{type: string, name: string, factory: Function}} factory\n   * @returns {*}\n   */\n  function load (factory) {\n    if (!isFactory(factory)) {\n      throw new Error('Factory object with properties `type`, `name`, and `factory` expected');\n    }\n\n    var index = factories.indexOf(factory);\n    var instance;\n    if (index === -1) {\n      // doesn't yet exist\n      if (factory.math === true) {\n        // pass with math namespace\n        instance = factory.factory(math.type, _config, load, math.typed, math);\n      }\n      else {\n        instance = factory.factory(math.type, _config, load, math.typed);\n      }\n\n      // append to the cache\n      factories.push(factory);\n      instances.push(instance);\n    }\n    else {\n      // already existing function, return the cached instance\n      instance = instances[index];\n    }\n\n    return instance;\n  }\n\n  // load the import and config functions\n  math['import'] = load(importFactory);\n  math['config'] = load(configFactory);\n\n  // apply options\n  if (options) {\n    math.config(options);\n  }\n\n  return math;\n};\n","/**\n * Convert a BigNumber to a formatted string representation.\n *\n * Syntax:\n *\n *    format(value)\n *    format(value, options)\n *    format(value, precision)\n *    format(value, fn)\n *\n * Where:\n *\n *    {number} value   The value to be formatted\n *    {Object} options An object with formatting options. Available options:\n *                     {string} notation\n *                         Number notation. Choose from:\n *                         'fixed'          Always use regular number notation.\n *                                          For example '123.40' and '14000000'\n *                         'exponential'    Always use exponential notation.\n *                                          For example '1.234e+2' and '1.4e+7'\n *                         'auto' (default) Regular number notation for numbers\n *                                          having an absolute value between\n *                                          `lower` and `upper` bounds, and uses\n *                                          exponential notation elsewhere.\n *                                          Lower bound is included, upper bound\n *                                          is excluded.\n *                                          For example '123.4' and '1.4e7'.\n *                     {number} precision   A number between 0 and 16 to round\n *                                          the digits of the number.\n *                                          In case of notations 'exponential' and\n *                                          'auto', `precision` defines the total\n *                                          number of significant digits returned\n *                                          and is undefined by default.\n *                                          In case of notation 'fixed',\n *                                          `precision` defines the number of\n *                                          significant digits after the decimal\n *                                          point, and is 0 by default.\n *                     {Object} exponential An object containing two parameters,\n *                                          {number} lower and {number} upper,\n *                                          used by notation 'auto' to determine\n *                                          when to return exponential notation.\n *                                          Default values are `lower=1e-3` and\n *                                          `upper=1e5`.\n *                                          Only applicable for notation `auto`.\n *    {Function} fn    A custom formatting function. Can be used to override the\n *                     built-in notations. Function `fn` is called with `value` as\n *                     parameter and must return a string. Is useful for example to\n *                     format all values inside a matrix in a particular way.\n *\n * Examples:\n *\n *    format(6.4);                                        // '6.4'\n *    format(1240000);                                    // '1.24e6'\n *    format(1/3);                                        // '0.3333333333333333'\n *    format(1/3, 3);                                     // '0.333'\n *    format(21385, 2);                                   // '21000'\n *    format(12.071, {notation: 'fixed'});                // '12'\n *    format(2.3,    {notation: 'fixed', precision: 2});  // '2.30'\n *    format(52.8,   {notation: 'exponential'});          // '5.28e+1'\n *\n * @param {BigNumber} value\n * @param {Object | Function | number} [options]\n * @return {string} str The formatted value\n */\nexports.format = function (value, options) {\n  if (typeof options === 'function') {\n    // handle format(value, fn)\n    return options(value);\n  }\n\n  // handle special cases\n  if (!value.isFinite()) {\n    return value.isNaN() ? 'NaN' : (value.gt(0) ? 'Infinity' : '-Infinity');\n  }\n\n  // default values for options\n  var notation = 'auto';\n  var precision = undefined;\n\n  if (options !== undefined) {\n    // determine notation from options\n    if (options.notation) {\n      notation = options.notation;\n    }\n\n    // determine precision from options\n    if (typeof options === 'number') {\n      precision = options;\n    }\n    else if (options.precision) {\n      precision = options.precision;\n    }\n  }\n\n  // handle the various notations\n  switch (notation) {\n    case 'fixed':\n      return exports.toFixed(value, precision);\n\n    case 'exponential':\n      return exports.toExponential(value, precision);\n\n    case 'auto':\n      // determine lower and upper bound for exponential notation.\n      // TODO: implement support for upper and lower to be BigNumbers themselves\n      var lower = 1e-3;\n      var upper = 1e5;\n      if (options && options.exponential) {\n        if (options.exponential.lower !== undefined) {\n          lower = options.exponential.lower;\n        }\n        if (options.exponential.upper !== undefined) {\n          upper = options.exponential.upper;\n        }\n      }\n\n      // adjust the configuration of the BigNumber constructor (yeah, this is quite tricky...)\n      var oldConfig = {\n        toExpNeg: value.constructor.toExpNeg,\n        toExpPos: value.constructor.toExpPos\n      };\n\n      value.constructor.config({\n        toExpNeg: Math.round(Math.log(lower) / Math.LN10),\n        toExpPos: Math.round(Math.log(upper) / Math.LN10)\n      });\n\n      // handle special case zero\n      if (value.isZero()) return '0';\n\n      // determine whether or not to output exponential notation\n      var str;\n      var abs = value.abs();\n      if (abs.gte(lower) && abs.lt(upper)) {\n        // normal number notation\n        str = value.toSignificantDigits(precision).toFixed();\n      }\n      else {\n        // exponential notation\n        str = exports.toExponential(value, precision);\n      }\n\n      // remove trailing zeros after the decimal point\n      return str.replace(/((\\.\\d*?)(0+))($|e)/, function () {\n        var digits = arguments[2];\n        var e = arguments[4];\n        return (digits !== '.') ? digits + e : e;\n      });\n\n    default:\n      throw new Error('Unknown notation \"' + notation + '\". ' +\n          'Choose \"auto\", \"exponential\", or \"fixed\".');\n  }\n};\n\n/**\n * Format a number in exponential notation. Like '1.23e+5', '2.3e+0', '3.500e-3'\n * @param {BigNumber} value\n * @param {number} [precision]  Number of digits in formatted output.\n *                              If not provided, the maximum available digits\n *                              is used.\n * @returns {string} str\n */\nexports.toExponential = function (value, precision) {\n  if (precision !== undefined) {\n    return value.toExponential(precision - 1); // Note the offset of one\n  }\n  else {\n    return value.toExponential();\n  }\n};\n\n/**\n * Format a number with fixed notation.\n * @param {BigNumber} value\n * @param {number} [precision=0]        Optional number of decimals after the\n *                                      decimal point. Zero by default.\n */\nexports.toFixed = function (value, precision) {\n  return value.toFixed(precision || 0);\n  // Note: the (precision || 0) is needed as the toFixed of BigNumber has an\n  // undefined default precision instead of 0.\n};\n","'use strict';\n\nvar formatNumber = require('./number').format;\nvar formatBigNumber = require('./bignumber/formatter').format;\n\n/**\n * Test whether value is a string\n * @param {*} value\n * @return {boolean} isString\n */\nexports.isString = function(value) {\n  return typeof value === 'string';\n};\n\n/**\n * Check if a text ends with a certain string.\n * @param {string} text\n * @param {string} search\n */\nexports.endsWith = function(text, search) {\n  var start = text.length - search.length;\n  var end = text.length;\n  return (text.substring(start, end) === search);\n};\n\n/**\n * Format a value of any type into a string.\n *\n * Usage:\n *     math.format(value)\n *     math.format(value, precision)\n *\n * When value is a function:\n *\n * - When the function has a property `syntax`, it returns this\n *   syntax description.\n * - In other cases, a string `'function'` is returned.\n *\n * When `value` is an Object:\n *\n * - When the object contains a property `format` being a function, this\n *   function is invoked as `value.format(options)` and the result is returned.\n * - When the object has its own `toString` method, this method is invoked\n *   and the result is returned.\n * - In other cases the function will loop over all object properties and\n *   return JSON object notation like '{\"a\": 2, \"b\": 3}'.\n *\n * Example usage:\n *     math.format(2/7);                // '0.2857142857142857'\n *     math.format(math.pi, 3);         // '3.14'\n *     math.format(new Complex(2, 3));  // '2 + 3i'\n *     math.format('hello');            // '\"hello\"'\n *\n * @param {*} value             Value to be stringified\n * @param {Object | number | Function} [options]  Formatting options. See\n *                                                lib/utils/number:format for a\n *                                                description of the available\n *                                                options.\n * @return {string} str\n */\nexports.format = function(value, options) {\n  if (typeof value === 'number') {\n    return formatNumber(value, options);\n  }\n\n  if (value && value.isBigNumber === true) {\n    return formatBigNumber(value, options);\n  }\n\n  if (value && value.isFraction === true) {\n    if (!options || options.fraction !== 'decimal') {\n      // output as ratio, like '1/3'\n      return (value.s * value.n) + '/' + value.d;\n    }\n    else {\n      // output as decimal, like '0.(3)'\n      return value.toString();\n    }\n  }\n\n  if (Array.isArray(value)) {\n    return formatArray(value, options);\n  }\n\n  if (exports.isString(value)) {\n    return '\"' + value + '\"';\n  }\n\n  if (typeof value === 'function') {\n    return value.syntax ? String(value.syntax) : 'function';\n  }\n\n  if (value && typeof value === 'object') {\n    if (typeof value.format === 'function') {\n      return value.format(options);\n    }\n    else if (value && value.toString() !== {}.toString()) {\n      // this object has a non-native toString method, use that one\n      return value.toString();\n    }\n    else {\n      var entries = [];\n\n      for (var key in value) {\n        if (value.hasOwnProperty(key)) {\n          entries.push('\"' + key + '\": ' + exports.format(value[key], options));\n        }\n      }\n\n      return '{' + entries.join(', ') + '}';\n    }\n  }\n\n  return String(value);\n};\n\n/**\n * Recursively format an n-dimensional matrix\n * Example output: \"[[1, 2], [3, 4]]\"\n * @param {Array} array\n * @param {Object | number | Function} [options]  Formatting options. See\n *                                                lib/utils/number:format for a\n *                                                description of the available\n *                                                options.\n * @returns {string} str\n */\nfunction formatArray (array, options) {\n  if (Array.isArray(array)) {\n    var str = '[';\n    var len = array.length;\n    for (var i = 0; i < len; i++) {\n      if (i != 0) {\n        str += ', ';\n      }\n      str += formatArray(array[i], options);\n    }\n    str += ']';\n    return str;\n  }\n  else {\n    return exports.format(array, options);\n  }\n}\n","'use strict';\n\n/**\n * Determine the type of a variable\n *\n *     type(x)\n *\n * The following types are recognized:\n *\n *     'undefined'\n *     'null'\n *     'boolean'\n *     'number'\n *     'string'\n *     'Array'\n *     'Function'\n *     'Date'\n *     'RegExp'\n *     'Object'\n *\n * @param {*} x\n * @return {string} Returns the name of the type. Primitive types are lower case,\n *                  non-primitive types are upper-camel-case.\n *                  For example 'number', 'string', 'Array', 'Date'.\n */\nexports.type = function(x) {\n  var type = typeof x;\n\n  if (type === 'object') {\n    if (x === null)           return 'null';\n    if (x instanceof Boolean) return 'boolean';\n    if (x instanceof Number)  return 'number';\n    if (x instanceof String)  return 'string';\n    if (Array.isArray(x))     return 'Array';\n    if (x instanceof Date)    return 'Date';\n    if (x instanceof RegExp)  return 'RegExp';\n\n    return 'Object';\n  }\n\n  if (type === 'function')    return 'Function';\n\n  return type;\n};\n\n/**\n * Test whether a value is a scalar\n * @param x\n * @return {boolean} Returns true when x is a scalar, returns false when\n *                   x is a Matrix or Array.\n */\nexports.isScalar = function (x) {\n  return !((x && x.isMatrix) || Array.isArray(x));\n};\n","'use strict';\n\n/**\n * Create a range error with the message:\n *     'Dimension mismatch (<actual size> != <expected size>)'\n * @param {number | number[]} actual        The actual size\n * @param {number | number[]} expected      The expected size\n * @param {string} [relation='!=']          Optional relation between actual\n *                                          and expected size: '!=', '<', etc.\n * @extends RangeError\n */\nfunction DimensionError(actual, expected, relation) {\n  if (!(this instanceof DimensionError)) {\n    throw new SyntaxError('Constructor must be called with the new operator');\n  }\n\n  this.actual   = actual;\n  this.expected = expected;\n  this.relation = relation;\n\n  this.message = 'Dimension mismatch (' +\n      (Array.isArray(actual) ? ('[' + actual.join(', ') + ']') : actual) +\n      ' ' + (this.relation || '!=') + ' ' +\n      (Array.isArray(expected) ? ('[' + expected.join(', ') + ']') : expected) +\n      ')';\n\n  this.stack = (new Error()).stack;\n}\n\nDimensionError.prototype = new RangeError();\nDimensionError.prototype.constructor = RangeError;\nDimensionError.prototype.name = 'DimensionError';\nDimensionError.prototype.isDimensionError = true;\n\nmodule.exports = DimensionError;\n","'use strict';\n\n/**\n * Create a range error with the message:\n *     'Index out of range (index < min)'\n *     'Index out of range (index < max)'\n *\n * @param {number} index     The actual index\n * @param {number} [min=0]   Minimum index (included)\n * @param {number} [max]     Maximum index (excluded)\n * @extends RangeError\n */\nfunction IndexError(index, min, max) {\n  if (!(this instanceof IndexError)) {\n    throw new SyntaxError('Constructor must be called with the new operator');\n  }\n\n  this.index = index;\n  if (arguments.length < 3) {\n    this.min = 0;\n    this.max = min;\n  }\n  else {\n    this.min = min;\n    this.max = max;\n  }\n\n  if (this.min !== undefined && this.index < this.min) {\n    this.message = 'Index out of range (' + this.index + ' < ' + this.min + ')';\n  }\n  else if (this.max !== undefined && this.index >= this.max) {\n    this.message = 'Index out of range (' + this.index + ' > ' + (this.max - 1) + ')';\n  }\n  else {\n    this.message = 'Index out of range (' + this.index + ')';\n  }\n\n  this.stack = (new Error()).stack;\n}\n\nIndexError.prototype = new RangeError();\nIndexError.prototype.constructor = RangeError;\nIndexError.prototype.name = 'IndexError';\nIndexError.prototype.isIndexError = true;\n\nmodule.exports = IndexError;\n","'use strict';\n\nvar number = require('./number');\nvar string = require('./string');\nvar object = require('./object');\nvar types = require('./types');\n\nvar DimensionError = require('../error/DimensionError');\nvar IndexError = require('../error/IndexError');\n\n/**\n * Calculate the size of a multi dimensional array.\n * This function checks the size of the first entry, it does not validate\n * whether all dimensions match. (use function `validate` for that)\n * @param {Array} x\n * @Return {Number[]} size\n */\nexports.size = function (x) {\n  var s = [];\n\n  while (Array.isArray(x)) {\n    s.push(x.length);\n    x = x[0];\n  }\n\n  return s;\n};\n\n/**\n * Recursively validate whether each element in a multi dimensional array\n * has a size corresponding to the provided size array.\n * @param {Array} array    Array to be validated\n * @param {number[]} size  Array with the size of each dimension\n * @param {number} dim   Current dimension\n * @throws DimensionError\n * @private\n */\nfunction _validate(array, size, dim) {\n  var i;\n  var len = array.length;\n\n  if (len != size[dim]) {\n    throw new DimensionError(len, size[dim]);\n  }\n\n  if (dim < size.length - 1) {\n    // recursively validate each child array\n    var dimNext = dim + 1;\n    for (i = 0; i < len; i++) {\n      var child = array[i];\n      if (!Array.isArray(child)) {\n        throw new DimensionError(size.length - 1, size.length, '<');\n      }\n      _validate(array[i], size, dimNext);\n    }\n  }\n  else {\n    // last dimension. none of the childs may be an array\n    for (i = 0; i < len; i++) {\n      if (Array.isArray(array[i])) {\n        throw new DimensionError(size.length + 1, size.length, '>');\n      }\n    }\n  }\n}\n\n/**\n * Validate whether each element in a multi dimensional array has\n * a size corresponding to the provided size array.\n * @param {Array} array    Array to be validated\n * @param {number[]} size  Array with the size of each dimension\n * @throws DimensionError\n */\nexports.validate = function(array, size) {\n  var isScalar = (size.length == 0);\n  if (isScalar) {\n    // scalar\n    if (Array.isArray(array)) {\n      throw new DimensionError(array.length, 0);\n    }\n  }\n  else {\n    // array\n    _validate(array, size, 0);\n  }\n};\n\n/**\n * Test whether index is an integer number with index >= 0 and index < length\n * when length is provided\n * @param {number} index    Zero-based index\n * @param {number} [length] Length of the array\n */\nexports.validateIndex = function(index, length) {\n  if (!number.isNumber(index) || !number.isInteger(index)) {\n    throw new TypeError('Index must be an integer (value: ' + index + ')');\n  }\n  if (index < 0 || (typeof length === 'number' && index >= length)) {\n    throw new IndexError(index, length);\n  }\n};\n\n// a constant used to specify an undefined defaultValue\nexports.UNINITIALIZED = {};\n\n/**\n * Resize a multi dimensional array. The resized array is returned.\n * @param {Array} array         Array to be resized\n * @param {Array.<number>} size Array with the size of each dimension\n * @param {*} [defaultValue=0]  Value to be filled in in new entries,\n *                              zero by default. To leave new entries undefined,\n *                              specify array.UNINITIALIZED as defaultValue\n * @return {Array} array         The resized array\n */\nexports.resize = function(array, size, defaultValue) {\n  // TODO: add support for scalars, having size=[] ?\n\n  // check the type of the arguments\n  if (!Array.isArray(array) || !Array.isArray(size)) {\n    throw new TypeError('Array expected');\n  }\n  if (size.length === 0) {\n    throw new Error('Resizing to scalar is not supported');\n  }\n\n  // check whether size contains positive integers\n  size.forEach(function (value) {\n    if (!number.isNumber(value) || !number.isInteger(value) || value < 0) {\n      throw new TypeError('Invalid size, must contain positive integers ' +\n          '(size: ' + string.format(size) + ')');\n    }\n  });\n\n  // recursively resize the array\n  var _defaultValue = (defaultValue !== undefined) ? defaultValue : 0;\n  _resize(array, size, 0, _defaultValue);\n\n  return array;\n};\n\n/**\n * Recursively resize a multi dimensional array\n * @param {Array} array         Array to be resized\n * @param {number[]} size       Array with the size of each dimension\n * @param {number} dim          Current dimension\n * @param {*} [defaultValue]    Value to be filled in in new entries,\n *                              undefined by default.\n * @private\n */\nfunction _resize (array, size, dim, defaultValue) {\n  var i;\n  var elem;\n  var oldLen = array.length;\n  var newLen = size[dim];\n  var minLen = Math.min(oldLen, newLen);\n\n  // apply new length\n  array.length = newLen;\n\n  if (dim < size.length - 1) {\n    // non-last dimension\n    var dimNext = dim + 1;\n\n    // resize existing child arrays\n    for (i = 0; i < minLen; i++) {\n      // resize child array\n      elem = array[i];\n      if (!Array.isArray(elem)) {\n        elem = [elem]; // add a dimension\n        array[i] = elem;\n      }\n      _resize(elem, size, dimNext, defaultValue);\n    }\n\n    // create new child arrays\n    for (i = minLen; i < newLen; i++) {\n      // get child array\n      elem = [];\n      array[i] = elem;\n\n      // resize new child array\n      _resize(elem, size, dimNext, defaultValue);\n    }\n  }\n  else {\n    // last dimension\n\n    // remove dimensions of existing values\n    for (i = 0; i < minLen; i++) {\n      while (Array.isArray(array[i])) {\n        array[i] = array[i][0];\n      }\n    }\n\n    if(defaultValue !== exports.UNINITIALIZED) {\n      // fill new elements with the default value\n      for (i = minLen; i < newLen; i++) {\n        array[i] = defaultValue;\n      }\n    }\n  }\n}\n\n/**\n * Squeeze a multi dimensional array\n * @param {Array} array\n * @param {Array} [size]\n * @returns {Array} returns the array itself\n */\nexports.squeeze = function(array, size) {\n  var s = size || exports.size(array);\n\n  // squeeze outer dimensions\n  while (Array.isArray(array) && array.length === 1) {\n    array = array[0];\n    s.shift();\n  }\n\n  // find the first dimension to be squeezed\n  var dims = s.length;\n  while (s[dims - 1] === 1) {\n    dims--;\n  }\n\n  // squeeze inner dimensions\n  if (dims < s.length) {\n    array = _squeeze(array, dims, 0);\n    s.length = dims;\n  }\n\n  return array;\n};\n\n/**\n * Recursively squeeze a multi dimensional array\n * @param {Array} array\n * @param {number} dims Required number of dimensions\n * @param {number} dim  Current dimension\n * @returns {Array | *} Returns the squeezed array\n * @private\n */\nfunction _squeeze (array, dims, dim) {\n  var i, ii;\n\n  if (dim < dims) {\n    var next = dim + 1;\n    for (i = 0, ii = array.length; i < ii; i++) {\n      array[i] = _squeeze(array[i], dims, next);\n    }\n  }\n  else {\n    while (Array.isArray(array)) {\n      array = array[0];\n    }\n  }\n\n  return array;\n}\n\n/**\n * Unsqueeze a multi dimensional array: add dimensions when missing\n * \n * Paramter `size` will be mutated to match the new, unqueezed matrix size.\n * \n * @param {Array} array\n * @param {number} dims     Desired number of dimensions of the array\n * @param {number} [outer]  Number of outer dimensions to be added\n * @param {Array} [size]    Current size of array.\n * @returns {Array} returns the array itself\n * @private\n */\nexports.unsqueeze = function(array, dims, outer, size) {\n  var s = size || exports.size(array);\n\n  // unsqueeze outer dimensions\n  if (outer) {\n    for (var i = 0; i < outer; i++) {\n      array = [array];\n      s.unshift(1);\n    }\n  }\n\n  // unsqueeze inner dimensions\n  array = _unsqueeze(array, dims, 0);\n  while (s.length < dims) {\n    s.push(1);\n  }\n\n  return array;\n};\n\n/**\n * Recursively unsqueeze a multi dimensional array\n * @param {Array} array\n * @param {number} dims Required number of dimensions\n * @param {number} dim  Current dimension\n * @returns {Array | *} Returns the squeezed array\n * @private\n */\nfunction _unsqueeze (array, dims, dim) {\n  var i, ii;\n\n  if (Array.isArray(array)) {\n    var next = dim + 1;\n    for (i = 0, ii = array.length; i < ii; i++) {\n      array[i] = _unsqueeze(array[i], dims, next);\n    }\n  }\n  else {\n    for (var d = dim; d < dims; d++) {\n      array = [array];\n    }\n  }\n\n  return array;\n}\n/**\n * Flatten a multi dimensional array, put all elements in a one dimensional\n * array\n * @param {Array} array   A multi dimensional array\n * @return {Array}        The flattened array (1 dimensional)\n */\nexports.flatten = function(array) {\n  if (!Array.isArray(array)) {\n    //if not an array, return as is\n    return array;\n  }\n  var flat = [];\n\n  array.forEach(function callback(value) {\n    if (Array.isArray(value)) {\n      value.forEach(callback);  //traverse through sub-arrays recursively\n    }\n    else {\n      flat.push(value);\n    }\n  });\n\n  return flat;\n};\n\n/**\n * Test whether an object is an array\n * @param {*} value\n * @return {boolean} isArray\n */\nexports.isArray = Array.isArray;\n","// function utils\n\n/*\n * Memoize a given function by caching the computed result.\n * The cache of a memoized function can be cleared by deleting the `cache`\n * property of the function.\n *\n * @param {function} fn                     The function to be memoized.\n *                                          Must be a pure function.\n * @param {function(args: Array)} [hasher]  A custom hash builder.\n *                                          Is JSON.stringify by default.\n * @return {function}                       Returns the memoized function\n */\nexports.memoize = function(fn, hasher) {\n  return function memoize() {\n    if (typeof memoize.cache !== 'object') {\n      memoize.cache = {};\n    }\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    var hash = hasher ? hasher(args) : JSON.stringify(args);\n    if (!(hash in memoize.cache)) {\n      return memoize.cache[hash] = fn.apply(fn, args);\n    }\n    return memoize.cache[hash];\n  };\n};\n\n/**\n * Find the maximum number of arguments expected by a typed function.\n * @param {function} fn   A typed function\n * @return {number} Returns the maximum number of expected arguments.\n *                  Returns -1 when no signatures where found on the function.\n */\nexports.maxArgumentCount = function (fn) {\n  return Object.keys(fn.signatures || {})\n      .reduce(function (args, signature) {\n        var count = (signature.match(/,/g) || []).length + 1;\n        return Math.max(args, count);\n      }, -1);\n};\n","'use strict';\n\nexports.array = require('./array');\nexports['boolean'] = require('./boolean');\nexports['function'] = require('./function');\nexports.number = require('./number');\nexports.object = require('./object');\nexports.string = require('./string');\nexports.types = require('./types');\nexports.emitter = require('./emitter');\n","'use strict';\n\nvar util = require('../../utils/index');\n\nvar string = util.string;\n\nvar isString = string.isString;\n\nfunction factory (type, config, load, typed) {\n  /**\n   * @constructor Matrix\n   *\n   * A Matrix is a wrapper around an Array. A matrix can hold a multi dimensional\n   * array. A matrix can be constructed as:\n   *     var matrix = math.matrix(data)\n   *\n   * Matrix contains the functions to resize, get and set values, get the size,\n   * clone the matrix and to convert the matrix to a vector, array, or scalar.\n   * Furthermore, one can iterate over the matrix using map and forEach.\n   * The internal Array of the Matrix can be accessed using the function valueOf.\n   *\n   * Example usage:\n   *     var matrix = math.matrix([[1, 2], [3, 4]]);\n   *     matix.size();              // [2, 2]\n   *     matrix.resize([3, 2], 5);\n   *     matrix.valueOf();          // [[1, 2], [3, 4], [5, 5]]\n   *     matrix.subset([1,2])       // 3 (indexes are zero-based)\n   *\n   */\n  function Matrix() {\n    if (!(this instanceof Matrix)) {\n      throw new SyntaxError('Constructor must be called with the new operator');\n    }\n  }\n\n  /**\n   * Attach type information\n   */\n  Matrix.prototype.type = 'Matrix';\n  Matrix.prototype.isMatrix = true;\n\n  /**\n   * Get the Matrix storage constructor for the given format.\n   *\n   * @param {string} format       The Matrix storage format.\n   *\n   * @return {Function}           The Matrix storage constructor.\n   */\n  Matrix.storage = function (format) {\n    // check storage format is a string\n    if (!isString(format)) {\n      throw new TypeError('format must be a string value');\n    }\n\n    // get storage format constructor\n    var constructor = Matrix._storage[format];\n    if (!constructor) {\n      throw new SyntaxError('Unsupported matrix storage format: ' + format);\n    }\n\n    // return storage constructor\n    return constructor;\n  };\n\n  // a map with all constructors for all storage types\n  Matrix._storage = {};\n\n  /**\n   * Get the storage format used by the matrix.\n   *\n   * Usage:\n   *     var format = matrix.storage()                   // retrieve storage format\n   *\n   * @return {string}           The storage format.\n   */\n  Matrix.prototype.storage = function () {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke storage on a Matrix interface');\n  };\n  \n  /**\n   * Get the datatype of the data stored in the matrix.\n   *\n   * Usage:\n   *     var format = matrix.datatype()                   // retrieve matrix datatype\n   *\n   * @return {string}           The datatype.\n   */\n  Matrix.prototype.datatype = function () {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke datatype on a Matrix interface');\n  };\n\n  /**\n   * Create a new Matrix With the type of the current matrix instance\n   * @param {Array | Object} data\n   * @param {string} [datatype]\n   */\n  Matrix.prototype.create = function (data, datatype) {\n    throw new Error('Cannot invoke create on a Matrix interface');\n  };\n\n  /**\n   * Get a subset of the matrix, or replace a subset of the matrix.\n   *\n   * Usage:\n   *     var subset = matrix.subset(index)               // retrieve subset\n   *     var value = matrix.subset(index, replacement)   // replace subset\n   *\n   * @param {Index} index\n   * @param {Array | Matrix | *} [replacement]\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be filled with zeros.\n   */\n  Matrix.prototype.subset = function (index, replacement, defaultValue) {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke subset on a Matrix interface');\n  };\n\n  /**\n   * Get a single element from the matrix.\n   * @param {number[]} index   Zero-based index\n   * @return {*} value\n   */\n  Matrix.prototype.get = function (index) {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke get on a Matrix interface');\n  };\n\n  /**\n   * Replace a single element in the matrix.\n   * @param {number[]} index   Zero-based index\n   * @param {*} value\n   * @param {*} [defaultValue]        Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be left undefined.\n   * @return {Matrix} self\n   */\n  Matrix.prototype.set = function (index, value, defaultValue) {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke set on a Matrix interface');\n  };\n\n  /**\n   * Resize the matrix to the given size. Returns a copy of the matrix when \n   * `copy=true`, otherwise return the matrix itself (resize in place).\n   *\n   * @param {number[]} size           The new size the matrix should have.\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries.\n   *                                  If not provided, the matrix elements will\n   *                                  be filled with zeros.\n   * @param {boolean} [copy]          Return a resized copy of the matrix\n   *\n   * @return {Matrix}                 The resized matrix\n   */\n  Matrix.prototype.resize = function (size, defaultValue) {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke resize on a Matrix interface');\n  };\n\n  /**\n   * Create a clone of the matrix\n   * @return {Matrix} clone\n   */\n  Matrix.prototype.clone = function () {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke clone on a Matrix interface');\n  };\n\n  /**\n   * Retrieve the size of the matrix.\n   * @returns {number[]} size\n   */\n  Matrix.prototype.size = function() {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke size on a Matrix interface');\n  };\n\n  /**\n   * Create a new matrix with the results of the callback function executed on\n   * each entry of the matrix.\n   * @param {Function} callback   The callback function is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Matrix being traversed.\n   * @param {boolean} [skipZeros] Invoke callback function for non-zero values only.\n   *\n   * @return {Matrix} matrix\n   */\n  Matrix.prototype.map = function (callback, skipZeros) {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke map on a Matrix interface');\n  };\n\n  /**\n   * Execute a callback function on each entry of the matrix.\n   * @param {Function} callback   The callback function is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Matrix being traversed.\n   */\n  Matrix.prototype.forEach = function (callback) {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke forEach on a Matrix interface');\n  };\n\n  /**\n   * Create an Array with a copy of the data of the Matrix\n   * @returns {Array} array\n   */\n  Matrix.prototype.toArray = function () {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke toArray on a Matrix interface');\n  };\n\n  /**\n   * Get the primitive value of the Matrix: a multidimensional array\n   * @returns {Array} array\n   */\n  Matrix.prototype.valueOf = function () {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke valueOf on a Matrix interface');\n  };\n\n  /**\n   * Get a string representation of the matrix, with optional formatting options.\n   * @param {Object | number | Function} [options]  Formatting options. See\n   *                                                lib/utils/number:format for a\n   *                                                description of the available\n   *                                                options.\n   * @returns {string} str\n   */\n  Matrix.prototype.format = function (options) {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke format on a Matrix interface');\n  };\n\n  /**\n   * Get a string representation of the matrix\n   * @returns {string} str\n   */\n  Matrix.prototype.toString = function () {\n    // must be implemented by each of the Matrix implementations\n    throw new Error('Cannot invoke toString on a Matrix interface');\n  };\n   \n  // exports\n  return Matrix;\n}\n\nexports.name = 'Matrix';\nexports.path = 'type';\nexports.factory = factory;\n","'use strict';\n\nvar util = require('../../utils/index');\nvar DimensionError = require('../../error/DimensionError');\n\nvar string = util.string;\nvar array = util.array;\nvar object = util.object;\nvar number = util.number;\n\nvar isArray = Array.isArray;\nvar isNumber = number.isNumber;\nvar isInteger = number.isInteger;\nvar isString = string.isString;\n\nvar validateIndex = array.validateIndex;\n\nfunction factory (type, config, load, typed) {\n  var Matrix = load(require('./Matrix')); // force loading Matrix (do not use via type.Matrix)\n\n  /**\n   * Dense Matrix implementation. A regular, dense matrix, supporting multi-dimensional matrices. This is the default matrix type.\n   * @class DenseMatrix\n   */\n  function DenseMatrix(data, datatype) {\n    if (!(this instanceof DenseMatrix))\n      throw new SyntaxError('Constructor must be called with the new operator');\n    if (datatype && !isString(datatype))\n      throw new Error('Invalid datatype: ' + datatype);\n\n    if (data && data.isMatrix === true) {\n      // check data is a DenseMatrix\n      if (data.type === 'DenseMatrix') {\n        // clone data & size\n        this._data = object.clone(data._data);\n        this._size = object.clone(data._size);\n        this._datatype = datatype || data._datatype;\n      }\n      else {\n        // build data from existing matrix\n        this._data = data.toArray();\n        this._size = data.size();\n        this._datatype = datatype || data._datatype;\n      }\n    }\n    else if (data && isArray(data.data) && isArray(data.size)) {\n      // initialize fields from JSON representation\n      this._data = data.data;\n      this._size = data.size;\n      this._datatype = datatype || data.datatype;\n    }\n    else if (isArray(data)) {\n      // replace nested Matrices with Arrays\n      this._data = preprocess(data);\n      // get the dimensions of the array\n      this._size = array.size(this._data);\n      // verify the dimensions of the array, TODO: compute size while processing array\n      array.validate(this._data, this._size);\n      // data type unknown\n      this._datatype = datatype;\n    }\n    else if (data) {\n      // unsupported type\n      throw new TypeError('Unsupported type of data (' + util.types.type(data) + ')');\n    }\n    else {\n      // nothing provided\n      this._data = [];\n      this._size = [0];\n      this._datatype = datatype;\n    }\n  }\n  \n  DenseMatrix.prototype = new Matrix();\n\n  /**\n   * Attach type information\n   */\n  DenseMatrix.prototype.type = 'DenseMatrix';\n  DenseMatrix.prototype.isDenseMatrix = true;\n\n  /**\n   * Get the storage format used by the matrix.\n   *\n   * Usage:\n   *     var format = matrix.storage()                   // retrieve storage format\n   *\n   * @memberof DenseMatrix\n   * @return {string}           The storage format.\n   */\n  DenseMatrix.prototype.storage = function () {\n    return 'dense';\n  };\n\n  /**\n   * Get the datatype of the data stored in the matrix.\n   *\n   * Usage:\n   *     var format = matrix.datatype()                   // retrieve matrix datatype\n   *\n   * @memberof DenseMatrix\n   * @return {string}           The datatype.\n   */\n  DenseMatrix.prototype.datatype = function () {\n    return this._datatype;\n  };\n\n  /**\n   * Create a new DenseMatrix\n   * @memberof DenseMatrix\n   * @param {Array} data\n   * @param {string} [datatype]\n   */\n  DenseMatrix.prototype.create = function (data, datatype) {\n    return new DenseMatrix(data, datatype);\n  };\n\n  /**\n   * Get a subset of the matrix, or replace a subset of the matrix.\n   *\n   * Usage:\n   *     var subset = matrix.subset(index)               // retrieve subset\n   *     var value = matrix.subset(index, replacement)   // replace subset\n   *\n   * @memberof DenseMatrix\n   * @param {Index} index\n   * @param {Array | DenseMatrix | *} [replacement]\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be filled with zeros.\n   */\n  DenseMatrix.prototype.subset = function (index, replacement, defaultValue) {\n    switch (arguments.length) {\n      case 1:\n        return _get(this, index);\n\n        // intentional fall through\n      case 2:\n      case 3:\n        return _set(this, index, replacement, defaultValue);\n\n      default:\n        throw new SyntaxError('Wrong number of arguments');\n    }\n  };\n  \n  /**\n   * Get a single element from the matrix.\n   * @memberof DenseMatrix\n   * @param {number[]} index   Zero-based index\n   * @return {*} value\n   */\n  DenseMatrix.prototype.get = function (index) {\n    if (!isArray(index))\n      throw new TypeError('Array expected');\n    if (index.length != this._size.length)\n      throw new DimensionError(index.length, this._size.length);\n\n    // check index\n    for (var x = 0; x < index.length; x++)\n      validateIndex(index[x], this._size[x]);\n\n    var data = this._data;\n    for (var i = 0, ii = index.length; i < ii; i++) {\n      var index_i = index[i];\n      validateIndex(index_i, data.length);\n      data = data[index_i];\n    }\n\n    return data;\n  };\n  \n  /**\n   * Replace a single element in the matrix.\n   * @memberof DenseMatrix\n   * @param {number[]} index   Zero-based index\n   * @param {*} value\n   * @param {*} [defaultValue]        Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be left undefined.\n   * @return {DenseMatrix} self\n   */\n  DenseMatrix.prototype.set = function (index, value, defaultValue) {\n    if (!isArray(index))\n      throw new TypeError('Array expected');\n    if (index.length < this._size.length)\n      throw new DimensionError(index.length, this._size.length, '<');\n\n    var i, ii, index_i;\n\n    // enlarge matrix when needed\n    var size = index.map(function (i) {\n      return i + 1;\n    });\n    _fit(this, size, defaultValue);\n\n    // traverse over the dimensions\n    var data = this._data;\n    for (i = 0, ii = index.length - 1; i < ii; i++) {\n      index_i = index[i];\n      validateIndex(index_i, data.length);\n      data = data[index_i];\n    }\n\n    // set new value\n    index_i = index[index.length - 1];\n    validateIndex(index_i, data.length);\n    data[index_i] = value;\n\n    return this;\n  };\n  \n  /**\n   * Get a submatrix of this matrix\n   * @memberof DenseMatrix\n   * @param {DenseMatrix} matrix\n   * @param {Index} index   Zero-based index\n   * @private\n   */\n  function _get (matrix, index) {\n    if (!index || index.isIndex !== true) {\n      throw new TypeError('Invalid index');\n    }\n\n    var isScalar = index.isScalar();\n    if (isScalar) {\n      // return a scalar\n      return matrix.get(index.min());\n    }\n    else {\n      // validate dimensions\n      var size = index.size();\n      if (size.length != matrix._size.length) {\n        throw new DimensionError(size.length, matrix._size.length);\n      }\n\n      // validate if any of the ranges in the index is out of range\n      var min = index.min();\n      var max = index.max();\n      for (var i = 0, ii = matrix._size.length; i < ii; i++) {\n        validateIndex(min[i], matrix._size[i]);\n        validateIndex(max[i], matrix._size[i]);\n      }\n\n      // retrieve submatrix\n      // TODO: more efficient when creating an empty matrix and setting _data and _size manually\n      return new DenseMatrix(_getSubmatrix(matrix._data, index, size.length, 0), matrix._datatype);\n    }\n  }\n  \n  /**\n   * Recursively get a submatrix of a multi dimensional matrix.\n   * Index is not checked for correct number or length of dimensions.\n   * @memberof DenseMatrix\n   * @param {Array} data\n   * @param {Index} index\n   * @param {number} dims   Total number of dimensions\n   * @param {number} dim    Current dimension\n   * @return {Array} submatrix\n   * @private\n   */\n  function _getSubmatrix (data, index, dims, dim) {\n    var last = (dim == dims - 1);\n    var range = index.dimension(dim);\n\n    if (last) {\n      return range.map(function (i) {\n        return data[i];\n      }).valueOf();\n    }\n    else {\n      return range.map(function (i) {\n        var child = data[i];\n        return _getSubmatrix(child, index, dims, dim + 1);\n      }).valueOf();\n    }\n  }\n  \n  /**\n   * Replace a submatrix in this matrix\n   * Indexes are zero-based.\n   * @memberof DenseMatrix\n   * @param {DenseMatrix} matrix\n   * @param {Index} index\n   * @param {DenseMatrix | Array | *} submatrix\n   * @param {*} defaultValue          Default value, filled in on new entries when\n   *                                  the matrix is resized.\n   * @return {DenseMatrix} matrix\n   * @private\n   */\n  function _set (matrix, index, submatrix, defaultValue) {\n    if (!index || index.isIndex !== true) {\n      throw new TypeError('Invalid index');\n    }\n\n    // get index size and check whether the index contains a single value\n    var iSize = index.size(),\n        isScalar = index.isScalar();\n\n    // calculate the size of the submatrix, and convert it into an Array if needed\n    var sSize;\n    if (submatrix && submatrix.isMatrix === true) {\n      sSize = submatrix.size();\n      submatrix = submatrix.valueOf();\n    }\n    else {\n      sSize = array.size(submatrix);\n    }\n\n    if (isScalar) {\n      // set a scalar\n\n      // check whether submatrix is a scalar\n      if (sSize.length !== 0) {\n        throw new TypeError('Scalar expected');\n      }\n\n      matrix.set(index.min(), submatrix, defaultValue);\n    }\n    else {\n      // set a submatrix\n\n      // validate dimensions\n      if (iSize.length < matrix._size.length) {\n        throw new DimensionError(iSize.length, matrix._size.length, '<');\n      }\n\n      if (sSize.length < iSize.length) {\n        // calculate number of missing outer dimensions\n        var i = 0;\n        var outer = 0;\n        while (iSize[i] === 1 && sSize[i] === 1) {\n          i++;\n        }\n        while (iSize[i] === 1) {\n          outer++;\n          i++;\n        }\n\n        // unsqueeze both outer and inner dimensions\n        submatrix = array.unsqueeze(submatrix, iSize.length, outer, sSize);\n      }\n\n      // check whether the size of the submatrix matches the index size\n      if (!object.deepEqual(iSize, sSize)) {\n        throw new DimensionError(iSize, sSize, '>');\n      }\n\n      // enlarge matrix when needed\n      var size = index.max().map(function (i) {\n        return i + 1;\n      });\n      _fit(matrix, size, defaultValue);\n\n      // insert the sub matrix\n      var dims = iSize.length,\n          dim = 0;\n      _setSubmatrix (matrix._data, index, submatrix, dims, dim);\n    }\n\n    return matrix;\n  }\n  \n  /**\n   * Replace a submatrix of a multi dimensional matrix.\n   * @memberof DenseMatrix\n   * @param {Array} data\n   * @param {Index} index\n   * @param {Array} submatrix\n   * @param {number} dims   Total number of dimensions\n   * @param {number} dim\n   * @private\n   */\n  function _setSubmatrix (data, index, submatrix, dims, dim) {\n    var last = (dim == dims - 1),\n        range = index.dimension(dim);\n\n    if (last) {\n      range.forEach(function (dataIndex, subIndex) {\n        validateIndex(dataIndex);\n        data[dataIndex] = submatrix[subIndex[0]];\n      });\n    }\n    else {\n      range.forEach(function (dataIndex, subIndex) {\n        validateIndex(dataIndex);\n        _setSubmatrix(data[dataIndex], index, submatrix[subIndex[0]], dims, dim + 1);\n      });\n    }\n  }\n  \n  /**\n   * Resize the matrix to the given size. Returns a copy of the matrix when\n   * `copy=true`, otherwise return the matrix itself (resize in place).\n   *\n   * @memberof DenseMatrix\n   * @param {number[]} size           The new size the matrix should have.\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries.\n   *                                  If not provided, the matrix elements will\n   *                                  be filled with zeros.\n   * @param {boolean} [copy]          Return a resized copy of the matrix\n   *\n   * @return {Matrix}                 The resized matrix\n   */\n  DenseMatrix.prototype.resize = function (size, defaultValue, copy) {\n    // validate arguments\n    if (!isArray(size))\n      throw new TypeError('Array expected');\n\n    // matrix to resize\n    var m = copy ? this.clone() : this;\n    // resize matrix\n    return _resize(m, size, defaultValue);\n  };\n  \n  var _resize = function (matrix, size, defaultValue) {\n    // check size\n    if (size.length === 0) {\n      // first value in matrix\n      var v = matrix._data;\n      // go deep\n      while (isArray(v)) {\n        v = v[0];\n      }\n      return v;\n    }\n    // resize matrix\n    matrix._size = size.slice(0); // copy the array\n    matrix._data = array.resize(matrix._data, matrix._size, defaultValue);\n    // return matrix\n    return matrix;\n  };\n  \n  /**\n   * Enlarge the matrix when it is smaller than given size.\n   * If the matrix is larger or equal sized, nothing is done.\n   * @memberof DenseMatrix\n   * @param {DenseMatrix} matrix           The matrix to be resized\n   * @param {number[]} size\n   * @param {*} defaultValue          Default value, filled in on new entries.\n   * @private\n   */\n  function _fit(matrix, size, defaultValue) {\n    var newSize = matrix._size.slice(0), // copy the array\n        changed = false;\n\n    // add dimensions when needed\n    while (newSize.length < size.length) {\n      newSize.push(0);\n      changed = true;\n    }\n\n    // enlarge size when needed\n    for (var i = 0, ii = size.length; i < ii; i++) {\n      if (size[i] > newSize[i]) {\n        newSize[i] = size[i];\n        changed = true;\n      }\n    }\n\n    if (changed) {\n      // resize only when size is changed\n      _resize(matrix, newSize, defaultValue);\n    }\n  }\n  \n  /**\n   * Create a clone of the matrix\n   * @memberof DenseMatrix\n   * @return {DenseMatrix} clone\n   */\n  DenseMatrix.prototype.clone = function () {\n    var m = new DenseMatrix({\n      data: object.clone(this._data),\n      size: object.clone(this._size),\n      datatype: this._datatype\n    });\n    return m;\n  };\n  \n  /**\n   * Retrieve the size of the matrix.\n   * @memberof DenseMatrix\n   * @returns {number[]} size\n   */\n  DenseMatrix.prototype.size = function() {\n    return this._size.slice(0); // return a clone of _size\n  };\n  \n  /**\n   * Create a new matrix with the results of the callback function executed on\n   * each entry of the matrix.\n   * @memberof DenseMatrix\n   * @param {Function} callback   The callback function is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Matrix being traversed.\n   *\n   * @return {DenseMatrix} matrix\n   */\n  DenseMatrix.prototype.map = function (callback) {\n    // matrix instance\n    var me = this;\n    var recurse = function (value, index) {\n      if (isArray(value)) {\n        return value.map(function (child, i) {\n          return recurse(child, index.concat(i));\n        });\n      }\n      else {\n        return callback(value, index, me);\n      }\n    };\n    // return dense format\n    return new DenseMatrix({\n      data: recurse(this._data, []),\n      size: object.clone(this._size),\n      datatype: this._datatype\n    });\n  };\n  \n  /**\n   * Execute a callback function on each entry of the matrix.\n   * @memberof DenseMatrix\n   * @param {Function} callback   The callback function is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Matrix being traversed.\n   */\n  DenseMatrix.prototype.forEach = function (callback) {\n    // matrix instance\n    var me = this;\n    var recurse = function (value, index) {\n      if (isArray(value)) {\n        value.forEach(function (child, i) {\n          recurse(child, index.concat(i));\n        });\n      }\n      else {\n        callback(value, index, me);\n      }\n    };\n    recurse(this._data, []);\n  };\n  \n  /**\n   * Create an Array with a copy of the data of the DenseMatrix\n   * @memberof DenseMatrix\n   * @returns {Array} array\n   */\n  DenseMatrix.prototype.toArray = function () {\n    return object.clone(this._data);\n  };\n  \n  /**\n   * Get the primitive value of the DenseMatrix: a multidimensional array\n   * @memberof DenseMatrix\n   * @returns {Array} array\n   */\n  DenseMatrix.prototype.valueOf = function () {\n    return this._data;\n  };\n  \n  /**\n   * Get a string representation of the matrix, with optional formatting options.\n   * @memberof DenseMatrix\n   * @param {Object | number | Function} [options]  Formatting options. See\n   *                                                lib/utils/number:format for a\n   *                                                description of the available\n   *                                                options.\n   * @returns {string} str\n   */\n  DenseMatrix.prototype.format = function (options) {\n    return string.format(this._data, options);\n  };\n  \n  /**\n   * Get a string representation of the matrix\n   * @memberof DenseMatrix\n   * @returns {string} str\n   */\n  DenseMatrix.prototype.toString = function () {\n    return string.format(this._data);\n  };\n  \n  /**\n   * Get a JSON representation of the matrix\n   * @memberof DenseMatrix\n   * @returns {Object}\n   */\n  DenseMatrix.prototype.toJSON = function () {\n    return {\n      mathjs: 'DenseMatrix',\n      data: this._data,\n      size: this._size,\n      datatype: this._datatype\n    };\n  };\n  \n  /**\n   * Get the kth Matrix diagonal.\n   *\n   * @memberof DenseMatrix\n   * @param {number | BigNumber} [k=0]     The kth diagonal where the vector will retrieved.\n   *\n   * @returns {Array}                      The array vector with the diagonal values.\n   */\n  DenseMatrix.prototype.diagonal = function(k) {\n    // validate k if any\n    if (k) {\n      // convert BigNumber to a number\n      if (k.isBigNumber === true)\n        k = k.toNumber();\n      // is must be an integer\n      if (!isNumber(k) || !isInteger(k)) {\n        throw new TypeError ('The parameter k must be an integer number');\n      }\n    }\n    else {\n      // default value\n      k = 0;\n    }\n\n    var kSuper = k > 0 ? k : 0;\n    var kSub = k < 0 ? -k : 0;\n\n    // rows & columns\n    var rows = this._size[0];\n    var columns = this._size[1];\n\n    // number diagonal values\n    var n = Math.min(rows - kSub, columns -  kSuper);\n    \n    // x is a matrix get diagonal from matrix\n    var data = [];\n    \n    // loop rows\n    for (var i = 0; i < n; i++) {\n      data[i] = this._data[i + kSub][i + kSuper];\n    }\n\n    // create DenseMatrix\n    return new DenseMatrix({\n      data: data,\n      size: [n],\n      datatype: this._datatype\n    });\n  };\n  \n  /**\n   * Create a diagonal matrix.\n   *\n   * @memberof DenseMatrix\n   * @param {Array} size                   The matrix size.\n   * @param {number | Array} value          The values for the diagonal.\n   * @param {number | BigNumber} [k=0]     The kth diagonal where the vector will be filled in.\n   * @param {number} [defaultValue]        The default value for non-diagonal\n   *\n   * @returns {DenseMatrix}\n   */\n  DenseMatrix.diagonal = function (size, value, k, defaultValue, datatype) {\n    if (!isArray(size))\n      throw new TypeError('Array expected, size parameter');\n    if (size.length !== 2)\n      throw new Error('Only two dimensions matrix are supported');\n\n    // map size & validate\n    size = size.map(function (s) {\n      // check it is a big number\n      if (s && s.isBigNumber === true) {\n        // convert it\n        s = s.toNumber();\n      }\n      // validate arguments\n      if (!isNumber(s) || !isInteger(s) || s < 1) {\n        throw new Error('Size values must be positive integers');\n      } \n      return s;\n    });\n\n    // validate k if any\n    if (k) {\n      // convert BigNumber to a number\n      if (k && k.isBigNumber === true)\n        k = k.toNumber();\n      // is must be an integer\n      if (!isNumber(k) || !isInteger(k)) {\n        throw new TypeError ('The parameter k must be an integer number');\n      }\n    }\n    else {\n      // default value\n      k = 0;\n    }\n    \n    if (defaultValue && isString(datatype)) {\n      // convert defaultValue to the same datatype\n      defaultValue = typed.convert(defaultValue, datatype);\n    }\n\n    var kSuper = k > 0 ? k : 0;\n    var kSub = k < 0 ? -k : 0;\n    \n    // rows and columns\n    var rows = size[0];\n    var columns = size[1];\n\n    // number of non-zero items\n    var n = Math.min(rows - kSub, columns -  kSuper);\n\n    // value extraction function\n    var _value;\n\n    // check value\n    if (isArray(value)) {\n      // validate array\n      if (value.length !== n) {\n        // number of values in array must be n\n        throw new Error('Invalid value array length');\n      }\n      // define function\n      _value = function (i) {\n        // return value @ i\n        return value[i];\n      };      \n    }\n    else if (value && value.isMatrix === true) {\n      // matrix size\n      var ms = value.size();\n      // validate matrix\n      if (ms.length !== 1 || ms[0] !== n) {\n        // number of values in array must be n\n        throw new Error('Invalid matrix length');\n      }\n      // define function\n      _value = function (i) {\n        // return value @ i\n        return value.get([i]);\n      };\n    }\n    else {\n      // define function\n      _value = function () {\n        // return value\n        return value;\n      };\n    }\n    \n    // discover default value if needed\n    if (!defaultValue) {\n      // check first value in array\n      defaultValue = (_value(0) && _value(0).isBigNumber === true) ? new type.BigNumber(0) : 0;\n    }\n\n    // empty array\n    var data = [];\n\n    // check we need to resize array\n    if (size.length > 0) {\n      // resize array\n      data = array.resize(data, size, defaultValue);\n      // fill diagonal\n      for (var d = 0; d < n; d++) {\n        data[d + kSub][d + kSuper] = _value(d);\n      }\n    }\n    \n    // create DenseMatrix\n    return new DenseMatrix({\n      data: data,\n      size: [rows, columns]\n    });\n  };\n\n  /**\n   * Generate a matrix from a JSON object\n   * @memberof DenseMatrix\n   * @param {Object} json  An object structured like\n   *                       `{\"mathjs\": \"DenseMatrix\", data: [], size: []}`,\n   *                       where mathjs is optional\n   * @returns {DenseMatrix}\n   */\n  DenseMatrix.fromJSON = function (json) {\n    return new DenseMatrix(json);\n  };\n  \n  /**\n   * Swap rows i and j in Matrix.\n   *\n   * @memberof DenseMatrix\n   * @param {number} i       Matrix row index 1\n   * @param {number} j       Matrix row index 2\n   *\n   * @return {Matrix}        The matrix reference\n   */\n  DenseMatrix.prototype.swapRows = function (i, j) {\n    // check index\n    if (!isNumber(i) || !isInteger(i) || !isNumber(j) || !isInteger(j)) {\n      throw new Error('Row index must be positive integers');\n    }\n    // check dimensions\n    if (this._size.length !== 2) {\n      throw new Error('Only two dimensional matrix is supported');\n    }\n    // validate index\n    validateIndex(i, this._size[0]);\n    validateIndex(j, this._size[0]);\n\n    // swap rows\n    DenseMatrix._swapRows(i, j, this._data);\n    // return current instance\n    return this;\n  };\n\n  /**\n   * Swap rows i and j in Dense Matrix data structure.\n   *\n   * @param {number} i       Matrix row index 1\n   * @param {number} j       Matrix row index 2\n   */\n  DenseMatrix._swapRows = function (i, j, data) {\n    // swap values i <-> j\n    var vi = data[i];\n    data[i] = data[j];\n    data[j] = vi;\n  };\n   \n  /**\n   * Preprocess data, which can be an Array or DenseMatrix with nested Arrays and\n   * Matrices. Replaces all nested Matrices with Arrays\n   * @memberof DenseMatrix\n   * @param {Array} data\n   * @return {Array} data\n   */\n  function preprocess(data) {\n    for (var i = 0, ii = data.length; i < ii; i++) {\n      var elem = data[i];\n      if (isArray(elem)) {\n        data[i] = preprocess(elem);\n      }\n      else if (elem && elem.isMatrix === true) {\n        data[i] = preprocess(elem.valueOf());\n      }\n    }\n\n    return data;\n  }\n\n  // register this type in the base class Matrix\n  type.Matrix._storage.dense = DenseMatrix;\n  type.Matrix._storage['default'] = DenseMatrix;\n\n  // exports\n  return DenseMatrix;\n}\n\nexports.name = 'DenseMatrix';\nexports.path = 'type';\nexports.factory = factory;\nexports.lazy = false;  // no lazy loading, as we alter type.Matrix._storage","'use strict';\n\nvar util = require('../../utils/index');\nvar DimensionError = require('../../error/DimensionError');\n\nvar array = util.array;\nvar object = util.object;\nvar string = util.string;\nvar number = util.number;\n\nvar isArray = Array.isArray;\nvar isNumber = number.isNumber;\nvar isInteger = number.isInteger;\nvar isString = string.isString;\n\nvar validateIndex = array.validateIndex;\n\nfunction factory (type, config, load, typed) {\n  var Matrix = load(require('./Matrix')); // force loading Matrix (do not use via type.Matrix)\n  var equalScalar = load(require('../../function/relational/equalScalar'));\n\n  /**\n   * Sparse Matrix implementation. This type implements a Compressed Column Storage format\n   * for sparse matrices.\n   * @class SparseMatrix\n   */\n  function SparseMatrix(data, datatype) {\n    if (!(this instanceof SparseMatrix))\n      throw new SyntaxError('Constructor must be called with the new operator');\n    if (datatype && !isString(datatype))\n      throw new Error('Invalid datatype: ' + datatype);\n    \n    if (data && data.isMatrix === true) {\n      // create from matrix\n      _createFromMatrix(this, data, datatype);\n    }\n    else if (data && isArray(data.index) && isArray(data.ptr) && isArray(data.size)) {\n      // initialize fields\n      this._values = data.values;\n      this._index = data.index;\n      this._ptr = data.ptr;\n      this._size = data.size;\n      this._datatype = datatype || data.datatype;\n    }\n    else if (isArray(data)) {\n      // create from array\n      _createFromArray(this, data, datatype);\n    }\n    else if (data) {\n      // unsupported type\n      throw new TypeError('Unsupported type of data (' + util.types.type(data) + ')');\n    }\n    else {\n      // nothing provided\n      this._values = [];\n      this._index = [];\n      this._ptr = [0];\n      this._size = [0, 0];\n      this._datatype = datatype;\n    }\n  }\n  \n  var _createFromMatrix = function (matrix, source, datatype) {\n    // check matrix type\n    if (source.type === 'SparseMatrix') {\n      // clone arrays\n      matrix._values = source._values ? object.clone(source._values) : undefined;\n      matrix._index = object.clone(source._index);\n      matrix._ptr = object.clone(source._ptr);\n      matrix._size = object.clone(source._size);\n      matrix._datatype = datatype || source._datatype;\n    }\n    else {\n      // build from matrix data\n      _createFromArray(matrix, source.valueOf(), datatype || source._datatype);\n    }\n  };\n  \n  var _createFromArray = function (matrix, data, datatype) {\n    // initialize fields\n    matrix._values = [];\n    matrix._index = [];\n    matrix._ptr = [];\n    matrix._datatype = datatype;\n    // discover rows & columns, do not use math.size() to avoid looping array twice\n    var rows = data.length;\n    var columns = 0;\n    \n    // equal signature to use\n    var eq = equalScalar;\n    // zero value\n    var zero = 0;\n    \n    if (isString(datatype)) {\n      // find signature that matches (datatype, datatype)\n      eq = typed.find(equalScalar, [datatype, datatype]) || equalScalar;\n      // convert 0 to the same datatype\n      zero = typed.convert(0, datatype);\n    }\n\n    // check we have rows (empty array)\n    if (rows > 0) {\n      // column index\n      var j = 0;\n      do {\n        // store pointer to values index\n        matrix._ptr.push(matrix._index.length);\n        // loop rows\n        for (var i = 0; i < rows; i++) {\n          // current row\n          var row = data[i];\n          // check row is an array\n          if (isArray(row)) {\n            // update columns if needed (only on first column)\n            if (j === 0 && columns < row.length)\n              columns = row.length;\n            // check row has column\n            if (j < row.length) {\n              // value\n              var v = row[j];\n              // check value != 0\n              if (!eq(v, zero)) {\n                // store value\n                matrix._values.push(v);\n                // index\n                matrix._index.push(i);\n              }\n            }\n          }\n          else {\n            // update columns if needed (only on first column)\n            if (j === 0 && columns < 1)\n              columns = 1;\n            // check value != 0 (row is a scalar)\n            if (!eq(row, zero)) {\n              // store value\n              matrix._values.push(row);\n              // index\n              matrix._index.push(i);\n            }\n          }\n        }\n        // increment index\n        j++;      \n      }\n      while (j < columns);\n    }\n    // store number of values in ptr\n    matrix._ptr.push(matrix._index.length);\n    // size\n    matrix._size = [rows, columns];\n  };\n  \n  SparseMatrix.prototype = new Matrix();\n\n  /**\n   * Attach type information\n   */\n  SparseMatrix.prototype.type = 'SparseMatrix';\n  SparseMatrix.prototype.isSparseMatrix = true;\n\n  /**\n   * Get the storage format used by the matrix.\n   *\n   * Usage:\n   *     var format = matrix.storage()                   // retrieve storage format\n   *\n   * @memberof SparseMatrix\n   * @return {string}           The storage format.\n   */\n  SparseMatrix.prototype.storage = function () {\n    return 'sparse';\n  };\n\n  /**\n   * Get the datatype of the data stored in the matrix.\n   *\n   * Usage:\n   *     var format = matrix.datatype()                   // retrieve matrix datatype\n   *\n   * @memberof SparseMatrix\n   * @return {string}           The datatype.\n   */\n  SparseMatrix.prototype.datatype = function () {\n    return this._datatype;\n  };\n\n  /**\n   * Create a new SparseMatrix\n   * @memberof SparseMatrix\n   * @param {Array} data\n   * @param {string} [datatype]\n   */\n  SparseMatrix.prototype.create = function (data, datatype) {\n    return new SparseMatrix(data, datatype);\n  };\n\n  /**\n   * Get the matrix density.\n   *\n   * Usage:\n   *     var density = matrix.density()                   // retrieve matrix density\n   *\n   * @memberof SparseMatrix\n   * @return {number}           The matrix density.\n   */\n  SparseMatrix.prototype.density = function () {\n    // rows & columns\n    var rows = this._size[0];\n    var columns = this._size[1];\n    // calculate density\n    return rows !== 0 && columns !== 0 ? (this._index.length / (rows * columns)) : 0;\n  };\n  \n  /**\n   * Get a subset of the matrix, or replace a subset of the matrix.\n   *\n   * Usage:\n   *     var subset = matrix.subset(index)               // retrieve subset\n   *     var value = matrix.subset(index, replacement)   // replace subset\n   *\n   * @memberof SparseMatrix\n   * @param {Index} index\n   * @param {Array | Maytrix | *} [replacement]\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be filled with zeros.\n   */\n  SparseMatrix.prototype.subset = function (index, replacement, defaultValue) { // check it is a pattern matrix\n    if (!this._values)\n      throw new Error('Cannot invoke subset on a Pattern only matrix');\n\n    // check arguments\n    switch (arguments.length) {\n      case 1:\n        return _getsubset(this, index);\n\n        // intentional fall through\n      case 2:\n      case 3:\n        return _setsubset(this, index, replacement, defaultValue);\n\n      default:\n        throw new SyntaxError('Wrong number of arguments');\n    }\n  };\n  \n  var _getsubset = function (matrix, idx) {\n    // check idx\n    if (!idx || idx.isIndex !== true) {\n      throw new TypeError('Invalid index');\n    }\n\n    var isScalar = idx.isScalar();\n    if (isScalar) {\n      // return a scalar\n      return matrix.get(idx.min());\n    }\n    // validate dimensions\n    var size = idx.size();\n    if (size.length != matrix._size.length) {\n      throw new DimensionError(size.length, matrix._size.length);\n    }\n\n    // vars\n    var i, ii, k, kk;\n    \n    // validate if any of the ranges in the index is out of range\n    var min = idx.min();\n    var max = idx.max();\n    for (i = 0, ii = matrix._size.length; i < ii; i++) {\n      validateIndex(min[i], matrix._size[i]);\n      validateIndex(max[i], matrix._size[i]);\n    }\n    \n    // matrix arrays\n    var mvalues = matrix._values;\n    var mindex = matrix._index;\n    var mptr = matrix._ptr;\n        \n    // rows & columns dimensions for result matrix\n    var rows = idx.dimension(0);\n    var columns = idx.dimension(1);\n    \n    // workspace & permutation vector\n    var w = [];\n    var pv = [];\n    \n    // loop rows in resulting matrix\n    rows.forEach(function (i, r) {\n      // update permutation vector\n      pv[i] = r[0];  \n      // mark i in workspace\n      w[i] = true;\n    });\n\n    // result matrix arrays\n    var values = mvalues ? [] : undefined;\n    var index = [];\n    var ptr = [];\n        \n    // loop columns in result matrix\n    columns.forEach(function (j) {\n      // update ptr\n      ptr.push(index.length);\n      // loop values in column j\n      for (k = mptr[j], kk = mptr[j + 1]; k < kk; k++) {\n        // row\n        i = mindex[k];\n        // check row is in result matrix\n        if (w[i] === true) {\n          // push index\n          index.push(pv[i]);\n          // check we need to process values\n          if (values)\n            values.push(mvalues[k]);\n        }\n      }\n    });\n    // update ptr\n    ptr.push(index.length);\n    \n    // return matrix\n    return new SparseMatrix({\n      values: values,\n      index: index,\n      ptr: ptr,\n      size: size,\n      datatype: matrix._datatype\n    });\n  };\n  \n  var _setsubset = function (matrix, index, submatrix, defaultValue) {\n    // check index\n    if (!index || index.isIndex !== true) {\n      throw new TypeError('Invalid index');\n    }\n    \n    // get index size and check whether the index contains a single value\n    var iSize = index.size(),\n        isScalar = index.isScalar();\n    \n    // calculate the size of the submatrix, and convert it into an Array if needed\n    var sSize;\n    if (submatrix && submatrix.isMatrix === true) {\n      // submatrix size\n      sSize = submatrix.size();\n      // use array representation\n      submatrix = submatrix.toArray();\n    }\n    else {\n      // get submatrix size (array, scalar)\n      sSize = array.size(submatrix);\n    }\n    \n    // check index is a scalar\n    if (isScalar) {\n      // verify submatrix is a scalar\n      if (sSize.length !== 0) {\n        throw new TypeError('Scalar expected');\n      }\n      // set value\n      matrix.set(index.min(), submatrix, defaultValue);\n    }\n    else {\n      // validate dimensions, index size must be one or two dimensions\n      if (iSize.length !== 1 && iSize.length !== 2) {\n        throw new DimensionError(iSize.length, matrix._size.length, '<');\n      }\n      \n      // check submatrix and index have the same dimensions\n      if (sSize.length < iSize.length) {\n        // calculate number of missing outer dimensions\n        var i = 0;\n        var outer = 0;\n        while (iSize[i] === 1 && sSize[i] === 1) {\n          i++;\n        }\n        while (iSize[i] === 1) {\n          outer++;\n          i++;\n        }\n        // unsqueeze both outer and inner dimensions\n        submatrix = array.unsqueeze(submatrix, iSize.length, outer, sSize);\n      }\n      \n      // check whether the size of the submatrix matches the index size\n      if (!object.deepEqual(iSize, sSize)) {\n        throw new DimensionError(iSize, sSize, '>');\n      }\n      \n      // offsets\n      var x0 = index.min()[0];\n      var y0 = index.min()[1];      \n      \n      // submatrix rows and columns\n      var m = sSize[0];\n      var n = sSize[1];\n\n      // loop submatrix\n      for (var x = 0; x < m; x++) {\n        // loop columns\n        for (var y = 0; y < n; y++) {\n          // value at i, j\n          var v = submatrix[x][y];\n          // invoke set (zero value will remove entry from matrix)\n          matrix.set([x + x0, y + y0], v, defaultValue);\n        }\n      }\n    }\n    return matrix;\n  };\n\n  /**\n   * Get a single element from the matrix.\n   * @memberof SparseMatrix\n   * @param {number[]} index   Zero-based index\n   * @return {*} value\n   */\n  SparseMatrix.prototype.get = function (index) {\n    if (!isArray(index))\n      throw new TypeError('Array expected');\n    if (index.length != this._size.length)\n      throw new DimensionError(index.length, this._size.length);\n\n    // check it is a pattern matrix\n    if (!this._values)\n      throw new Error('Cannot invoke get on a Pattern only matrix');\n\n    // row and column\n    var i = index[0];\n    var j = index[1];\n\n    // check i, j are valid\n    validateIndex(i, this._size[0]);\n    validateIndex(j, this._size[1]);\n\n    // find value index\n    var k = _getValueIndex(i, this._ptr[j], this._ptr[j + 1], this._index);\n    // check k is prior to next column k and it is in the correct row\n    if (k < this._ptr[j + 1] && this._index[k] === i)\n      return this._values[k];\n\n    return 0;\n  };\n  \n  /**\n   * Replace a single element in the matrix.\n   * @memberof SparseMatrix\n   * @param {number[]} index   Zero-based index\n   * @param {*} value\n   * @param {*} [defaultValue]        Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be set to zero.\n   * @return {SparseMatrix} self\n   */\n  SparseMatrix.prototype.set = function (index, v, defaultValue) {\n    if (!isArray(index))\n      throw new TypeError('Array expected');\n    if (index.length != this._size.length)\n      throw new DimensionError(index.length, this._size.length);\n\n    // check it is a pattern matrix\n    if (!this._values)\n      throw new Error('Cannot invoke set on a Pattern only matrix');\n      \n    // row and column\n    var i = index[0];\n    var j = index[1];\n\n    // rows & columns\n    var rows = this._size[0];\n    var columns = this._size[1];\n    \n    // equal signature to use\n    var eq = equalScalar;\n    // zero value\n    var zero = 0;\n\n    if (isString(this._datatype)) {\n      // find signature that matches (datatype, datatype)\n      eq = typed.find(equalScalar, [this._datatype, this._datatype]) || equalScalar;\n      // convert 0 to the same datatype\n      zero = typed.convert(0, this._datatype);\n    }\n\n    // check we need to resize matrix\n    if (i > rows - 1 || j > columns - 1) {\n      // resize matrix\n      _resize(this, Math.max(i + 1, rows), Math.max(j + 1, columns), defaultValue);\n      // update rows & columns\n      rows = this._size[0];\n      columns = this._size[1];\n    }\n\n    // check i, j are valid\n    validateIndex(i, rows);\n    validateIndex(j, columns);\n\n    // find value index\n    var k = _getValueIndex(i, this._ptr[j], this._ptr[j + 1], this._index);\n    // check k is prior to next column k and it is in the correct row\n    if (k < this._ptr[j + 1] && this._index[k] === i) {\n      // check value != 0\n      if (!eq(v, zero)) {\n        // update value\n        this._values[k] = v;\n      }\n      else {\n        // remove value from matrix\n        _remove(k, j, this._values, this._index, this._ptr);\n      }\n    }\n    else {\n      // insert value @ (i, j)\n      _insert(k, i, j, v, this._values, this._index, this._ptr);\n    }\n\n    return this;\n  };\n  \n  var _getValueIndex = function(i, top, bottom, index) {\n    // check row is on the bottom side\n    if (bottom - top === 0)\n      return bottom;\n    // loop rows [top, bottom[\n    for (var r = top; r < bottom; r++) {\n      // check we found value index\n      if (index[r] === i)\n        return r;\n    }\n    // we did not find row\n    return top;\n  };\n\n  var _remove = function (k, j, values, index, ptr) {\n    // remove value @ k\n    values.splice(k, 1);\n    index.splice(k, 1);\n    // update pointers\n    for (var x = j + 1; x < ptr.length; x++)\n      ptr[x]--;\n  };\n\n  var _insert = function (k, i, j, v, values, index, ptr) {\n    // insert value\n    values.splice(k, 0, v);\n    // update row for k\n    index.splice(k, 0, i);\n    // update column pointers\n    for (var x = j + 1; x < ptr.length; x++)\n      ptr[x]++;\n  };\n  \n  /**\n   * Resize the matrix to the given size. Returns a copy of the matrix when \n   * `copy=true`, otherwise return the matrix itself (resize in place).\n   *\n   * @memberof SparseMatrix\n   * @param {number[]} size           The new size the matrix should have.\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries.\n   *                                  If not provided, the matrix elements will\n   *                                  be filled with zeros.\n   * @param {boolean} [copy]          Return a resized copy of the matrix\n   *\n   * @return {Matrix}                 The resized matrix\n   */\n  SparseMatrix.prototype.resize = function (size, defaultValue, copy) {    \n    // validate arguments\n    if (!isArray(size))\n      throw new TypeError('Array expected');\n    if (size.length !== 2)\n      throw new Error('Only two dimensions matrix are supported');\n\n    // check sizes\n    size.forEach(function (value) {\n      if (!number.isNumber(value) || !number.isInteger(value) || value < 0) {\n        throw new TypeError('Invalid size, must contain positive integers ' +\n                            '(size: ' + string.format(size) + ')');\n      }\n    });\n    \n    // matrix to resize\n    var m = copy ? this.clone() : this;\n    // resize matrix\n    return _resize(m, size[0], size[1], defaultValue);\n  };\n  \n  var _resize = function (matrix, rows, columns, defaultValue) {\n    // value to insert at the time of growing matrix\n    var value = defaultValue || 0;\n    \n    // equal signature to use\n    var eq = equalScalar;\n    // zero value\n    var zero = 0;\n\n    if (isString(matrix._datatype)) {\n      // find signature that matches (datatype, datatype)\n      eq = typed.find(equalScalar, [matrix._datatype, matrix._datatype]) || equalScalar;\n      // convert 0 to the same datatype\n      zero = typed.convert(0, matrix._datatype);\n      // convert value to the same datatype\n      value = typed.convert(value, matrix._datatype);\n    }\n    \n    // should we insert the value?\n    var ins = !eq(value, zero);\n\n    // old columns and rows\n    var r = matrix._size[0];\n    var c = matrix._size[1];\n\n    var i, j, k;\n\n    // check we need to increase columns\n    if (columns > c) {\n      // loop new columns\n      for (j = c; j < columns; j++) {\n        // update matrix._ptr for current column\n        matrix._ptr[j] = matrix._values.length;\n        // check we need to insert matrix._values\n        if (ins) {\n          // loop rows\n          for (i = 0; i < r; i++) {\n            // add new matrix._values\n            matrix._values.push(value);\n            // update matrix._index\n            matrix._index.push(i);\n          }\n        }        \n      }\n      // store number of matrix._values in matrix._ptr\n      matrix._ptr[columns] = matrix._values.length;\n    }\n    else if (columns < c) {\n      // truncate matrix._ptr\n      matrix._ptr.splice(columns + 1, c - columns);\n      // truncate matrix._values and matrix._index\n      matrix._values.splice(matrix._ptr[columns], matrix._values.length);\n      matrix._index.splice(matrix._ptr[columns], matrix._index.length);\n    }\n    // update columns\n    c = columns;\n\n    // check we need to increase rows\n    if (rows > r) {\n      // check we have to insert values\n      if (ins) {\n        // inserts\n        var n = 0;\n        // loop columns\n        for (j = 0; j < c; j++) {\n          // update matrix._ptr for current column\n          matrix._ptr[j] = matrix._ptr[j] + n;\n          // where to insert matrix._values\n          k = matrix._ptr[j + 1] + n;\n          // pointer\n          var p = 0;\n          // loop new rows, initialize pointer\n          for (i = r; i < rows; i++, p++) {\n            // add value\n            matrix._values.splice(k + p, 0, value);\n            // update matrix._index\n            matrix._index.splice(k + p, 0, i);\n            // increment inserts\n            n++;\n          }\n        }\n        // store number of matrix._values in matrix._ptr\n        matrix._ptr[c] = matrix._values.length;\n      }\n    }\n    else if (rows < r) {\n      // deletes\n      var d = 0;\n      // loop columns\n      for (j = 0; j < c; j++) {\n        // update matrix._ptr for current column\n        matrix._ptr[j] = matrix._ptr[j] - d;\n        // where matrix._values start for next column\n        var k0 = matrix._ptr[j];\n        var k1 = matrix._ptr[j + 1] - d;\n        // loop matrix._index\n        for (k = k0; k < k1; k++) {\n          // row\n          i = matrix._index[k];\n          // check we need to delete value and matrix._index\n          if (i > rows - 1) {\n            // remove value\n            matrix._values.splice(k, 1);\n            // remove item from matrix._index\n            matrix._index.splice(k, 1);\n            // increase deletes\n            d++;\n          }\n        }\n      }\n      // update matrix._ptr for current column\n      matrix._ptr[j] = matrix._values.length;\n    }\n    // update matrix._size\n    matrix._size[0] = rows;\n    matrix._size[1] = columns;\n    // return matrix\n    return matrix;\n  };\n  \n  /**\n   * Create a clone of the matrix\n   * @memberof SparseMatrix\n   * @return {SparseMatrix} clone\n   */\n  SparseMatrix.prototype.clone = function () {\n    var m = new SparseMatrix({\n      values: this._values ? object.clone(this._values) : undefined,\n      index: object.clone(this._index),\n      ptr: object.clone(this._ptr),\n      size: object.clone(this._size),\n      datatype: this._datatype\n    });\n    return m;\n  };\n  \n  /**\n   * Retrieve the size of the matrix.\n   * @memberof SparseMatrix\n   * @returns {number[]} size\n   */\n  SparseMatrix.prototype.size = function() {\n    return this._size.slice(0); // copy the Array\n  };\n  \n  /**\n   * Create a new matrix with the results of the callback function executed on\n   * each entry of the matrix.\n   * @memberof SparseMatrix\n   * @param {Function} callback   The callback function is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Matrix being traversed.\n   * @param {boolean} [skipZeros] Invoke callback function for non-zero values only.\n   *\n   * @return {SparseMatrix} matrix\n   */\n  SparseMatrix.prototype.map = function (callback, skipZeros) {\n    // check it is a pattern matrix\n    if (!this._values)\n      throw new Error('Cannot invoke map on a Pattern only matrix');\n    // matrix instance\n    var me = this;\n    // rows and columns\n    var rows = this._size[0];\n    var columns = this._size[1];\n    // invoke callback\n    var invoke = function (v, i, j) {\n      // invoke callback\n      return callback(v, [i, j], me);\n    };\n    // invoke _map\n    return _map(this, 0, rows - 1, 0, columns - 1, invoke, skipZeros);\n  };\n\n  /**\n   * Create a new matrix with the results of the callback function executed on the interval\n   * [minRow..maxRow, minColumn..maxColumn].\n   */\n  var _map = function (matrix, minRow, maxRow, minColumn, maxColumn, callback, skipZeros) {\n    // result arrays\n    var values = [];\n    var index = [];\n    var ptr = [];\n    \n    // equal signature to use\n    var eq = equalScalar;\n    // zero value\n    var zero = 0;\n\n    if (isString(matrix._datatype)) {\n      // find signature that matches (datatype, datatype)\n      eq = typed.find(equalScalar, [matrix._datatype, matrix._datatype]) || equalScalar;\n      // convert 0 to the same datatype\n      zero = typed.convert(0, matrix._datatype);\n    }\n    \n    // invoke callback\n    var invoke = function (v, x, y) {\n      // invoke callback\n      v = callback(v, x, y);\n      // check value != 0\n      if (!eq(v, zero)) {\n        // store value\n        values.push(v);\n        // index\n        index.push(x);\n      }\n    };\n    // loop columns\n    for (var j = minColumn; j <= maxColumn; j++) {\n      // store pointer to values index\n      ptr.push(values.length);\n      // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\n      var k0 = matrix._ptr[j];\n      var k1 = matrix._ptr[j + 1];\n      // row pointer\n      var p = minRow;\n      // loop k within [k0, k1[\n      for (var k = k0; k < k1; k++) {\n        // row index\n        var i = matrix._index[k];\n        // check i is in range\n        if (i >= minRow && i <= maxRow) {\n          // zero values\n          if (!skipZeros) {\n           for (var x = p; x < i; x++)\n             invoke(0, x - minRow, j - minColumn);\n          }\n          // value @ k\n          invoke(matrix._values[k], i - minRow, j - minColumn);\n        }\n        // update pointer\n        p = i + 1;\n      }\n      // zero values\n      if (!skipZeros) {\n        for (var y = p; y <= maxRow; y++)\n          invoke(0, y - minRow, j - minColumn);\n      }\n    }\n    // store number of values in ptr\n    ptr.push(values.length);\n    // return sparse matrix\n    return new SparseMatrix({\n      values: values,\n      index: index,\n      ptr: ptr,\n      size: [maxRow - minRow + 1, maxColumn - minColumn + 1]\n    });\n  };\n  \n  /**\n   * Execute a callback function on each entry of the matrix.\n   * @memberof SparseMatrix\n   * @param {Function} callback   The callback function is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Matrix being traversed.\n   * @param {boolean} [skipZeros] Invoke callback function for non-zero values only.\n   */\n  SparseMatrix.prototype.forEach = function (callback, skipZeros) {\n    // check it is a pattern matrix\n    if (!this._values)\n      throw new Error('Cannot invoke forEach on a Pattern only matrix');\n    // matrix instance\n    var me = this;\n    // rows and columns\n    var rows = this._size[0];\n    var columns = this._size[1];\n    // loop columns\n    for (var j = 0; j < columns; j++) {\n      // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\n      var k0 = this._ptr[j];\n      var k1 = this._ptr[j + 1];\n      // column pointer\n      var p = 0;\n      // loop k within [k0, k1[\n      for (var k = k0; k < k1; k++) {\n        // row index\n        var i = this._index[k];\n        // check we need to process zeros\n        if (!skipZeros) {\n          // zero values\n          for (var x = p; x < i; x++)\n            callback(0, [x, j], me);\n        }\n        // value @ k\n        callback(this._values[k], [i, j], me);\n        // update pointer\n        p = i + 1;\n      }\n      // check we need to process zeros\n      if (!skipZeros) {\n        // zero values\n        for (var y = p; y < rows; y++)\n          callback(0, [y, j], me);\n      }\n    }\n  };\n  \n  /**\n   * Create an Array with a copy of the data of the SparseMatrix\n   * @memberof SparseMatrix\n   * @returns {Array} array\n   */\n  SparseMatrix.prototype.toArray = function () {\n    return _toArray(this._values, this._index, this._ptr, this._size, true);\n  };\n\n  /**\n   * Get the primitive value of the SparseMatrix: a two dimensions array\n   * @memberof SparseMatrix\n   * @returns {Array} array\n   */\n  SparseMatrix.prototype.valueOf = function () {\n    return _toArray(this._values, this._index, this._ptr, this._size, false);\n  };\n  \n  var _toArray = function (values, index, ptr, size, copy) {    \n    // rows and columns\n    var rows = size[0];\n    var columns = size[1];\n    // result\n    var a = [];\n    // vars\n    var i, j;\n    // initialize array\n    for (i = 0; i < rows; i++) {\n      a[i] = [];\n      for (j = 0; j < columns; j++)\n        a[i][j] = 0;\n    }\n\n    // loop columns\n    for (j = 0; j < columns; j++) {\n      // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\n      var k0 = ptr[j];\n      var k1 = ptr[j + 1];\n      // loop k within [k0, k1[\n      for (var k = k0; k < k1; k++) {\n        // row index\n        i = index[k];\n        // set value (use one for pattern matrix)\n        a[i][j] = values ? (copy ? object.clone(values[k]) : values[k]) : 1;\n      }\n    }\n    return a;\n  };\n  \n  /**\n   * Get a string representation of the matrix, with optional formatting options.\n   * @memberof SparseMatrix\n   * @param {Object | number | Function} [options]  Formatting options. See\n   *                                                lib/utils/number:format for a\n   *                                                description of the available\n   *                                                options.\n   * @returns {string} str\n   */\n  SparseMatrix.prototype.format = function (options) {\n    // rows and columns\n    var rows = this._size[0];\n    var columns = this._size[1];\n    // density\n    var density = this.density();\n    // rows & columns\n    var str = 'Sparse Matrix [' + string.format(rows, options) + ' x ' + string.format(columns, options) + '] density: ' + string.format(density, options) + '\\n';\n    // loop columns\n    for (var j = 0; j < columns; j++) {\n      // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\n      var k0 = this._ptr[j];\n      var k1 = this._ptr[j + 1];\n      // loop k within [k0, k1[\n      for (var k = k0; k < k1; k++) {\n        // row index\n        var i = this._index[k];\n        // append value\n        str += '\\n    (' + string.format(i, options) + ', ' + string.format(j, options) + ') ==> ' + (this._values ? string.format(this._values[k], options) : 'X');\n      }\n    }\n    return str;\n  };\n  \n  /**\n   * Get a string representation of the matrix\n   * @memberof SparseMatrix\n   * @returns {string} str\n   */\n  SparseMatrix.prototype.toString = function () {\n    return string.format(this.toArray());\n  };\n  \n  /**\n   * Get a JSON representation of the matrix\n   * @memberof SparseMatrix\n   * @returns {Object}\n   */\n  SparseMatrix.prototype.toJSON = function () {\n    return {\n      mathjs: 'SparseMatrix',\n      values: this._values,\n      index: this._index,\n      ptr: this._ptr,\n      size: this._size,\n      datatype: this._datatype\n    };\n  };\n\n  /**\n   * Get the kth Matrix diagonal.\n   *\n   * @memberof SparseMatrix\n   * @param {number | BigNumber} [k=0]     The kth diagonal where the vector will retrieved.\n   *\n   * @returns {Matrix}                     The matrix vector with the diagonal values.\n   */\n  SparseMatrix.prototype.diagonal = function(k) {\n    // validate k if any\n    if (k) {\n      // convert BigNumber to a number\n      if (k.isBigNumber === true)\n        k = k.toNumber();\n      // is must be an integer\n      if (!isNumber(k) || !isInteger(k)) {\n        throw new TypeError ('The parameter k must be an integer number');\n      }\n    }\n    else {\n      // default value\n      k = 0;\n    }\n\n    var kSuper = k > 0 ? k : 0;\n    var kSub = k < 0 ? -k : 0;\n    \n    // rows & columns\n    var rows = this._size[0];\n    var columns = this._size[1];\n    \n    // number diagonal values\n    var n = Math.min(rows - kSub, columns -  kSuper);\n    \n    // diagonal arrays\n    var values = [];\n    var index = [];\n    var ptr = [];\n    // initial ptr value\n    ptr[0] = 0;\n    // loop columns\n    for (var j = kSuper; j < columns && values.length < n; j++) {\n      // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\n      var k0 = this._ptr[j];\n      var k1 = this._ptr[j + 1];\n      // loop x within [k0, k1[\n      for (var x = k0; x < k1; x++) {\n        // row index\n        var i = this._index[x];\n        // check row\n        if (i === j - kSuper + kSub) {\n          // value on this column\n          values.push(this._values[x]);\n          // store row\n          index[values.length - 1] = i - kSub;\n          // exit loop\n          break;\n        }\n      }\n    }\n    // close ptr\n    ptr.push(values.length);\n    // return matrix\n    return new SparseMatrix({\n      values: values,\n      index: index,\n      ptr: ptr,\n      size: [n, 1]\n    });\n  };\n  \n  /**\n   * Generate a matrix from a JSON object\n   * @memberof SparseMatrix\n   * @param {Object} json  An object structured like\n   *                       `{\"mathjs\": \"SparseMatrix\", \"values\": [], \"index\": [], \"ptr\": [], \"size\": []}`,\n   *                       where mathjs is optional\n   * @returns {SparseMatrix}\n   */\n  SparseMatrix.fromJSON = function (json) {\n    return new SparseMatrix(json);\n  };\n\n  /**\n   * Create a diagonal matrix.\n   *\n   * @memberof SparseMatrix\n   * @param {Array} size                       The matrix size.\n   * @param {number | Array | Matrix } value   The values for the diagonal.\n   * @param {number | BigNumber} [k=0]         The kth diagonal where the vector will be filled in.\n   * @param {string} [datatype]                The Matrix datatype, values must be of this datatype.\n   *\n   * @returns {SparseMatrix}\n   */\n  SparseMatrix.diagonal = function (size, value, k, defaultValue, datatype) {\n    if (!isArray(size))\n      throw new TypeError('Array expected, size parameter');\n    if (size.length !== 2)\n      throw new Error('Only two dimensions matrix are supported');\n    \n    // map size & validate\n    size = size.map(function (s) {\n      // check it is a big number\n      if (s && s.isBigNumber === true) {\n        // convert it\n        s = s.toNumber();\n      }\n      // validate arguments\n      if (!isNumber(s) || !isInteger(s) || s < 1) {\n        throw new Error('Size values must be positive integers');\n      } \n      return s;\n    });\n    \n    // validate k if any\n    if (k) {\n      // convert BigNumber to a number\n      if (k.isBigNumber === true)\n        k = k.toNumber();\n      // is must be an integer\n      if (!isNumber(k) || !isInteger(k)) {\n        throw new TypeError ('The parameter k must be an integer number');\n      }\n    }\n    else {\n      // default value\n      k = 0;\n    }\n\n    // equal signature to use\n    var eq = equalScalar;\n    // zero value\n    var zero = 0;\n\n    if (isString(datatype)) {\n      // find signature that matches (datatype, datatype)\n      eq = typed.find(equalScalar, [datatype, datatype]) || equalScalar;\n      // convert 0 to the same datatype\n      zero = typed.convert(0, datatype);\n    }\n    \n    var kSuper = k > 0 ? k : 0;\n    var kSub = k < 0 ? -k : 0;\n    \n    // rows and columns\n    var rows = size[0];\n    var columns = size[1];\n    \n    // number of non-zero items\n    var n = Math.min(rows - kSub, columns -  kSuper);\n    \n    // value extraction function\n    var _value;\n      \n    // check value\n    if (isArray(value)) {\n      // validate array\n      if (value.length !== n) {\n        // number of values in array must be n\n        throw new Error('Invalid value array length');\n      }\n      // define function\n      _value = function (i) {\n        // return value @ i\n        return value[i];\n      };\n    }\n    else if (value && value.isMatrix === true) {\n      // matrix size\n      var ms = value.size();\n      // validate matrix\n      if (ms.length !== 1 || ms[0] !== n) {\n        // number of values in array must be n\n        throw new Error('Invalid matrix length');\n      }\n      // define function\n      _value = function (i) {\n        // return value @ i\n        return value.get([i]);\n      };\n    }\n    else {\n      // define function\n      _value = function () {\n        // return value\n        return value;\n      };\n    }\n    \n    // create arrays\n    var values = [];\n    var index = [];\n    var ptr = [];\n    \n    // loop items\n    for (var j = 0; j < columns; j++) {\n      // number of rows with value\n      ptr.push(values.length);\n      // diagonal index\n      var i = j - kSuper;      \n      // check we need to set diagonal value\n      if (i >= 0 && i < n) {\n        // get value @ i\n        var v = _value(i);\n        // check for zero\n        if (!eq(v, zero)) {\n          // column\n          index.push(i + kSub);\n          // add value\n          values.push(v);\n        }\n      }\n    }\n    // last value should be number of values\n    ptr.push(values.length);\n    // create SparseMatrix\n    return new SparseMatrix({\n      values: values,\n      index: index,\n      ptr: ptr,\n      size: [rows, columns]\n    });\n  };\n  \n  /**\n   * Swap rows i and j in Matrix.\n   *\n   * @memberof SparseMatrix\n   * @param {number} i       Matrix row index 1\n   * @param {number} j       Matrix row index 2\n   *\n   * @return {Matrix}        The matrix reference\n   */\n  SparseMatrix.prototype.swapRows = function (i, j) {\n    // check index\n    if (!isNumber(i) || !isInteger(i) || !isNumber(j) || !isInteger(j)) {\n      throw new Error('Row index must be positive integers');\n    }\n    // check dimensions\n    if (this._size.length !== 2) {\n      throw new Error('Only two dimensional matrix is supported');\n    }\n    // validate index\n    validateIndex(i, this._size[0]);\n    validateIndex(j, this._size[0]);\n    \n    // swap rows\n    SparseMatrix._swapRows(i, j, this._size[1], this._values, this._index, this._ptr);\n    // return current instance\n    return this;\n  };\n  \n  /**\n   * Loop rows with data in column j.\n   *\n   * @param {number} j            Column\n   * @param {Array} values        Matrix values\n   * @param {Array} index         Matrix row indeces\n   * @param {Array} ptr           Matrix column pointers\n   * @param {Function} callback   Callback function invoked for every row in column j\n   */\n  SparseMatrix._forEachRow = function (j, values, index, ptr, callback) {\n    // indeces for column j\n    var k0 = ptr[j];\n    var k1 = ptr[j + 1];\n    // loop\n    for (var k = k0; k < k1; k++) {\n      // invoke callback\n      callback(index[k], values[k]);\n    }\n  };\n  \n  /**\n   * Swap rows x and y in Sparse Matrix data structures.\n   *\n   * @param {number} x         Matrix row index 1\n   * @param {number} y         Matrix row index 2\n   * @param {number} columns   Number of columns in matrix\n   * @param {Array} values     Matrix values\n   * @param {Array} index      Matrix row indeces\n   * @param {Array} ptr        Matrix column pointers\n   */\n  SparseMatrix._swapRows = function (x, y, columns, values, index, ptr) {\n    // loop columns\n    for (var j = 0; j < columns; j++) {\n      // k0 <= k < k1 where k0 = _ptr[j] && k1 = _ptr[j+1]\n      var k0 = ptr[j];\n      var k1 = ptr[j + 1];\n      // find value index @ x\n      var kx = _getValueIndex(x, k0, k1, index);\n      // find value index @ x\n      var ky = _getValueIndex(y, k0, k1, index);\n      // check both rows exist in matrix\n      if (kx < k1 && ky < k1 && index[kx] === x && index[ky] === y) {\n        // swap values (check for pattern matrix)\n        if (values) {\n          var v = values[kx];\n          values[kx] = values[ky];\n          values[ky] = v;\n        }\n        // next column\n        continue;\n      }\n      // check x row exist & no y row\n      if (kx < k1 && index[kx] === x && (ky >= k1 || index[ky] !== y)) {\n        // value @ x (check for pattern matrix)\n        var vx = values ? values[kx] : undefined;\n        // insert value @ y\n        index.splice(ky, 0, y);\n        if (values)\n          values.splice(ky, 0, vx);        \n        // remove value @ x (adjust array index if needed)\n        index.splice(ky <= kx ? kx + 1 : kx, 1);\n        if (values)\n          values.splice(ky <= kx ? kx + 1 : kx, 1);\n        // next column\n        continue;\n      }\n      // check y row exist & no x row\n      if (ky < k1 && index[ky] === y && (kx >= k1 || index[kx] !== x)) {\n        // value @ y (check for pattern matrix)\n        var vy = values ? values[ky] : undefined;\n        // insert value @ x\n        index.splice(kx, 0, x);\n        if (values)\n          values.splice(kx, 0, vy);\n        // remove value @ y (adjust array index if needed)\n        index.splice(kx <= ky ? ky + 1 : ky, 1);\n        if (values)\n          values.splice(kx <= ky ? ky + 1 : ky, 1);\n      }\n    }\n  };\n\n  // register this type in the base class Matrix\n  type.Matrix._storage.sparse = SparseMatrix;\n\n  return SparseMatrix;\n}\n\nexports.name = 'SparseMatrix';\nexports.path = 'type';\nexports.factory = factory;\nexports.lazy = false;  // no lazy loading, as we alter type.Matrix._storage\n","'use strict';\n\n/**\n * Compares two BigNumbers.\n * @param {BigNumber} x       First value to compare\n * @param {BigNumber} y       Second value to compare\n * @param {number} [epsilon]  The maximum relative difference between x and y\n *                            If epsilon is undefined or null, the function will\n *                            test whether x and y are exactly equal.\n * @return {boolean} whether the two numbers are nearly equal\n */\nmodule.exports = function nearlyEqual(x, y, epsilon) {\n  // if epsilon is null or undefined, test whether x and y are exactly equal\n  if (epsilon == null) {\n    return x.eq(y);\n  }\n\n\n  // use \"==\" operator, handles infinities\n  if (x.eq(y)) {\n    return true;\n  }\n\n  // NaN\n  if (x.isNaN() || y.isNaN()) {\n    return false;\n  }\n\n  // at this point x and y should be finite\n  if(x.isFinite() && y.isFinite()) {\n    // check numbers are very close, needed when comparing numbers near zero\n    var diff = x.minus(y).abs();\n    if (diff.isZero()) {\n      return true;\n    }\n    else {\n      // use relative error\n      var max = x.constructor.max(x.abs(), y.abs());\n      return diff.lte(max.times(epsilon));\n    }\n  }\n\n  // Infinite and Number or negative Infinite and positive Infinite cases\n  return false;\n};\n","'use strict';\n\nvar nearlyEqual = require('../../utils/number').nearlyEqual;\nvar bigNearlyEqual = require('../../utils/bignumber/nearlyEqual');\n\nfunction factory (type, config, load, typed) {\n  \n  /**\n   * Test whether two values are equal.\n   *\n   * @param  {number | BigNumber | Fraction | boolean | Complex | Unit} x   First value to compare\n   * @param  {number | BigNumber | Fraction | boolean | Complex} y          Second value to compare\n   * @return {boolean}                                                  Returns true when the compared values are equal, else returns false\n   * @private\n   */\n  var equalScalar = typed('equalScalar', {\n\n    'boolean, boolean': function (x, y) {\n      return x === y;\n    },\n\n    'number, number': function (x, y) {\n      return x === y || nearlyEqual(x, y, config.epsilon);\n    },\n\n    'BigNumber, BigNumber': function (x, y) {\n      return x.eq(y) || bigNearlyEqual(x, y, config.epsilon);\n    },\n\n    'Fraction, Fraction': function (x, y) {\n      return x.equals(y);\n    },\n\n    'Complex, Complex': function (x, y) {\n      return x.equals(y);\n    },\n\n    'Unit, Unit': function (x, y) {\n      if (!x.equalBase(y)) {\n        throw new Error('Cannot compare units with different base');\n      }\n      return equalScalar(x.value, y.value);\n    },\n\n    'string, string': function (x, y) {\n      return x === y;\n    }\n  });\n  \n  return equalScalar;\n}\n\nexports.factory = factory;\n","'use strict';\n\nfunction factory(type, config, load, typed) {\n\n  /**\n   * Add two scalar values, `x + y`.\n   * This function is meant for internal use: it is used by the public function\n   * `add`\n   *\n   * This function does not support collections (Array or Matrix), and does\n   * not validate the number of of inputs.\n   *\n   * @param  {number | BigNumber | Fraction | Complex | Unit} x   First value to add\n   * @param  {number | BigNumber | Fraction | Complex} y          Second value to add\n   * @return {number | BigNumber | Fraction | Complex | Unit}                      Sum of `x` and `y`\n   * @private\n   */\n  var add = typed('add', {\n\n    'number, number': function (x, y) {\n      return x + y;\n    },\n\n    'Complex, Complex': function (x, y) {\n      return x.add(y);\n    },\n\n    'BigNumber, BigNumber': function (x, y) {\n      return x.plus(y);\n    },\n\n    'Fraction, Fraction': function (x, y) {\n      return x.add(y);\n    },\n\n    'Unit, Unit': function (x, y) {\n      if (x.value == null) throw new Error('Parameter x contains a unit with undefined value');\n      if (y.value == null) throw new Error('Parameter y contains a unit with undefined value');\n      if (!x.equalBase(y)) throw new Error('Units do not match');\n\n      var res = x.clone();\n      res.value = add(res.value, y.value);\n      res.fixPrefix = false;\n      return res;\n    }\n  });\n\n  return add;\n}\n\nexports.factory = factory;\n","'use strict';\n\nfunction factory (type, config, load, typed) {\n  /**\n   * Create a Matrix. The function creates a new `math.type.Matrix` object from\n   * an `Array`. A Matrix has utility functions to manipulate the data in the\n   * matrix, like getting the size and getting or setting values in the matrix.\n   * Supported storage formats are 'dense' and 'sparse'.\n   *\n   * Syntax:\n   *\n   *    math.matrix()                         // creates an empty matrix using default storage format (dense).\n   *    math.matrix(data)                     // creates a matrix with initial data using default storage format (dense).\n   *    math.matrix('dense')                  // creates an empty matrix using the given storage format.\n   *    math.matrix(data, 'dense')            // creates a matrix with initial data using the given storage format.\n   *    math.matrix(data, 'sparse')           // creates a sparse matrix with initial data.\n   *    math.matrix(data, 'sparse', 'number') // creates a sparse matrix with initial data, number data type.\n   *\n   * Examples:\n   *\n   *    var m = math.matrix([[1, 2], [3, 4]]);\n   *    m.size();                        // Array [2, 2]\n   *    m.resize([3, 2], 5);\n   *    m.valueOf();                     // Array [[1, 2], [3, 4], [5, 5]]\n   *    m.get([1, 0])                    // number 3\n   *\n   * See also:\n   *\n   *    bignumber, boolean, complex, index, number, string, unit, sparse\n   *\n   * @param {Array | Matrix} [data]    A multi dimensional array\n   * @param {string} [format]          The Matrix storage format\n   *\n   * @return {Matrix} The created matrix\n   */\n  var matrix = typed('matrix', {\n    '': function () {\n      return _create([]);\n    },\n\n    'string': function (format) {\n      return _create([], format);\n    },\n    \n    'string, string': function (format, datatype) {\n      return _create([], format, datatype);\n    },\n\n    'Array': function (data) {\n      return _create(data);\n    },\n      \n    'Matrix': function (data) {\n      return _create(data, data.storage());\n    },\n    \n    'Array | Matrix, string': _create,\n    \n    'Array | Matrix, string, string': _create\n  });\n\n  matrix.toTex = {\n    0: '\\\\begin{bmatrix}\\\\end{bmatrix}',\n    1: '\\\\left(${args[0]}\\\\right)',\n    2: '\\\\left(${args[0]}\\\\right)'\n  };\n\n  return matrix;\n\n  /**\n   * Create a new Matrix with given storage format\n   * @param {Array} data\n   * @param {string} [format]\n   * @param {string} [datatype]\n   * @returns {Matrix} Returns a new Matrix\n   * @private\n   */\n  function _create(data, format, datatype) {\n    // get storage format constructor\n    var M = type.Matrix.storage(format || 'default');\n\n    // create instance\n    return new M(data, datatype);\n  }\n}\n\nexports.name = 'matrix';\nexports.factory = factory;\n","'use strict';\n\nexports.symbols = {\n  // GREEK LETTERS\n  Alpha: 'A',     alpha: '\\\\alpha',\n  Beta: 'B',      beta: '\\\\beta',\n  Gamma: '\\\\Gamma',    gamma: '\\\\gamma',\n  Delta: '\\\\Delta',    delta: '\\\\delta',\n  Epsilon: 'E',   epsilon: '\\\\epsilon',  varepsilon: '\\\\varepsilon',\n  Zeta: 'Z',      zeta: '\\\\zeta',\n  Eta: 'H',       eta: '\\\\eta',\n  Theta: '\\\\Theta',    theta: '\\\\theta',    vartheta: '\\\\vartheta',\n  Iota: 'I',      iota: '\\\\iota',\n  Kappa: 'K',     kappa: '\\\\kappa',    varkappa: '\\\\varkappa',\n  Lambda: '\\\\Lambda',   lambda: '\\\\lambda',\n  Mu: 'M',        mu: '\\\\mu',\n  Nu: 'N',        nu: '\\\\nu',\n  Xi: '\\\\Xi',       xi: '\\\\xi',\n  Omicron: 'O',   omicron: 'o',\n  Pi: '\\\\Pi',       pi: '\\\\pi',       varpi: '\\\\varpi',\n  Rho: 'P',       rho: '\\\\rho',      varrho: '\\\\varrho',\n  Sigma: '\\\\Sigma',    sigma: '\\\\sigma',    varsigma: '\\\\varsigma',\n  Tau: 'T',       tau: '\\\\tau',\n  Upsilon: '\\\\Upsilon',  upsilon: '\\\\upsilon',\n  Phi: '\\\\Phi',      phi: '\\\\phi',      varphi: '\\\\varphi',\n  Chi: 'X',       chi: '\\\\chi',\n  Psi: '\\\\Psi',      psi: '\\\\psi',\n  Omega: '\\\\Omega',    omega: '\\\\omega',\n  //logic\n  'true': '\\\\mathrm{True}',\n  'false': '\\\\mathrm{False}',\n  //other\n  i: 'i', //TODO use \\i ??\n  inf: '\\\\infty',\n  Inf: '\\\\infty',\n  infinity: '\\\\infty',\n  Infinity: '\\\\infty',\n  oo: '\\\\infty',\n  lim: '\\\\lim',\n  'undefined': '\\\\mathbf{?}'\n};\n\nexports.operators = {\n  'transpose': '^\\\\top',\n  'factorial': '!',\n  'pow': '^',\n  'dotPow': '.^\\\\wedge', //TODO find ideal solution\n  'unaryPlus': '+',\n  'unaryMinus': '-',\n  'bitNot': '~', //TODO find ideal solution\n  'not': '\\\\neg',\n  'multiply': '\\\\cdot',\n  'divide': '\\\\frac', //TODO how to handle that properly?\n  'dotMultiply': '.\\\\cdot', //TODO find ideal solution\n  'dotDivide': '.:', //TODO find ideal solution\n  'mod': '\\\\mod',\n  'add': '+',\n  'subtract': '-',\n  'to': '\\\\rightarrow',\n  'leftShift': '<<',\n  'rightArithShift': '>>',\n  'rightLogShift': '>>>',\n  'equal': '=',\n  'unequal': '\\\\neq',\n  'smaller': '<',\n  'larger': '>',\n  'smallerEq': '\\\\leq',\n  'largerEq': '\\\\geq',\n  'bitAnd': '\\\\&',\n  'bitXor': '\\\\underline{|}',\n  'bitOr': '|',\n  'and': '\\\\wedge',\n  'xor': '\\\\veebar',\n  'or': '\\\\vee'\n};\n\nexports.defaultTemplate = '\\\\mathrm{${name}}\\\\left(${args}\\\\right)';\n\nvar units = {\n  deg: '^\\\\circ'\n};\n\n//@param {string} name\n//@param {boolean} isUnit\nexports.toSymbol = function (name, isUnit) {\n  isUnit = typeof isUnit === 'undefined' ? false : isUnit;\n  if (isUnit) {\n    if (units.hasOwnProperty(name)) {\n      return units[name];\n    }\n    return '\\\\mathrm{' + name + '}';\n  }\n\n  if (exports.symbols.hasOwnProperty(name)) {\n    return exports.symbols[name];\n  }\n  else if (name.indexOf('_') !== -1) {\n    //symbol with index (eg. alpha_1)\n    var index = name.indexOf('_');\n    return exports.toSymbol(name.substring(0, index)) + '_{'\n      + exports.toSymbol(name.substring(index + 1)) + '}';\n  }\n  return name;\n};\n","'use strict';\n\nvar DimensionError = require('../../../error/DimensionError');\n\nfunction factory (type, config, load, typed) {\n\n  var DenseMatrix = type.DenseMatrix;\n\n  /**\n   * Iterates over SparseMatrix nonzero items and invokes the callback function f(Dij, Sij). \n   * Callback function invoked NNZ times (number of nonzero items in SparseMatrix).\n   *\n   *\n   *            f(Dij, Sij)  ; S(i,j) !== 0\n   * C(i,j) = \n   *            Dij          ; otherwise\n   *\n   *\n   * @param {Matrix}   denseMatrix       The DenseMatrix instance (D)\n   * @param {Matrix}   sparseMatrix      The SparseMatrix instance (S)\n   * @param {Function} callback          The f(Dij,Sij) operation to invoke, where Dij = DenseMatrix(i,j) and Sij = SparseMatrix(i,j)\n   * @param {boolean}  inverse           A true value indicates callback should be invoked f(Sij,Dij)\n   *\n   * @return {Matrix}                    DenseMatrix (C)\n   *\n   * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97477571\n   */\n  var algorithm01 = function (denseMatrix, sparseMatrix, callback, inverse) {\n    // dense matrix arrays\n    var adata = denseMatrix._data;\n    var asize = denseMatrix._size;\n    var adt = denseMatrix._datatype;\n    // sparse matrix arrays\n    var bvalues = sparseMatrix._values;\n    var bindex = sparseMatrix._index;\n    var bptr = sparseMatrix._ptr;\n    var bsize = sparseMatrix._size;\n    var bdt = sparseMatrix._datatype;\n\n    // validate dimensions\n    if (asize.length !== bsize.length)\n      throw new DimensionError(asize.length, bsize.length);\n\n    // check rows & columns\n    if (asize[0] !== bsize[0] || asize[1] !== bsize[1])\n      throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n\n    // sparse matrix cannot be a Pattern matrix\n    if (!bvalues)\n      throw new Error('Cannot perform operation on Dense Matrix and Pattern Sparse Matrix');\n\n    // rows & columns\n    var rows = asize[0];\n    var columns = asize[1];\n\n    // process data types\n    var dt = typeof adt === 'string' && adt === bdt ? adt : undefined;\n    // callback function\n    var cf = dt ? typed.find(callback, [dt, dt]) : callback;\n\n    // vars\n    var i, j;\n    \n    // result (DenseMatrix)\n    var cdata = [];\n    // initialize c\n    for (i = 0; i < rows; i++)\n      cdata[i] = [];      \n    \n    // workspace\n    var x = [];\n    // marks indicating we have a value in x for a given column\n    var w = [];\n\n    // loop columns in b\n    for (j = 0; j < columns; j++) {\n      // column mark\n      var mark = j + 1;\n      // values in column j\n      for (var k0 = bptr[j], k1 = bptr[j + 1], k = k0; k < k1; k++) {\n        // row\n        i = bindex[k];\n        // update workspace\n        x[i] = inverse ? cf(bvalues[k], adata[i][j]) : cf(adata[i][j], bvalues[k]);\n        // mark i as updated\n        w[i] = mark;\n      }\n      // loop rows\n      for (i = 0; i < rows; i++) {\n        // check row is in workspace\n        if (w[i] === mark) {\n          // c[i][j] was already calculated\n          cdata[i][j] = x[i];\n        }\n        else {\n          // item does not exist in S\n          cdata[i][j] = adata[i][j];\n        }\n      }\n    }\n\n    // return dense matrix\n    return new DenseMatrix({\n      data: cdata,\n      size: [rows, columns],\n      datatype: dt\n    });\n  };\n  \n  return algorithm01;\n}\n\nexports.name = 'algorithm01';\nexports.factory = factory;\n","'use strict';\n\nvar DimensionError = require('../../../error/DimensionError');\n\nfunction factory (type, config, load, typed) {\n\n  var equalScalar = load(require('../../../function/relational/equalScalar'));\n\n  var SparseMatrix = type.SparseMatrix;\n\n  /**\n   * Iterates over SparseMatrix A and SparseMatrix B nonzero items and invokes the callback function f(Aij, Bij). \n   * Callback function invoked MAX(NNZA, NNZB) times\n   *\n   *\n   *            f(Aij, Bij)  ; A(i,j) !== 0 && B(i,j) !== 0\n   * C(i,j) =   A(i,j)       ; A(i,j) !== 0\n   *            B(i,j)       ; B(i,j) !== 0\n   *\n   *\n   * @param {Matrix}   a                 The SparseMatrix instance (A)\n   * @param {Matrix}   b                 The SparseMatrix instance (B)\n   * @param {Function} callback          The f(Aij,Bij) operation to invoke\n   *\n   * @return {Matrix}                    SparseMatrix (C)\n   *\n   * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97620294\n   */\n  var algorithm04 = function (a, b, callback) {\n    // sparse matrix arrays\n    var avalues = a._values;\n    var aindex = a._index;\n    var aptr = a._ptr;\n    var asize = a._size;\n    var adt = a._datatype;\n    // sparse matrix arrays\n    var bvalues = b._values;\n    var bindex = b._index;\n    var bptr = b._ptr;\n    var bsize = b._size;\n    var bdt = b._datatype;\n\n    // validate dimensions\n    if (asize.length !== bsize.length)\n      throw new DimensionError(asize.length, bsize.length);\n\n    // check rows & columns\n    if (asize[0] !== bsize[0] || asize[1] !== bsize[1])\n      throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n\n    // rows & columns\n    var rows = asize[0];\n    var columns = asize[1];\n\n    // datatype\n    var dt;\n    // equal signature to use\n    var eq = equalScalar;\n    // zero value\n    var zero = 0;\n    // callback signature to use\n    var cf = callback;\n\n    // process data types\n    if (typeof adt === 'string' && adt === bdt) {\n      // datatype\n      dt = adt;\n      // find signature that matches (dt, dt)\n      eq = typed.find(equalScalar, [dt, dt]);\n      // convert 0 to the same datatype\n      zero = typed.convert(0, dt);\n      // callback\n      cf = typed.find(callback, [dt, dt]);\n    }\n\n    // result arrays\n    var cvalues = avalues && bvalues ? [] : undefined;\n    var cindex = [];\n    var cptr = [];\n    // matrix\n    var c = new SparseMatrix({\n      values: cvalues,\n      index: cindex,\n      ptr: cptr,\n      size: [rows, columns],\n      datatype: dt\n    });\n\n    // workspace\n    var xa = avalues && bvalues ? [] : undefined;\n    var xb = avalues && bvalues ? [] : undefined;\n    // marks indicating we have a value in x for a given column\n    var wa = [];\n    var wb = [];\n\n    // vars \n    var i, j, k, k0, k1;\n    \n    // loop columns\n    for (j = 0; j < columns; j++) {\n      // update cptr\n      cptr[j] = cindex.length;\n      // columns mark\n      var mark = j + 1;\n      // loop A(:,j)\n      for (k0 = aptr[j], k1 = aptr[j + 1], k = k0; k < k1; k++) {\n        // row\n        i = aindex[k];\n        // update c\n        cindex.push(i);\n        // update workspace\n        wa[i] = mark;\n        // check we need to process values\n        if (xa)\n          xa[i] = avalues[k];\n      }\n      // loop B(:,j)\n      for (k0 = bptr[j], k1 = bptr[j + 1], k = k0; k < k1; k++) {\n        // row\n        i = bindex[k];\n        // check row exists in A\n        if (wa[i] === mark) {\n          // update record in xa @ i\n          if (xa) {\n            // invoke callback\n            var v = cf(xa[i], bvalues[k]);\n            // check for zero\n            if (!eq(v, zero)) {\n              // update workspace\n              xa[i] = v;              \n            }\n            else {\n              // remove mark (index will be removed later)\n              wa[i] = null;\n            }\n          }\n        }\n        else {\n          // update c\n          cindex.push(i);\n          // update workspace\n          wb[i] = mark;\n          // check we need to process values\n          if (xb)\n            xb[i] = bvalues[k];\n        }\n      }\n      // check we need to process values (non pattern matrix)\n      if (xa && xb) {\n        // initialize first index in j\n        k = cptr[j];\n        // loop index in j\n        while (k < cindex.length) {\n          // row\n          i = cindex[k];\n          // check workspace has value @ i\n          if (wa[i] === mark) {\n            // push value (Aij != 0 || (Aij != 0 && Bij != 0))\n            cvalues[k] = xa[i];\n            // increment pointer\n            k++;\n          }\n          else if (wb[i] === mark) {\n            // push value (bij != 0)\n            cvalues[k] = xb[i];\n            // increment pointer\n            k++;\n          }\n          else {\n            // remove index @ k\n            cindex.splice(k, 1);\n          }\n        }\n      }\n    }\n    // update cptr\n    cptr[columns] = cindex.length;\n\n    // return sparse matrix\n    return c;\n  };\n  \n  return algorithm04;\n}\n\nexports.name = 'algorithm04';\nexports.factory = factory;\n","'use strict';\n\nfunction factory (type, config, load, typed) {\n\n  var DenseMatrix = type.DenseMatrix;\n\n  /**\n   * Iterates over SparseMatrix S nonzero items and invokes the callback function f(Sij, b). \n   * Callback function invoked NZ times (number of nonzero items in S).\n   *\n   *\n   *            f(Sij, b)  ; S(i,j) !== 0\n   * C(i,j) =   \n   *            b          ; otherwise\n   *\n   *\n   * @param {Matrix}   s                 The SparseMatrix instance (S)\n   * @param {Scalar}   b                 The Scalar value\n   * @param {Function} callback          The f(Aij,b) operation to invoke\n   * @param {boolean}  inverse           A true value indicates callback should be invoked f(b,Sij)\n   *\n   * @return {Matrix}                    DenseMatrix (C)\n   *\n   * https://github.com/josdejong/mathjs/pull/346#issuecomment-97626813\n   */\n  var algorithm10 = function (s, b, callback, inverse) {\n    // sparse matrix arrays\n    var avalues = s._values;\n    var aindex = s._index;\n    var aptr = s._ptr;\n    var asize = s._size;\n    var adt = s._datatype;\n\n    // sparse matrix cannot be a Pattern matrix\n    if (!avalues)\n      throw new Error('Cannot perform operation on Pattern Sparse Matrix and Scalar value');\n\n    // rows & columns\n    var rows = asize[0];\n    var columns = asize[1];\n\n    // datatype\n    var dt;\n    // callback signature to use\n    var cf = callback;\n\n    // process data types\n    if (typeof adt === 'string') {\n      // datatype\n      dt = adt;\n      // convert b to the same datatype\n      b = typed.convert(b, dt);\n      // callback\n      cf = typed.find(callback, [dt, dt]);\n    }\n\n    // result arrays\n    var cdata = [];\n    // matrix\n    var c = new DenseMatrix({\n      data: cdata,\n      size: [rows, columns],\n      datatype: dt\n    });\n\n    // workspaces\n    var x = [];\n    // marks indicating we have a value in x for a given column\n    var w = [];\n\n    // loop columns\n    for (var j = 0; j < columns; j++) {\n      // columns mark\n      var mark = j + 1;\n      // values in j\n      for (var k0 = aptr[j], k1 = aptr[j + 1], k = k0; k < k1; k++) {\n        // row\n        var r = aindex[k];\n        // update workspace\n        x[r] = avalues[k];\n        w[r] = mark;\n      }\n      // loop rows\n      for (var i = 0; i < rows; i++) {\n        // initialize C on first column\n        if (j === 0) {\n          // create row array\n          cdata[i] = [];\n        }\n        // check sparse matrix has a value @ i,j\n        if (w[i] === mark) {\n          // invoke callback, update C\n          cdata[i][j] = inverse ? cf(b, x[i]) : cf(x[i], b);\n        }\n        else {\n          // dense matrix value @ i, j\n          cdata[i][j] = b;\n        }\n      }\n    }\n\n    // return sparse matrix\n    return c;\n  };\n\n  return algorithm10;\n}\n\nexports.name = 'algorithm10';\nexports.factory = factory;\n","'use strict';\n\nvar util = require('../../../utils/index');\nvar DimensionError = require('../../../error/DimensionError');\n\nvar string = util.string,\n    isString = string.isString;\n\nfunction factory (type, config, load, typed) {\n\n  var DenseMatrix = type.DenseMatrix;\n\n  /**\n   * Iterates over DenseMatrix items and invokes the callback function f(Aij..z, Bij..z). \n   * Callback function invoked MxN times.\n   *\n   * C(i,j,...z) = f(Aij..z, Bij..z)\n   *\n   * @param {Matrix}   a                 The DenseMatrix instance (A)\n   * @param {Matrix}   b                 The DenseMatrix instance (B)\n   * @param {Function} callback          The f(Aij..z,Bij..z) operation to invoke\n   *\n   * @return {Matrix}                    DenseMatrix (C)\n   *\n   * https://github.com/josdejong/mathjs/pull/346#issuecomment-97658658\n   */\n  var algorithm13 = function (a, b, callback) {\n    // a arrays\n    var adata = a._data;\n    var asize = a._size;\n    var adt = a._datatype;\n    // b arrays\n    var bdata = b._data;\n    var bsize = b._size;\n    var bdt = b._datatype;\n    // c arrays\n    var csize = [];\n\n    // validate dimensions\n    if (asize.length !== bsize.length)\n      throw new DimensionError(asize.length, bsize.length);\n\n    // validate each one of the dimension sizes\n    for (var s = 0; s < asize.length; s++) {\n      // must match\n      if (asize[s] !== bsize[s])\n        throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n      // update dimension in c\n      csize[s] = asize[s];\n    }\n\n    // datatype\n    var dt;\n    // callback signature to use\n    var cf = callback;\n\n    // process data types\n    if (typeof adt === 'string' && adt === bdt) {\n      // datatype\n      dt = adt;\n      // convert b to the same datatype\n      b = typed.convert(b, dt);\n      // callback\n      cf = typed.find(callback, [dt, dt]);\n    }\n\n    // populate cdata, iterate through dimensions\n    var cdata = csize.length > 0 ? _iterate(cf, 0, csize, csize[0], adata, bdata) : [];\n    \n    // c matrix\n    return new DenseMatrix({\n      data: cdata,\n      size: csize,\n      datatype: dt\n    });\n  };\n  \n  // recursive function\n  var _iterate = function (f, level, s, n, av, bv) {\n    // initialize array for this level\n    var cv = [];\n    // check we reach the last level\n    if (level === s.length - 1) {\n      // loop arrays in last level\n      for (var i = 0; i < n; i++) {\n        // invoke callback and store value\n        cv[i] = f(av[i], bv[i]);\n      }\n    }\n    else {\n      // iterate current level\n      for (var j = 0; j < n; j++) {\n        // iterate next level\n        cv[j] = _iterate(f, level + 1, s, s[level + 1], av[j], bv[j]);\n      }\n    }\n    return cv;\n  };\n  \n  return algorithm13;\n}\n\nexports.name = 'algorithm13';\nexports.factory = factory;\n","'use strict';\n\nvar clone = require('../../../utils/object').clone;\n\nfunction factory (type, config, load, typed) {\n\n  var DenseMatrix = type.DenseMatrix;\n\n  /**\n   * Iterates over DenseMatrix items and invokes the callback function f(Aij..z, b). \n   * Callback function invoked MxN times.\n   *\n   * C(i,j,...z) = f(Aij..z, b)\n   *\n   * @param {Matrix}   a                 The DenseMatrix instance (A)\n   * @param {Scalar}   b                 The Scalar value\n   * @param {Function} callback          The f(Aij..z,b) operation to invoke\n   * @param {boolean}  inverse           A true value indicates callback should be invoked f(b,Aij..z)\n   *\n   * @return {Matrix}                    DenseMatrix (C)\n   *\n   * https://github.com/josdejong/mathjs/pull/346#issuecomment-97659042\n   */\n  var algorithm14 = function (a, b, callback, inverse) {\n    // a arrays\n    var adata = a._data;\n    var asize = a._size;\n    var adt = a._datatype;\n    \n    // datatype\n    var dt;\n    // callback signature to use\n    var cf = callback;\n\n    // process data types\n    if (typeof adt === 'string') {\n      // datatype\n      dt = adt;\n      // convert b to the same datatype\n      b = typed.convert(b, dt);\n      // callback\n      cf = typed.find(callback, [dt, dt]);\n    }\n    \n    // populate cdata, iterate through dimensions\n    var cdata = asize.length > 0 ? _iterate(cf, 0, asize, asize[0], adata, b, inverse) : [];\n\n    // c matrix\n    return new DenseMatrix({\n      data: cdata,\n      size: clone(asize),\n      datatype: dt\n    });\n  };\n  \n  // recursive function\n  var _iterate = function (f, level, s, n, av, bv, inverse) {\n    // initialize array for this level\n    var cv = [];\n    // check we reach the last level\n    if (level === s.length - 1) {\n      // loop arrays in last level\n      for (var i = 0; i < n; i++) {\n        // invoke callback and store value\n        cv[i] = inverse ? f(bv, av[i]) : f(av[i], bv);\n      }\n    }\n    else {\n      // iterate current level\n      for (var j = 0; j < n; j++) {\n        // iterate next level\n        cv[j] = _iterate(f, level + 1, s, s[level + 1], av[j], bv, inverse);\n      }\n    }\n    return cv;\n  };\n\n  return algorithm14;\n}\n\nexports.name = 'algorithm14';\nexports.factory = factory;\n","'use strict';\n\nvar extend = require('../../utils/object').extend;\n\nfunction factory (type, config, load, typed) {\n\n  var matrix = load(require('../../type/matrix/function/matrix'));\n  var addScalar = load(require('./addScalar'));\n  var latex = require('../../utils/latex.js');\n  \n  var algorithm01 = load(require('../../type/matrix/utils/algorithm01'));\n  var algorithm04 = load(require('../../type/matrix/utils/algorithm04'));\n  var algorithm10 = load(require('../../type/matrix/utils/algorithm10'));\n  var algorithm13 = load(require('../../type/matrix/utils/algorithm13'));\n  var algorithm14 = load(require('../../type/matrix/utils/algorithm14'));\n\n  /**\n   * Add two or more values, `x + y`.\n   * For matrices, the function is evaluated element wise.\n   *\n   * Syntax:\n   *\n   *    math.add(x, y)\n   *    math.add(x, y, z, ...)\n   *\n   * Examples:\n   *\n   *    math.add(2, 3);               // returns number 5\n   *    math.add(2, 3, 4);            // returns number 9\n   *\n   *    var a = math.complex(2, 3);\n   *    var b = math.complex(-4, 1);\n   *    math.add(a, b);               // returns Complex -2 + 4i\n   *\n   *    math.add([1, 2, 3], 4);       // returns Array [5, 6, 7]\n   *\n   *    var c = math.unit('5 cm');\n   *    var d = math.unit('2.1 mm');\n   *    math.add(c, d);               // returns Unit 52.1 mm\n   *\n   *    math.add(\"2.3\", \"4\");         // returns number 6.3\n   *\n   * See also:\n   *\n   *    subtract, sum\n   *\n   * @param  {number | BigNumber | Fraction | Complex | Unit | Array | Matrix} x First value to add\n   * @param  {number | BigNumber | Fraction | Complex | Unit | Array | Matrix} y Second value to add\n   * @return {number | BigNumber | Fraction | Complex | Unit | Array | Matrix} Sum of `x` and `y`\n   */\n  var add = typed('add', extend({\n    // we extend the signatures of addScalar with signatures dealing with matrices\n\n    'Matrix, Matrix': function (x, y) {\n      // result\n      var c;\n      \n      // process matrix storage\n      switch (x.storage()) {\n        case 'sparse':\n          switch (y.storage()) {\n            case 'sparse':\n              // sparse + sparse\n              c = algorithm04(x, y, addScalar);\n              break;\n            default:\n              // sparse + dense\n              c = algorithm01(y, x, addScalar, true);\n              break;\n          }\n          break;\n        default:\n          switch (y.storage()) {\n            case 'sparse':\n              // dense + sparse\n              c = algorithm01(x, y, addScalar, false);\n              break;\n            default:\n              // dense + dense\n              c = algorithm13(x, y, addScalar);\n              break;\n          }\n          break;\n      }\n      return c;\n    },\n    \n    'Array, Array': function (x, y) {\n      // use matrix implementation\n      return add(matrix(x), matrix(y)).valueOf();\n    },\n    \n    'Array, Matrix': function (x, y) {\n      // use matrix implementation\n      return add(matrix(x), y);\n    },\n    \n    'Matrix, Array': function (x, y) {\n      // use matrix implementation\n      return add(x, matrix(y));\n    },\n    \n    'Matrix, any': function (x, y) {\n      // result\n      var c;\n      // check storage format\n      switch (x.storage()) {\n        case 'sparse':\n          c = algorithm10(x, y, addScalar, false);\n          break;\n        default:\n          c = algorithm14(x, y, addScalar, false);\n          break;\n      }\n      return c;\n    },\n    \n    'any, Matrix': function (x, y) {\n      // result\n      var c;\n      // check storage format\n      switch (y.storage()) {\n        case 'sparse':\n          c = algorithm10(y, x, addScalar, true);\n          break;\n        default:\n          c = algorithm14(y, x, addScalar, true);\n          break;\n      }\n      return c;\n    },\n    \n    'Array, any': function (x, y) {\n      // use matrix implementation\n      return algorithm14(matrix(x), y, addScalar, false).valueOf();\n    },\n\n    'any, Array': function (x, y) {\n      // use matrix implementation\n      return algorithm14(matrix(y), x, addScalar, true).valueOf();\n    },\n\n    'any, any': addScalar,\n\n    'any, any, ...any': function (x, y, rest) {\n      var result = add(x, y);\n\n      for (var i = 0; i < rest.length; i++) {\n        result = add(result, rest[i]);\n      }\n\n      return result;\n    }\n  }, addScalar.signatures));\n\n  add.toTex = {\n    2: '\\\\left(${args[0]}' + latex.operators['add'] + '${args[1]}\\\\right)'\n  };\n  \n  return add;\n}\n\nexports.name = 'add';\nexports.factory = factory;\n","'use strict';\n\nfunction factory (type, config, load) {\n  \n  var add = load(require('../../function/arithmetic/add'));\n  var equalScalar = load(require('../../function/relational/equalScalar'));\n  \n  /**\n   * An ordered Sparse Accumulator is a representation for a sparse vector that includes a dense array \n   * of the vector elements and an ordered list of non-zero elements.\n   */\n  function Spa() {\n    if (!(this instanceof Spa))\n      throw new SyntaxError('Constructor must be called with the new operator');\n    \n    // allocate vector, TODO use typed arrays\n    this._values = [];\n    this._heap = new type.FibonacciHeap();\n  }\n\n  /**\n   * Attach type information\n   */\n  Spa.prototype.type = 'Spa';\n  Spa.prototype.isSpa = true;\n\n  /**\n   * Set the value for index i.\n   *\n   * @param {number} i                       The index\n   * @param {number | BigNumber | Complex}   The value at index i\n   */\n  Spa.prototype.set = function (i, v) {\n    // check we have a value @ i\n    if (!this._values[i]) {\n      // insert in heap\n      var node = this._heap.insert(i, v);\n      // set the value @ i\n      this._values[i] = node;\n    }\n    else {\n      // update the value @ i\n      this._values[i].value = v;\n    }\n  };\n  \n  Spa.prototype.get = function (i) {\n    var node = this._values[i];\n    if (node)\n      return node.value;\n    return 0;\n  };\n  \n  Spa.prototype.accumulate = function (i, v) {\n    // node @ i\n    var node = this._values[i];\n    if (!node) {\n      // insert in heap\n      node = this._heap.insert(i, v);\n      // initialize value\n      this._values[i] = node;\n    }\n    else {\n      // accumulate value\n      node.value = add(node.value, v);\n    }\n  };\n  \n  Spa.prototype.forEach = function (from, to, callback) {\n    // references\n    var heap = this._heap;\n    var values = this._values;\n    // nodes\n    var nodes = [];\n    // node with minimum key, save it\n    var node = heap.extractMinimum();\n    if (node)\n      nodes.push(node);\n    // extract nodes from heap (ordered)\n    while (node && node.key <= to) {\n      // check it is in range\n      if (node.key >= from) {\n        // check value is not zero\n        if (!equalScalar(node.value, 0)) {\n          // invoke callback\n          callback(node.key, node.value, this);\n        }\n      }\n      // extract next node, save it\n      node = heap.extractMinimum();\n      if (node)\n        nodes.push(node);\n    }\n    // reinsert all nodes in heap\n    for (var i = 0; i < nodes.length; i++) {\n      // current node\n      var n = nodes[i];\n      // insert node in heap\n      node = heap.insert(n.key, n.value);\n      // update values\n      values[node.key] = node;\n    }\n  };\n  \n  Spa.prototype.swap = function (i, j) {\n    // node @ i and j\n    var nodei = this._values[i];\n    var nodej = this._values[j];\n    // check we need to insert indeces\n    if (!nodei && nodej) {\n      // insert in heap\n      nodei = this._heap.insert(i, nodej.value);\n      // remove from heap\n      this._heap.remove(nodej);\n      // set values\n      this._values[i] = nodei;\n      this._values[j] = undefined;\n    }\n    else if (nodei && !nodej) {\n      // insert in heap\n      nodej = this._heap.insert(j, nodei.value);\n      // remove from heap\n      this._heap.remove(nodei);\n      // set values\n      this._values[j] = nodej;\n      this._values[i] = undefined;\n    }\n    else if (nodei && nodej) {\n      // swap values\n      var v = nodei.value;\n      nodei.value = nodej.value;\n      nodej.value = v;\n    }\n  };\n  \n  return Spa;\n}\n\nexports.name = 'Spa';\nexports.path = 'type';\nexports.factory = factory;\n","'use strict';\n\nvar DimensionError = require('../../../error/DimensionError');\n\nfunction factory (type, config, load, typed) {\n\n  var DenseMatrix = type.DenseMatrix;\n\n  /**\n   * Iterates over SparseMatrix items and invokes the callback function f(Dij, Sij).\n   * Callback function invoked M*N times.\n   *\n   *\n   *            f(Dij, Sij)  ; S(i,j) !== 0\n   * C(i,j) = \n   *            f(Dij, 0)    ; otherwise\n   *\n   *\n   * @param {Matrix}   denseMatrix       The DenseMatrix instance (D)\n   * @param {Matrix}   sparseMatrix      The SparseMatrix instance (C)\n   * @param {Function} callback          The f(Dij,Sij) operation to invoke, where Dij = DenseMatrix(i,j) and Sij = SparseMatrix(i,j)\n   * @param {boolean}  inverse           A true value indicates callback should be invoked f(Sij,Dij)\n   *\n   * @return {Matrix}                    DenseMatrix (C)\n   *\n   * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97477571\n   */\n  var algorithm03 = function (denseMatrix, sparseMatrix, callback, inverse) {\n    // dense matrix arrays\n    var adata = denseMatrix._data;\n    var asize = denseMatrix._size;\n    var adt = denseMatrix._datatype;\n    // sparse matrix arrays\n    var bvalues = sparseMatrix._values;\n    var bindex = sparseMatrix._index;\n    var bptr = sparseMatrix._ptr;\n    var bsize = sparseMatrix._size;\n    var bdt = sparseMatrix._datatype;\n\n    // validate dimensions\n    if (asize.length !== bsize.length)\n      throw new DimensionError(asize.length, bsize.length);\n\n    // check rows & columns\n    if (asize[0] !== bsize[0] || asize[1] !== bsize[1])\n      throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n\n    // sparse matrix cannot be a Pattern matrix\n    if (!bvalues)\n      throw new Error('Cannot perform operation on Dense Matrix and Pattern Sparse Matrix');\n\n    // rows & columns\n    var rows = asize[0];\n    var columns = asize[1];\n\n    // datatype\n    var dt;\n    // zero value\n    var zero = 0;\n    // callback signature to use\n    var cf = callback;\n\n    // process data types\n    if (typeof adt === 'string' && adt === bdt) {\n      // datatype\n      dt = adt;\n      // convert 0 to the same datatype\n      zero = typed.convert(0, dt);\n      // callback\n      cf = typed.find(callback, [dt, dt]);\n    }\n\n    // result (DenseMatrix)\n    var cdata = [];\n\n    // initialize dense matrix\n    for (var z = 0; z < rows; z++) {\n      // initialize row\n      cdata[z] = [];\n    }\n\n    // workspace\n    var x = [];\n    // marks indicating we have a value in x for a given column\n    var w = [];\n\n    // loop columns in b\n    for (var j = 0; j < columns; j++) {\n      // column mark\n      var mark = j + 1;\n      // values in column j\n      for (var k0 = bptr[j], k1 = bptr[j + 1], k = k0; k < k1; k++) {\n        // row\n        var i = bindex[k];\n        // update workspace\n        x[i] = inverse ? cf(bvalues[k], adata[i][j]) : cf(adata[i][j], bvalues[k]);\n        w[i] = mark;\n      }\n      // process workspace\n      for (var y = 0; y < rows; y++) {\n        // check we have a calculated value for current row\n        if (w[y] === mark) {\n          // use calculated value\n          cdata[y][j] = x[y];\n        }\n        else {\n          // calculate value\n          cdata[y][j] = inverse ? cf(zero, adata[y][j]) : cf(adata[y][j], zero);\n        }\n      }\n    }\n\n    // return dense matrix\n    return new DenseMatrix({\n      data: cdata,\n      size: [rows, columns],\n      datatype: dt\n    });\n  };\n  \n  return algorithm03;\n}\n\nexports.name = 'algorithm03';\nexports.factory = factory;\n","'use strict';\n\nvar DimensionError = require('../../../error/DimensionError');\n\nfunction factory (type, config, load, typed) {\n\n  var DenseMatrix = type.DenseMatrix;\n\n  /**\n   * Iterates over SparseMatrix A and SparseMatrix B items (zero and nonzero) and invokes the callback function f(Aij, Bij). \n   * Callback function invoked MxN times.\n   *\n   * C(i,j) = f(Aij, Bij)\n   *\n   * @param {Matrix}   a                 The SparseMatrix instance (A)\n   * @param {Matrix}   b                 The SparseMatrix instance (B)\n   * @param {Function} callback          The f(Aij,Bij) operation to invoke\n   *\n   * @return {Matrix}                    DenseMatrix (C)\n   *\n   * see https://github.com/josdejong/mathjs/pull/346#issuecomment-97620294\n   */\n  var algorithm07 = function (a, b, callback) {\n    // sparse matrix arrays\n    var asize = a._size;\n    var adt = a._datatype;\n    // sparse matrix arrays\n    var bsize = b._size;\n    var bdt = b._datatype;\n\n    // validate dimensions\n    if (asize.length !== bsize.length)\n      throw new DimensionError(asize.length, bsize.length);\n\n    // check rows & columns\n    if (asize[0] !== bsize[0] || asize[1] !== bsize[1])\n      throw new RangeError('Dimension mismatch. Matrix A (' + asize + ') must match Matrix B (' + bsize + ')');\n\n    // rows & columns\n    var rows = asize[0];\n    var columns = asize[1];\n\n    // datatype\n    var dt;\n    // zero value\n    var zero = 0;\n    // callback signature to use\n    var cf = callback;\n\n    // process data types\n    if (typeof adt === 'string' && adt === bdt) {\n      // datatype\n      dt = adt;\n      // convert 0 to the same datatype\n      zero = typed.convert(0, dt);\n      // callback\n      cf = typed.find(callback, [dt, dt]);\n    }\n\n    // vars\n    var i, j;\n    \n    // result arrays\n    var cdata = [];\n    // initialize c\n    for (i = 0; i < rows; i++)\n      cdata[i] = [];\n\n    // matrix\n    var c = new DenseMatrix({\n      data: cdata,\n      size: [rows, columns],\n      datatype: dt\n    });\n\n    // workspaces\n    var xa = [];\n    var xb = [];\n    // marks indicating we have a value in x for a given column\n    var wa = [];\n    var wb = [];\n\n    // loop columns\n    for (j = 0; j < columns; j++) {\n      // columns mark\n      var mark = j + 1;\n      // scatter the values of A(:,j) into workspace\n      _scatter(a, j, wa, xa, mark);\n      // scatter the values of B(:,j) into workspace\n      _scatter(b, j, wb, xb, mark);\n      // loop rows\n      for (i = 0; i < rows; i++) {\n        // matrix values @ i,j\n        var va = wa[i] === mark ? xa[i] : zero;\n        var vb = wb[i] === mark ? xb[i] : zero;\n        // invoke callback\n        cdata[i][j] = cf(va, vb);\n      }          \n    }\n\n    // return sparse matrix\n    return c;\n  };\n  \n  var _scatter = function (m, j, w, x, mark) {\n    // a arrays\n    var values = m._values;\n    var index = m._index;\n    var ptr = m._ptr;\n    // loop values in column j\n    for (var k = ptr[j], k1 = ptr[j + 1]; k < k1; k++) {\n      // row\n      var i = index[k];\n      // update workspace\n      w[i] = mark;\n      x[i] = values[k];\n    }\n  };\n  \n  return algorithm07;\n}\n\nexports.name = 'algorithm07';\nexports.factory = factory;\n","'use strict';\n\nfunction factory (type, config, load, typed) {\n\n  var DenseMatrix = type.DenseMatrix;\n\n  /**\n   * Iterates over SparseMatrix S nonzero items and invokes the callback function f(Sij, b). \n   * Callback function invoked MxN times.\n   *\n   *\n   *            f(Sij, b)  ; S(i,j) !== 0\n   * C(i,j) =   \n   *            f(0, b)    ; otherwise\n   *\n   *\n   * @param {Matrix}   s                 The SparseMatrix instance (S)\n   * @param {Scalar}   b                 The Scalar value\n   * @param {Function} callback          The f(Aij,b) operation to invoke\n   * @param {boolean}  inverse           A true value indicates callback should be invoked f(b,Sij)\n   *\n   * @return {Matrix}                    DenseMatrix (C)\n   *\n   * https://github.com/josdejong/mathjs/pull/346#issuecomment-97626813\n   */\n  var algorithm12 = function (s, b, callback, inverse) {\n    // sparse matrix arrays\n    var avalues = s._values;\n    var aindex = s._index;\n    var aptr = s._ptr;\n    var asize = s._size;\n    var adt = s._datatype;\n\n    // sparse matrix cannot be a Pattern matrix\n    if (!avalues)\n      throw new Error('Cannot perform operation on Pattern Sparse Matrix and Scalar value');\n\n    // rows & columns\n    var rows = asize[0];\n    var columns = asize[1];\n\n    // datatype\n    var dt;\n    // callback signature to use\n    var cf = callback;\n\n    // process data types\n    if (typeof adt === 'string') {\n      // datatype\n      dt = adt;\n      // convert b to the same datatype\n      b = typed.convert(b, dt);\n      // callback\n      cf = typed.find(callback, [dt, dt]);\n    }\n    \n    // result arrays\n    var cdata = [];\n    // matrix\n    var c = new DenseMatrix({\n      data: cdata,\n      size: [rows, columns],\n      datatype: dt\n    });\n\n    // workspaces\n    var x = [];\n    // marks indicating we have a value in x for a given column\n    var w = [];\n\n    // loop columns\n    for (var j = 0; j < columns; j++) {\n      // columns mark\n      var mark = j + 1;\n      // values in j\n      for (var k0 = aptr[j], k1 = aptr[j + 1], k = k0; k < k1; k++) {\n        // row\n        var r = aindex[k];\n        // update workspace\n        x[r] = avalues[k];\n        w[r] = mark;\n      }\n      // loop rows\n      for (var i = 0; i < rows; i++) {\n        // initialize C on first column\n        if (j === 0) {\n          // create row array\n          cdata[i] = [];\n        }\n        // check sparse matrix has a value @ i,j\n        if (w[i] === mark) {\n          // invoke callback, update C\n          cdata[i][j] = inverse ? cf(b, x[i]) : cf(x[i], b);\n        }\n        else {\n          // dense matrix value @ i, j\n          cdata[i][j] = inverse ? cf(b, 0) : cf(0, b);\n        }\n      }\n    }\n\n    // return sparse matrix\n    return c;\n  };\n  \n  return algorithm12;\n}\n\nexports.name = 'algorithm12';\nexports.factory = factory;\n","'use strict';\n\nvar nearlyEqual = require('../../utils/number').nearlyEqual;\nvar bigNearlyEqual = require('../../utils/bignumber/nearlyEqual');\n\nfunction factory (type, config, load, typed) {\n\n  var matrix = load(require('../../type/matrix/function/matrix'));\n\n  var algorithm03 = load(require('../../type/matrix/utils/algorithm03'));\n  var algorithm07 = load(require('../../type/matrix/utils/algorithm07'));\n  var algorithm12 = load(require('../../type/matrix/utils/algorithm12'));\n  var algorithm13 = load(require('../../type/matrix/utils/algorithm13'));\n  var algorithm14 = load(require('../../type/matrix/utils/algorithm14'));\n\n  var latex = require('../../utils/latex');\n\n  /**\n   * Test whether value x is smaller than y.\n   *\n   * The function returns true when x is smaller than y and the relative\n   * difference between x and y is smaller than the configured epsilon. The\n   * function cannot be used to compare values smaller than approximately 2.22e-16.\n   *\n   * For matrices, the function is evaluated element wise.\n   *\n   * Syntax:\n   *\n   *    math.smaller(x, y)\n   *\n   * Examples:\n   *\n   *    math.smaller(2, 3);            // returns true\n   *    math.smaller(5, 2 * 2);        // returns false\n   *\n   *    var a = math.unit('5 cm');\n   *    var b = math.unit('2 inch');\n   *    math.smaller(a, b);            // returns true\n   *\n   * See also:\n   *\n   *    equal, unequal, smallerEq, smaller, smallerEq, compare\n   *\n   * @param  {number | BigNumber | Fraction | boolean | Unit | string | Array | Matrix} x First value to compare\n   * @param  {number | BigNumber | Fraction | boolean | Unit | string | Array | Matrix} y Second value to compare\n   * @return {boolean | Array | Matrix} Returns true when the x is smaller than y, else returns false\n   */\n  var smaller = typed('smaller', {\n\n    'boolean, boolean': function (x, y) {\n      return x < y;\n    },\n\n    'number, number': function (x, y) {\n      return x < y && !nearlyEqual(x, y, config.epsilon);\n    },\n\n    'BigNumber, BigNumber': function (x, y) {\n      return x.lt(y) && !bigNearlyEqual(x, y, config.epsilon);\n    },\n\n    'Fraction, Fraction': function (x, y) {\n      return x.compare(y) === -1;\n    },\n\n    'Complex, Complex': function (x, y) {\n      throw new TypeError('No ordering relation is defined for complex numbers');\n    },\n\n    'Unit, Unit': function (x, y) {\n      if (!x.equalBase(y)) {\n        throw new Error('Cannot compare units with different base');\n      }\n      return smaller(x.value, y.value);\n    },\n\n    'string, string': function (x, y) {\n      return x < y;\n    },\n\n    'Matrix, Matrix': function (x, y) {\n      // result\n      var c;\n\n      // process matrix storage\n      switch (x.storage()) {\n        case 'sparse':\n          switch (y.storage()) {\n            case 'sparse':\n              // sparse + sparse\n              c = algorithm07(x, y, smaller);\n              break;\n            default:\n              // sparse + dense\n              c = algorithm03(y, x, smaller, true);\n              break;\n          }\n          break;\n        default:\n          switch (y.storage()) {\n            case 'sparse':\n              // dense + sparse\n              c = algorithm03(x, y, smaller, false);\n              break;\n            default:\n              // dense + dense\n              c = algorithm13(x, y, smaller);\n              break;\n          }\n          break;\n      }\n      return c;\n    },\n\n    'Array, Array': function (x, y) {\n      // use matrix implementation\n      return smaller(matrix(x), matrix(y)).valueOf();\n    },\n\n    'Array, Matrix': function (x, y) {\n      // use matrix implementation\n      return smaller(matrix(x), y);\n    },\n\n    'Matrix, Array': function (x, y) {\n      // use matrix implementation\n      return smaller(x, matrix(y));\n    },\n\n    'Matrix, any': function (x, y) {\n      // result\n      var c;\n      // check storage format\n      switch (x.storage()) {\n        case 'sparse':\n          c = algorithm12(x, y, smaller, false);\n          break;\n        default:\n          c = algorithm14(x, y, smaller, false);\n          break;\n      }\n      return c;\n    },\n\n    'any, Matrix': function (x, y) {\n      // result\n      var c;\n      // check storage format\n      switch (y.storage()) {\n        case 'sparse':\n          c = algorithm12(y, x, smaller, true);\n          break;\n        default:\n          c = algorithm14(y, x, smaller, true);\n          break;\n      }\n      return c;\n    },\n\n    'Array, any': function (x, y) {\n      // use matrix implementation\n      return algorithm14(matrix(x), y, smaller, false).valueOf();\n    },\n\n    'any, Array': function (x, y) {\n      // use matrix implementation\n      return algorithm14(matrix(y), x, smaller, true).valueOf();\n    }\n  });\n\n  smaller.toTex = {\n    2: '\\\\left(${args[0]}' + latex.operators['smaller'] + '${args[1]}\\\\right)'\n  };\n\n  return smaller;\n}\n\nexports.name = 'smaller';\nexports.factory = factory;\n","'use strict';\n\nvar nearlyEqual = require('../../utils/number').nearlyEqual;\nvar bigNearlyEqual = require('../../utils/bignumber/nearlyEqual');\n\nfunction factory (type, config, load, typed) {\n  \n  var matrix = load(require('../../type/matrix/function/matrix'));\n\n  var algorithm03 = load(require('../../type/matrix/utils/algorithm03'));\n  var algorithm07 = load(require('../../type/matrix/utils/algorithm07'));\n  var algorithm12 = load(require('../../type/matrix/utils/algorithm12'));\n  var algorithm13 = load(require('../../type/matrix/utils/algorithm13'));\n  var algorithm14 = load(require('../../type/matrix/utils/algorithm14'));\n\n  var latex = require('../../utils/latex');\n\n  /**\n   * Test whether value x is larger than y.\n   *\n   * The function returns true when x is larger than y and the relative\n   * difference between x and y is larger than the configured epsilon. The\n   * function cannot be used to compare values smaller than approximately 2.22e-16.\n   *\n   * For matrices, the function is evaluated element wise.\n   *\n   * Syntax:\n   *\n   *    math.larger(x, y)\n   *\n   * Examples:\n   *\n   *    math.larger(2, 3);             // returns false\n   *    math.larger(5, 2 + 2);         // returns true\n   *\n   *    var a = math.unit('5 cm');\n   *    var b = math.unit('2 inch');\n   *    math.larger(a, b);             // returns false\n   *\n   * See also:\n   *\n   *    equal, unequal, smaller, smallerEq, largerEq, compare\n   *\n   * @param  {number | BigNumber | Fraction | boolean | Unit | string | Array | Matrix} x First value to compare\n   * @param  {number | BigNumber | Fraction | boolean | Unit | string | Array | Matrix} y Second value to compare\n   * @return {boolean | Array | Matrix} Returns true when the x is larger than y, else returns false\n   */\n  var larger = typed('larger', {\n\n    'boolean, boolean': function (x, y) {\n      return x > y;\n    },\n\n    'number, number': function (x, y) {\n      return x > y && !nearlyEqual(x, y, config.epsilon);\n    },\n\n    'BigNumber, BigNumber': function (x, y) {\n      return x.gt(y) && !bigNearlyEqual(x, y, config.epsilon);\n    },\n\n    'Fraction, Fraction': function (x, y) {\n      return x.compare(y) === 1;\n    },\n\n    'Complex, Complex': function () {\n      throw new TypeError('No ordering relation is defined for complex numbers');\n    },\n\n    'Unit, Unit': function (x, y) {\n      if (!x.equalBase(y)) {\n        throw new Error('Cannot compare units with different base');\n      }\n      return larger(x.value, y.value);\n    },\n\n    'string, string': function (x, y) {\n      return x > y;\n    },\n\n    'Matrix, Matrix': function (x, y) {\n      // result\n      var c;\n\n      // process matrix storage\n      switch (x.storage()) {\n        case 'sparse':\n          switch (y.storage()) {\n            case 'sparse':\n              // sparse + sparse\n              c = algorithm07(x, y, larger);\n              break;\n            default:\n              // sparse + dense\n              c = algorithm03(y, x, larger, true);\n              break;\n          }\n          break;\n        default:\n          switch (y.storage()) {\n            case 'sparse':\n              // dense + sparse\n              c = algorithm03(x, y, larger, false);\n              break;\n            default:\n              // dense + dense\n              c = algorithm13(x, y, larger);\n              break;\n          }\n          break;\n      }\n      return c;\n    },\n\n    'Array, Array': function (x, y) {\n      // use matrix implementation\n      return larger(matrix(x), matrix(y)).valueOf();\n    },\n\n    'Array, Matrix': function (x, y) {\n      // use matrix implementation\n      return larger(matrix(x), y);\n    },\n\n    'Matrix, Array': function (x, y) {\n      // use matrix implementation\n      return larger(x, matrix(y));\n    },\n\n    'Matrix, any': function (x, y) {\n      // result\n      var c;\n      // check storage format\n      switch (x.storage()) {\n        case 'sparse':\n          c = algorithm12(x, y, larger, false);\n          break;\n        default:\n          c = algorithm14(x, y, larger, false);\n          break;\n      }\n      return c;\n    },\n\n    'any, Matrix': function (x, y) {\n      // result\n      var c;\n      // check storage format\n      switch (y.storage()) {\n        case 'sparse':\n          c = algorithm12(y, x, larger, true);\n          break;\n        default:\n          c = algorithm14(y, x, larger, true);\n          break;\n      }\n      return c;\n    },\n\n    'Array, any': function (x, y) {\n      // use matrix implementation\n      return algorithm14(matrix(x), y, larger, false).valueOf();\n    },\n\n    'any, Array': function (x, y) {\n      // use matrix implementation\n      return algorithm14(matrix(y), x, larger, true).valueOf();\n    }\n  });\n\n  larger.toTex = {\n    2: '\\\\left(${args[0]}' + latex.operators['larger'] + '${args[1]}\\\\right)'\n  };\n\n  return larger;\n}\n\nexports.name = 'larger';\nexports.factory = factory;\n","'use strict';\n\nfunction factory (type, config, load, typed) {\n  \n  var smaller = load(require('../../function/relational/smaller'));\n  var larger = load(require('../../function/relational/larger'));\n  \n  var oneOverLogPhi = 1.0 / Math.log((1.0 + Math.sqrt(5.0)) / 2.0);\n  \n  /**\n   * Fibonacci Heap implementation, used interally for Matrix math.\n   * @class FibonacciHeap\n   * @constructor FibonacciHeap\n   */\n  function FibonacciHeap() {\n    if (!(this instanceof FibonacciHeap))\n      throw new SyntaxError('Constructor must be called with the new operator');\n\n    // initialize fields\n    this._minimum = null;\n    this._size = 0;\n  }\n\n  /**\n   * Attach type information\n   */\n  FibonacciHeap.prototype.type = 'FibonacciHeap';\n  FibonacciHeap.prototype.isFibonacciHeap = true;\n\n  /**\n   * Inserts a new data element into the heap. No heap consolidation is\n   * performed at this time, the new node is simply inserted into the root\n   * list of this heap. Running time: O(1) actual.\n   * @memberof FibonacciHeap\n   */\n  FibonacciHeap.prototype.insert = function (key, value) {\n    // create node\n    var node = {\n      key: key,\n      value: value,\n      degree: 0\n    };\n    // check we have a node in the minimum\n    if (this._minimum) {\n      // minimum node\n      var minimum = this._minimum;\n      // update left & right of node\n      node.left = minimum;\n      node.right = minimum.right;\n      minimum.right = node;\n      node.right.left = node;\n      // update minimum node in heap if needed\n      if (smaller(key, minimum.key)) {\n        // node has a smaller key, use it as minimum\n        this._minimum = node;\n      }\n    }\n    else {\n      // set left & right\n      node.left = node;\n      node.right = node;\n      // this is the first node\n      this._minimum = node;\n    }\n    // increment number of nodes in heap\n    this._size++;\n    // return node\n    return node;\n  };\n\n  /**\n   * Returns the number of nodes in heap. Running time: O(1) actual.\n   * @memberof FibonacciHeap\n   */\n  FibonacciHeap.prototype.size = function () {\n    return this._size;\n  };\n\n  /**\n   * Removes all elements from this heap.\n   * @memberof FibonacciHeap\n   */\n  FibonacciHeap.prototype.clear = function () {\n    this._minimum = null;\n    this._size = 0;\n  };\n\n  /**\n   * Returns true if the heap is empty, otherwise false.\n   * @memberof FibonacciHeap\n   */\n  FibonacciHeap.prototype.isEmpty = function () {\n    return !!this._minimum;\n  };\n  \n  /**\n   * Extracts the node with minimum key from heap. Amortized running \n   * time: O(log n).\n   * @memberof FibonacciHeap\n   */\n  FibonacciHeap.prototype.extractMinimum = function () {\n    // node to remove\n    var node = this._minimum;\n    // check we have a minimum\n    if (node === null)\n      return node;\n    // current minimum\n    var minimum = this._minimum;\n    // get number of children\n    var numberOfChildren = node.degree;\n    // pointer to the first child\n    var x = node.child;\n    // for each child of node do...\n    while (numberOfChildren > 0) {\n      // store node in right side\n      var tempRight = x.right;\n      // remove x from child list\n      x.left.right = x.right;\n      x.right.left = x.left;\n      // add x to root list of heap\n      x.left = minimum;\n      x.right = minimum.right;\n      minimum.right = x;\n      x.right.left = x;\n      // set Parent[x] to null\n      x.parent = null;\n      x = tempRight;\n      numberOfChildren--;\n    }\n    // remove node from root list of heap\n    node.left.right = node.right;\n    node.right.left = node.left;\n    // update minimum\n    if (node == node.right) {\n      // empty\n      minimum = null;\n    }\n    else {\n      // update minimum\n      minimum = node.right;\n      // we need to update the pointer to the root with minimum key\n      minimum = _findMinimumNode(minimum, this._size);\n    }\n    // decrement size of heap\n    this._size--;\n    // update minimum\n    this._minimum = minimum;\n    // return node\n    return node;\n  };\n  \n  /**\n   * Removes a node from the heap given the reference to the node. The trees\n   * in the heap will be consolidated, if necessary. This operation may fail\n   * to remove the correct element if there are nodes with key value -Infinity.\n   * Running time: O(log n) amortized.\n   * @memberof FibonacciHeap\n   */\n  FibonacciHeap.prototype.remove = function (node) {\n    // decrease key value\n    this._minimum = _decreaseKey(this._minimum, node, -1);\n    // remove the smallest\n    this.extractMinimum();\n  };\n  \n  /**\n   * Decreases the key value for a heap node, given the new value to take on.\n   * The structure of the heap may be changed and will not be consolidated. \n   * Running time: O(1) amortized.\n   * @memberof FibonacciHeap\n   */\n  var _decreaseKey = function (minimum, node, key) {\n    // set node key\n    node.key = key;\n    // get parent node\n    var parent = node.parent;\n    if (parent && smaller(node.key, parent.key)) {\n      // remove node from parent\n      _cut(minimum, node, parent);\n      // remove all nodes from parent to the root parent\n      _cascadingCut(minimum, parent);\n    }\n    // update minimum node if needed\n    if (smaller(node.key, minimum.key))\n      minimum = node;\n    // return minimum\n    return minimum;\n  };\n  \n  /**\n   * The reverse of the link operation: removes node from the child list of parent.\n   * This method assumes that min is non-null. Running time: O(1).\n   * @memberof FibonacciHeap\n   */\n  var _cut = function (minimum, node, parent) {\n    // remove node from parent children and decrement Degree[parent]\n    node.left.right = node.right;\n    node.right.left = node.left;\n    parent.degree--;\n    // reset y.child if necessary\n    if (parent.child == node)\n      parent.child = node.right;\n    // remove child if degree is 0\n    if (parent.degree === 0)\n      parent.child = null;\n    // add node to root list of heap\n    node.left = minimum;\n    node.right = minimum.right;\n    minimum.right = node;\n    node.right.left = node;\n    // set parent[node] to null\n    node.parent = null;\n    // set mark[node] to false\n    node.mark = false;\n  };\n  \n  /**\n   * Performs a cascading cut operation. This cuts node from its parent and then\n   * does the same for its parent, and so on up the tree.\n   * Running time: O(log n); O(1) excluding the recursion.\n   * @memberof FibonacciHeap\n   */\n  var _cascadingCut= function (minimum, node) {\n    // store parent node\n    var parent = node.parent;\n    // if there's a parent...\n    if (!parent)\n      return;\n    // if node is unmarked, set it marked\n    if (!node.mark) {\n      node.mark = true;\n    }\n    else {\n      // it's marked, cut it from parent\n      _cut(minimum, node, parent);\n      // cut its parent as well\n      _cascadingCut(parent);\n    }\n  };\n  \n  /**\n   * Make the first node a child of the second one. Running time: O(1) actual.\n   * @memberof FibonacciHeap\n   */\n  var _linkNodes = function (node, parent) {\n    // remove node from root list of heap\n    node.left.right = node.right;\n    node.right.left = node.left;\n    // make node a Child of parent\n    node.parent = parent;\n    if (!parent.child) {\n      parent.child = node;\n      node.right = node;\n      node.left = node;\n    }\n    else {\n      node.left = parent.child;\n      node.right = parent.child.right;\n      parent.child.right = node;\n      node.right.left = node;\n    }\n    // increase degree[parent]\n    parent.degree++;\n    // set mark[node] false\n    node.mark = false;\n  };\n  \n  var _findMinimumNode = function (minimum, size) {\n    // to find trees of the same degree efficiently we use an array of length O(log n) in which we keep a pointer to one root of each degree\n    var arraySize = Math.floor(Math.log(size) * oneOverLogPhi) + 1;\n    // create list with initial capacity\n    var array = new Array(arraySize);\n    // find the number of root nodes.\n    var numRoots = 0;\n    var x = minimum;\n    if (x) {\n      numRoots++;\n      x = x.right;\n      while (x !== minimum) {\n        numRoots++;\n        x = x.right;\n      }\n    }\n    // vars\n    var y;\n    // For each node in root list do...\n    while (numRoots > 0) {\n      // access this node's degree..\n      var d = x.degree;\n      // get next node\n      var next = x.right;\n      // check if there is a node already in array with the same degree\n      while (true) {\n        // get node with the same degree is any\n        y = array[d];\n        if (!y)\n          break;\n        // make one node with the same degree a child of the other, do this based on the key value.\n        if (larger(x.key, y.key)) {\n          var temp = y;\n          y = x;\n          x = temp;\n        }\n        // make y a child of x\n        _linkNodes(y, x);\n        // we have handled this degree, go to next one.\n        array[d] = null;\n        d++;\n      }\n      // save this node for later when we might encounter another of the same degree.\n      array[d] = x;\n      // move forward through list.\n      x = next;\n      numRoots--;\n    }\n    // Set min to null (effectively losing the root list) and reconstruct the root list from the array entries in array[].\n    minimum = null;\n    // loop nodes in array\n    for (var i = 0; i < arraySize; i++) {\n      // get current node\n      y = array[i];\n      if (!y)\n        continue;\n      // check if we have a linked list\n      if (minimum) {\n        // First remove node from root list.\n        y.left.right = y.right;\n        y.right.left = y.left;\n        // now add to root list, again.\n        y.left = minimum;\n        y.right = minimum.right;\n        minimum.right = y;\n        y.right.left = y;\n        // check if this is a new min.\n        if (smaller(y.key, minimum.key))\n          minimum = y;\n      }\n      else\n        minimum = y;\n    }\n    return minimum;\n  };\n  \n  return FibonacciHeap;\n}\n\nexports.name = 'FibonacciHeap';\nexports.path = 'type';\nexports.factory = factory;\n","'use strict';\n\nvar util = require('../../utils/index');\n\nvar string = util.string;\nvar object = util.object;\n\nvar isArray = Array.isArray;\nvar isString = string.isString;\n\nfunction factory (type, config, load) {\n\n  var DenseMatrix = load(require('./DenseMatrix'));\n\n  var smaller = load(require('../../function/relational/smaller'));\n\n  function ImmutableDenseMatrix(data, datatype) {\n    if (!(this instanceof ImmutableDenseMatrix))\n      throw new SyntaxError('Constructor must be called with the new operator');\n    if (datatype && !isString(datatype))\n      throw new Error('Invalid datatype: ' + datatype);\n\n    if ((data && data.isMatrix === true) || isArray(data)) {\n      // use DenseMatrix implementation\n      var matrix = new DenseMatrix(data, datatype);\n      // internal structures\n      this._data = matrix._data;\n      this._size = matrix._size;\n      this._datatype = matrix._datatype;\n      this._min = null;\n      this._max = null;\n    }\n    else if (data && isArray(data.data) && isArray(data.size)) {\n      // initialize fields from JSON representation\n      this._data = data.data;\n      this._size = data.size;\n      this._datatype = data.datatype;\n      this._min = typeof data.min !== 'undefined' ? data.min : null;\n      this._max = typeof data.max !== 'undefined' ? data.max : null;\n    }\n    else if (data) {\n      // unsupported type\n      throw new TypeError('Unsupported type of data (' + util.types.type(data) + ')');\n    }\n    else {\n      // nothing provided\n      this._data = [];\n      this._size = [0];\n      this._datatype = datatype;\n      this._min = null;\n      this._max = null;\n    }\n  }\n\n  ImmutableDenseMatrix.prototype = new DenseMatrix();\n\n  /**\n   * Attach type information\n   */\n  ImmutableDenseMatrix.prototype.type = 'ImmutableDenseMatrix';\n  ImmutableDenseMatrix.prototype.isImmutableDenseMatrix = true;\n\n  /**\n   * Get a subset of the matrix, or replace a subset of the matrix.\n   *\n   * Usage:\n   *     var subset = matrix.subset(index)               // retrieve subset\n   *     var value = matrix.subset(index, replacement)   // replace subset\n   *\n   * @param {Index} index\n   * @param {Array | ImmutableDenseMatrix | *} [replacement]\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be filled with zeros.\n   */\n  ImmutableDenseMatrix.prototype.subset = function (index) {\n    switch (arguments.length) {\n      case 1:\n        // use base implementation\n        var m = DenseMatrix.prototype.subset.call(this, index);\n        // check result is a matrix\n        if (m.isMatrix) {\n          // return immutable matrix\n          return new ImmutableDenseMatrix({\n            data: m._data,\n            size: m._size,\n            datatype: m._datatype\n          });\n        }\n        return m;\n        \n        // intentional fall through\n      case 2:\n      case 3:\n        throw new Error('Cannot invoke set subset on an Immutable Matrix instance');\n\n      default:\n        throw new SyntaxError('Wrong number of arguments');\n    }\n  };\n\n  /**\n   * Replace a single element in the matrix.\n   * @param {Number[]} index   Zero-based index\n   * @param {*} value\n   * @param {*} [defaultValue]        Default value, filled in on new entries when\n   *                                  the matrix is resized. If not provided,\n   *                                  new matrix elements will be left undefined.\n   * @return {ImmutableDenseMatrix} self\n   */\n  ImmutableDenseMatrix.prototype.set = function () {\n    throw new Error('Cannot invoke set on an Immutable Matrix instance');\n  };\n\n  /**\n   * Resize the matrix to the given size. Returns a copy of the matrix when\n   * `copy=true`, otherwise return the matrix itself (resize in place).\n   *\n   * @param {Number[]} size           The new size the matrix should have.\n   * @param {*} [defaultValue=0]      Default value, filled in on new entries.\n   *                                  If not provided, the matrix elements will\n   *                                  be filled with zeros.\n   * @param {boolean} [copy]          Return a resized copy of the matrix\n   *\n   * @return {Matrix}                 The resized matrix\n   */\n  ImmutableDenseMatrix.prototype.resize = function () {\n    throw new Error('Cannot invoke resize on an Immutable Matrix instance');\n  };\n\n  /**\n   * Create a clone of the matrix\n   * @return {ImmutableDenseMatrix} clone\n   */\n  ImmutableDenseMatrix.prototype.clone = function () {\n    var m = new ImmutableDenseMatrix({\n      data: object.clone(this._data),\n      size: object.clone(this._size),\n      datatype: this._datatype\n    });\n    return m;\n  };\n\n  /**\n   * Get a JSON representation of the matrix\n   * @returns {Object}\n   */\n  ImmutableDenseMatrix.prototype.toJSON = function () {\n    return {\n      mathjs: 'ImmutableDenseMatrix',\n      data: this._data,\n      size: this._size,\n      datatype: this._datatype\n    };\n  };\n\n  /**\n   * Generate a matrix from a JSON object\n   * @param {Object} json  An object structured like\n   *                       `{\"mathjs\": \"ImmutableDenseMatrix\", data: [], size: []}`,\n   *                       where mathjs is optional\n   * @returns {ImmutableDenseMatrix}\n   */\n  ImmutableDenseMatrix.fromJSON = function (json) {\n    return new ImmutableDenseMatrix(json);\n  };\n\n  /**\n   * Swap rows i and j in Matrix.\n   *\n   * @param {Number} i       Matrix row index 1\n   * @param {Number} j       Matrix row index 2\n   *\n   * @return {Matrix}        The matrix reference\n   */\n  ImmutableDenseMatrix.prototype.swapRows = function () {\n    throw new Error('Cannot invoke swapRows on an Immutable Matrix instance');\n  };\n\n  /**\n   * Calculate the minimum value in the set\n   * @return {Number | undefined} min\n   */\n  ImmutableDenseMatrix.prototype.min = function () {\n    // check min has been calculated before\n    if (this._min === null) {\n      // minimum\n      var m = null;\n      // compute min\n      this.forEach(function (v) {\n        if (m === null || smaller(v, m))\n          m = v;\n      });\n      this._min = m !== null ? m : undefined;\n    }\n    return this._min;\n  };\n\n  /**\n   * Calculate the maximum value in the set\n   * @return {Number | undefined} max\n   */\n  ImmutableDenseMatrix.prototype.max = function () {\n    // check max has been calculated before\n    if (this._max === null) {\n      // maximum\n      var m = null;\n      // compute max\n      this.forEach(function (v) {\n        if (m === null || smaller(m, v))\n          m = v;\n      });\n      this._max = m !== null ? m : undefined;\n    }\n    return this._max;\n  };\n\n  // exports\n  return ImmutableDenseMatrix;\n}\n\nexports.name = 'ImmutableDenseMatrix';\nexports.path = 'type';\nexports.factory = factory;\n","'use strict';\n\nvar clone = require('../../utils/object').clone;\nvar isInteger = require('../../utils/number').isInteger;\n\nfunction factory (type) {\n  \n  /**\n   * Create an index. An Index can store ranges and sets for multiple dimensions.\n   * Matrix.get, Matrix.set, and math.subset accept an Index as input.\n   *\n   * Usage:\n   *     var index = new Index(range1, range2, matrix1, array1, ...);\n   *\n   * Where each parameter can be any of:\n   *     A number\n   *     A string (containing a name of an object property)\n   *     An instance of Range\n   *     An Array with the Set values\n   *     A Matrix with the Set values\n   *\n   * The parameters start, end, and step must be integer numbers.\n   *\n   * @class Index\n   * @Constructor Index\n   * @param {...*} ranges\n   */\n  function Index(ranges) {\n    if (!(this instanceof Index)) {\n      throw new SyntaxError('Constructor must be called with the new operator');\n    }\n\n    this._dimensions = [];\n    this._isScalar = true;\n\n    for (var i = 0, ii = arguments.length; i < ii; i++) {\n      var arg = arguments[i];\n\n      if (arg && (arg.isRange === true)) {\n        this._dimensions.push(arg);\n        this._isScalar = false;\n      }\n      else if (arg && (Array.isArray(arg) || arg.isMatrix === true)) {\n        // create matrix\n        var m = _createImmutableMatrix(arg.valueOf());\n        this._dimensions.push(m);\n        // size\n        var size = m.size();\n        // scalar\n        if (size.length !== 1 || size[0] !== 1) {\n          this._isScalar = false;\n        }\n      }\n      else if (typeof arg === 'number') {\n        this._dimensions.push(_createImmutableMatrix([arg]));\n      }\n      else if (typeof arg === 'string') {\n        // object property (arguments.count should be 1)\n        this._dimensions.push(arg);\n      }\n      // TODO: implement support for wildcard '*'\n      else {\n        throw new TypeError('Dimension must be an Array, Matrix, number, string, or Range');\n      }\n    }\n  }\n\n  /**\n   * Attach type information\n   */\n  Index.prototype.type = 'Index';\n  Index.prototype.isIndex = true;\n\n  function _createImmutableMatrix(arg) {\n    // loop array elements\n    for (var i = 0, l = arg.length; i < l; i++) {\n      if (typeof arg[i] !== 'number' || !isInteger(arg[i])) {\n        throw new TypeError('Index parameters must be positive integer numbers');\n      }\n    }\n    // create matrix\n    return new type.ImmutableDenseMatrix(arg);\n  }\n\n  /**\n   * Create a clone of the index\n   * @memberof Index\n   * @return {Index} clone\n   */\n  Index.prototype.clone = function () {\n    var index = new Index();\n    index._dimensions = clone(this._dimensions);\n    index._isScalar = this._isScalar;\n    return index;\n  };\n\n  /**\n   * Create an index from an array with ranges/numbers\n   * @memberof Index\n   * @param {Array.<Array | number>} ranges\n   * @return {Index} index\n   * @private\n   */\n  Index.create = function (ranges) {\n    var index = new Index();\n    Index.apply(index, ranges);\n    return index;\n  };\n\n  /**\n   * Retrieve the size of the index, the number of elements for each dimension.\n   * @memberof Index\n   * @returns {number[]} size\n   */\n  Index.prototype.size = function () {\n    var size = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var d = this._dimensions[i];\n      size[i] = (typeof d === 'string') ? 1 : d.size()[0];\n    }\n\n    return size;\n  };\n\n  /**\n   * Get the maximum value for each of the indexes ranges.\n   * @memberof Index\n   * @returns {number[]} max\n   */\n  Index.prototype.max = function () {\n    var values = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var range = this._dimensions[i];\n      values[i] = (typeof range === 'string') ? range : range.max();\n    }\n\n    return values;\n  };\n\n  /**\n   * Get the minimum value for each of the indexes ranges.\n   * @memberof Index\n   * @returns {number[]} min\n   */\n  Index.prototype.min = function () {\n    var values = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var range = this._dimensions[i];\n      values[i] = (typeof range === 'string') ? range : range.min();\n    }\n\n    return values;\n  };\n\n  /**\n   * Loop over each of the ranges of the index\n   * @memberof Index\n   * @param {Function} callback   Called for each range with a Range as first\n   *                              argument, the dimension as second, and the\n   *                              index object as third.\n   */\n  Index.prototype.forEach = function (callback) {\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      callback(this._dimensions[i], i, this);\n    }\n  };\n\n  /**\n   * Retrieve the dimension for the given index\n   * @memberof Index\n   * @param {Number} dim                  Number of the dimension\n   * @returns {Range | null} range\n   */\n  Index.prototype.dimension = function (dim) {\n    return this._dimensions[dim] || null;\n  };\n\n  /**\n   * Test whether this index contains an object property\n   * @returns {boolean} Returns true if the index is an object property\n   */\n  Index.prototype.isObjectProperty = function () {\n    return this._dimensions.length === 1 && typeof this._dimensions[0] === 'string';\n  };\n\n  /**\n   * Returns the object property name when the Index holds a single object property,\n   * else returns null\n   * @returns {string | null}\n   */\n  Index.prototype.getObjectProperty = function () {\n    return this.isObjectProperty() ? this._dimensions[0] : null;\n  };\n\n  /**\n   * Test whether this index contains only a single value.\n   *\n   * This is the case when the index is created with only scalar values as ranges,\n   * not for ranges resolving into a single value.\n   * @memberof Index\n   * @return {boolean} isScalar\n   */\n  Index.prototype.isScalar = function () {\n    return this._isScalar;\n  };\n\n  /**\n   * Expand the Index into an array.\n   * For example new Index([0,3], [2,7]) returns [[0,1,2], [2,3,4,5,6]]\n   * @memberof Index\n   * @returns {Array} array\n   */\n  Index.prototype.toArray = function () {\n    var array = [];\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var dimension = this._dimensions[i];\n      array.push((typeof dimension === 'string') ? dimension : dimension.toArray());\n    }\n    return array;\n  };\n\n  /**\n   * Get the primitive value of the Index, a two dimensional array.\n   * Equivalent to Index.toArray().\n   * @memberof Index\n   * @returns {Array} array\n   */\n  Index.prototype.valueOf = Index.prototype.toArray;\n\n  /**\n   * Get the string representation of the index, for example '[2:6]' or '[0:2:10, 4:7, [1,2,3]]'\n   * @memberof Index\n   * @returns {String} str\n   */\n  Index.prototype.toString = function () {\n    var strings = [];\n\n    for (var i = 0, ii = this._dimensions.length; i < ii; i++) {\n      var dimension = this._dimensions[i];\n      if (typeof dimension === 'string') {\n        strings.push(JSON.stringify(dimension));\n      }\n      else {\n        strings.push(dimension.toString());\n      }\n    }\n\n    return '[' + strings.join(', ') + ']';\n  };\n\n  /**\n   * Get a JSON representation of the Index\n   * @memberof Index\n   * @returns {Object} Returns a JSON object structured as:\n   *                   `{\"mathjs\": \"Index\", \"ranges\": [{\"mathjs\": \"Range\", start: 0, end: 10, step:1}, ...]}`\n   */\n  Index.prototype.toJSON = function () {\n    return {\n      mathjs: 'Index',\n      dimensions: this._dimensions\n    };\n  };\n\n  /**\n   * Instantiate an Index from a JSON object\n   * @memberof Index\n   * @param {Object} json A JSON object structured as:\n   *                     `{\"mathjs\": \"Index\", \"dimensions\": [{\"mathjs\": \"Range\", start: 0, end: 10, step:1}, ...]}`\n   * @return {Index}\n   */\n  Index.fromJSON = function (json) {\n    return Index.create(json.dimensions);\n  };\n\n  return Index;\n}\n\nexports.name = 'Index';\nexports.path = 'type';\nexports.factory = factory;\n","'use strict';\n\nvar number = require('../../utils/number');\n\nfunction factory (type, config, load, typed) {\n  /**\n   * Create a range. A range has a start, step, and end, and contains functions\n   * to iterate over the range.\n   *\n   * A range can be constructed as:\n   *     var range = new Range(start, end);\n   *     var range = new Range(start, end, step);\n   *\n   * To get the result of the range:\n   *     range.forEach(function (x) {\n   *         console.log(x);\n   *     });\n   *     range.map(function (x) {\n   *         return math.sin(x);\n   *     });\n   *     range.toArray();\n   *\n   * Example usage:\n   *     var c = new Range(2, 6);         // 2:1:5\n   *     c.toArray();                     // [2, 3, 4, 5]\n   *     var d = new Range(2, -3, -1);    // 2:-1:-2\n   *     d.toArray();                     // [2, 1, 0, -1, -2]\n   *\n   * @class Range\n   * @constructor Range\n   * @param {number} start  included lower bound\n   * @param {number} end    excluded upper bound\n   * @param {number} [step] step size, default value is 1\n   */\n  function Range(start, end, step) {\n    if (!(this instanceof Range)) {\n      throw new SyntaxError('Constructor must be called with the new operator');\n    }\n\n    if (start != null) {\n      if (start.isBigNumber === true)\n        start = start.toNumber();\n      else if (typeof start !== 'number')\n        throw new TypeError('Parameter start must be a number');\n    }\n    if (end != null) {\n      if (end.isBigNumber === true)\n        end = end.toNumber();\n      else if (typeof end !== 'number')\n        throw new TypeError('Parameter end must be a number');\n    }\n    if (step != null) {\n      if (step.isBigNumber === true)\n        step = step.toNumber();\n      else if (typeof step !== 'number')\n        throw new TypeError('Parameter step must be a number');\n    }\n\n    this.start = (start != null) ? parseFloat(start) : 0;\n    this.end   = (end != null)   ? parseFloat(end)   : 0;\n    this.step  = (step != null)  ? parseFloat(step)  : 1;\n  }\n\n  /**\n   * Attach type information\n   */\n  Range.prototype.type = 'Range';\n  Range.prototype.isRange = true;\n\n  /**\n   * Parse a string into a range,\n   * The string contains the start, optional step, and end, separated by a colon.\n   * If the string does not contain a valid range, null is returned.\n   * For example str='0:2:11'.\n   * @memberof Range\n   * @param {string} str\n   * @return {Range | null} range\n   */\n  Range.parse = function (str) {\n    if (typeof str !== 'string') {\n      return null;\n    }\n\n    var args = str.split(':');\n    var nums = args.map(function (arg) {\n      return parseFloat(arg);\n    });\n\n    var invalid = nums.some(function (num) {\n      return isNaN(num);\n    });\n    if (invalid) {\n      return null;\n    }\n\n    switch (nums.length) {\n      case 2:\n        return new Range(nums[0], nums[1]);\n      case 3:\n        return new Range(nums[0], nums[2], nums[1]);\n      default:\n        return null;\n    }\n  };\n\n  /**\n   * Create a clone of the range\n   * @return {Range} clone\n   */\n  Range.prototype.clone = function () {\n    return new Range(this.start, this.end, this.step);\n  };\n\n  /**\n   * Retrieve the size of the range.\n   * Returns an array containing one number, the number of elements in the range.\n   * @memberof Range\n   * @returns {number[]} size\n   */\n  Range.prototype.size = function () {\n    var len = 0,\n        start = this.start,\n        step = this.step,\n        end = this.end,\n        diff = end - start;\n\n    if (number.sign(step) == number.sign(diff)) {\n      len = Math.ceil((diff) / step);\n    }\n    else if (diff == 0) {\n      len = 0;\n    }\n\n    if (isNaN(len)) {\n      len = 0;\n    }\n    return [len];\n  };\n\n  /**\n   * Calculate the minimum value in the range\n   * @memberof Range\n   * @return {number | undefined} min\n   */\n  Range.prototype.min = function () {\n    var size = this.size()[0];\n\n    if (size > 0) {\n      if (this.step > 0) {\n        // positive step\n        return this.start;\n      }\n      else {\n        // negative step\n        return this.start + (size - 1) * this.step;\n      }\n    }\n    else {\n      return undefined;\n    }\n  };\n\n  /**\n   * Calculate the maximum value in the range\n   * @memberof Range\n   * @return {number | undefined} max\n   */\n  Range.prototype.max = function () {\n    var size = this.size()[0];\n\n    if (size > 0) {\n      if (this.step > 0) {\n        // positive step\n        return this.start + (size - 1) * this.step;\n      }\n      else {\n        // negative step\n        return this.start;\n      }\n    }\n    else {\n      return undefined;\n    }\n  };\n\n\n  /**\n   * Execute a callback function for each value in the range.\n   * @memberof Range\n   * @param {function} callback   The callback method is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Range being traversed.\n   */\n  Range.prototype.forEach = function (callback) {\n    var x = this.start;\n    var step = this.step;\n    var end = this.end;\n    var i = 0;\n\n    if (step > 0) {\n      while (x < end) {\n        callback(x, [i], this);\n        x += step;\n        i++;\n      }\n    }\n    else if (step < 0) {\n      while (x > end) {\n        callback(x, [i], this);\n        x += step;\n        i++;\n      }\n    }\n  };\n\n  /**\n   * Execute a callback function for each value in the Range, and return the\n   * results as an array\n   * @memberof Range\n   * @param {function} callback   The callback method is invoked with three\n   *                              parameters: the value of the element, the index\n   *                              of the element, and the Matrix being traversed.\n   * @returns {Array} array\n   */\n  Range.prototype.map = function (callback) {\n    var array = [];\n    this.forEach(function (value, index, obj) {\n      array[index[0]] = callback(value, index, obj);\n    });\n    return array;\n  };\n\n  /**\n   * Create an Array with a copy of the Ranges data\n   * @memberof Range\n   * @returns {Array} array\n   */\n  Range.prototype.toArray = function () {\n    var array = [];\n    this.forEach(function (value, index) {\n      array[index[0]] = value;\n    });\n    return array;\n  };\n\n  /**\n   * Get the primitive value of the Range, a one dimensional array\n   * @memberof Range\n   * @returns {Array} array\n   */\n  Range.prototype.valueOf = function () {\n    // TODO: implement a caching mechanism for range.valueOf()\n    return this.toArray();\n  };\n\n  /**\n   * Get a string representation of the range, with optional formatting options.\n   * Output is formatted as 'start:step:end', for example '2:6' or '0:0.2:11'\n   * @memberof Range\n   * @param {Object | number | function} [options]  Formatting options. See\n   *                                                lib/utils/number:format for a\n   *                                                description of the available\n   *                                                options.\n   * @returns {string} str\n   */\n  Range.prototype.format = function (options) {\n    var str = number.format(this.start, options);\n\n    if (this.step != 1) {\n      str += ':' + number.format(this.step, options);\n    }\n    str += ':' + number.format(this.end, options);\n    return str;\n  };\n\n  /**\n   * Get a string representation of the range.\n   * @memberof Range\n   * @returns {string}\n   */\n  Range.prototype.toString = function () {\n    return this.format();\n  };\n\n  /**\n   * Get a JSON representation of the range\n   * @memberof Range\n   * @returns {Object} Returns a JSON object structured as:\n   *                   `{\"mathjs\": \"Range\", \"start\": 2, \"end\": 4, \"step\": 1}`\n   */\n  Range.prototype.toJSON = function () {\n    return {\n      mathjs: 'Range',\n      start: this.start,\n      end: this.end,\n      step: this.step\n    };\n  };\n\n  /**\n   * Instantiate a Range from a JSON object\n   * @memberof Range\n   * @param {Object} json A JSON object structured as:\n   *                      `{\"mathjs\": \"Range\", \"start\": 2, \"end\": 4, \"step\": 1}`\n   * @return {Range}\n   */\n  Range.fromJSON = function (json) {\n    return new Range(json.start, json.end, json.step);\n  };\n\n  return Range;\n}\n\nexports.name = 'Range';\nexports.path = 'type';\nexports.factory = factory;\n","import {\n  select,\n  selectAll,\n  namespaces\n} from \"d3-selection\";\nimport { line } from \"d3-shape\"\nimport cmb from \"js-combinatorics\"\nimport { define, h, prop } from 'skatejs';\nimport * as skate from 'skatejs';\nimport {nearbyEdgePoints} from \"./nearbyRectEdges.js\"\nimport {drawEdge, cacheBoundingRect} from './drawGraph.js'\nimport core from 'mathjs/core'\nimport matrices from 'mathjs/lib/type/matrix'\nimport {parentGraphContainer} from './graph-container.js'\n\nvar math = core.create();\nmath.import(matrices)\n\nexport const css=`\ncanvas {\n  // width: 100%;\n  // height: 100%;\n  padding: 0; margin: 0;\n  left:0; top:0;\n  position: fixed;\n  overflow: hidden;\n  z-index: -1;\n}\n\n`\nconst detached = Symbol();\nconst lastRenderTime = Symbol();\nconst animate = function(elem,now){\n  if (!elem[lastRenderTime]) { elem[lastRenderTime] = now }\n  if  (elem[lastRenderTime] + 1000/elem.fps <= now)\n      {\n        elem[lastRenderTime] = now;\n        elem.dispatchEvent(new Event('animate'));\n      }\n  if (elem[detached]) {return}\n  else {window.requestAnimationFrame( (now) => {animate(elem,now)} )};\n}\n\nexport const canvas = Symbol();\nconst canvasContext = Symbol();\nexport const edgeData = Symbol();\nexport const edgeModifier = Symbol();\nexport const getNodes = Symbol();\nexport const animateCallback = Symbol();\nexport const refreshEdges = Symbol();\nexport const rectCache = Symbol();\n\nwindow.edgeData = edgeData;\nwindow.canvas = canvas;\n\nconst graphAllEdges = {\n  props: {\n    fps: { attribute: true, default: 60 },\n    color: { attribute: true, default: \"yellow\" },\n    thickness: { attribute: true, default: 2 }\n  },\n  refreshAnimation(elem){\n    var nodes = elem[getNodes]();\n    nodes.forEach(cacheBoundingRect);\n    var ctx = elem[canvasContext]\n    if(ctx == undefined){return;}\n    ctx.canvas.width  = window.innerWidth;\n    ctx.canvas.height = window.innerHeight;\n    ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height)\n    ctx.strokeStyle = elem.color;\n    ctx.fillStyle = elem.color;\n    ctx.lineWidth = elem.thickness;\n\n    elem[edgeData].forEach((edge) => drawEdge(ctx,edge,elem));\n  },\n\n  edges(elem){\n    var nodes = elem[getNodes]();\n    // console.log(\"number of nodes\", nodes.length)\n    if (nodes.length < 2) { return []; }\n    // var combo = cmb.combination(nodes,2).toArray()\n    // console.log(combo.map((c)=> {return {source: c[0], target: c[1], direction: 0}}))\n    var combos = []\n    nodes.forEach((n)=>{\n      nodes.forEach((m)=>{\n        if(n==m){ return; }\n        combos.push({source: n, target: m, direction: 1})\n      })\n    })\n    // console.log(\"number of 2x combinations\", combos.length)\n\n    return combos\n  },\n\n  attached(elem) {\n    elem[animateCallback] = ()=>{this.refreshAnimation(elem)}\n    elem[edgeModifier] = (edges) => edges;\n    animate(elem);\n    elem[getNodes] = () => selectAll(parentGraphContainer(elem).children)\n         .filter((d,i,nodes)=>{return !nodes[i][edgeData];}).nodes()\n    elem[edgeData] = [];\n    // console.log(this)\n    elem[canvas] = document.createElement(\"canvas\")\n    elem[canvasContext] = elem[canvas].getContext(\"2d\");\n\n    elem[refreshEdges] = (e) => {\n      // console.log(\"REFRESHING EDGES\")\n      elem[edgeData] = elem[edgeModifier](this.edges(elem));\n      // console.log(elem[edgeData])\n    }\n    parentGraphContainer(elem).addEventListener('graph-updated', elem[refreshEdges])\n  },\n\n  detached(elem) {\n    // console.log(\"detached\",elem)\n    elem[detached] = true;\n    elem.removeEventListener('animate',elem[animateCallback])\n  },\n\n  attributeChanged(elem) {\n  },\n\n  render(elem) {\n    return [\n      h('div',{style: \"display: none\"}, h('slot', {\n      })),\n\n      h(\"style\",css )\n    ]\n  },\n\n  rendered(elem){\n    elem.shadowRoot.appendChild(elem[canvas])\n    // console.log(\"rendered\")\n    elem[refreshEdges]();\n    elem.addEventListener('animate',elem[animateCallback])\n  }\n};\n\nexport const EdgesAllPairs = define('edges-all-pairs',graphAllEdges);\n","'use strict';\n\nfunction factory (type, config, load, typed) {\n  /**\n   * Create an index. An Index can store ranges having start, step, and end\n   * for multiple dimensions.\n   * Matrix.get, Matrix.set, and math.subset accept an Index as input.\n   *\n   * Syntax:\n   *\n   *     math.index(range1, range2, ...)\n   *\n   * Where each range can be any of:\n   *\n   * - A number\n   * - A string for getting/setting an object property\n   * - An instance of `Range`\n   * - A one-dimensional Array or a Matrix with numbers\n   *\n   * Indexes must be zero-based, integer numbers.\n   *\n   * Examples:\n   *\n   *    var math = math.js\n   *\n   *    var b = [1, 2, 3, 4, 5];\n   *    math.subset(b, math.index([1, 2, 3]));     // returns [2, 3, 4]\n   *\n   *    var a = math.matrix([[1, 2], [3, 4]]);\n   *    a.subset(math.index(0, 1));             // returns 2\n   *\n   * See also:\n   *\n   *    bignumber, boolean, complex, matrix, number, string, unit\n   *\n   * @param {...*} ranges   Zero or more ranges or numbers.\n   * @return {Index}        Returns the created index\n   */\n  return typed('index', {\n    '...number | string | BigNumber | Range | Array | Matrix': function (args) {\n      var ranges = args.map(function (arg) {\n        if (arg && arg.isBigNumber === true) {\n          return arg.toNumber(); // convert BigNumber to Number\n        }\n        else if (arg && (Array.isArray(arg) || arg.isMatrix === true)) {\n          return arg.map(function (elem) {\n            // convert BigNumber to Number\n            return (elem && elem.isBigNumber === true) ? elem.toNumber() : elem;\n          });\n        }\n        else {\n          return arg;\n        }\n      });\n\n      var res = new type.Index();\n      type.Index.apply(res, ranges);\n      return res;\n    }\n  });\n}\n\nexports.name = 'index';\nexports.factory = factory;\n","'use strict';\n\nfunction factory (type, config, load, typed) {\n\n  var SparseMatrix = type.SparseMatrix;\n\n  /**\n   * Create a Sparse Matrix. The function creates a new `math.type.Matrix` object from\n   * an `Array`. A Matrix has utility functions to manipulate the data in the\n   * matrix, like getting the size and getting or setting values in the matrix.\n   *\n   * Syntax:\n   *\n   *    math.sparse()               // creates an empty sparse matrix.\n   *    math.sparse(data)           // creates a sparse matrix with initial data.\n   *    math.sparse(data, 'number') // creates a sparse matrix with initial data, number datatype.\n   *\n   * Examples:\n   *\n   *    var m = math.sparse([[1, 2], [3, 4]]);\n   *    m.size();                        // Array [2, 2]\n   *    m.resize([3, 2], 5);\n   *    m.valueOf();                     // Array [[1, 2], [3, 4], [5, 5]]\n   *    m.get([1, 0])                    // number 3\n   *\n   * See also:\n   *\n   *    bignumber, boolean, complex, index, number, string, unit, matrix\n   *\n   * @param {Array | Matrix} [data]    A two dimensional array\n   *\n   * @return {Matrix} The created matrix\n   */\n  var sparse = typed('sparse', {\n    '': function () {\n      return new SparseMatrix([]);\n    },\n    \n    'string': function (datatype) {\n      return new SparseMatrix([], datatype);\n    },\n\n    'Array | Matrix': function (data) {\n      return new SparseMatrix(data);\n    },\n    \n    'Array | Matrix, string': function (data, datatype) {\n      return new SparseMatrix(data, datatype);\n    }\n  });\n\n  sparse.toTex = {\n    0: '\\\\begin{bsparse}\\\\end{bsparse}',\n    1: '\\\\left(${args[0]}\\\\right)'\n  };\n\n  return sparse;\n}\n\nexports.name = 'sparse';\nexports.factory = factory;\n","module.exports = [\n  // types\n  require('./Matrix'),\n  require('./DenseMatrix'),\n  require('./SparseMatrix'),\n  require('./Spa'),\n  require('./FibonacciHeap'),\n  require('./ImmutableDenseMatrix'),\n  require('./MatrixIndex'),\n  require('./Range'),\n\n  // construction functions\n  require('./function/index'),\n  require('./function/matrix'),\n  require('./function/sparse')\n];\n","import {EdgesAllPairs, refreshEdges, getNodes, css} from './edges-all-pairs'\nimport {define, h} from 'skatejs'\nimport {select, selectAll} from 'd3-selection'\nimport core from 'mathjs/core'\nimport matrices from 'mathjs/lib/type/matrix'\nimport {parentGraphContainer} from './graph-container.js'\n\nvar math = core.create();\nmath.import(matrices)\n\ndefine('edges-adjacency-matrix', EdgesAllPairs.extend({\n  edges(elem){\n    // console.log(elem)\n    try{ var adj = JSON.parse(elem.innerHTML) }catch(e){ }\n    var nodes = elem[getNodes]()\n    if (nodes.length < 2) { return []; }\n    var edges = [[nodes[0],nodes[1]]]\n    edges = []\n    adj.forEach((row,i)=>{\n      row.forEach((edge,j)=>{\n        if(edge == 1){\n          edges.push({source: nodes[i], target: nodes[j], direction: 1})\n        }\n      })\n    })\n    // combos = combos.map((c)=> {return {source: c[0], target: c[1], direction: 1}})\n    // console.log(edges)\n    return edges\n  },\n  render(elem) {\n    return [\n      h('div',{style: \"display: none\"}, h('slot', {\n        onSlotchange: elem[refreshEdges]\n      })),\n      h(\"style\",css )\n    ]\n  },\n}))\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar Kn = 18,\n    Xn = 0.950470, // D65 standard referent\n    Yn = 1,\n    Zn = 1.088830,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) {\n    var h = o.h * deg2rad;\n    return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n  }\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var b = rgb2xyz(o.r),\n      a = rgb2xyz(o.g),\n      l = rgb2xyz(o.b),\n      x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),\n      y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),\n      z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    y = Yn * lab2xyz(y);\n    x = Xn * lab2xyz(x);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      xyz2rgb( 3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB\n      xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),\n      xyz2rgb( 0.0556434 * x - 0.2040259 * y + 1.0572252 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction xyz2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2xyz(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + Kn * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - Kn * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return labConvert(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x, p) {\n  x = x.toPrecision(p);\n\n  out: for (var n = x.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (x[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      case \"e\": break out;\n      default: if (i0 > 0) i0 = 0; break;\n    }\n  }\n\n  return i0 > 0 ? x.slice(0, i0) + x.slice(i1 + 1) : x;\n}\n","import interval from \"./interval\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import { define, h } from 'skatejs';\nimport {startDragging, stopDragging, draggableHostStyle} from './draggable.js';\n\nvar puppyStyle = `\n  ._puppy-dog_inner {\n    display: inline-block;\n    background-image: url(http://i.imgur.com/B2YwP9u.gif);\n    background-position: center;\n    background-size: 100%;\n    margin: 0;\n    padding: 0;\n    width: 100px;\n    height: 150px;\n    border: solid deeppink 5px;\n  }\n  puppy-dog {\n    display: inline-block;\n    // position: relative;\n    background-size: 100%;\n    margin: 0;\n    padding: 0;\n  }\n  :host {\n    display: inline-block;\n    // position: relative;\n    background-size: 100%;\n    margin: 0;\n    padding: 0;\n  }\n`\ndefine(\"puppy-dog\",{\n    attached(elem){\n      startDragging(elem);\n    },\n    detached(elem){\n      // stopDragging(elem);\n    },\n    render(elem){\n      return [h(\"div\",{ class: '_puppy-dog_inner' }),h(\"style\",puppyStyle)]\n    },\n    rendered(elem){\n    }\n})\n"]}